import{j as e}from"./framer-BMT5hQ7X.js";import{r as d,u as h}from"./router-DOtJe_Np.js";import{s as b}from"./index-MWy1PPV7.js";import u from"./Community-ADSnoV8O.js";import{s as y}from"./lucide-DBAHIzol.js";import"./vendor-b0vXyz-r.js";import"./supabase-CtFrdYha.js";import"./Toast-CYAYaQvg.js";import"./utils-Ctx6mZEP.js";const v=()=>{const[c,o]=d.useState([]),[p,n]=d.useState(!0);return d.useEffect(()=>{(async()=>{n(!0);try{const{data:r}=await b.from("spots").select("created_by"),{data:g}=await b.from("reviews").select("user_id"),i={};r?.forEach(t=>{const a=t.created_by;a&&(i[a]||(i[a]={spots:0,reviews:0,xp:0}),i[a].spots+=1,i[a].xp+=100)}),g?.forEach(t=>{const a=t.user_id;a&&(i[a]||(i[a]={spots:0,reviews:0,xp:0}),i[a].reviews+=1,i[a].xp+=10)});const x=Object.keys(i),{data:f}=await b.from("user_preferences").select("user_id, username, display_name, avatar_url").in("user_id",x),l={};f?.forEach(t=>l[t.user_id]=t);const m=Object.keys(i).map(t=>({id:t,name:l[t]?.display_name||l[t]?.username||"Foodie",avatar:l[t]?.avatar_url,...i[t]})).sort((t,a)=>a.xp-t.xp).slice(0,10);o(m)}catch(r){console.error("Error fetching leaderboard:",r)}finally{n(!1)}})()},[]),e.jsxs("div",{style:{minHeight:"calc(100vh - 60px)",background:"linear-gradient(135deg, #fef3c7 0%, #fbbf24 50%, #f59e0b 100%)",paddingBottom:"80px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px",padding:"20px",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #f59e0b, #d97706)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 4px 20px rgba(245, 158, 11, 0.3)"},children:e.jsx(y,{size:30,color:"white"})}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"800",color:"#1f2937",marginBottom:"8px"},children:"Leaderboard"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"1rem",margin:0},children:"Top contributors in our food community"})]}),e.jsx("div",{style:{padding:"0 20px"},children:p?e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(245, 158, 11, 0.3)",borderTop:"4px solid #f59e0b",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})}):c.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",background:"rgba(255,255,255,0.1)",borderRadius:"16px",backdropFilter:"blur(10px)"},children:e.jsx("p",{style:{color:"#6b7280",fontSize:"1rem"},children:"No contributors yet. Start contributing!"})}):c.map((s,r)=>e.jsx("div",{style:{background:r===0?"linear-gradient(135deg, rgba(254, 243, 199, 0.8), rgba(251, 191, 36, 0.8))":r===1?"linear-gradient(135deg, rgba(229, 231, 235, 0.8), rgba(209, 213, 219, 0.8))":"rgba(255,255,255,0.1)",borderRadius:"16px",padding:"20px",marginBottom:"16px",backdropFilter:"blur(10px)",border:r===0?"2px solid #f59e0b":"1px solid rgba(255,255,255,0.2)",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:r===0?"linear-gradient(135deg, #f59e0b, #d97706)":r===1?"linear-gradient(135deg, #6b7280, #4b5563)":"linear-gradient(135deg, #9ca3af, #6b7280)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1.2rem",marginRight:"16px"},children:r+1}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{fontWeight:"700",color:"#1f2937",marginBottom:"4px"},children:s.name}),e.jsxs("p",{style:{color:"#6b7280",fontSize:"0.9rem",margin:0},children:[s.xp," XP â€¢ ",s.spots," spots â€¢ ",s.reviews," reviews"]})]}),e.jsx("div",{style:{background:r===0?"#f59e0b":r===1?"#6b7280":"#9ca3af",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"600"},children:r===0?"ðŸ† Champion":r===1?"ðŸ¥ˆ Rising Star":r===2?"ðŸ¥‰ Contender":"â­ Contributor"})]})},s.id))}),e.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `})]})},T=({lang:c})=>{const[o,p]=d.useState("club");return h(),d.useEffect(()=>{const n=s=>{p(s.detail.tabId)};return window.addEventListener("clubLeaderboardTabChange",n),()=>{window.removeEventListener("clubLeaderboardTabChange",n)}},[]),e.jsx("div",{style:{minHeight:"100vh",background:o==="club"?"#f8f9fa":"linear-gradient(135deg, #fef3c7 0%, #fbbf24 50%, #f59e0b 100%)",padding:"20px"},children:e.jsxs("div",{style:{minHeight:"calc(100vh - 60px)",paddingBottom:"20px",background:"transparent"},children:[o==="club"&&e.jsx(u,{}),o==="leaderboard"&&e.jsx(v,{})]})})};export{T as default};
