function $2(n,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in n)){const d=Object.getOwnPropertyDescriptor(a,l);d&&Object.defineProperty(n,l,d.get?d:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();function Jd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function vu(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var r=function a(){var l=!1;try{l=this instanceof a}catch{}return l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(a){var l=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:function(){return n[a]}})}),r}var fp={exports:{}},$l={};var Uv;function Z2(){if(Uv)return $l;Uv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,l,d){var h=null;if(d!==void 0&&(h=""+d),l.key!==void 0&&(h=""+l.key),"key"in l){d={};for(var g in l)g!=="key"&&(d[g]=l[g])}else d=l;return l=d.ref,{$$typeof:n,type:a,key:h,ref:l!==void 0?l:null,props:d}}return $l.Fragment=t,$l.jsx=r,$l.jsxs=r,$l}var Iv;function G2(){return Iv||(Iv=1,fp.exports=Z2()),fp.exports}var f=G2(),pp={exports:{}},Be={};var Vv;function K2(){if(Vv)return Be;Vv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function j(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,A={};function z(N,ne,me){this.props=N,this.context=ne,this.refs=A,this.updater=me||k}z.prototype.isReactComponent={},z.prototype.setState=function(N,ne){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ne,"setState")},z.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function D(){}D.prototype=z.prototype;function P(N,ne,me){this.props=N,this.context=ne,this.refs=A,this.updater=me||k}var Z=P.prototype=new D;Z.constructor=P,C(Z,z.prototype),Z.isPureReactComponent=!0;var $=Array.isArray;function V(){}var K={H:null,A:null,T:null,S:null},oe=Object.prototype.hasOwnProperty;function ye(N,ne,me){var G=me.ref;return{$$typeof:n,type:N,key:ne,ref:G!==void 0?G:null,props:me}}function fe(N,ne){return ye(N.type,ne,N.props)}function te(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function W(N){var ne={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(me){return ne[me]})}var xe=/\/+/g;function Le(N,ne){return typeof N=="object"&&N!==null&&N.key!=null?W(""+N.key):ne.toString(36)}function he(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(V,V):(N.status="pending",N.then(function(ne){N.status==="pending"&&(N.status="fulfilled",N.value=ne)},function(ne){N.status==="pending"&&(N.status="rejected",N.reason=ne)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function H(N,ne,me,G,de){var pe=typeof N;(pe==="undefined"||pe==="boolean")&&(N=null);var ke=!1;if(N===null)ke=!0;else switch(pe){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(N.$$typeof){case n:case t:ke=!0;break;case b:return ke=N._init,H(ke(N._payload),ne,me,G,de)}}if(ke)return de=de(N),ke=G===""?"."+Le(N,0):G,$(de)?(me="",ke!=null&&(me=ke.replace(xe,"$&/")+"/"),H(de,ne,me,"",function(lt){return lt})):de!=null&&(te(de)&&(de=fe(de,me+(de.key==null||N&&N.key===de.key?"":(""+de.key).replace(xe,"$&/")+"/")+ke)),ne.push(de)),1;ke=0;var Ge=G===""?".":G+":";if($(N))for(var Ke=0;Ke<N.length;Ke++)G=N[Ke],pe=Ge+Le(G,Ke),ke+=H(G,ne,me,pe,de);else if(Ke=j(N),typeof Ke=="function")for(N=Ke.call(N),Ke=0;!(G=N.next()).done;)G=G.value,pe=Ge+Le(G,Ke++),ke+=H(G,ne,me,pe,de);else if(pe==="object"){if(typeof N.then=="function")return H(he(N),ne,me,G,de);throw ne=String(N),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ke}function re(N,ne,me){if(N==null)return N;var G=[],de=0;return H(N,G,"","",function(pe){return ne.call(me,pe,de++)}),G}function ie(N){if(N._status===-1){var ne=N._result;ne=ne(),ne.then(function(me){(N._status===0||N._status===-1)&&(N._status=1,N._result=me)},function(me){(N._status===0||N._status===-1)&&(N._status=2,N._result=me)}),N._status===-1&&(N._status=0,N._result=ne)}if(N._status===1)return N._result.default;throw N._result}var Se=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ge={map:re,forEach:function(N,ne,me){re(N,function(){ne.apply(this,arguments)},me)},count:function(N){var ne=0;return re(N,function(){ne++}),ne},toArray:function(N){return re(N,function(ne){return ne})||[]},only:function(N){if(!te(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Be.Activity=w,Be.Children=ge,Be.Component=z,Be.Fragment=r,Be.Profiler=l,Be.PureComponent=P,Be.StrictMode=a,Be.Suspense=y,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Be.__COMPILER_RUNTIME={__proto__:null,c:function(N){return K.H.useMemoCache(N)}},Be.cache=function(N){return function(){return N.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(N,ne,me){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var G=C({},N.props),de=N.key;if(ne!=null)for(pe in ne.key!==void 0&&(de=""+ne.key),ne)!oe.call(ne,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&ne.ref===void 0||(G[pe]=ne[pe]);var pe=arguments.length-2;if(pe===1)G.children=me;else if(1<pe){for(var ke=Array(pe),Ge=0;Ge<pe;Ge++)ke[Ge]=arguments[Ge+2];G.children=ke}return ye(N.type,de,G)},Be.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:d,_context:N},N},Be.createElement=function(N,ne,me){var G,de={},pe=null;if(ne!=null)for(G in ne.key!==void 0&&(pe=""+ne.key),ne)oe.call(ne,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(de[G]=ne[G]);var ke=arguments.length-2;if(ke===1)de.children=me;else if(1<ke){for(var Ge=Array(ke),Ke=0;Ke<ke;Ke++)Ge[Ke]=arguments[Ke+2];de.children=Ge}if(N&&N.defaultProps)for(G in ke=N.defaultProps,ke)de[G]===void 0&&(de[G]=ke[G]);return ye(N,pe,de)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(N){return{$$typeof:g,render:N}},Be.isValidElement=te,Be.lazy=function(N){return{$$typeof:b,_payload:{_status:-1,_result:N},_init:ie}},Be.memo=function(N,ne){return{$$typeof:_,type:N,compare:ne===void 0?null:ne}},Be.startTransition=function(N){var ne=K.T,me={};K.T=me;try{var G=N(),de=K.S;de!==null&&de(me,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(V,Se)}catch(pe){Se(pe)}finally{ne!==null&&me.types!==null&&(ne.types=me.types),K.T=ne}},Be.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Be.use=function(N){return K.H.use(N)},Be.useActionState=function(N,ne,me){return K.H.useActionState(N,ne,me)},Be.useCallback=function(N,ne){return K.H.useCallback(N,ne)},Be.useContext=function(N){return K.H.useContext(N)},Be.useDebugValue=function(){},Be.useDeferredValue=function(N,ne){return K.H.useDeferredValue(N,ne)},Be.useEffect=function(N,ne){return K.H.useEffect(N,ne)},Be.useEffectEvent=function(N){return K.H.useEffectEvent(N)},Be.useId=function(){return K.H.useId()},Be.useImperativeHandle=function(N,ne,me){return K.H.useImperativeHandle(N,ne,me)},Be.useInsertionEffect=function(N,ne){return K.H.useInsertionEffect(N,ne)},Be.useLayoutEffect=function(N,ne){return K.H.useLayoutEffect(N,ne)},Be.useMemo=function(N,ne){return K.H.useMemo(N,ne)},Be.useOptimistic=function(N,ne){return K.H.useOptimistic(N,ne)},Be.useReducer=function(N,ne,me){return K.H.useReducer(N,ne,me)},Be.useRef=function(N){return K.H.useRef(N)},Be.useState=function(N){return K.H.useState(N)},Be.useSyncExternalStore=function(N,ne,me){return K.H.useSyncExternalStore(N,ne,me)},Be.useTransition=function(){return K.H.useTransition()},Be.version="19.2.1",Be}var Hv;function Nm(){return Hv||(Hv=1,pp.exports=K2()),pp.exports}var R=Nm();const ls=Jd(R);var mp={exports:{}},Zl={},gp={exports:{}},yp={};var qv;function Y2(){return qv||(qv=1,(function(n){function t(H,re){var ie=H.length;H.push(re);e:for(;0<ie;){var Se=ie-1>>>1,ge=H[Se];if(0<l(ge,re))H[Se]=re,H[ie]=ge,ie=Se;else break e}}function r(H){return H.length===0?null:H[0]}function a(H){if(H.length===0)return null;var re=H[0],ie=H.pop();if(ie!==re){H[0]=ie;e:for(var Se=0,ge=H.length,N=ge>>>1;Se<N;){var ne=2*(Se+1)-1,me=H[ne],G=ne+1,de=H[G];if(0>l(me,ie))G<ge&&0>l(de,me)?(H[Se]=de,H[G]=ie,Se=G):(H[Se]=me,H[ne]=ie,Se=ne);else if(G<ge&&0>l(de,ie))H[Se]=de,H[G]=ie,Se=G;else break e}}return re}function l(H,re){var ie=H.sortIndex-re.sortIndex;return ie!==0?ie:H.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var h=Date,g=h.now();n.unstable_now=function(){return h.now()-g}}var y=[],_=[],b=1,w=null,S=3,j=!1,k=!1,C=!1,A=!1,z=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function Z(H){for(var re=r(_);re!==null;){if(re.callback===null)a(_);else if(re.startTime<=H)a(_),re.sortIndex=re.expirationTime,t(y,re);else break;re=r(_)}}function $(H){if(C=!1,Z(H),!k)if(r(y)!==null)k=!0,V||(V=!0,W());else{var re=r(_);re!==null&&he($,re.startTime-H)}}var V=!1,K=-1,oe=5,ye=-1;function fe(){return A?!0:!(n.unstable_now()-ye<oe)}function te(){if(A=!1,V){var H=n.unstable_now();ye=H;var re=!0;try{e:{k=!1,C&&(C=!1,D(K),K=-1),j=!0;var ie=S;try{t:{for(Z(H),w=r(y);w!==null&&!(w.expirationTime>H&&fe());){var Se=w.callback;if(typeof Se=="function"){w.callback=null,S=w.priorityLevel;var ge=Se(w.expirationTime<=H);if(H=n.unstable_now(),typeof ge=="function"){w.callback=ge,Z(H),re=!0;break t}w===r(y)&&a(y),Z(H)}else a(y);w=r(y)}if(w!==null)re=!0;else{var N=r(_);N!==null&&he($,N.startTime-H),re=!1}}break e}finally{w=null,S=ie,j=!1}re=void 0}}finally{re?W():V=!1}}}var W;if(typeof P=="function")W=function(){P(te)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Le=xe.port2;xe.port1.onmessage=te,W=function(){Le.postMessage(null)}}else W=function(){z(te,0)};function he(H,re){K=z(function(){H(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(H){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var ie=S;S=re;try{return H()}finally{S=ie}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=S;S=H;try{return re()}finally{S=ie}},n.unstable_scheduleCallback=function(H,re,ie){var Se=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Se+ie:Se):ie=Se,H){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ie+ge,H={id:b++,callback:re,priorityLevel:H,startTime:ie,expirationTime:ge,sortIndex:-1},ie>Se?(H.sortIndex=ie,t(_,H),r(y)===null&&H===r(_)&&(C?(D(K),K=-1):C=!0,he($,ie-Se))):(H.sortIndex=ge,t(y,H),k||j||(k=!0,V||(V=!0,W()))),H},n.unstable_shouldYield=fe,n.unstable_wrapCallback=function(H){var re=S;return function(){var ie=S;S=re;try{return H.apply(this,arguments)}finally{S=ie}}}})(yp)),yp}var Wv;function X2(){return Wv||(Wv=1,gp.exports=Y2()),gp.exports}var vp={exports:{}},an={};var Fv;function J2(){if(Fv)return an;Fv=1;var n=Nm();function t(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)_+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(y,_,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:y,containerInfo:_,implementation:b}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,an.createPortal=function(y,_){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return d(y,_,null,b)},an.flushSync=function(y){var _=h.T,b=a.p;try{if(h.T=null,a.p=2,y)return y()}finally{h.T=_,a.p=b,a.d.f()}},an.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(y,_))},an.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},an.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var b=_.as,w=g(b,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,j=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;b==="style"?a.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:j}):b==="script"&&a.d.X(y,{crossOrigin:w,integrity:S,fetchPriority:j,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},an.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var b=g(_.as,_.crossOrigin);a.d.M(y,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(y)},an.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var b=_.as,w=g(b,_.crossOrigin);a.d.L(y,b,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},an.preloadModule=function(y,_){if(typeof y=="string")if(_){var b=g(_.as,_.crossOrigin);a.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(y)},an.requestFormReset=function(y){a.d.r(y)},an.unstable_batchedUpdates=function(y,_){return y(_)},an.useFormState=function(y,_,b){return h.H.useFormState(y,_,b)},an.useFormStatus=function(){return h.H.useHostTransitionStatus()},an.version="19.2.1",an}var $v;function Jx(){if($v)return vp.exports;$v=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),vp.exports=J2(),vp.exports}var Zv;function Q2(){if(Zv)return Zl;Zv=1;var n=X2(),t=Nm(),r=Jx();function a(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(a(188))}function _(e){var i=e.alternate;if(!i){if(i=d(e),i===null)throw Error(a(188));return i!==e?null:e}for(var o=e,c=i;;){var m=o.return;if(m===null)break;var v=m.alternate;if(v===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===o)return y(m),e;if(v===c)return y(m),i;v=v.sibling}throw Error(a(188))}if(o.return!==c.return)o=m,c=v;else{for(var E=!1,M=m.child;M;){if(M===o){E=!0,o=m,c=v;break}if(M===c){E=!0,c=m,o=v;break}M=M.sibling}if(!E){for(M=v.child;M;){if(M===o){E=!0,o=v,c=m;break}if(M===c){E=!0,c=v,o=m;break}M=M.sibling}if(!E)throw Error(a(189))}}if(o.alternate!==c)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?e:i}function b(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=b(e),i!==null)return i;e=e.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),P=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),ye=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=te&&e[te]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Symbol.for("react.client.reference");function Le(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case z:return"Profiler";case A:return"StrictMode";case $:return"Suspense";case V:return"SuspenseList";case ye:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case P:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case Z:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return i=e.displayName||null,i!==null?i:Le(e.type)||"Memo";case oe:i=e._payload,e=e._init;try{return Le(e(i))}catch{}}return null}var he=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Se=[],ge=-1;function N(e){return{current:e}}function ne(e){0>ge||(e.current=Se[ge],Se[ge]=null,ge--)}function me(e,i){ge++,Se[ge]=e.current,e.current=i}var G=N(null),de=N(null),pe=N(null),ke=N(null);function Ge(e,i){switch(me(pe,i),me(de,e),me(G,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?lv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=lv(i),e=uv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ne(G),me(G,e)}function Ke(){ne(G),ne(de),ne(pe)}function lt(e){e.memoizedState!==null&&me(ke,e);var i=G.current,o=uv(i,e.type);i!==o&&(me(de,e),me(G,o))}function Gt(e){de.current===e&&(ne(G),ne(de)),ke.current===e&&(ne(ke),Hl._currentValue=ie)}var Ii,ba;function Vi(e){if(Ii===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ii=i&&i[1]||"",ba=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ii+e+ba}var wa=!1;function Sa(e,i){if(!e||wa)return"";wa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ee){var Q=ee}Reflect.construct(e,[],ce)}else{try{ce.call()}catch(ee){Q=ee}e.call(ce.prototype)}}else{try{throw Error()}catch(ee){Q=ee}(ce=e())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ee){if(ee&&Q&&typeof ee.stack=="string")return[ee.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),E=v[0],M=v[1];if(E&&M){var U=E.split(`
`),X=M.split(`
`);for(m=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(c===U.length||m===X.length)for(c=U.length-1,m=X.length-1;1<=c&&0<=m&&U[c]!==X[m];)m--;for(;1<=c&&0<=m;c--,m--)if(U[c]!==X[m]){if(c!==1||m!==1)do if(c--,m--,0>m||U[c]!==X[m]){var se=`
`+U[c].replace(" at new "," at ");return e.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",e.displayName)),se}while(1<=c&&0<=m);break}}}finally{wa=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Vi(o):""}function Io(e,i){switch(e.tag){case 26:case 27:case 5:return Vi(e.type);case 16:return Vi("Lazy");case 13:return e.child!==i&&i!==null?Vi("Suspense Fallback"):Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 15:return Sa(e.type,!1);case 11:return Sa(e.type.render,!1);case 1:return Sa(e.type,!0);case 31:return Vi("Activity");default:return""}}function ps(e){try{var i="",o=null;do i+=Io(e,o),o=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Vo=Object.prototype.hasOwnProperty,Ta=n.unstable_scheduleCallback,ms=n.unstable_cancelCallback,Lu=n.unstable_shouldYield,zu=n.unstable_requestPaint,un=n.unstable_now,ph=n.unstable_getCurrentPriorityLevel,Ea=n.unstable_ImmediatePriority,Ho=n.unstable_UserBlockingPriority,gs=n.unstable_NormalPriority,mh=n.unstable_LowPriority,qo=n.unstable_IdlePriority,Pu=n.log,gh=n.unstable_setDisableYieldValue,xr=null,Kt=null;function si(e){if(typeof Pu=="function"&&gh(e),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(xr,e)}catch{}}var cn=Math.clz32?Math.clz32:vh,ys=Math.log,yh=Math.LN2;function vh(e){return e>>>=0,e===0?32:31-(ys(e)/yh|0)|0}var vs=256,_s=262144,xs=4194304;function Hi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ja(e,i,o){var c=e.pendingLanes;if(c===0)return 0;var m=0,v=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var M=c&134217727;return M!==0?(c=M&~v,c!==0?m=Hi(c):(E&=M,E!==0?m=Hi(E):o||(o=M&~e,o!==0&&(m=Hi(o))))):(M=c&~v,M!==0?m=Hi(M):E!==0?m=Hi(E):o||(o=c&~e,o!==0&&(m=Hi(o)))),m===0?0:i!==0&&i!==m&&(i&v)===0&&(v=m&-m,o=i&-i,v>=o||v===32&&(o&4194048)!==0)?i:m}function bs(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function _h(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Du(){var e=xs;return xs<<=1,(xs&62914560)===0&&(xs=4194304),e}function Wo(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function qi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xh(e,i,o,c,m,v){var E=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var M=e.entanglements,U=e.expirationTimes,X=e.hiddenUpdates;for(o=E&~o;0<o;){var se=31-cn(o),ce=1<<se;M[se]=0,U[se]=-1;var Q=X[se];if(Q!==null)for(X[se]=null,se=0;se<Q.length;se++){var ee=Q[se];ee!==null&&(ee.lane&=-536870913)}o&=~ce}c!==0&&Bu(e,c,0),v!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=v&~(E&~i))}function Bu(e,i,o){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-cn(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|o&261930}function Nu(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var c=31-cn(o),m=1<<c;m&i|e[c]&i&&(e[c]|=i),o&=~m}}function Uu(e,i){var o=i&-i;return o=(o&42)!==0?1:mn(o),(o&(e.suspendedLanes|i))!==0?0:o}function mn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function je(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Fo(){var e=re.p;return e!==0?e:(e=window.event,e===void 0?32:Mv(e.type))}function $o(e,i){var o=re.p;try{return re.p=e,i()}finally{re.p=o}}var ai=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ai,Wt="__reactProps$"+ai,Wi="__reactContainer$"+ai,bi="__reactEvents$"+ai,Iu="__reactListeners$"+ai,bh="__reactHandles$"+ai,Vu="__reactResources$"+ai,ws="__reactMarker$"+ai;function Zo(e){delete e[Ot],delete e[Wt],delete e[bi],delete e[Iu],delete e[bh]}function Fi(e){var i=e[Ot];if(i)return i;for(var o=e.parentNode;o;){if(i=o[Wi]||o[Ot]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=gv(e);e!==null;){if(o=e[Ot])return o;e=gv(e)}return i}e=o,o=e.parentNode}return null}function br(e){if(e=e[Ot]||e[Wi]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function wi(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(a(33))}function wr(e){var i=e[Vu];return i||(i=e[Vu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Mt(e){e[ws]=!0}var Hu=new Set,qu={};function $i(e,i){Si(e,i),Si(e+"Capture",i)}function Si(e,i){for(qu[e]=i,e=0;e<i.length;e++)Hu.add(i[e])}var Ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Go={},Ko={};function Ts(e){return Vo.call(Ko,e)?!0:Vo.call(Go,e)?!1:Ss.test(e)?Ko[e]=!0:(Go[e]=!0,!1)}function Ve(e,i,o){if(Ts(i))if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+o)}}function rt(e,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+o)}}function gn(e,i,o,c){if(c===null)e.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(i,o,""+c)}}function It(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zi(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Yo(e,i,o){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,v=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return m.call(this)},set:function(E){o=""+E,v.call(this,E)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function De(e){if(!e._valueTracker){var i=Zi(e)?"checked":"value";e._valueTracker=Yo(e,i,""+e[i])}}function pt(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return e&&(c=Zi(e)?e.checked?"true":"false":e.value),e=c,e!==o?(i.setValue(e),!0):!1}function Sr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ca=/[\n"\\]/g;function ht(e){return e.replace(Ca,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Xo(e,i,o,c,m,v,E,M){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),i!=null?E==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+It(i)):e.value!==""+It(i)&&(e.value=""+It(i)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),i!=null?oi(e,E,It(i)):o!=null?oi(e,E,It(o)):c!=null&&e.removeAttribute("value"),m==null&&v!=null&&(e.defaultChecked=!!v),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.name=""+It(M):e.removeAttribute("name")}function Es(e,i,o,c,m,v,E,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.type=v),i!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||i!=null)){De(e);return}o=o!=null?""+It(o):"",i=i!=null?""+It(i):o,M||i===e.value||(e.value=i),e.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=M?e.checked:!!c,e.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E),De(e)}function oi(e,i,o){i==="number"&&Sr(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function ut(e,i,o,c){if(e=e.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<e.length;o++)m=i.hasOwnProperty("$"+e[o].value),e[o].selected!==m&&(e[o].selected=m),m&&c&&(e[o].defaultSelected=!0)}else{for(o=""+It(o),i=null,m=0;m<e.length;m++){if(e[m].value===o){e[m].selected=!0,c&&(e[m].defaultSelected=!0);return}i!==null||e[m].disabled||(i=e[m])}i!==null&&(i.selected=!0)}}function Ti(e,i,o){if(i!=null&&(i=""+It(i),i!==e.value&&(e.value=i),o==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=o!=null?""+It(o):""}function Tr(e,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(a(92));if(he(c)){if(1<c.length)throw Error(a(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=It(i),e.defaultValue=o,c=e.textContent,c===o&&c!==""&&c!==null&&(e.value=c),De(e)}function Vn(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Er(e,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,o):typeof o!="number"||o===0||Jo.has(i)?i==="float"?e.cssFloat=o:e[i]=(""+o).trim():e[i]=o+"px"}function Aa(e,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(e=e.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&o[m]!==c&&Er(e,m,c)}else for(var v in i)i.hasOwnProperty(v)&&Er(e,v,i[v])}function js(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ka=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jr(e){return Qo.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function yn(){}var Ra=null;function Cs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cr=null,ze=null;function Rn(e){var i=br(e);if(i&&(e=i.stateNode)){var o=e[Wt]||null;e:switch(e=i.stateNode,i.type){case"input":if(Xo(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ht(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==e&&c.form===e.form){var m=c[Wt]||null;if(!m)throw Error(a(90));Xo(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===e.form&&pt(c)}break e;case"textarea":Ti(e,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ut(e,!!o.multiple,i,!1)}}}var tt=!1;function el(e,i,o){if(tt)return e(i,o);tt=!0;try{var c=e(i);return c}finally{if(tt=!1,(Cr!==null||ze!==null)&&(Uc(),Cr&&(i=Cr,e=ze,ze=Cr=null,Rn(i),e)))for(i=0;i<e.length;i++)Rn(e[i])}}function Gi(e,i){var o=e.stateNode;if(o===null)return null;var c=o[Wt]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),As=!1;if(On)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){As=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{As=!1}var Hn=null,Ki=null,St=null;function Ei(){if(St)return St;var e,i=Ki,o=i.length,c,m="value"in Hn?Hn.value:Hn.textContent,v=m.length;for(e=0;e<o&&i[e]===m[e];e++);var E=o-e;for(c=1;c<=E&&i[o-c]===m[v-c];c++);return St=m.slice(e,1<c?1-c:void 0)}function ks(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Rs(){return!0}function Wu(){return!1}function Yt(e){function i(o,c,m,v,E){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var M in e)e.hasOwnProperty(M)&&(o=e[M],this[M]=o?o(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Rs:Wu,this.isPropagationStopped=Wu,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),i}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oa=Yt(li),Ar=w({},li,{view:0,detail:0}),Fe=Yt(Ar),tl,dn,ui,Os=w({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ui&&(ui&&e.type==="mousemove"?(tl=e.screenX-ui.screenX,dn=e.screenY-ui.screenY):dn=tl=0,ui=e),tl)},movementY:function(e){return"movementY"in e?e.movementY:dn}}),Fu=Yt(Os),nl=w({},Os,{dataTransfer:0}),wh=Yt(nl),$u=w({},Ar,{relatedTarget:0}),il=Yt($u),Sh=w({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),rl=Yt(Sh),Th=w({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qn=Yt(Th),Eh=w({},li,{data:0}),sl=Yt(Eh),ji={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Gu[e])?!!i[e]:!1}function ol(){return al}var Ku=w({},Ar,{key:function(e){if(e.key){var i=ji[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ks(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(e){return e.type==="keypress"?ks(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ks(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yu=Yt(Ku),jh=w({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xu=Yt(jh),ll=w({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),Ch=Yt(ll),Ju=w({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qu=Yt(Ju),Ma=w({},Os,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yi=Yt(Ma),Ah=w({},li,{newState:0,oldState:0}),Ms=Yt(Ah),vn=[9,13,27,32],La=On&&"CompositionEvent"in window,kr=null;On&&"documentMode"in document&&(kr=document.documentMode);var kh=On&&"TextEvent"in window&&!kr,za=On&&(!La||kr&&8<kr&&11>=kr),Pa=" ",ec=!1;function tc(e,i){switch(e){case"keyup":return vn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ul(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rr=!1;function Ln(e,i){switch(e){case"compositionend":return ul(i);case"keypress":return i.which!==32?null:(ec=!0,Pa);case"textInput":return e=i.data,e===Pa&&ec?null:e;default:return null}}function Or(e,i){if(Rr)return e==="compositionend"||!La&&tc(e,i)?(e=Ei(),St=Ki=Hn=null,Rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return za&&i.locale!=="ko"?null:i.data;default:return null}}var Rh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Rh[e.type]:i==="textarea"}function nc(e,i,o,c){Cr?ze?ze.push(c):ze=[c]:Cr=c,i=$c(i,"onChange"),0<i.length&&(o=new Oa("onChange","change",null,o,c),e.push({event:o,listeners:i}))}var Fn=null,Ls=null;function zs(e){nv(e,0)}function Ps(e){var i=wi(e);if(pt(i))return e}function Ds(e,i){if(e==="change")return i}var ic=!1;if(On){var $n;if(On){var Mr="oninput"in document;if(!Mr){var rc=document.createElement("div");rc.setAttribute("oninput","return;"),Mr=typeof rc.oninput=="function"}$n=Mr}else $n=!1;ic=$n&&(!document.documentMode||9<document.documentMode)}function Da(){Fn&&(Fn.detachEvent("onpropertychange",sc),Ls=Fn=null)}function sc(e){if(e.propertyName==="value"&&Ps(Ls)){var i=[];nc(i,Ls,e,Cs(e)),el(zs,i)}}function ci(e,i,o){e==="focusin"?(Da(),Fn=i,Ls=o,Fn.attachEvent("onpropertychange",sc)):e==="focusout"&&Da()}function Oh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ps(Ls)}function Lr(e,i){if(e==="click")return Ps(i)}function Mh(e,i){if(e==="input"||e==="change")return Ps(i)}function di(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Ft=typeof Object.is=="function"?Object.is:di;function zr(e,i){if(Ft(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!Vo.call(i,m)||!Ft(e[m],i[m]))return!1}return!0}function Ba(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bs(e,i){var o=Ba(e);e=0;for(var c;o;){if(o.nodeType===3){if(c=e+o.textContent.length,e<=i&&c>=i)return{node:o,offset:i-e};e=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ba(o)}}function Na(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Na(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Ns(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Sr(e.document);i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=Sr(e.document)}return i}function Ci(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Ua=On&&"documentMode"in document&&11>=document.documentMode,Ai=null,Ia=null,Us=null,Pr=!1;function ac(e,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pr||Ai==null||Ai!==Sr(c)||(c=Ai,"selectionStart"in c&&Ci(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Us&&zr(Us,c)||(Us=c,c=$c(Ia,"onSelect"),0<c.length&&(i=new Oa("onSelect","select",null,i,o),e.push({event:i,listeners:c}),i.target=Ai)))}function ki(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var Dr={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},Va={},oc={};On&&(oc=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function $t(e){if(Va[e])return Va[e];if(!Dr[e])return e;var i=Dr[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in oc)return Va[e]=i[o];return e}var Is=$t("animationend"),lc=$t("animationiteration"),Vs=$t("animationstart"),Lh=$t("transitionrun"),uc=$t("transitionstart"),zh=$t("transitioncancel"),Br=$t("transitionend"),cc=new Map,Ri="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ri.push("scrollEnd");function _n(e,i){cc.set(e,i),$i(i,[e])}var Hs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},xn=[],rn=0,Ha=0;function qs(){for(var e=rn,i=Ha=rn=0;i<e;){var o=xn[i];xn[i++]=null;var c=xn[i];xn[i++]=null;var m=xn[i];xn[i++]=null;var v=xn[i];if(xn[i++]=null,c!==null&&m!==null){var E=c.pending;E===null?m.next=m:(m.next=E.next,E.next=m),c.pending=m}v!==0&&Nr(o,m,v)}}function Oi(e,i,o,c){xn[rn++]=e,xn[rn++]=i,xn[rn++]=o,xn[rn++]=c,Ha|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function cl(e,i,o,c){return Oi(e,i,o,c),Ws(e)}function Zn(e,i){return Oi(e,null,null,i),Ws(e)}function Nr(e,i,o){e.lanes|=o;var c=e.alternate;c!==null&&(c.lanes|=o);for(var m=!1,v=e.return;v!==null;)v.childLanes|=o,c=v.alternate,c!==null&&(c.childLanes|=o),v.tag===22&&(e=v.stateNode,e===null||e._visibility&1||(m=!0)),e=v,v=v.return;return e.tag===3?(v=e.stateNode,m&&i!==null&&(m=31-cn(o),e=v.hiddenUpdates,c=e[m],c===null?e[m]=[i]:c.push(i),i.lane=o|536870912),v):null}function Ws(e){if(50<Pl)throw Pl=0,Bf=null,Error(a(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Xi={};function Ph(e,i,o,c){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,i,o,c){return new Ph(e,i,o,c)}function qa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gn(e,i){var o=e.alternate;return o===null?(o=sn(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function dl(e,i){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,i=o.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Fs(e,i,o,c,m,v){var E=0;if(c=e,typeof e=="function")qa(e)&&(E=1);else if(typeof e=="string")E=z2(e,o,G.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ye:return e=sn(31,o,i,m),e.elementType=ye,e.lanes=v,e;case C:return Ji(o.children,m,v,i);case A:E=8,m|=24;break;case z:return e=sn(12,o,i,m|2),e.elementType=z,e.lanes=v,e;case $:return e=sn(13,o,i,m),e.elementType=$,e.lanes=v,e;case V:return e=sn(19,o,i,m),e.elementType=V,e.lanes=v,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:E=10;break e;case D:E=9;break e;case Z:E=11;break e;case K:E=14;break e;case oe:E=16,c=null;break e}E=29,o=Error(a(130,e===null?"null":typeof e,"")),c=null}return i=sn(E,o,i,m),i.elementType=e,i.type=c,i.lanes=v,i}function Ji(e,i,o,c){return e=sn(7,e,c,i),e.lanes=o,e}function Wa(e,i,o){return e=sn(6,e,null,i),e.lanes=o,e}function hl(e){var i=sn(18,null,null,0);return i.stateNode=e,i}function fl(e,i,o){return i=sn(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var s=new WeakMap;function u(e,i){if(typeof e=="object"&&e!==null){var o=s.get(e);return o!==void 0?o:(i={value:e,source:i,stack:ps(i)},s.set(e,i),i)}return{value:e,source:i,stack:ps(i)}}var p=[],x=0,T=null,O=0,B=[],F=0,J=null,ue=1,ve="";function Ae(e,i){p[x++]=O,p[x++]=T,T=e,O=i}function Ue(e,i,o){B[F++]=ue,B[F++]=ve,B[F++]=J,J=e;var c=ue;e=ve;var m=32-cn(c)-1;c&=~(1<<m),o+=1;var v=32-cn(i)+m;if(30<v){var E=m-m%5;v=(c&(1<<E)-1).toString(32),c>>=E,m-=E,ue=1<<32-cn(i)+m|o<<m|c,ve=v+e}else ue=1<<v|o<<m|c,ve=e}function Vt(e){e.return!==null&&(Ae(e,1),Ue(e,1,0))}function Tt(e){for(;e===T;)T=p[--x],p[x]=null,O=p[--x],p[x]=null;for(;e===J;)J=B[--F],B[F]=null,ve=B[--F],B[F]=null,ue=B[--F],B[F]=null}function hn(e,i){B[F++]=ue,B[F++]=ve,B[F++]=J,ue=i.id,ve=i.overflow,J=e}var Ye=null,Xe=null,He=!1,Mi=null,bn=!1,Fa=Error(a(519));function Li(e){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $s(u(i,e)),Fa}function pl(e){var i=e.stateNode,o=e.type,c=e.memoizedProps;switch(i[Ot]=e,i[Wt]=c,o){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(o=0;o<Bl.length;o++)We(Bl[o],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":We("invalid",i),Es(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":We("invalid",i);break;case"textarea":We("invalid",i),Tr(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||av(i.textContent,o)?(c.popover!=null&&(We("beforetoggle",i),We("toggle",i)),c.onScroll!=null&&We("scroll",i),c.onScrollEnd!=null&&We("scrollend",i),c.onClick!=null&&(i.onclick=yn),i=!0):i=!1,i||Li(e,!0)}function _t(e){for(Ye=e.return;Ye;)switch(Ye.tag){case 5:case 31:case 13:bn=!1;return;case 27:case 3:bn=!0;return;default:Ye=Ye.return}}function hi(e){if(e!==Ye)return!1;if(!He)return _t(e),He=!0,!1;var i=e.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Jf(e.type,e.memoizedProps)),o=!o),o&&Xe&&Li(e),_t(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));Xe=mv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));Xe=mv(e)}else i===27?(i=Xe,Jr(e.type)?(e=ip,ip=null,Xe=e):Xe=i):Xe=Ye?Yn(e.stateNode.nextSibling):null;return!0}function Qi(){Xe=Ye=null,He=!1}function ml(){var e=Mi;return e!==null&&(En===null?En=e:En.push.apply(En,e),Mi=null),e}function $s(e){Mi===null?Mi=[e]:Mi.push(e)}var Zs=N(null),zi=null,fi=null;function Ur(e,i,o){me(Zs,i._currentValue),i._currentValue=o}function er(e){e._currentValue=Zs.current,ne(Zs)}function Dh(e,i,o){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===o)break;e=e.return}}function Bh(e,i,o,c){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var v=m.dependencies;if(v!==null){var E=m.child;v=v.firstContext;e:for(;v!==null;){var M=v;v=m;for(var U=0;U<i.length;U++)if(M.context===i[U]){v.lanes|=o,M=v.alternate,M!==null&&(M.lanes|=o),Dh(v.return,o,e),c||(E=null);break e}v=M.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(a(341));E.lanes|=o,v=E.alternate,v!==null&&(v.lanes|=o),Dh(E,o,e),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===e){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function $a(e,i,o,c){e=null;for(var m=i,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var M=m.type;Ft(m.pendingProps.value,E.value)||(e!==null?e.push(M):e=[M])}}else if(m===ke.current){if(E=m.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(Hl):e=[Hl])}m=m.return}e!==null&&Bh(i,e,o,c),i.flags|=262144}function dc(e){for(e=e.firstContext;e!==null;){if(!Ft(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Gs(e){zi=e,fi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xt(e){return Fg(zi,e)}function hc(e,i){return zi===null&&Gs(e),Fg(e,i)}function Fg(e,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},fi===null){if(e===null)throw Error(a(308));fi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else fi=fi.next=i;return o}var RS=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(o,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(o){return o()})}},OS=n.unstable_scheduleCallback,MS=n.unstable_NormalPriority,Lt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nh(){return{controller:new RS,data:new Map,refCount:0}}function gl(e){e.refCount--,e.refCount===0&&OS(MS,function(){e.controller.abort()})}var yl=null,Uh=0,Za=0,Ga=null;function LS(e,i){if(yl===null){var o=yl=[];Uh=0,Za=qf(),Ga={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Uh++,i.then($g,$g),i}function $g(){if(--Uh===0&&yl!==null){Ga!==null&&(Ga.status="fulfilled");var e=yl;yl=null,Za=0,Ga=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function zS(e,i){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var Zg=H.S;H.S=function(e,i){R0=un(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&LS(e,i),Zg!==null&&Zg(e,i)};var Ks=N(null);function Ih(){var e=Ks.current;return e!==null?e:ct.pooledCache}function fc(e,i){i===null?me(Ks,Ks.current):me(Ks,i.pool)}function Gg(){var e=Ih();return e===null?null:{parent:Lt._currentValue,pool:e}}var Ka=Error(a(460)),Vh=Error(a(474)),pc=Error(a(542)),mc={then:function(){}};function Kg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Yg(e,i,o){switch(o=e[o],o===void 0?e.push(i):o!==i&&(i.then(yn,yn),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jg(e),e;default:if(typeof i.status=="string")i.then(yn,yn);else{if(e=ct,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jg(e),e}throw Xs=i,Ka}}function Ys(e){try{var i=e._init;return i(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Xs=o,Ka):o}}var Xs=null;function Xg(){if(Xs===null)throw Error(a(459));var e=Xs;return Xs=null,e}function Jg(e){if(e===Ka||e===pc)throw Error(a(483))}var Ya=null,vl=0;function gc(e){var i=vl;return vl+=1,Ya===null&&(Ya=[]),Yg(Ya,e,i)}function _l(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function yc(e,i){throw i.$$typeof===S?Error(a(525)):(e=Object.prototype.toString.call(i),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Qg(e){function i(q,I){if(e){var Y=q.deletions;Y===null?(q.deletions=[I],q.flags|=16):Y.push(I)}}function o(q,I){if(!e)return null;for(;I!==null;)i(q,I),I=I.sibling;return null}function c(q){for(var I=new Map;q!==null;)q.key!==null?I.set(q.key,q):I.set(q.index,q),q=q.sibling;return I}function m(q,I){return q=Gn(q,I),q.index=0,q.sibling=null,q}function v(q,I,Y){return q.index=Y,e?(Y=q.alternate,Y!==null?(Y=Y.index,Y<I?(q.flags|=67108866,I):Y):(q.flags|=67108866,I)):(q.flags|=1048576,I)}function E(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function M(q,I,Y,le){return I===null||I.tag!==6?(I=Wa(Y,q.mode,le),I.return=q,I):(I=m(I,Y),I.return=q,I)}function U(q,I,Y,le){var Re=Y.type;return Re===C?se(q,I,Y.props.children,le,Y.key):I!==null&&(I.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===oe&&Ys(Re)===I.type)?(I=m(I,Y.props),_l(I,Y),I.return=q,I):(I=Fs(Y.type,Y.key,Y.props,null,q.mode,le),_l(I,Y),I.return=q,I)}function X(q,I,Y,le){return I===null||I.tag!==4||I.stateNode.containerInfo!==Y.containerInfo||I.stateNode.implementation!==Y.implementation?(I=fl(Y,q.mode,le),I.return=q,I):(I=m(I,Y.children||[]),I.return=q,I)}function se(q,I,Y,le,Re){return I===null||I.tag!==7?(I=Ji(Y,q.mode,le,Re),I.return=q,I):(I=m(I,Y),I.return=q,I)}function ce(q,I,Y){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Wa(""+I,q.mode,Y),I.return=q,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case j:return Y=Fs(I.type,I.key,I.props,null,q.mode,Y),_l(Y,I),Y.return=q,Y;case k:return I=fl(I,q.mode,Y),I.return=q,I;case oe:return I=Ys(I),ce(q,I,Y)}if(he(I)||W(I))return I=Ji(I,q.mode,Y,null),I.return=q,I;if(typeof I.then=="function")return ce(q,gc(I),Y);if(I.$$typeof===P)return ce(q,hc(q,I),Y);yc(q,I)}return null}function Q(q,I,Y,le){var Re=I!==null?I.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Re!==null?null:M(q,I,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case j:return Y.key===Re?U(q,I,Y,le):null;case k:return Y.key===Re?X(q,I,Y,le):null;case oe:return Y=Ys(Y),Q(q,I,Y,le)}if(he(Y)||W(Y))return Re!==null?null:se(q,I,Y,le,null);if(typeof Y.then=="function")return Q(q,I,gc(Y),le);if(Y.$$typeof===P)return Q(q,I,hc(q,Y),le);yc(q,Y)}return null}function ee(q,I,Y,le,Re){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return q=q.get(Y)||null,M(I,q,""+le,Re);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case j:return q=q.get(le.key===null?Y:le.key)||null,U(I,q,le,Re);case k:return q=q.get(le.key===null?Y:le.key)||null,X(I,q,le,Re);case oe:return le=Ys(le),ee(q,I,Y,le,Re)}if(he(le)||W(le))return q=q.get(Y)||null,se(I,q,le,Re,null);if(typeof le.then=="function")return ee(q,I,Y,gc(le),Re);if(le.$$typeof===P)return ee(q,I,Y,hc(I,le),Re);yc(I,le)}return null}function we(q,I,Y,le){for(var Re=null,Je=null,Ee=I,Ie=I=0,Ze=null;Ee!==null&&Ie<Y.length;Ie++){Ee.index>Ie?(Ze=Ee,Ee=null):Ze=Ee.sibling;var Qe=Q(q,Ee,Y[Ie],le);if(Qe===null){Ee===null&&(Ee=Ze);break}e&&Ee&&Qe.alternate===null&&i(q,Ee),I=v(Qe,I,Ie),Je===null?Re=Qe:Je.sibling=Qe,Je=Qe,Ee=Ze}if(Ie===Y.length)return o(q,Ee),He&&Ae(q,Ie),Re;if(Ee===null){for(;Ie<Y.length;Ie++)Ee=ce(q,Y[Ie],le),Ee!==null&&(I=v(Ee,I,Ie),Je===null?Re=Ee:Je.sibling=Ee,Je=Ee);return He&&Ae(q,Ie),Re}for(Ee=c(Ee);Ie<Y.length;Ie++)Ze=ee(Ee,q,Ie,Y[Ie],le),Ze!==null&&(e&&Ze.alternate!==null&&Ee.delete(Ze.key===null?Ie:Ze.key),I=v(Ze,I,Ie),Je===null?Re=Ze:Je.sibling=Ze,Je=Ze);return e&&Ee.forEach(function(is){return i(q,is)}),He&&Ae(q,Ie),Re}function Oe(q,I,Y,le){if(Y==null)throw Error(a(151));for(var Re=null,Je=null,Ee=I,Ie=I=0,Ze=null,Qe=Y.next();Ee!==null&&!Qe.done;Ie++,Qe=Y.next()){Ee.index>Ie?(Ze=Ee,Ee=null):Ze=Ee.sibling;var is=Q(q,Ee,Qe.value,le);if(is===null){Ee===null&&(Ee=Ze);break}e&&Ee&&is.alternate===null&&i(q,Ee),I=v(is,I,Ie),Je===null?Re=is:Je.sibling=is,Je=is,Ee=Ze}if(Qe.done)return o(q,Ee),He&&Ae(q,Ie),Re;if(Ee===null){for(;!Qe.done;Ie++,Qe=Y.next())Qe=ce(q,Qe.value,le),Qe!==null&&(I=v(Qe,I,Ie),Je===null?Re=Qe:Je.sibling=Qe,Je=Qe);return He&&Ae(q,Ie),Re}for(Ee=c(Ee);!Qe.done;Ie++,Qe=Y.next())Qe=ee(Ee,q,Ie,Qe.value,le),Qe!==null&&(e&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Ie:Qe.key),I=v(Qe,I,Ie),Je===null?Re=Qe:Je.sibling=Qe,Je=Qe);return e&&Ee.forEach(function(F2){return i(q,F2)}),He&&Ae(q,Ie),Re}function ot(q,I,Y,le){if(typeof Y=="object"&&Y!==null&&Y.type===C&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case j:e:{for(var Re=Y.key;I!==null;){if(I.key===Re){if(Re=Y.type,Re===C){if(I.tag===7){o(q,I.sibling),le=m(I,Y.props.children),le.return=q,q=le;break e}}else if(I.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===oe&&Ys(Re)===I.type){o(q,I.sibling),le=m(I,Y.props),_l(le,Y),le.return=q,q=le;break e}o(q,I);break}else i(q,I);I=I.sibling}Y.type===C?(le=Ji(Y.props.children,q.mode,le,Y.key),le.return=q,q=le):(le=Fs(Y.type,Y.key,Y.props,null,q.mode,le),_l(le,Y),le.return=q,q=le)}return E(q);case k:e:{for(Re=Y.key;I!==null;){if(I.key===Re)if(I.tag===4&&I.stateNode.containerInfo===Y.containerInfo&&I.stateNode.implementation===Y.implementation){o(q,I.sibling),le=m(I,Y.children||[]),le.return=q,q=le;break e}else{o(q,I);break}else i(q,I);I=I.sibling}le=fl(Y,q.mode,le),le.return=q,q=le}return E(q);case oe:return Y=Ys(Y),ot(q,I,Y,le)}if(he(Y))return we(q,I,Y,le);if(W(Y)){if(Re=W(Y),typeof Re!="function")throw Error(a(150));return Y=Re.call(Y),Oe(q,I,Y,le)}if(typeof Y.then=="function")return ot(q,I,gc(Y),le);if(Y.$$typeof===P)return ot(q,I,hc(q,Y),le);yc(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,I!==null&&I.tag===6?(o(q,I.sibling),le=m(I,Y),le.return=q,q=le):(o(q,I),le=Wa(Y,q.mode,le),le.return=q,q=le),E(q)):o(q,I)}return function(q,I,Y,le){try{vl=0;var Re=ot(q,I,Y,le);return Ya=null,Re}catch(Ee){if(Ee===Ka||Ee===pc)throw Ee;var Je=sn(29,Ee,null,q.mode);return Je.lanes=le,Je.return=q,Je}finally{}}}var Js=Qg(!0),ey=Qg(!1),Ir=!1;function Hh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(e,i,o){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(et&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=Ws(e),Nr(e,null,o),i}return Oi(e,c,i,o),Ws(e)}function xl(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,o|=c,i.lanes=o,Nu(e,o)}}function Wh(e,i){var o=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?m=v=E:v=v.next=E,o=o.next}while(o!==null);v===null?m=v=i:v=v.next=i}else m=v=i;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}var Fh=!1;function bl(){if(Fh){var e=Ga;if(e!==null)throw e}}function wl(e,i,o,c){Fh=!1;var m=e.updateQueue;Ir=!1;var v=m.firstBaseUpdate,E=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var U=M,X=U.next;U.next=null,E===null?v=X:E.next=X,E=U;var se=e.alternate;se!==null&&(se=se.updateQueue,M=se.lastBaseUpdate,M!==E&&(M===null?se.firstBaseUpdate=X:M.next=X,se.lastBaseUpdate=U))}if(v!==null){var ce=m.baseState;E=0,se=X=U=null,M=v;do{var Q=M.lane&-536870913,ee=Q!==M.lane;if(ee?($e&Q)===Q:(c&Q)===Q){Q!==0&&Q===Za&&(Fh=!0),se!==null&&(se=se.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var we=e,Oe=M;Q=i;var ot=o;switch(Oe.tag){case 1:if(we=Oe.payload,typeof we=="function"){ce=we.call(ot,ce,Q);break e}ce=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Oe.payload,Q=typeof we=="function"?we.call(ot,ce,Q):we,Q==null)break e;ce=w({},ce,Q);break e;case 2:Ir=!0}}Q=M.callback,Q!==null&&(e.flags|=64,ee&&(e.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[Q]:ee.push(Q))}else ee={lane:Q,tag:M.tag,payload:M.payload,callback:M.callback,next:null},se===null?(X=se=ee,U=ce):se=se.next=ee,E|=Q;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;ee=M,M=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);se===null&&(U=ce),m.baseState=U,m.firstBaseUpdate=X,m.lastBaseUpdate=se,v===null&&(m.shared.lanes=0),Zr|=E,e.lanes=E,e.memoizedState=ce}}function ty(e,i){if(typeof e!="function")throw Error(a(191,e));e.call(i)}function ny(e,i){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)ty(o[e],i)}var Xa=N(null),vc=N(0);function iy(e,i){e=ur,me(vc,e),me(Xa,i),ur=e|i.baseLanes}function $h(){me(vc,ur),me(Xa,Xa.current)}function Zh(){ur=vc.current,ne(Xa),ne(vc)}var zn=N(null),Kn=null;function qr(e){var i=e.alternate;me(At,At.current&1),me(zn,e),Kn===null&&(i===null||Xa.current!==null||i.memoizedState!==null)&&(Kn=e)}function Gh(e){me(At,At.current),me(zn,e),Kn===null&&(Kn=e)}function ry(e){e.tag===22?(me(At,At.current),me(zn,e),Kn===null&&(Kn=e)):Wr()}function Wr(){me(At,At.current),me(zn,zn.current)}function Pn(e){ne(zn),Kn===e&&(Kn=null),ne(At)}var At=N(0);function _c(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||tp(o)||np(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var tr=0,Ne=null,st=null,zt=null,xc=!1,Ja=!1,Qs=!1,bc=0,Sl=0,Qa=null,PS=0;function Et(){throw Error(a(321))}function Kh(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!Ft(e[o],i[o]))return!1;return!0}function Yh(e,i,o,c,m,v){return tr=v,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=e===null||e.memoizedState===null?Vy:hf,Qs=!1,v=o(c,m),Qs=!1,Ja&&(v=ay(i,o,c,m)),sy(e),v}function sy(e){H.H=jl;var i=st!==null&&st.next!==null;if(tr=0,zt=st=Ne=null,xc=!1,Sl=0,Qa=null,i)throw Error(a(300));e===null||Pt||(e=e.dependencies,e!==null&&dc(e)&&(Pt=!0))}function ay(e,i,o,c){Ne=e;var m=0;do{if(Ja&&(Qa=null),Sl=0,Ja=!1,25<=m)throw Error(a(301));if(m+=1,zt=st=null,e.updateQueue!=null){var v=e.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}H.H=Hy,v=i(o,c)}while(Ja);return v}function DS(){var e=H.H,i=e.useState()[0];return i=typeof i.then=="function"?Tl(i):i,e=e.useState()[0],(st!==null?st.memoizedState:null)!==e&&(Ne.flags|=1024),i}function Xh(){var e=bc!==0;return bc=0,e}function Jh(e,i,o){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o}function Qh(e){if(xc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}xc=!1}tr=0,zt=st=Ne=null,Ja=!1,Sl=bc=0,Qa=null}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ne.memoizedState=zt=e:zt=zt.next=e,zt}function kt(){if(st===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var i=zt===null?Ne.memoizedState:zt.next;if(i!==null)zt=i,st=e;else{if(e===null)throw Ne.alternate===null?Error(a(467)):Error(a(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},zt===null?Ne.memoizedState=zt=e:zt=zt.next=e}return zt}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(e){var i=Sl;return Sl+=1,Qa===null&&(Qa=[]),e=Yg(Qa,e,i),i=Ne,(zt===null?i.memoizedState:zt.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Vy:hf),e}function Sc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tl(e);if(e.$$typeof===P)return Xt(e)}throw Error(a(438,String(e)))}function ef(e){var i=null,o=Ne.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=wc(),Ne.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(e),c=0;c<e;c++)o[c]=fe;return i.index++,o}function nr(e,i){return typeof i=="function"?i(e):i}function Tc(e){var i=kt();return tf(i,st,e)}function tf(e,i,o){var c=e.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=o;var m=e.baseQueue,v=c.pending;if(v!==null){if(m!==null){var E=m.next;m.next=v.next,v.next=E}i.baseQueue=m=v,c.pending=null}if(v=e.baseState,m===null)e.memoizedState=v;else{i=m.next;var M=E=null,U=null,X=i,se=!1;do{var ce=X.lane&-536870913;if(ce!==X.lane?($e&ce)===ce:(tr&ce)===ce){var Q=X.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ce===Za&&(se=!0);else if((tr&Q)===Q){X=X.next,Q===Za&&(se=!0);continue}else ce={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(M=U=ce,E=v):U=U.next=ce,Ne.lanes|=Q,Zr|=Q;ce=X.action,Qs&&o(v,ce),v=X.hasEagerState?X.eagerState:o(v,ce)}else Q={lane:ce,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(M=U=Q,E=v):U=U.next=Q,Ne.lanes|=ce,Zr|=ce;X=X.next}while(X!==null&&X!==i);if(U===null?E=v:U.next=M,!Ft(v,e.memoizedState)&&(Pt=!0,se&&(o=Ga,o!==null)))throw o;e.memoizedState=v,e.baseState=E,e.baseQueue=U,c.lastRenderedState=v}return m===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function nf(e){var i=kt(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=e;var c=o.dispatch,m=o.pending,v=i.memoizedState;if(m!==null){o.pending=null;var E=m=m.next;do v=e(v,E.action),E=E.next;while(E!==m);Ft(v,i.memoizedState)||(Pt=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),o.lastRenderedState=v}return[v,c]}function oy(e,i,o){var c=Ne,m=kt(),v=He;if(v){if(o===void 0)throw Error(a(407));o=o()}else o=i();var E=!Ft((st||m).memoizedState,o);if(E&&(m.memoizedState=o,Pt=!0),m=m.queue,af(cy.bind(null,c,m,e),[e]),m.getSnapshot!==i||E||zt!==null&&zt.memoizedState.tag&1){if(c.flags|=2048,eo(9,{destroy:void 0},uy.bind(null,c,m,o,i),null),ct===null)throw Error(a(349));v||(tr&127)!==0||ly(c,i,o)}return o}function ly(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=Ne.updateQueue,i===null?(i=wc(),Ne.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function uy(e,i,o,c){i.value=o,i.getSnapshot=c,dy(i)&&hy(e)}function cy(e,i,o){return o(function(){dy(i)&&hy(e)})}function dy(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!Ft(e,o)}catch{return!0}}function hy(e){var i=Zn(e,2);i!==null&&jn(i,e,2)}function rf(e){var i=fn();if(typeof e=="function"){var o=e;if(e=o(),Qs){si(!0);try{o()}finally{si(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:e},i}function fy(e,i,o,c){return e.baseState=o,tf(e,st,typeof c=="function"?c:nr)}function BS(e,i,o,c,m){if(Cc(e))throw Error(a(485));if(e=i.action,e!==null){var v={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){v.listeners.push(E)}};H.T!==null?o(!0):v.isTransition=!1,c(v),o=i.pending,o===null?(v.next=i.pending=v,py(i,v)):(v.next=o.next,i.pending=o.next=v)}}function py(e,i){var o=i.action,c=i.payload,m=e.state;if(i.isTransition){var v=H.T,E={};H.T=E;try{var M=o(m,c),U=H.S;U!==null&&U(E,M),my(e,i,M)}catch(X){sf(e,i,X)}finally{v!==null&&E.types!==null&&(v.types=E.types),H.T=v}}else try{v=o(m,c),my(e,i,v)}catch(X){sf(e,i,X)}}function my(e,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){gy(e,i,c)},function(c){return sf(e,i,c)}):gy(e,i,o)}function gy(e,i,o){i.status="fulfilled",i.value=o,yy(i),e.state=o,i=e.pending,i!==null&&(o=i.next,o===i?e.pending=null:(o=o.next,i.next=o,py(e,o)))}function sf(e,i,o){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,yy(i),i=i.next;while(i!==c)}e.action=null}function yy(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function vy(e,i){return i}function _y(e,i){if(He){var o=ct.formState;if(o!==null){e:{var c=Ne;if(He){if(Xe){t:{for(var m=Xe,v=bn;m.nodeType!==8;){if(!v){m=null;break t}if(m=Yn(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){Xe=Yn(m.nextSibling),c=m.data==="F!";break e}}Li(c)}c=!1}c&&(i=o[0])}}return o=fn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:i},o.queue=c,o=Ny.bind(null,Ne,c),c.dispatch=o,c=rf(!1),v=df.bind(null,Ne,!1,c.queue),c=fn(),m={state:i,dispatch:null,action:e,pending:null},c.queue=m,o=BS.bind(null,Ne,m,v,o),m.dispatch=o,c.memoizedState=e,[i,o,!1]}function xy(e){var i=kt();return by(i,st,e)}function by(e,i,o){if(i=tf(e,i,vy)[0],e=Tc(nr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Tl(i)}catch(E){throw E===Ka?pc:E}else c=i;i=kt();var m=i.queue,v=m.dispatch;return o!==i.memoizedState&&(Ne.flags|=2048,eo(9,{destroy:void 0},NS.bind(null,m,o),null)),[c,v,e]}function NS(e,i){e.action=i}function wy(e){var i=kt(),o=st;if(o!==null)return by(i,o,e);kt(),i=i.memoizedState,o=kt();var c=o.queue.dispatch;return o.memoizedState=e,[i,c,!1]}function eo(e,i,o,c){return e={tag:e,create:o,deps:c,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=wc(),Ne.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=e.next=e:(c=o.next,o.next=e,e.next=c,i.lastEffect=e),e}function Sy(){return kt().memoizedState}function Ec(e,i,o,c){var m=fn();Ne.flags|=e,m.memoizedState=eo(1|i,{destroy:void 0},o,c===void 0?null:c)}function jc(e,i,o,c){var m=kt();c=c===void 0?null:c;var v=m.memoizedState.inst;st!==null&&c!==null&&Kh(c,st.memoizedState.deps)?m.memoizedState=eo(i,v,o,c):(Ne.flags|=e,m.memoizedState=eo(1|i,v,o,c))}function Ty(e,i){Ec(8390656,8,e,i)}function af(e,i){jc(2048,8,e,i)}function US(e){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=wc(),Ne.updateQueue=i,i.events=[e];else{var o=i.events;o===null?i.events=[e]:o.push(e)}}function Ey(e){var i=kt().memoizedState;return US({ref:i,nextImpl:e}),function(){if((et&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function jy(e,i){return jc(4,2,e,i)}function Cy(e,i){return jc(4,4,e,i)}function Ay(e,i){if(typeof i=="function"){e=e();var o=i(e);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function ky(e,i,o){o=o!=null?o.concat([e]):null,jc(4,4,Ay.bind(null,i,e),o)}function of(){}function Ry(e,i){var o=kt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Kh(i,c[1])?c[0]:(o.memoizedState=[e,i],e)}function Oy(e,i){var o=kt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Kh(i,c[1]))return c[0];if(c=e(),Qs){si(!0);try{e()}finally{si(!1)}}return o.memoizedState=[c,i],c}function lf(e,i,o){return o===void 0||(tr&1073741824)!==0&&($e&261930)===0?e.memoizedState=i:(e.memoizedState=o,e=M0(),Ne.lanes|=e,Zr|=e,o)}function My(e,i,o,c){return Ft(o,i)?o:Xa.current!==null?(e=lf(e,o,c),Ft(e,i)||(Pt=!0),e):(tr&42)===0||(tr&1073741824)!==0&&($e&261930)===0?(Pt=!0,e.memoizedState=o):(e=M0(),Ne.lanes|=e,Zr|=e,i)}function Ly(e,i,o,c,m){var v=re.p;re.p=v!==0&&8>v?v:8;var E=H.T,M={};H.T=M,df(e,!1,i,o);try{var U=m(),X=H.S;if(X!==null&&X(M,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var se=zS(U,c);El(e,i,se,Nn(e))}else El(e,i,c,Nn(e))}catch(ce){El(e,i,{then:function(){},status:"rejected",reason:ce},Nn())}finally{re.p=v,E!==null&&M.types!==null&&(E.types=M.types),H.T=E}}function IS(){}function uf(e,i,o,c){if(e.tag!==5)throw Error(a(476));var m=zy(e).queue;Ly(e,m,i,ie,o===null?IS:function(){return Py(e),o(c)})}function zy(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:ie},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:o},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Py(e){var i=zy(e);i.next===null&&(i=e.alternate.memoizedState),El(e,i.next.queue,{},Nn())}function cf(){return Xt(Hl)}function Dy(){return kt().memoizedState}function By(){return kt().memoizedState}function VS(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var o=Nn();e=Vr(o);var c=Hr(i,e,o);c!==null&&(jn(c,i,o),xl(c,i,o)),i={cache:Nh()},e.payload=i;return}i=i.return}}function HS(e,i,o){var c=Nn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Cc(e)?Uy(i,o):(o=cl(e,i,o,c),o!==null&&(jn(o,e,c),Iy(o,i,c)))}function Ny(e,i,o){var c=Nn();El(e,i,o,c)}function El(e,i,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Cc(e))Uy(i,m);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var E=i.lastRenderedState,M=v(E,o);if(m.hasEagerState=!0,m.eagerState=M,Ft(M,E))return Oi(e,i,m,0),ct===null&&qs(),!1}catch{}finally{}if(o=cl(e,i,m,c),o!==null)return jn(o,e,c),Iy(o,i,c),!0}return!1}function df(e,i,o,c){if(c={lane:2,revertLane:qf(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Cc(e)){if(i)throw Error(a(479))}else i=cl(e,o,c,2),i!==null&&jn(i,e,2)}function Cc(e){var i=e.alternate;return e===Ne||i!==null&&i===Ne}function Uy(e,i){Ja=xc=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function Iy(e,i,o){if((o&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,o|=c,i.lanes=o,Nu(e,o)}}var jl={readContext:Xt,use:Sc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};jl.useEffectEvent=Et;var Vy={readContext:Xt,use:Sc,useCallback:function(e,i){return fn().memoizedState=[e,i===void 0?null:i],e},useContext:Xt,useEffect:Ty,useImperativeHandle:function(e,i,o){o=o!=null?o.concat([e]):null,Ec(4194308,4,Ay.bind(null,i,e),o)},useLayoutEffect:function(e,i){return Ec(4194308,4,e,i)},useInsertionEffect:function(e,i){Ec(4,2,e,i)},useMemo:function(e,i){var o=fn();i=i===void 0?null:i;var c=e();if(Qs){si(!0);try{e()}finally{si(!1)}}return o.memoizedState=[c,i],c},useReducer:function(e,i,o){var c=fn();if(o!==void 0){var m=o(i);if(Qs){si(!0);try{o(i)}finally{si(!1)}}}else m=i;return c.memoizedState=c.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},c.queue=e,e=e.dispatch=HS.bind(null,Ne,e),[c.memoizedState,e]},useRef:function(e){var i=fn();return e={current:e},i.memoizedState=e},useState:function(e){e=rf(e);var i=e.queue,o=Ny.bind(null,Ne,i);return i.dispatch=o,[e.memoizedState,o]},useDebugValue:of,useDeferredValue:function(e,i){var o=fn();return lf(o,e,i)},useTransition:function(){var e=rf(!1);return e=Ly.bind(null,Ne,e.queue,!0,!1),fn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,o){var c=Ne,m=fn();if(He){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),ct===null)throw Error(a(349));($e&127)!==0||ly(c,i,o)}m.memoizedState=o;var v={value:o,getSnapshot:i};return m.queue=v,Ty(cy.bind(null,c,v,e),[e]),c.flags|=2048,eo(9,{destroy:void 0},uy.bind(null,c,v,o,i),null),o},useId:function(){var e=fn(),i=ct.identifierPrefix;if(He){var o=ve,c=ue;o=(c&~(1<<32-cn(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=bc++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=PS++,i="_"+i+"r_"+o.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:cf,useFormState:_y,useActionState:_y,useOptimistic:function(e){var i=fn();i.memoizedState=i.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=df.bind(null,Ne,!0,o),o.dispatch=i,[e,i]},useMemoCache:ef,useCacheRefresh:function(){return fn().memoizedState=VS.bind(null,Ne)},useEffectEvent:function(e){var i=fn(),o={impl:e};return i.memoizedState=o,function(){if((et&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},hf={readContext:Xt,use:Sc,useCallback:Ry,useContext:Xt,useEffect:af,useImperativeHandle:ky,useInsertionEffect:jy,useLayoutEffect:Cy,useMemo:Oy,useReducer:Tc,useRef:Sy,useState:function(){return Tc(nr)},useDebugValue:of,useDeferredValue:function(e,i){var o=kt();return My(o,st.memoizedState,e,i)},useTransition:function(){var e=Tc(nr)[0],i=kt().memoizedState;return[typeof e=="boolean"?e:Tl(e),i]},useSyncExternalStore:oy,useId:Dy,useHostTransitionStatus:cf,useFormState:xy,useActionState:xy,useOptimistic:function(e,i){var o=kt();return fy(o,st,e,i)},useMemoCache:ef,useCacheRefresh:By};hf.useEffectEvent=Ey;var Hy={readContext:Xt,use:Sc,useCallback:Ry,useContext:Xt,useEffect:af,useImperativeHandle:ky,useInsertionEffect:jy,useLayoutEffect:Cy,useMemo:Oy,useReducer:nf,useRef:Sy,useState:function(){return nf(nr)},useDebugValue:of,useDeferredValue:function(e,i){var o=kt();return st===null?lf(o,e,i):My(o,st.memoizedState,e,i)},useTransition:function(){var e=nf(nr)[0],i=kt().memoizedState;return[typeof e=="boolean"?e:Tl(e),i]},useSyncExternalStore:oy,useId:Dy,useHostTransitionStatus:cf,useFormState:wy,useActionState:wy,useOptimistic:function(e,i){var o=kt();return st!==null?fy(o,st,e,i):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:ef,useCacheRefresh:By};Hy.useEffectEvent=Ey;function ff(e,i,o,c){i=e.memoizedState,o=o(c,i),o=o==null?i:w({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var pf={enqueueSetState:function(e,i,o){e=e._reactInternals;var c=Nn(),m=Vr(c);m.payload=i,o!=null&&(m.callback=o),i=Hr(e,m,c),i!==null&&(jn(i,e,c),xl(i,e,c))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var c=Nn(),m=Vr(c);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=Hr(e,m,c),i!==null&&(jn(i,e,c),xl(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=Nn(),c=Vr(o);c.tag=2,i!=null&&(c.callback=i),i=Hr(e,c,o),i!==null&&(jn(i,e,o),xl(i,e,o))}};function qy(e,i,o,c,m,v,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,v,E):i.prototype&&i.prototype.isPureReactComponent?!zr(o,c)||!zr(m,v):!0}function Wy(e,i,o,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==e&&pf.enqueueReplaceState(i,i.state,null)}function ea(e,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(e=e.defaultProps){o===i&&(o=w({},o));for(var m in e)o[m]===void 0&&(o[m]=e[m])}return o}function Fy(e){Hs(e)}function $y(e){console.error(e)}function Zy(e){Hs(e)}function Ac(e,i){try{var o=e.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Gy(e,i,o){try{var c=e.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function mf(e,i,o){return o=Vr(o),o.tag=3,o.payload={element:null},o.callback=function(){Ac(e,i)},o}function Ky(e){return e=Vr(e),e.tag=3,e}function Yy(e,i,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var v=c.value;e.payload=function(){return m(v)},e.callback=function(){Gy(i,o,c)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){Gy(i,o,c),typeof m!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})})}function qS(e,i,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&$a(i,o,m,!0),o=zn.current,o!==null){switch(o.tag){case 31:case 13:return Kn===null?Ic():o.alternate===null&&jt===0&&(jt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===mc?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),If(e,c,m)),!1;case 22:return o.flags|=65536,c===mc?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),If(e,c,m)),!1}throw Error(a(435,o.tag))}return If(e,c,m),Ic(),!1}if(He)return i=zn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==Fa&&(e=Error(a(422),{cause:c}),$s(u(e,o)))):(c!==Fa&&(i=Error(a(423),{cause:c}),$s(u(i,o))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,c=u(c,o),m=mf(e.stateNode,c,m),Wh(e,m),jt!==4&&(jt=2)),!1;var v=Error(a(520),{cause:c});if(v=u(v,o),zl===null?zl=[v]:zl.push(v),jt!==4&&(jt=2),i===null)return!0;c=u(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,e=m&-m,o.lanes|=e,e=mf(o.stateNode,c,e),Wh(o,e),!1;case 1:if(i=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Gr===null||!Gr.has(v))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Ky(m),Yy(m,e,o,c),Wh(o,m),!1}o=o.return}while(o!==null);return!1}var gf=Error(a(461)),Pt=!1;function Jt(e,i,o,c){i.child=e===null?ey(i,null,o,c):Js(i,e.child,o,c)}function Xy(e,i,o,c,m){o=o.render;var v=i.ref;if("ref"in c){var E={};for(var M in c)M!=="ref"&&(E[M]=c[M])}else E=c;return Gs(i),c=Yh(e,i,o,E,v,m),M=Xh(),e!==null&&!Pt?(Jh(e,i,m),ir(e,i,m)):(He&&M&&Vt(i),i.flags|=1,Jt(e,i,c,m),i.child)}function Jy(e,i,o,c,m){if(e===null){var v=o.type;return typeof v=="function"&&!qa(v)&&v.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=v,Qy(e,i,v,c,m)):(e=Fs(o.type,null,c,i,i.mode,m),e.ref=i.ref,e.return=i,i.child=e)}if(v=e.child,!Tf(e,m)){var E=v.memoizedProps;if(o=o.compare,o=o!==null?o:zr,o(E,c)&&e.ref===i.ref)return ir(e,i,m)}return i.flags|=1,e=Gn(v,c),e.ref=i.ref,e.return=i,i.child=e}function Qy(e,i,o,c,m){if(e!==null){var v=e.memoizedProps;if(zr(v,c)&&e.ref===i.ref)if(Pt=!1,i.pendingProps=c=v,Tf(e,m))(e.flags&131072)!==0&&(Pt=!0);else return i.lanes=e.lanes,ir(e,i,m)}return yf(e,i,o,c,m)}function e0(e,i,o,c){var m=c.children,v=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(v=v!==null?v.baseLanes|o:o,e!==null){for(c=i.child=e.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~v}else c=0,i.child=null;return t0(e,i,v,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&fc(i,v!==null?v.cachePool:null),v!==null?iy(i,v):$h(),ry(i);else return c=i.lanes=536870912,t0(e,i,v!==null?v.baseLanes|o:o,o,c)}else v!==null?(fc(i,v.cachePool),iy(i,v),Wr(),i.memoizedState=null):(e!==null&&fc(i,null),$h(),Wr());return Jt(e,i,m,o),i.child}function Cl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function t0(e,i,o,c,m){var v=Ih();return v=v===null?null:{parent:Lt._currentValue,pool:v},i.memoizedState={baseLanes:o,cachePool:v},e!==null&&fc(i,null),$h(),ry(i),e!==null&&$a(e,i,c,!0),i.childLanes=m,null}function kc(e,i){return i=Oc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function n0(e,i,o){return Js(i,e.child,null,o),e=kc(i,i.pendingProps),e.flags|=2,Pn(i),i.memoizedState=null,e}function WS(e,i,o){var c=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(He){if(c.mode==="hidden")return e=kc(i,c),i.lanes=536870912,Cl(null,e);if(Gh(i),(e=Xe)?(e=pv(e,bn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:J!==null?{id:ue,overflow:ve}:null,retryLane:536870912,hydrationErrors:null},o=hl(e),o.return=i,i.child=o,Ye=i,Xe=null)):e=null,e===null)throw Li(i);return i.lanes=536870912,null}return kc(i,c)}var v=e.memoizedState;if(v!==null){var E=v.dehydrated;if(Gh(i),m)if(i.flags&256)i.flags&=-257,i=n0(e,i,o);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(a(558));else if(Pt||$a(e,i,o,!1),m=(o&e.childLanes)!==0,Pt||m){if(c=ct,c!==null&&(E=Uu(c,o),E!==0&&E!==v.retryLane))throw v.retryLane=E,Zn(e,E),jn(c,e,E),gf;Ic(),i=n0(e,i,o)}else e=v.treeContext,Xe=Yn(E.nextSibling),Ye=i,He=!0,Mi=null,bn=!1,e!==null&&hn(i,e),i=kc(i,c),i.flags|=4096;return i}return e=Gn(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Rc(e,i){var o=i.ref;if(o===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(e===null||e.ref!==o)&&(i.flags|=4194816)}}function yf(e,i,o,c,m){return Gs(i),o=Yh(e,i,o,c,void 0,m),c=Xh(),e!==null&&!Pt?(Jh(e,i,m),ir(e,i,m)):(He&&c&&Vt(i),i.flags|=1,Jt(e,i,o,m),i.child)}function i0(e,i,o,c,m,v){return Gs(i),i.updateQueue=null,o=ay(i,c,o,m),sy(e),c=Xh(),e!==null&&!Pt?(Jh(e,i,v),ir(e,i,v)):(He&&c&&Vt(i),i.flags|=1,Jt(e,i,o,v),i.child)}function r0(e,i,o,c,m){if(Gs(i),i.stateNode===null){var v=Xi,E=o.contextType;typeof E=="object"&&E!==null&&(v=Xt(E)),v=new o(c,v),i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=pf,i.stateNode=v,v._reactInternals=i,v=i.stateNode,v.props=c,v.state=i.memoizedState,v.refs={},Hh(i),E=o.contextType,v.context=typeof E=="object"&&E!==null?Xt(E):Xi,v.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(ff(i,o,E,c),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(E=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),E!==v.state&&pf.enqueueReplaceState(v,v.state,null),wl(i,c,v,m),bl(),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){v=i.stateNode;var M=i.memoizedProps,U=ea(o,M);v.props=U;var X=v.context,se=o.contextType;E=Xi,typeof se=="object"&&se!==null&&(E=Xt(se));var ce=o.getDerivedStateFromProps;se=typeof ce=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=i.pendingProps!==M,se||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||X!==E)&&Wy(i,v,c,E),Ir=!1;var Q=i.memoizedState;v.state=Q,wl(i,c,v,m),bl(),X=i.memoizedState,M||Q!==X||Ir?(typeof ce=="function"&&(ff(i,o,ce,c),X=i.memoizedState),(U=Ir||qy(i,o,U,c,Q,X,E))?(se||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=X),v.props=c,v.state=X,v.context=E,c=U):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,qh(e,i),E=i.memoizedProps,se=ea(o,E),v.props=se,ce=i.pendingProps,Q=v.context,X=o.contextType,U=Xi,typeof X=="object"&&X!==null&&(U=Xt(X)),M=o.getDerivedStateFromProps,(X=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==ce||Q!==U)&&Wy(i,v,c,U),Ir=!1,Q=i.memoizedState,v.state=Q,wl(i,c,v,m),bl();var ee=i.memoizedState;E!==ce||Q!==ee||Ir||e!==null&&e.dependencies!==null&&dc(e.dependencies)?(typeof M=="function"&&(ff(i,o,M,c),ee=i.memoizedState),(se=Ir||qy(i,o,se,c,Q,ee,U)||e!==null&&e.dependencies!==null&&dc(e.dependencies))?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ee,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ee,U)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===e.memoizedProps&&Q===e.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&Q===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ee),v.props=c,v.state=ee,v.context=U,c=se):(typeof v.componentDidUpdate!="function"||E===e.memoizedProps&&Q===e.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&Q===e.memoizedState||(i.flags|=1024),c=!1)}return v=c,Rc(e,i),c=(i.flags&128)!==0,v||c?(v=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:v.render(),i.flags|=1,e!==null&&c?(i.child=Js(i,e.child,null,m),i.child=Js(i,null,o,m)):Jt(e,i,o,m),i.memoizedState=v.state,e=i.child):e=ir(e,i,m),e}function s0(e,i,o,c){return Qi(),i.flags|=256,Jt(e,i,o,c),i.child}var vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _f(e){return{baseLanes:e,cachePool:Gg()}}function xf(e,i,o){return e=e!==null?e.childLanes&~o:0,i&&(e|=Bn),e}function a0(e,i,o){var c=i.pendingProps,m=!1,v=(i.flags&128)!==0,E;if((E=v)||(E=e!==null&&e.memoizedState===null?!1:(At.current&2)!==0),E&&(m=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,e===null){if(He){if(m?qr(i):Wr(),(e=Xe)?(e=pv(e,bn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:J!==null?{id:ue,overflow:ve}:null,retryLane:536870912,hydrationErrors:null},o=hl(e),o.return=i,i.child=o,Ye=i,Xe=null)):e=null,e===null)throw Li(i);return np(e)?i.lanes=32:i.lanes=536870912,null}var M=c.children;return c=c.fallback,m?(Wr(),m=i.mode,M=Oc({mode:"hidden",children:M},m),c=Ji(c,m,o,null),M.return=i,c.return=i,M.sibling=c,i.child=M,c=i.child,c.memoizedState=_f(o),c.childLanes=xf(e,E,o),i.memoizedState=vf,Cl(null,c)):(qr(i),bf(i,M))}var U=e.memoizedState;if(U!==null&&(M=U.dehydrated,M!==null)){if(v)i.flags&256?(qr(i),i.flags&=-257,i=wf(e,i,o)):i.memoizedState!==null?(Wr(),i.child=e.child,i.flags|=128,i=null):(Wr(),M=c.fallback,m=i.mode,c=Oc({mode:"visible",children:c.children},m),M=Ji(M,m,o,null),M.flags|=2,c.return=i,M.return=i,c.sibling=M,i.child=c,Js(i,e.child,null,o),c=i.child,c.memoizedState=_f(o),c.childLanes=xf(e,E,o),i.memoizedState=vf,i=Cl(null,c));else if(qr(i),np(M)){if(E=M.nextSibling&&M.nextSibling.dataset,E)var X=E.dgst;E=X,c=Error(a(419)),c.stack="",c.digest=E,$s({value:c,source:null,stack:null}),i=wf(e,i,o)}else if(Pt||$a(e,i,o,!1),E=(o&e.childLanes)!==0,Pt||E){if(E=ct,E!==null&&(c=Uu(E,o),c!==0&&c!==U.retryLane))throw U.retryLane=c,Zn(e,c),jn(E,e,c),gf;tp(M)||Ic(),i=wf(e,i,o)}else tp(M)?(i.flags|=192,i.child=e.child,i=null):(e=U.treeContext,Xe=Yn(M.nextSibling),Ye=i,He=!0,Mi=null,bn=!1,e!==null&&hn(i,e),i=bf(i,c.children),i.flags|=4096);return i}return m?(Wr(),M=c.fallback,m=i.mode,U=e.child,X=U.sibling,c=Gn(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,X!==null?M=Gn(X,M):(M=Ji(M,m,o,null),M.flags|=2),M.return=i,c.return=i,c.sibling=M,i.child=c,Cl(null,c),c=i.child,M=e.child.memoizedState,M===null?M=_f(o):(m=M.cachePool,m!==null?(U=Lt._currentValue,m=m.parent!==U?{parent:U,pool:U}:m):m=Gg(),M={baseLanes:M.baseLanes|o,cachePool:m}),c.memoizedState=M,c.childLanes=xf(e,E,o),i.memoizedState=vf,Cl(e.child,c)):(qr(i),o=e.child,e=o.sibling,o=Gn(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,e!==null&&(E=i.deletions,E===null?(i.deletions=[e],i.flags|=16):E.push(e)),i.child=o,i.memoizedState=null,o)}function bf(e,i){return i=Oc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Oc(e,i){return e=sn(22,e,null,i),e.lanes=0,e}function wf(e,i,o){return Js(i,e.child,null,o),e=bf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function o0(e,i,o){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),Dh(e.return,i,o)}function Sf(e,i,o,c,m,v){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:v}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=o,E.tailMode=m,E.treeForkCount=v)}function l0(e,i,o){var c=i.pendingProps,m=c.revealOrder,v=c.tail;c=c.children;var E=At.current,M=(E&2)!==0;if(M?(E=E&1|2,i.flags|=128):E&=1,me(At,E),Jt(e,i,c,o),c=He?O:0,!M&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&o0(e,o,i);else if(e.tag===19)o0(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)e=o.alternate,e!==null&&_c(e)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Sf(i,!1,m,o,v,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(e=m.alternate,e!==null&&_c(e)===null){i.child=m;break}e=m.sibling,m.sibling=o,o=m,m=e}Sf(i,!0,o,null,v,c);break;case"together":Sf(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function ir(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),Zr|=i.lanes,(o&i.childLanes)===0)if(e!==null){if($a(e,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(a(153));if(i.child!==null){for(e=i.child,o=Gn(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=Gn(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function Tf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&dc(e)))}function FS(e,i,o){switch(i.tag){case 3:Ge(i,i.stateNode.containerInfo),Ur(i,Lt,e.memoizedState.cache),Qi();break;case 27:case 5:lt(i);break;case 4:Ge(i,i.stateNode.containerInfo);break;case 10:Ur(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gh(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(qr(i),i.flags|=128,null):(o&i.child.childLanes)!==0?a0(e,i,o):(qr(i),e=ir(e,i,o),e!==null?e.sibling:null);qr(i);break;case 19:var m=(e.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||($a(e,i,o,!1),c=(o&i.childLanes)!==0),m){if(c)return l0(e,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),me(At,At.current),c)break;return null;case 22:return i.lanes=0,e0(e,i,o,i.pendingProps);case 24:Ur(i,Lt,e.memoizedState.cache)}return ir(e,i,o)}function u0(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps)Pt=!0;else{if(!Tf(e,o)&&(i.flags&128)===0)return Pt=!1,FS(e,i,o);Pt=(e.flags&131072)!==0}else Pt=!1,He&&(i.flags&1048576)!==0&&Ue(i,O,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(e=Ys(i.elementType),i.type=e,typeof e=="function")qa(e)?(c=ea(e,c),i.tag=1,i=r0(null,i,e,c,o)):(i.tag=0,i=yf(null,i,e,c,o));else{if(e!=null){var m=e.$$typeof;if(m===Z){i.tag=11,i=Xy(null,i,e,c,o);break e}else if(m===K){i.tag=14,i=Jy(null,i,e,c,o);break e}}throw i=Le(e)||e,Error(a(306,i,""))}}return i;case 0:return yf(e,i,i.type,i.pendingProps,o);case 1:return c=i.type,m=ea(c,i.pendingProps),r0(e,i,c,m,o);case 3:e:{if(Ge(i,i.stateNode.containerInfo),e===null)throw Error(a(387));c=i.pendingProps;var v=i.memoizedState;m=v.element,qh(e,i),wl(i,c,null,o);var E=i.memoizedState;if(c=E.cache,Ur(i,Lt,c),c!==v.cache&&Bh(i,[Lt],o,!0),bl(),c=E.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){i=s0(e,i,c,o);break e}else if(c!==m){m=u(Error(a(424)),i),$s(m),i=s0(e,i,c,o);break e}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xe=Yn(e.firstChild),Ye=i,He=!0,Mi=null,bn=!0,o=ey(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Qi(),c===m){i=ir(e,i,o);break e}Jt(e,i,c,o)}i=i.child}return i;case 26:return Rc(e,i),e===null?(o=xv(i.type,null,i.pendingProps,null))?i.memoizedState=o:He||(o=i.type,e=i.pendingProps,c=Zc(pe.current).createElement(o),c[Ot]=i,c[Wt]=e,Qt(c,o,e),Mt(c),i.stateNode=c):i.memoizedState=xv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return lt(i),e===null&&He&&(c=i.stateNode=yv(i.type,i.pendingProps,pe.current),Ye=i,bn=!0,m=Xe,Jr(i.type)?(ip=m,Xe=Yn(c.firstChild)):Xe=m),Jt(e,i,i.pendingProps.children,o),Rc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&He&&((m=c=Xe)&&(c=b2(c,i.type,i.pendingProps,bn),c!==null?(i.stateNode=c,Ye=i,Xe=Yn(c.firstChild),bn=!1,m=!0):m=!1),m||Li(i)),lt(i),m=i.type,v=i.pendingProps,E=e!==null?e.memoizedProps:null,c=v.children,Jf(m,v)?c=null:E!==null&&Jf(m,E)&&(i.flags|=32),i.memoizedState!==null&&(m=Yh(e,i,DS,null,null,o),Hl._currentValue=m),Rc(e,i),Jt(e,i,c,o),i.child;case 6:return e===null&&He&&((e=o=Xe)&&(o=w2(o,i.pendingProps,bn),o!==null?(i.stateNode=o,Ye=i,Xe=null,e=!0):e=!1),e||Li(i)),null;case 13:return a0(e,i,o);case 4:return Ge(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=Js(i,null,c,o):Jt(e,i,c,o),i.child;case 11:return Xy(e,i,i.type,i.pendingProps,o);case 7:return Jt(e,i,i.pendingProps,o),i.child;case 8:return Jt(e,i,i.pendingProps.children,o),i.child;case 12:return Jt(e,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Ur(i,i.type,c.value),Jt(e,i,c.children,o),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,Gs(i),m=Xt(m),c=c(m),i.flags|=1,Jt(e,i,c,o),i.child;case 14:return Jy(e,i,i.type,i.pendingProps,o);case 15:return Qy(e,i,i.type,i.pendingProps,o);case 19:return l0(e,i,o);case 31:return WS(e,i,o);case 22:return e0(e,i,o,i.pendingProps);case 24:return Gs(i),c=Xt(Lt),e===null?(m=Ih(),m===null&&(m=ct,v=Nh(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=o),m=v),i.memoizedState={parent:c,cache:m},Hh(i),Ur(i,Lt,m)):((e.lanes&o)!==0&&(qh(e,i),wl(i,null,null,o),bl()),m=e.memoizedState,v=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),Ur(i,Lt,c)):(c=v.cache,Ur(i,Lt,c),c!==m.cache&&Bh(i,[Lt],o,!0))),Jt(e,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function rr(e){e.flags|=4}function Ef(e,i,o,c,m){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(m&335544128)===m)if(e.stateNode.complete)e.flags|=8192;else if(D0())e.flags|=8192;else throw Xs=mc,Vh}else e.flags&=-16777217}function c0(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ev(i))if(D0())e.flags|=8192;else throw Xs=mc,Vh}function Mc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Du():536870912,e.lanes|=i,ro|=i)}function Al(e,i){if(!He)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function ft(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,c=0;if(i)for(var m=e.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=c,e.childLanes=o,i}function $S(e,i,o){var c=i.pendingProps;switch(Tt(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return ft(i),null;case 3:return o=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),er(Lt),Ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(hi(i)?rr(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ml())),ft(i),null;case 26:var m=i.type,v=i.memoizedState;return e===null?(rr(i),v!==null?(ft(i),c0(i,v)):(ft(i),Ef(i,m,null,c,o))):v?v!==e.memoizedState?(rr(i),ft(i),c0(i,v)):(ft(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&rr(i),ft(i),Ef(i,m,e,c,o)),null;case 27:if(Gt(i),o=pe.current,m=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&rr(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return ft(i),null}e=G.current,hi(i)?pl(i):(e=yv(m,c,o),i.stateNode=e,rr(i))}return ft(i),null;case 5:if(Gt(i),m=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&rr(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return ft(i),null}if(v=G.current,hi(i))pl(i);else{var E=Zc(pe.current);switch(v){case 1:v=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:v=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":v=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":v=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":v=E.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?E.createElement(m,{is:c.is}):E.createElement(m)}}v[Ot]=i,v[Wt]=c;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)v.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=v;e:switch(Qt(v,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&rr(i)}}return ft(i),Ef(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,o),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&rr(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(a(166));if(e=pe.current,hi(i)){if(e=i.stateNode,o=i.memoizedProps,c=null,m=Ye,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}e[Ot]=i,e=!!(e.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||av(e.nodeValue,o)),e||Li(i,!0)}else e=Zc(e).createTextNode(c),e[Ot]=i,i.stateNode=e}return ft(i),null;case 31:if(o=i.memoizedState,e===null||e.memoizedState!==null){if(c=hi(i),o!==null){if(e===null){if(!c)throw Error(a(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[Ot]=i}else Qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),e=!1}else o=ml(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return i.flags&256?(Pn(i),i):(Pn(i),null);if((i.flags&128)!==0)throw Error(a(558))}return ft(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=hi(i),c!==null&&c.dehydrated!==null){if(e===null){if(!m)throw Error(a(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));m[Ot]=i}else Qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),m=!1}else m=ml(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Pn(i),i):(Pn(i),null)}return Pn(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,e=e!==null&&e.memoizedState!==null,o&&(c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==m&&(c.flags|=2048)),o!==e&&o&&(i.child.flags|=8192),Mc(i,i.updateQueue),ft(i),null);case 4:return Ke(),e===null&&Zf(i.stateNode.containerInfo),ft(i),null;case 10:return er(i.type),ft(i),null;case 19:if(ne(At),c=i.memoizedState,c===null)return ft(i),null;if(m=(i.flags&128)!==0,v=c.rendering,v===null)if(m)Al(c,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(v=_c(e),v!==null){for(i.flags|=128,Al(c,!1),e=v.updateQueue,i.updateQueue=e,Mc(i,e),i.subtreeFlags=0,e=o,o=i.child;o!==null;)dl(o,e),o=o.sibling;return me(At,At.current&1|2),He&&Ae(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&un()>Bc&&(i.flags|=128,m=!0,Al(c,!1),i.lanes=4194304)}else{if(!m)if(e=_c(v),e!==null){if(i.flags|=128,m=!0,e=e.updateQueue,i.updateQueue=e,Mc(i,e),Al(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!He)return ft(i),null}else 2*un()-c.renderingStartTime>Bc&&o!==536870912&&(i.flags|=128,m=!0,Al(c,!1),i.lanes=4194304);c.isBackwards?(v.sibling=i.child,i.child=v):(e=c.last,e!==null?e.sibling=v:i.child=v,c.last=v)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=un(),e.sibling=null,o=At.current,me(At,m?o&1|2:o&1),He&&Ae(i,c.treeForkCount),e):(ft(i),null);case 22:case 23:return Pn(i),Zh(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),o=i.updateQueue,o!==null&&Mc(i,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),e!==null&&ne(Ks),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),er(Lt),ft(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function ZS(e,i){switch(Tt(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return er(Lt),Ke(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Gt(i),null;case 31:if(i.memoizedState!==null){if(Pn(i),i.alternate===null)throw Error(a(340));Qi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Pn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Qi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return ne(At),null;case 4:return Ke(),null;case 10:return er(i.type),null;case 22:case 23:return Pn(i),Zh(),e!==null&&ne(Ks),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return er(Lt),null;case 25:return null;default:return null}}function d0(e,i){switch(Tt(i),i.tag){case 3:er(Lt),Ke();break;case 26:case 27:case 5:Gt(i);break;case 4:Ke();break;case 31:i.memoizedState!==null&&Pn(i);break;case 13:Pn(i);break;case 19:ne(At);break;case 10:er(i.type);break;case 22:case 23:Pn(i),Zh(),e!==null&&ne(Ks);break;case 24:er(Lt)}}function kl(e,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&e)===e){c=void 0;var v=o.create,E=o.inst;c=v(),E.destroy=c}o=o.next}while(o!==m)}}catch(M){it(i,i.return,M)}}function Fr(e,i,o){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var v=m.next;c=v;do{if((c.tag&e)===e){var E=c.inst,M=E.destroy;if(M!==void 0){E.destroy=void 0,m=i;var U=o,X=M;try{X()}catch(se){it(m,U,se)}}}c=c.next}while(c!==v)}}catch(se){it(i,i.return,se)}}function h0(e){var i=e.updateQueue;if(i!==null){var o=e.stateNode;try{ny(i,o)}catch(c){it(e,e.return,c)}}}function f0(e,i,o){o.props=ea(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(c){it(e,i,c)}}function Rl(e,i){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof o=="function"?e.refCleanup=o(c):o.current=c}}catch(m){it(e,i,m)}}function Pi(e,i){var o=e.ref,c=e.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){it(e,i,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){it(e,i,m)}else o.current=null}function p0(e){var i=e.type,o=e.memoizedProps,c=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){it(e,e.return,m)}}function jf(e,i,o){try{var c=e.stateNode;m2(c,e.type,o,i),c[Wt]=i}catch(m){it(e,e.return,m)}}function m0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Jr(e.type)||e.tag===4}function Cf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||m0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Jr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Af(e,i,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(e),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=yn));else if(c!==4&&(c===27&&Jr(e.type)&&(o=e.stateNode,i=null),e=e.child,e!==null))for(Af(e,i,o),e=e.sibling;e!==null;)Af(e,i,o),e=e.sibling}function Lc(e,i,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(c!==4&&(c===27&&Jr(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Lc(e,i,o),e=e.sibling;e!==null;)Lc(e,i,o),e=e.sibling}function g0(e){var i=e.stateNode,o=e.memoizedProps;try{for(var c=e.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Qt(i,c,o),i[Ot]=e,i[Wt]=o}catch(v){it(e,e.return,v)}}var sr=!1,Dt=!1,kf=!1,y0=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function GS(e,i){if(e=e.containerInfo,Yf=ed,e=Ns(e),Ci(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var E=0,M=-1,U=-1,X=0,se=0,ce=e,Q=null;t:for(;;){for(var ee;ce!==o||m!==0&&ce.nodeType!==3||(M=E+m),ce!==v||c!==0&&ce.nodeType!==3||(U=E+c),ce.nodeType===3&&(E+=ce.nodeValue.length),(ee=ce.firstChild)!==null;)Q=ce,ce=ee;for(;;){if(ce===e)break t;if(Q===o&&++X===m&&(M=E),Q===v&&++se===c&&(U=E),(ee=ce.nextSibling)!==null)break;ce=Q,Q=ce.parentNode}ce=ee}o=M===-1||U===-1?null:{start:M,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(Xf={focusedElem:e,selectionRange:o},ed=!1,Zt=i;Zt!==null;)if(i=Zt,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Zt=e;else for(;Zt!==null;){switch(i=Zt,v=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)m=e[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&v!==null){e=void 0,o=i,m=v.memoizedProps,v=v.memoizedState,c=o.stateNode;try{var we=ea(o.type,m);e=c.getSnapshotBeforeUpdate(we,v),c.__reactInternalSnapshotBeforeUpdate=e}catch(Oe){it(o,o.return,Oe)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,o=e.nodeType,o===9)ep(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ep(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=i.sibling,e!==null){e.return=i.return,Zt=e;break}Zt=i.return}}function v0(e,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:or(e,o),c&4&&kl(5,o);break;case 1:if(or(e,o),c&4)if(e=o.stateNode,i===null)try{e.componentDidMount()}catch(E){it(o,o.return,E)}else{var m=ea(o.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(m,i,e.__reactInternalSnapshotBeforeUpdate)}catch(E){it(o,o.return,E)}}c&64&&h0(o),c&512&&Rl(o,o.return);break;case 3:if(or(e,o),c&64&&(e=o.updateQueue,e!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{ny(e,i)}catch(E){it(o,o.return,E)}}break;case 27:i===null&&c&4&&g0(o);case 26:case 5:or(e,o),i===null&&c&4&&p0(o),c&512&&Rl(o,o.return);break;case 12:or(e,o);break;case 31:or(e,o),c&4&&b0(e,o);break;case 13:or(e,o),c&4&&w0(e,o),c&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=i2.bind(null,o),S2(e,o))));break;case 22:if(c=o.memoizedState!==null||sr,!c){i=i!==null&&i.memoizedState!==null||Dt,m=sr;var v=Dt;sr=c,(Dt=i)&&!v?lr(e,o,(o.subtreeFlags&8772)!==0):or(e,o),sr=m,Dt=v}break;case 30:break;default:or(e,o)}}function _0(e){var i=e.alternate;i!==null&&(e.alternate=null,_0(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Zo(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var mt=null,wn=!1;function ar(e,i,o){for(o=o.child;o!==null;)x0(e,i,o),o=o.sibling}function x0(e,i,o){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(xr,o)}catch{}switch(o.tag){case 26:Dt||Pi(o,i),ar(e,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Dt||Pi(o,i);var c=mt,m=wn;Jr(o.type)&&(mt=o.stateNode,wn=!1),ar(e,i,o),Ul(o.stateNode),mt=c,wn=m;break;case 5:Dt||Pi(o,i);case 6:if(c=mt,m=wn,mt=null,ar(e,i,o),mt=c,wn=m,mt!==null)if(wn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(o.stateNode)}catch(v){it(o,i,v)}else try{mt.removeChild(o.stateNode)}catch(v){it(o,i,v)}break;case 18:mt!==null&&(wn?(e=mt,hv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),fo(e)):hv(mt,o.stateNode));break;case 4:c=mt,m=wn,mt=o.stateNode.containerInfo,wn=!0,ar(e,i,o),mt=c,wn=m;break;case 0:case 11:case 14:case 15:Fr(2,o,i),Dt||Fr(4,o,i),ar(e,i,o);break;case 1:Dt||(Pi(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&f0(o,i,c)),ar(e,i,o);break;case 21:ar(e,i,o);break;case 22:Dt=(c=Dt)||o.memoizedState!==null,ar(e,i,o),Dt=c;break;default:ar(e,i,o)}}function b0(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{fo(e)}catch(o){it(i,i.return,o)}}}function w0(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fo(e)}catch(o){it(i,i.return,o)}}function KS(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new y0),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new y0),i;default:throw Error(a(435,e.tag))}}function zc(e,i){var o=KS(e);i.forEach(function(c){if(!o.has(c)){o.add(c);var m=r2.bind(null,e,c);c.then(m,m)}})}function Sn(e,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],v=e,E=i,M=E;e:for(;M!==null;){switch(M.tag){case 27:if(Jr(M.type)){mt=M.stateNode,wn=!1;break e}break;case 5:mt=M.stateNode,wn=!1;break e;case 3:case 4:mt=M.stateNode.containerInfo,wn=!0;break e}M=M.return}if(mt===null)throw Error(a(160));x0(v,E,m),mt=null,wn=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)S0(i,e),i=i.sibling}var pi=null;function S0(e,i){var o=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Sn(i,e),Tn(e),c&4&&(Fr(3,e,e.return),kl(3,e),Fr(5,e,e.return));break;case 1:Sn(i,e),Tn(e),c&512&&(Dt||o===null||Pi(o,o.return)),c&64&&sr&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=pi;if(Sn(i,e),Tn(e),c&512&&(Dt||o===null||Pi(o,o.return)),c&4){var v=o!==null?o.memoizedState:null;if(c=e.memoizedState,o===null)if(c===null)if(e.stateNode===null){e:{c=e.type,o=e.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":v=m.getElementsByTagName("title")[0],(!v||v[ws]||v[Ot]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(c),m.head.insertBefore(v,m.querySelector("head > title"))),Qt(v,c,o),v[Ot]=e,Mt(v),c=v;break e;case"link":var E=Sv("link","href",m).get(c+(o.href||""));if(E){for(var M=0;M<E.length;M++)if(v=E[M],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(M,1);break t}}v=m.createElement(c),Qt(v,c,o),m.head.appendChild(v);break;case"meta":if(E=Sv("meta","content",m).get(c+(o.content||""))){for(M=0;M<E.length;M++)if(v=E[M],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(M,1);break t}}v=m.createElement(c),Qt(v,c,o),m.head.appendChild(v);break;default:throw Error(a(468,c))}v[Ot]=e,Mt(v),c=v}e.stateNode=c}else Tv(m,e.type,e.stateNode);else e.stateNode=wv(m,c,e.memoizedProps);else v!==c?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,c===null?Tv(m,e.type,e.stateNode):wv(m,c,e.memoizedProps)):c===null&&e.stateNode!==null&&jf(e,e.memoizedProps,o.memoizedProps)}break;case 27:Sn(i,e),Tn(e),c&512&&(Dt||o===null||Pi(o,o.return)),o!==null&&c&4&&jf(e,e.memoizedProps,o.memoizedProps);break;case 5:if(Sn(i,e),Tn(e),c&512&&(Dt||o===null||Pi(o,o.return)),e.flags&32){m=e.stateNode;try{Vn(m,"")}catch(we){it(e,e.return,we)}}c&4&&e.stateNode!=null&&(m=e.memoizedProps,jf(e,m,o!==null?o.memoizedProps:m)),c&1024&&(kf=!0);break;case 6:if(Sn(i,e),Tn(e),c&4){if(e.stateNode===null)throw Error(a(162));c=e.memoizedProps,o=e.stateNode;try{o.nodeValue=c}catch(we){it(e,e.return,we)}}break;case 3:if(Yc=null,m=pi,pi=Gc(i.containerInfo),Sn(i,e),pi=m,Tn(e),c&4&&o!==null&&o.memoizedState.isDehydrated)try{fo(i.containerInfo)}catch(we){it(e,e.return,we)}kf&&(kf=!1,T0(e));break;case 4:c=pi,pi=Gc(e.stateNode.containerInfo),Sn(i,e),Tn(e),pi=c;break;case 12:Sn(i,e),Tn(e);break;case 31:Sn(i,e),Tn(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,zc(e,c)));break;case 13:Sn(i,e),Tn(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Dc=un()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,zc(e,c)));break;case 22:m=e.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,X=sr,se=Dt;if(sr=X||m,Dt=se||U,Sn(i,e),Dt=se,sr=X,Tn(e),c&8192)e:for(i=e.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||U||sr||Dt||ta(e)),o=null,i=e;;){if(i.tag===5||i.tag===26){if(o===null){U=o=i;try{if(v=U.stateNode,m)E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{M=U.stateNode;var ce=U.memoizedProps.style,Q=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;M.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(we){it(U,U.return,we)}}}else if(i.tag===6){if(o===null){U=i;try{U.stateNode.nodeValue=m?"":U.memoizedProps}catch(we){it(U,U.return,we)}}}else if(i.tag===18){if(o===null){U=i;try{var ee=U.stateNode;m?fv(ee,!0):fv(U.stateNode,!1)}catch(we){it(U,U.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,zc(e,o))));break;case 19:Sn(i,e),Tn(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,zc(e,c)));break;case 30:break;case 21:break;default:Sn(i,e),Tn(e)}}function Tn(e){var i=e.flags;if(i&2){try{for(var o,c=e.return;c!==null;){if(m0(c)){o=c;break}c=c.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var m=o.stateNode,v=Cf(e);Lc(e,v,m);break;case 5:var E=o.stateNode;o.flags&32&&(Vn(E,""),o.flags&=-33);var M=Cf(e);Lc(e,M,E);break;case 3:case 4:var U=o.stateNode.containerInfo,X=Cf(e);Af(e,X,U);break;default:throw Error(a(161))}}catch(se){it(e,e.return,se)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function T0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;T0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function or(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)v0(e,i.alternate,i),i=i.sibling}function ta(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Fr(4,i,i.return),ta(i);break;case 1:Pi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&f0(i,i.return,o),ta(i);break;case 27:Ul(i.stateNode);case 26:case 5:Pi(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}e=e.sibling}}function lr(e,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=e,v=i,E=v.flags;switch(v.tag){case 0:case 11:case 15:lr(m,v,o),kl(4,v);break;case 1:if(lr(m,v,o),c=v,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){it(c,c.return,X)}if(c=v,m=c.updateQueue,m!==null){var M=c.stateNode;try{var U=m.shared.hiddenCallbacks;if(U!==null)for(m.shared.hiddenCallbacks=null,m=0;m<U.length;m++)ty(U[m],M)}catch(X){it(c,c.return,X)}}o&&E&64&&h0(v),Rl(v,v.return);break;case 27:g0(v);case 26:case 5:lr(m,v,o),o&&c===null&&E&4&&p0(v),Rl(v,v.return);break;case 12:lr(m,v,o);break;case 31:lr(m,v,o),o&&E&4&&b0(m,v);break;case 13:lr(m,v,o),o&&E&4&&w0(m,v);break;case 22:v.memoizedState===null&&lr(m,v,o),Rl(v,v.return);break;case 30:break;default:lr(m,v,o)}i=i.sibling}}function Rf(e,i){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&gl(o))}function Of(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&gl(e))}function mi(e,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)E0(e,i,o,c),i=i.sibling}function E0(e,i,o,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:mi(e,i,o,c),m&2048&&kl(9,i);break;case 1:mi(e,i,o,c);break;case 3:mi(e,i,o,c),m&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&gl(e)));break;case 12:if(m&2048){mi(e,i,o,c),e=i.stateNode;try{var v=i.memoizedProps,E=v.id,M=v.onPostCommit;typeof M=="function"&&M(E,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){it(i,i.return,U)}}else mi(e,i,o,c);break;case 31:mi(e,i,o,c);break;case 13:mi(e,i,o,c);break;case 23:break;case 22:v=i.stateNode,E=i.alternate,i.memoizedState!==null?v._visibility&2?mi(e,i,o,c):Ol(e,i):v._visibility&2?mi(e,i,o,c):(v._visibility|=2,to(e,i,o,c,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Rf(E,i);break;case 24:mi(e,i,o,c),m&2048&&Of(i.alternate,i);break;default:mi(e,i,o,c)}}function to(e,i,o,c,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var v=e,E=i,M=o,U=c,X=E.flags;switch(E.tag){case 0:case 11:case 15:to(v,E,M,U,m),kl(8,E);break;case 23:break;case 22:var se=E.stateNode;E.memoizedState!==null?se._visibility&2?to(v,E,M,U,m):Ol(v,E):(se._visibility|=2,to(v,E,M,U,m)),m&&X&2048&&Rf(E.alternate,E);break;case 24:to(v,E,M,U,m),m&&X&2048&&Of(E.alternate,E);break;default:to(v,E,M,U,m)}i=i.sibling}}function Ol(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=e,c=i,m=c.flags;switch(c.tag){case 22:Ol(o,c),m&2048&&Rf(c.alternate,c);break;case 24:Ol(o,c),m&2048&&Of(c.alternate,c);break;default:Ol(o,c)}i=i.sibling}}var Ml=8192;function no(e,i,o){if(e.subtreeFlags&Ml)for(e=e.child;e!==null;)j0(e,i,o),e=e.sibling}function j0(e,i,o){switch(e.tag){case 26:no(e,i,o),e.flags&Ml&&e.memoizedState!==null&&P2(o,pi,e.memoizedState,e.memoizedProps);break;case 5:no(e,i,o);break;case 3:case 4:var c=pi;pi=Gc(e.stateNode.containerInfo),no(e,i,o),pi=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Ml,Ml=16777216,no(e,i,o),Ml=c):no(e,i,o));break;default:no(e,i,o)}}function C0(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ll(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Zt=c,k0(c,e)}C0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)A0(e),e=e.sibling}function A0(e){switch(e.tag){case 0:case 11:case 15:Ll(e),e.flags&2048&&Fr(9,e,e.return);break;case 3:Ll(e);break;case 12:Ll(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Pc(e)):Ll(e);break;default:Ll(e)}}function Pc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Zt=c,k0(c,e)}C0(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Fr(8,i,i.return),Pc(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Pc(i));break;default:Pc(i)}e=e.sibling}}function k0(e,i){for(;Zt!==null;){var o=Zt;switch(o.tag){case 0:case 11:case 15:Fr(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:gl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Zt=c;else e:for(o=e;Zt!==null;){c=Zt;var m=c.sibling,v=c.return;if(_0(c),c===o){Zt=null;break e}if(m!==null){m.return=v,Zt=m;break e}Zt=v}}}var YS={getCacheForType:function(e){var i=Xt(Lt),o=i.data.get(e);return o===void 0&&(o=e(),i.data.set(e,o)),o},cacheSignal:function(){return Xt(Lt).controller.signal}},XS=typeof WeakMap=="function"?WeakMap:Map,et=0,ct=null,qe=null,$e=0,nt=0,Dn=null,$r=!1,io=!1,Mf=!1,ur=0,jt=0,Zr=0,na=0,Lf=0,Bn=0,ro=0,zl=null,En=null,zf=!1,Dc=0,R0=0,Bc=1/0,Nc=null,Gr=null,Ht=0,Kr=null,so=null,cr=0,Pf=0,Df=null,O0=null,Pl=0,Bf=null;function Nn(){return(et&2)!==0&&$e!==0?$e&-$e:H.T!==null?qf():Fo()}function M0(){if(Bn===0)if(($e&536870912)===0||He){var e=_s;_s<<=1,(_s&3932160)===0&&(_s=262144),Bn=e}else Bn=536870912;return e=zn.current,e!==null&&(e.flags|=32),Bn}function jn(e,i,o){(e===ct&&(nt===2||nt===9)||e.cancelPendingCommit!==null)&&(ao(e,0),Yr(e,$e,Bn,!1)),qi(e,o),((et&2)===0||e!==ct)&&(e===ct&&((et&2)===0&&(na|=o),jt===4&&Yr(e,$e,Bn,!1)),Di(e))}function L0(e,i,o){if((et&6)!==0)throw Error(a(327));var c=!o&&(i&127)===0&&(i&e.expiredLanes)===0||bs(e,i),m=c?e2(e,i):Uf(e,i,!0),v=c;do{if(m===0){io&&!c&&Yr(e,i,0,!1);break}else{if(o=e.current.alternate,v&&!JS(o)){m=Uf(e,i,!1),v=!1;continue}if(m===2){if(v=i,e.errorRecoveryDisabledLanes&v)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var M=e;m=zl;var U=M.current.memoizedState.isDehydrated;if(U&&(ao(M,E).flags|=256),E=Uf(M,E,!1),E!==2){if(Mf&&!U){M.errorRecoveryDisabledLanes|=v,na|=v,m=4;break e}v=En,En=m,v!==null&&(En===null?En=v:En.push.apply(En,v))}m=E}if(v=!1,m!==2)continue}}if(m===1){ao(e,0),Yr(e,i,0,!0);break}e:{switch(c=e,v=m,v){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Yr(c,i,Bn,!$r);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(m=Dc+300-un(),10<m)){if(Yr(c,i,Bn,!$r),ja(c,0,!0)!==0)break e;cr=i,c.timeoutHandle=cv(z0.bind(null,c,o,En,Nc,zf,i,Bn,na,ro,$r,v,"Throttled",-0,0),m);break e}z0(c,o,En,Nc,zf,i,Bn,na,ro,$r,v,null,-0,0)}}break}while(!0);Di(e)}function z0(e,i,o,c,m,v,E,M,U,X,se,ce,Q,ee){if(e.timeoutHandle=-1,ce=i.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yn},j0(i,v,ce);var we=(v&62914560)===v?Dc-un():(v&4194048)===v?R0-un():0;if(we=D2(ce,we),we!==null){cr=v,e.cancelPendingCommit=we(H0.bind(null,e,i,v,o,c,m,E,M,U,se,ce,null,Q,ee)),Yr(e,v,E,!X);return}}H0(e,i,v,o,c,m,E,M,U)}function JS(e){for(var i=e;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],v=m.getSnapshot;m=m.value;try{if(!Ft(v(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Yr(e,i,o,c){i&=~Lf,i&=~na,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var m=i;0<m;){var v=31-cn(m),E=1<<v;c[v]=-1,m&=~E}o!==0&&Bu(e,o,i)}function Uc(){return(et&6)===0?(Dl(0),!1):!0}function Nf(){if(qe!==null){if(nt===0)var e=qe.return;else e=qe,fi=zi=null,Qh(e),Ya=null,vl=0,e=qe;for(;e!==null;)d0(e.alternate,e),e=e.return;qe=null}}function ao(e,i){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,v2(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),cr=0,Nf(),ct=e,qe=o=Gn(e.current,null),$e=i,nt=0,Dn=null,$r=!1,io=bs(e,i),Mf=!1,ro=Bn=Lf=na=Zr=jt=0,En=zl=null,zf=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var m=31-cn(c),v=1<<m;i|=e[m],c&=~v}return ur=i,qs(),o}function P0(e,i){Ne=null,H.H=jl,i===Ka||i===pc?(i=Xg(),nt=3):i===Vh?(i=Xg(),nt=4):nt=i===gf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Dn=i,qe===null&&(jt=1,Ac(e,u(i,e.current)))}function D0(){var e=zn.current;return e===null?!0:($e&4194048)===$e?Kn===null:($e&62914560)===$e||($e&536870912)!==0?e===Kn:!1}function B0(){var e=H.H;return H.H=jl,e===null?jl:e}function N0(){var e=H.A;return H.A=YS,e}function Ic(){jt=4,$r||($e&4194048)!==$e&&zn.current!==null||(io=!0),(Zr&134217727)===0&&(na&134217727)===0||ct===null||Yr(ct,$e,Bn,!1)}function Uf(e,i,o){var c=et;et|=2;var m=B0(),v=N0();(ct!==e||$e!==i)&&(Nc=null,ao(e,i)),i=!1;var E=jt;e:do try{if(nt!==0&&qe!==null){var M=qe,U=Dn;switch(nt){case 8:Nf(),E=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(i=!0);var X=nt;if(nt=0,Dn=null,oo(e,M,U,X),o&&io){E=0;break e}break;default:X=nt,nt=0,Dn=null,oo(e,M,U,X)}}QS(),E=jt;break}catch(se){P0(e,se)}while(!0);return i&&e.shellSuspendCounter++,fi=zi=null,et=c,H.H=m,H.A=v,qe===null&&(ct=null,$e=0,qs()),E}function QS(){for(;qe!==null;)U0(qe)}function e2(e,i){var o=et;et|=2;var c=B0(),m=N0();ct!==e||$e!==i?(Nc=null,Bc=un()+500,ao(e,i)):io=bs(e,i);e:do try{if(nt!==0&&qe!==null){i=qe;var v=Dn;t:switch(nt){case 1:nt=0,Dn=null,oo(e,i,v,1);break;case 2:case 9:if(Kg(v)){nt=0,Dn=null,I0(i);break}i=function(){nt!==2&&nt!==9||ct!==e||(nt=7),Di(e)},v.then(i,i);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Kg(v)?(nt=0,Dn=null,I0(i)):(nt=0,Dn=null,oo(e,i,v,7));break;case 5:var E=null;switch(qe.tag){case 26:E=qe.memoizedState;case 5:case 27:var M=qe;if(E?Ev(E):M.stateNode.complete){nt=0,Dn=null;var U=M.sibling;if(U!==null)qe=U;else{var X=M.return;X!==null?(qe=X,Vc(X)):qe=null}break t}}nt=0,Dn=null,oo(e,i,v,5);break;case 6:nt=0,Dn=null,oo(e,i,v,6);break;case 8:Nf(),jt=6;break e;default:throw Error(a(462))}}t2();break}catch(se){P0(e,se)}while(!0);return fi=zi=null,H.H=c,H.A=m,et=o,qe!==null?0:(ct=null,$e=0,qs(),jt)}function t2(){for(;qe!==null&&!Lu();)U0(qe)}function U0(e){var i=u0(e.alternate,e,ur);e.memoizedProps=e.pendingProps,i===null?Vc(e):qe=i}function I0(e){var i=e,o=i.alternate;switch(i.tag){case 15:case 0:i=i0(o,i,i.pendingProps,i.type,void 0,$e);break;case 11:i=i0(o,i,i.pendingProps,i.type.render,i.ref,$e);break;case 5:Qh(i);default:d0(o,i),i=qe=dl(i,ur),i=u0(o,i,ur)}e.memoizedProps=e.pendingProps,i===null?Vc(e):qe=i}function oo(e,i,o,c){fi=zi=null,Qh(i),Ya=null,vl=0;var m=i.return;try{if(qS(e,m,i,o,$e)){jt=1,Ac(e,u(o,e.current)),qe=null;return}}catch(v){if(m!==null)throw qe=m,v;jt=1,Ac(e,u(o,e.current)),qe=null;return}i.flags&32768?(He||c===1?e=!0:io||($e&536870912)!==0?e=!1:($r=e=!0,(c===2||c===9||c===3||c===6)&&(c=zn.current,c!==null&&c.tag===13&&(c.flags|=16384))),V0(i,e)):Vc(i)}function Vc(e){var i=e;do{if((i.flags&32768)!==0){V0(i,$r);return}e=i.return;var o=$S(i.alternate,i,ur);if(o!==null){qe=o;return}if(i=i.sibling,i!==null){qe=i;return}qe=i=e}while(i!==null);jt===0&&(jt=5)}function V0(e,i){do{var o=ZS(e.alternate,e);if(o!==null){o.flags&=32767,qe=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(e=e.sibling,e!==null)){qe=e;return}qe=e=o}while(e!==null);jt=6,qe=null}function H0(e,i,o,c,m,v,E,M,U){e.cancelPendingCommit=null;do Hc();while(Ht!==0);if((et&6)!==0)throw Error(a(327));if(i!==null){if(i===e.current)throw Error(a(177));if(v=i.lanes|i.childLanes,v|=Ha,xh(e,o,v,E,M,U),e===ct&&(qe=ct=null,$e=0),so=i,Kr=e,cr=o,Pf=v,Df=m,O0=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s2(gs,function(){return Z0(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,m=re.p,re.p=2,E=et,et|=4;try{GS(e,i,o)}finally{et=E,re.p=m,H.T=c}}Ht=1,q0(),W0(),F0()}}function q0(){if(Ht===1){Ht=0;var e=Kr,i=so,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var c=re.p;re.p=2;var m=et;et|=4;try{S0(i,e);var v=Xf,E=Ns(e.containerInfo),M=v.focusedElem,U=v.selectionRange;if(E!==M&&M&&M.ownerDocument&&Na(M.ownerDocument.documentElement,M)){if(U!==null&&Ci(M)){var X=U.start,se=U.end;if(se===void 0&&(se=X),"selectionStart"in M)M.selectionStart=X,M.selectionEnd=Math.min(se,M.value.length);else{var ce=M.ownerDocument||document,Q=ce&&ce.defaultView||window;if(Q.getSelection){var ee=Q.getSelection(),we=M.textContent.length,Oe=Math.min(U.start,we),ot=U.end===void 0?Oe:Math.min(U.end,we);!ee.extend&&Oe>ot&&(E=ot,ot=Oe,Oe=E);var q=Bs(M,Oe),I=Bs(M,ot);if(q&&I&&(ee.rangeCount!==1||ee.anchorNode!==q.node||ee.anchorOffset!==q.offset||ee.focusNode!==I.node||ee.focusOffset!==I.offset)){var Y=ce.createRange();Y.setStart(q.node,q.offset),ee.removeAllRanges(),Oe>ot?(ee.addRange(Y),ee.extend(I.node,I.offset)):(Y.setEnd(I.node,I.offset),ee.addRange(Y))}}}}for(ce=[],ee=M;ee=ee.parentNode;)ee.nodeType===1&&ce.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ce.length;M++){var le=ce[M];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}ed=!!Yf,Xf=Yf=null}finally{et=m,re.p=c,H.T=o}}e.current=i,Ht=2}}function W0(){if(Ht===2){Ht=0;var e=Kr,i=so,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var c=re.p;re.p=2;var m=et;et|=4;try{v0(e,i.alternate,i)}finally{et=m,re.p=c,H.T=o}}Ht=3}}function F0(){if(Ht===4||Ht===3){Ht=0,zu();var e=Kr,i=so,o=cr,c=O0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ht=5:(Ht=0,so=Kr=null,$0(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(Gr=null),je(o),i=i.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(xr,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=H.T,m=re.p,re.p=2,H.T=null;try{for(var v=e.onRecoverableError,E=0;E<c.length;E++){var M=c[E];v(M.value,{componentStack:M.stack})}}finally{H.T=i,re.p=m}}(cr&3)!==0&&Hc(),Di(e),m=e.pendingLanes,(o&261930)!==0&&(m&42)!==0?e===Bf?Pl++:(Pl=0,Bf=e):Pl=0,Dl(0)}}function $0(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,gl(i)))}function Hc(){return q0(),W0(),F0(),Z0()}function Z0(){if(Ht!==5)return!1;var e=Kr,i=Pf;Pf=0;var o=je(cr),c=H.T,m=re.p;try{re.p=32>o?32:o,H.T=null,o=Df,Df=null;var v=Kr,E=cr;if(Ht=0,so=Kr=null,cr=0,(et&6)!==0)throw Error(a(331));var M=et;if(et|=4,A0(v.current),E0(v,v.current,E,o),et=M,Dl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(xr,v)}catch{}return!0}finally{re.p=m,H.T=c,$0(e,i)}}function G0(e,i,o){i=u(o,i),i=mf(e.stateNode,i,2),e=Hr(e,i,2),e!==null&&(qi(e,2),Di(e))}function it(e,i,o){if(e.tag===3)G0(e,e,o);else for(;i!==null;){if(i.tag===3){G0(i,e,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gr===null||!Gr.has(c))){e=u(o,e),o=Ky(2),c=Hr(i,o,2),c!==null&&(Yy(o,c,i,e),qi(c,2),Di(c));break}}i=i.return}}function If(e,i,o){var c=e.pingCache;if(c===null){c=e.pingCache=new XS;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(o)||(Mf=!0,m.add(o),e=n2.bind(null,e,i,o),i.then(e,e))}function n2(e,i,o){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,ct===e&&($e&o)===o&&(jt===4||jt===3&&($e&62914560)===$e&&300>un()-Dc?(et&2)===0&&ao(e,0):Lf|=o,ro===$e&&(ro=0)),Di(e)}function K0(e,i){i===0&&(i=Du()),e=Zn(e,i),e!==null&&(qi(e,i),Di(e))}function i2(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),K0(e,o)}function r2(e,i){var o=0;switch(e.tag){case 31:case 13:var c=e.stateNode,m=e.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(i),K0(e,o)}function s2(e,i){return Ta(e,i)}var qc=null,lo=null,Vf=!1,Wc=!1,Hf=!1,Xr=0;function Di(e){e!==lo&&e.next===null&&(lo===null?qc=lo=e:lo=lo.next=e),Wc=!0,Vf||(Vf=!0,o2())}function Dl(e,i){if(!Hf&&Wc){Hf=!0;do for(var o=!1,c=qc;c!==null;){if(e!==0){var m=c.pendingLanes;if(m===0)var v=0;else{var E=c.suspendedLanes,M=c.pingedLanes;v=(1<<31-cn(42|e)+1)-1,v&=m&~(E&~M),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,Q0(c,v))}else v=$e,v=ja(c,c===ct?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||bs(c,v)||(o=!0,Q0(c,v));c=c.next}while(o);Hf=!1}}function a2(){Y0()}function Y0(){Wc=Vf=!1;var e=0;Xr!==0&&y2()&&(e=Xr);for(var i=un(),o=null,c=qc;c!==null;){var m=c.next,v=X0(c,i);v===0?(c.next=null,o===null?qc=m:o.next=m,m===null&&(lo=o)):(o=c,(e!==0||(v&3)!==0)&&(Wc=!0)),c=m}Ht!==0&&Ht!==5||Dl(e),Xr!==0&&(Xr=0)}function X0(e,i){for(var o=e.suspendedLanes,c=e.pingedLanes,m=e.expirationTimes,v=e.pendingLanes&-62914561;0<v;){var E=31-cn(v),M=1<<E,U=m[E];U===-1?((M&o)===0||(M&c)!==0)&&(m[E]=_h(M,i)):U<=i&&(e.expiredLanes|=M),v&=~M}if(i=ct,o=$e,o=ja(e,e===i?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,o===0||e===i&&(nt===2||nt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&ms(c),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||bs(e,o)){if(i=o&-o,i===e.callbackPriority)return i;switch(c!==null&&ms(c),je(o)){case 2:case 8:o=Ho;break;case 32:o=gs;break;case 268435456:o=qo;break;default:o=gs}return c=J0.bind(null,e),o=Ta(o,c),e.callbackPriority=i,e.callbackNode=o,i}return c!==null&&c!==null&&ms(c),e.callbackPriority=2,e.callbackNode=null,2}function J0(e,i){if(Ht!==0&&Ht!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Hc()&&e.callbackNode!==o)return null;var c=$e;return c=ja(e,e===ct?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(L0(e,c,i),X0(e,un()),e.callbackNode!=null&&e.callbackNode===o?J0.bind(null,e):null)}function Q0(e,i){if(Hc())return null;L0(e,i,!0)}function o2(){_2(function(){(et&6)!==0?Ta(Ea,a2):Y0()})}function qf(){if(Xr===0){var e=Za;e===0&&(e=vs,vs<<=1,(vs&261888)===0&&(vs=256)),Xr=e}return Xr}function ev(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:jr(""+e)}function tv(e,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,e.id&&o.setAttribute("form",e.id),i.parentNode.insertBefore(o,i),e=new FormData(e),o.parentNode.removeChild(o),e}function l2(e,i,o,c,m){if(i==="submit"&&o&&o.stateNode===m){var v=ev((m[Wt]||null).action),E=c.submitter;E&&(i=(i=E[Wt]||null)?ev(i.formAction):E.getAttribute("formAction"),i!==null&&(v=i,E=null));var M=new Oa("action","action",null,c,m);e.push({event:M,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Xr!==0){var U=E?tv(m,E):new FormData(m);uf(o,{pending:!0,data:U,method:m.method,action:v},null,U)}}else typeof v=="function"&&(M.preventDefault(),U=E?tv(m,E):new FormData(m),uf(o,{pending:!0,data:U,method:m.method,action:v},v,U))},currentTarget:m}]})}}for(var Wf=0;Wf<Ri.length;Wf++){var Ff=Ri[Wf],u2=Ff.toLowerCase(),c2=Ff[0].toUpperCase()+Ff.slice(1);_n(u2,"on"+c2)}_n(Is,"onAnimationEnd"),_n(lc,"onAnimationIteration"),_n(Vs,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(Lh,"onTransitionRun"),_n(uc,"onTransitionStart"),_n(zh,"onTransitionCancel"),_n(Br,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function nv(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var c=e[o],m=c.event;c=c.listeners;e:{var v=void 0;if(i)for(var E=c.length-1;0<=E;E--){var M=c[E],U=M.instance,X=M.currentTarget;if(M=M.listener,U!==v&&m.isPropagationStopped())break e;v=M,m.currentTarget=X;try{v(m)}catch(se){Hs(se)}m.currentTarget=null,v=U}else for(E=0;E<c.length;E++){if(M=c[E],U=M.instance,X=M.currentTarget,M=M.listener,U!==v&&m.isPropagationStopped())break e;v=M,m.currentTarget=X;try{v(m)}catch(se){Hs(se)}m.currentTarget=null,v=U}}}}function We(e,i){var o=i[bi];o===void 0&&(o=i[bi]=new Set);var c=e+"__bubble";o.has(c)||(iv(i,e,2,!1),o.add(c))}function $f(e,i,o){var c=0;i&&(c|=4),iv(o,e,c,i)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function Zf(e){if(!e[Fc]){e[Fc]=!0,Hu.forEach(function(o){o!=="selectionchange"&&(d2.has(o)||$f(o,!1,e),$f(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Fc]||(i[Fc]=!0,$f("selectionchange",!1,i))}}function iv(e,i,o,c){switch(Mv(i)){case 2:var m=U2;break;case 8:m=I2;break;default:m=lp}o=m.bind(null,i,o,e),m=void 0,!As||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?e.addEventListener(i,o,{capture:!0,passive:m}):e.addEventListener(i,o,!0):m!==void 0?e.addEventListener(i,o,{passive:m}):e.addEventListener(i,o,!1)}function Gf(e,i,o,c,m){var v=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var M=c.stateNode.containerInfo;if(M===m)break;if(E===4)for(E=c.return;E!==null;){var U=E.tag;if((U===3||U===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;M!==null;){if(E=Fi(M),E===null)return;if(U=E.tag,U===5||U===6||U===26||U===27){c=v=E;continue e}M=M.parentNode}}c=c.return}el(function(){var X=v,se=Cs(o),ce=[];e:{var Q=cc.get(e);if(Q!==void 0){var ee=Oa,we=e;switch(e){case"keypress":if(ks(o)===0)break e;case"keydown":case"keyup":ee=Yu;break;case"focusin":we="focus",ee=il;break;case"focusout":we="blur",ee=il;break;case"beforeblur":case"afterblur":ee=il;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Ch;break;case Is:case lc:case Vs:ee=rl;break;case Br:ee=Qu;break;case"scroll":case"scrollend":ee=Fe;break;case"wheel":ee=Yi;break;case"copy":case"cut":case"paste":ee=qn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Xu;break;case"toggle":case"beforetoggle":ee=Ms}var Oe=(i&4)!==0,ot=!Oe&&(e==="scroll"||e==="scrollend"),q=Oe?Q!==null?Q+"Capture":null:Q;Oe=[];for(var I=X,Y;I!==null;){var le=I;if(Y=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Y===null||q===null||(le=Gi(I,q),le!=null&&Oe.push(Nl(I,le,Y))),ot)break;I=I.return}0<Oe.length&&(Q=new ee(Q,we,null,o,se),ce.push({event:Q,listeners:Oe}))}}if((i&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",Q&&o!==Ra&&(we=o.relatedTarget||o.fromElement)&&(Fi(we)||we[Wi]))break e;if((ee||Q)&&(Q=se.window===se?se:(Q=se.ownerDocument)?Q.defaultView||Q.parentWindow:window,ee?(we=o.relatedTarget||o.toElement,ee=X,we=we?Fi(we):null,we!==null&&(ot=d(we),Oe=we.tag,we!==ot||Oe!==5&&Oe!==27&&Oe!==6)&&(we=null)):(ee=null,we=X),ee!==we)){if(Oe=Fu,le="onMouseLeave",q="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(Oe=Xu,le="onPointerLeave",q="onPointerEnter",I="pointer"),ot=ee==null?Q:wi(ee),Y=we==null?Q:wi(we),Q=new Oe(le,I+"leave",ee,o,se),Q.target=ot,Q.relatedTarget=Y,le=null,Fi(se)===X&&(Oe=new Oe(q,I+"enter",we,o,se),Oe.target=Y,Oe.relatedTarget=ot,le=Oe),ot=le,ee&&we)t:{for(Oe=h2,q=ee,I=we,Y=0,le=q;le;le=Oe(le))Y++;le=0;for(var Re=I;Re;Re=Oe(Re))le++;for(;0<Y-le;)q=Oe(q),Y--;for(;0<le-Y;)I=Oe(I),le--;for(;Y--;){if(q===I||I!==null&&q===I.alternate){Oe=q;break t}q=Oe(q),I=Oe(I)}Oe=null}else Oe=null;ee!==null&&rv(ce,Q,ee,Oe,!1),we!==null&&ot!==null&&rv(ce,ot,we,Oe,!0)}}e:{if(Q=X?wi(X):window,ee=Q.nodeName&&Q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Q.type==="file")var Je=Ds;else if(Wn(Q))if(ic)Je=Mh;else{Je=Oh;var Ee=ci}else ee=Q.nodeName,!ee||ee.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?X&&js(X.elementType)&&(Je=Ds):Je=Lr;if(Je&&(Je=Je(e,X))){nc(ce,Je,o,se);break e}Ee&&Ee(e,Q,X),e==="focusout"&&X&&Q.type==="number"&&X.memoizedProps.value!=null&&oi(Q,"number",Q.value)}switch(Ee=X?wi(X):window,e){case"focusin":(Wn(Ee)||Ee.contentEditable==="true")&&(Ai=Ee,Ia=X,Us=null);break;case"focusout":Us=Ia=Ai=null;break;case"mousedown":Pr=!0;break;case"contextmenu":case"mouseup":case"dragend":Pr=!1,ac(ce,o,se);break;case"selectionchange":if(Ua)break;case"keydown":case"keyup":ac(ce,o,se)}var Ie;if(La)e:{switch(e){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Rr?tc(e,o)&&(Ze="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Ze="onCompositionStart");Ze&&(za&&o.locale!=="ko"&&(Rr||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Rr&&(Ie=Ei()):(Hn=se,Ki="value"in Hn?Hn.value:Hn.textContent,Rr=!0)),Ee=$c(X,Ze),0<Ee.length&&(Ze=new sl(Ze,e,null,o,se),ce.push({event:Ze,listeners:Ee}),Ie?Ze.data=Ie:(Ie=ul(o),Ie!==null&&(Ze.data=Ie)))),(Ie=kh?Ln(e,o):Or(e,o))&&(Ze=$c(X,"onBeforeInput"),0<Ze.length&&(Ee=new sl("onBeforeInput","beforeinput",null,o,se),ce.push({event:Ee,listeners:Ze}),Ee.data=Ie)),l2(ce,e,X,o,se)}nv(ce,i)})}function Nl(e,i,o){return{instance:e,listener:i,currentTarget:o}}function $c(e,i){for(var o=i+"Capture",c=[];e!==null;){var m=e,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=Gi(e,o),m!=null&&c.unshift(Nl(e,m,v)),m=Gi(e,i),m!=null&&c.push(Nl(e,m,v))),e.tag===3)return c;e=e.return}return[]}function h2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function rv(e,i,o,c,m){for(var v=i._reactName,E=[];o!==null&&o!==c;){var M=o,U=M.alternate,X=M.stateNode;if(M=M.tag,U!==null&&U===c)break;M!==5&&M!==26&&M!==27||X===null||(U=X,m?(X=Gi(o,v),X!=null&&E.unshift(Nl(o,X,U))):m||(X=Gi(o,v),X!=null&&E.push(Nl(o,X,U)))),o=o.return}E.length!==0&&e.push({event:i,listeners:E})}var f2=/\r\n?/g,p2=/\u0000|\uFFFD/g;function sv(e){return(typeof e=="string"?e:""+e).replace(f2,`
`).replace(p2,"")}function av(e,i){return i=sv(i),sv(e)===i}function at(e,i,o,c,m,v){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Vn(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Vn(e,""+c);break;case"className":rt(e,"class",c);break;case"tabIndex":rt(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,o,c);break;case"style":Aa(e,c,v);break;case"data":if(i!=="object"){rt(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){e.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(o);break}c=jr(""+c),e.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(i!=="input"&&at(e,i,"name",m.name,m,null),at(e,i,"formEncType",m.formEncType,m,null),at(e,i,"formMethod",m.formMethod,m,null),at(e,i,"formTarget",m.formTarget,m,null)):(at(e,i,"encType",m.encType,m,null),at(e,i,"method",m.method,m,null),at(e,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(o);break}c=jr(""+c),e.setAttribute(o,c);break;case"onClick":c!=null&&(e.onclick=yn);break;case"onScroll":c!=null&&We("scroll",e);break;case"onScrollEnd":c!=null&&We("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}o=jr(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,""+c):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":c===!0?e.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,c):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(o,c):e.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(o):e.setAttribute(o,c);break;case"popover":We("beforetoggle",e),We("toggle",e),Ve(e,"popover",c);break;case"xlinkActuate":gn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":gn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":gn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":gn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":gn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":gn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":gn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":gn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":gn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ve(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ka.get(o)||o,Ve(e,o,c))}}function Kf(e,i,o,c,m,v){switch(o){case"style":Aa(e,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"children":typeof c=="string"?Vn(e,c):(typeof c=="number"||typeof c=="bigint")&&Vn(e,""+c);break;case"onScroll":c!=null&&We("scroll",e);break;case"onScrollEnd":c!=null&&We("scrollend",e);break;case"onClick":c!=null&&(e.onclick=yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),v=e[Wt]||null,v=v!=null?v[o]:null,typeof v=="function"&&e.removeEventListener(i,v,m),typeof c=="function")){typeof v!="function"&&v!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(i,c,m);break e}o in e?e[o]=c:c===!0?e.setAttribute(o,""):Ve(e,o,c)}}}function Qt(e,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",e),We("load",e);var c=!1,m=!1,v;for(v in o)if(o.hasOwnProperty(v)){var E=o[v];if(E!=null)switch(v){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:at(e,i,v,E,o,null)}}m&&at(e,i,"srcSet",o.srcSet,o,null),c&&at(e,i,"src",o.src,o,null);return;case"input":We("invalid",e);var M=v=E=m=null,U=null,X=null;for(c in o)if(o.hasOwnProperty(c)){var se=o[c];if(se!=null)switch(c){case"name":m=se;break;case"type":E=se;break;case"checked":U=se;break;case"defaultChecked":X=se;break;case"value":v=se;break;case"defaultValue":M=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:at(e,i,c,se,o,null)}}Es(e,v,M,U,X,E,m,!1);return;case"select":We("invalid",e),c=E=v=null;for(m in o)if(o.hasOwnProperty(m)&&(M=o[m],M!=null))switch(m){case"value":v=M;break;case"defaultValue":E=M;break;case"multiple":c=M;default:at(e,i,m,M,o,null)}i=v,o=E,e.multiple=!!c,i!=null?ut(e,!!c,i,!1):o!=null&&ut(e,!!c,o,!0);return;case"textarea":We("invalid",e),v=m=c=null;for(E in o)if(o.hasOwnProperty(E)&&(M=o[E],M!=null))switch(E){case"value":c=M;break;case"defaultValue":m=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(a(91));break;default:at(e,i,E,M,o,null)}Tr(e,c,m,v);return;case"option":for(U in o)if(o.hasOwnProperty(U)&&(c=o[U],c!=null))switch(U){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:at(e,i,U,c,o,null)}return;case"dialog":We("beforetoggle",e),We("toggle",e),We("cancel",e),We("close",e);break;case"iframe":case"object":We("load",e);break;case"video":case"audio":for(c=0;c<Bl.length;c++)We(Bl[c],e);break;case"image":We("error",e),We("load",e);break;case"details":We("toggle",e);break;case"embed":case"source":case"link":We("error",e),We("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(c=o[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:at(e,i,X,c,o,null)}return;default:if(js(i)){for(se in o)o.hasOwnProperty(se)&&(c=o[se],c!==void 0&&Kf(e,i,se,c,o,void 0));return}}for(M in o)o.hasOwnProperty(M)&&(c=o[M],c!=null&&at(e,i,M,c,o,null))}function m2(e,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,E=null,M=null,U=null,X=null,se=null;for(ee in o){var ce=o[ee];if(o.hasOwnProperty(ee)&&ce!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":U=ce;default:c.hasOwnProperty(ee)||at(e,i,ee,null,c,ce)}}for(var Q in c){var ee=c[Q];if(ce=o[Q],c.hasOwnProperty(Q)&&(ee!=null||ce!=null))switch(Q){case"type":v=ee;break;case"name":m=ee;break;case"checked":X=ee;break;case"defaultChecked":se=ee;break;case"value":E=ee;break;case"defaultValue":M=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:ee!==ce&&at(e,i,Q,ee,c,ce)}}Xo(e,E,M,U,X,se,v,m);return;case"select":ee=E=M=Q=null;for(v in o)if(U=o[v],o.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":ee=U;default:c.hasOwnProperty(v)||at(e,i,v,null,c,U)}for(m in c)if(v=c[m],U=o[m],c.hasOwnProperty(m)&&(v!=null||U!=null))switch(m){case"value":Q=v;break;case"defaultValue":M=v;break;case"multiple":E=v;default:v!==U&&at(e,i,m,v,c,U)}i=M,o=E,c=ee,Q!=null?ut(e,!!o,Q,!1):!!c!=!!o&&(i!=null?ut(e,!!o,i,!0):ut(e,!!o,o?[]:"",!1));return;case"textarea":ee=Q=null;for(M in o)if(m=o[M],o.hasOwnProperty(M)&&m!=null&&!c.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:at(e,i,M,null,c,m)}for(E in c)if(m=c[E],v=o[E],c.hasOwnProperty(E)&&(m!=null||v!=null))switch(E){case"value":Q=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:m!==v&&at(e,i,E,m,c,v)}Ti(e,Q,ee);return;case"option":for(var we in o)if(Q=o[we],o.hasOwnProperty(we)&&Q!=null&&!c.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:at(e,i,we,null,c,Q)}for(U in c)if(Q=c[U],ee=o[U],c.hasOwnProperty(U)&&Q!==ee&&(Q!=null||ee!=null))switch(U){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:at(e,i,U,Q,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in o)Q=o[Oe],o.hasOwnProperty(Oe)&&Q!=null&&!c.hasOwnProperty(Oe)&&at(e,i,Oe,null,c,Q);for(X in c)if(Q=c[X],ee=o[X],c.hasOwnProperty(X)&&Q!==ee&&(Q!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,i));break;default:at(e,i,X,Q,c,ee)}return;default:if(js(i)){for(var ot in o)Q=o[ot],o.hasOwnProperty(ot)&&Q!==void 0&&!c.hasOwnProperty(ot)&&Kf(e,i,ot,void 0,c,Q);for(se in c)Q=c[se],ee=o[se],!c.hasOwnProperty(se)||Q===ee||Q===void 0&&ee===void 0||Kf(e,i,se,Q,c,ee);return}}for(var q in o)Q=o[q],o.hasOwnProperty(q)&&Q!=null&&!c.hasOwnProperty(q)&&at(e,i,q,null,c,Q);for(ce in c)Q=c[ce],ee=o[ce],!c.hasOwnProperty(ce)||Q===ee||Q==null&&ee==null||at(e,i,ce,Q,c,ee)}function ov(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function g2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],v=m.transferSize,E=m.initiatorType,M=m.duration;if(v&&M&&ov(E)){for(E=0,M=m.responseEnd,c+=1;c<o.length;c++){var U=o[c],X=U.startTime;if(X>M)break;var se=U.transferSize,ce=U.initiatorType;se&&ov(ce)&&(U=U.responseEnd,E+=se*(U<M?1:(M-X)/(U-X)))}if(--c,i+=8*(v+E)/(m.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Yf=null,Xf=null;function Zc(e){return e.nodeType===9?e:e.ownerDocument}function lv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Jf(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Qf=null;function y2(){var e=window.event;return e&&e.type==="popstate"?e===Qf?!1:(Qf=e,!0):(Qf=null,!1)}var cv=typeof setTimeout=="function"?setTimeout:void 0,v2=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,_2=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(e){return dv.resolve(null).then(e).catch(x2)}:cv;function x2(e){setTimeout(function(){throw e})}function Jr(e){return e==="head"}function hv(e,i){var o=i,c=0;do{var m=o.nextSibling;if(e.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){e.removeChild(m),fo(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Ul(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,Ul(o);for(var v=o.firstChild;v;){var E=v.nextSibling,M=v.nodeName;v[ws]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&v.rel.toLowerCase()==="stylesheet"||o.removeChild(v),v=E}}else o==="body"&&Ul(e.ownerDocument.body);o=m}while(o);fo(i)}function fv(e,i){var o=e;e=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=c}while(o)}function ep(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ep(o),Zo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function b2(e,i,o,c){for(;e.nodeType===1;){var m=o;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ws])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(v=e.getAttribute("rel"),v==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(v!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(v=e.getAttribute("src"),(v!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===v)return e}else return e;if(e=Yn(e.nextSibling),e===null)break}return null}function w2(e,i,o){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Yn(e.nextSibling),e===null))return null;return e}function pv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Yn(e.nextSibling),e===null))return null;return e}function tp(e){return e.data==="$?"||e.data==="$~"}function np(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function S2(e,i){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function Yn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var ip=null;function mv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(i===0)return Yn(e.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}e=e.nextSibling}return null}function gv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return e;i--}else o!=="/$"&&o!=="/&"||i++}e=e.previousSibling}return null}function yv(e,i,o){switch(i=Zc(o),e){case"html":if(e=i.documentElement,!e)throw Error(a(452));return e;case"head":if(e=i.head,!e)throw Error(a(453));return e;case"body":if(e=i.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Ul(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Zo(e)}var Xn=new Map,vv=new Set;function Gc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var dr=re.d;re.d={f:T2,r:E2,D:j2,C:C2,L:A2,m:k2,X:O2,S:R2,M:M2};function T2(){var e=dr.f(),i=Uc();return e||i}function E2(e){var i=br(e);i!==null&&i.tag===5&&i.type==="form"?Py(i):dr.r(e)}var uo=typeof document>"u"?null:document;function _v(e,i,o){var c=uo;if(c&&typeof i=="string"&&i){var m=ht(i);m='link[rel="'+e+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),vv.has(m)||(vv.add(m),e={rel:e,crossOrigin:o,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),Qt(i,"link",e),Mt(i),c.head.appendChild(i)))}}function j2(e){dr.D(e),_v("dns-prefetch",e,null)}function C2(e,i){dr.C(e,i),_v("preconnect",e,i)}function A2(e,i,o){dr.L(e,i,o);var c=uo;if(c&&e&&i){var m='link[rel="preload"][as="'+ht(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+ht(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+ht(o.imageSizes)+'"]')):m+='[href="'+ht(e)+'"]';var v=m;switch(i){case"style":v=co(e);break;case"script":v=ho(e)}Xn.has(v)||(e=w({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:e,as:i},o),Xn.set(v,e),c.querySelector(m)!==null||i==="style"&&c.querySelector(Il(v))||i==="script"&&c.querySelector(Vl(v))||(i=c.createElement("link"),Qt(i,"link",e),Mt(i),c.head.appendChild(i)))}}function k2(e,i){dr.m(e,i);var o=uo;if(o&&e){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+ht(c)+'"][href="'+ht(e)+'"]',v=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ho(e)}if(!Xn.has(v)&&(e=w({rel:"modulepreload",href:e},i),Xn.set(v,e),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Vl(v)))return}c=o.createElement("link"),Qt(c,"link",e),Mt(c),o.head.appendChild(c)}}}function R2(e,i,o){dr.S(e,i,o);var c=uo;if(c&&e){var m=wr(c).hoistableStyles,v=co(e);i=i||"default";var E=m.get(v);if(!E){var M={loading:0,preload:null};if(E=c.querySelector(Il(v)))M.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":i},o),(o=Xn.get(v))&&rp(e,o);var U=E=c.createElement("link");Mt(U),Qt(U,"link",e),U._p=new Promise(function(X,se){U.onload=X,U.onerror=se}),U.addEventListener("load",function(){M.loading|=1}),U.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Kc(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:M},m.set(v,E)}}}function O2(e,i){dr.X(e,i);var o=uo;if(o&&e){var c=wr(o).hoistableScripts,m=ho(e),v=c.get(m);v||(v=o.querySelector(Vl(m)),v||(e=w({src:e,async:!0},i),(i=Xn.get(m))&&sp(e,i),v=o.createElement("script"),Mt(v),Qt(v,"link",e),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(m,v))}}function M2(e,i){dr.M(e,i);var o=uo;if(o&&e){var c=wr(o).hoistableScripts,m=ho(e),v=c.get(m);v||(v=o.querySelector(Vl(m)),v||(e=w({src:e,async:!0,type:"module"},i),(i=Xn.get(m))&&sp(e,i),v=o.createElement("script"),Mt(v),Qt(v,"link",e),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(m,v))}}function xv(e,i,o,c){var m=(m=pe.current)?Gc(m):null;if(!m)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=co(o.href),o=wr(m).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=co(o.href);var v=wr(m).hoistableStyles,E=v.get(e);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(e,E),(v=m.querySelector(Il(e)))&&!v._p&&(E.instance=v,E.state.loading=5),Xn.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Xn.set(e,o),v||L2(m,e,o,E.state))),i&&c===null)throw Error(a(528,""));return E}if(i&&c!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ho(o),o=wr(m).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function co(e){return'href="'+ht(e)+'"'}function Il(e){return'link[rel="stylesheet"]['+e+"]"}function bv(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function L2(e,i,o,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Qt(i,"link",o),Mt(i),e.head.appendChild(i))}function ho(e){return'[src="'+ht(e)+'"]'}function Vl(e){return"script[async]"+e}function wv(e,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+ht(o.href)+'"]');if(c)return i.instance=c,Mt(c),c;var m=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Mt(c),Qt(c,"style",m),Kc(c,o.precedence,e),i.instance=c;case"stylesheet":m=co(o.href);var v=e.querySelector(Il(m));if(v)return i.state.loading|=4,i.instance=v,Mt(v),v;c=bv(o),(m=Xn.get(m))&&rp(c,m),v=(e.ownerDocument||e).createElement("link"),Mt(v);var E=v;return E._p=new Promise(function(M,U){E.onload=M,E.onerror=U}),Qt(v,"link",c),i.state.loading|=4,Kc(v,o.precedence,e),i.instance=v;case"script":return v=ho(o.src),(m=e.querySelector(Vl(v)))?(i.instance=m,Mt(m),m):(c=o,(m=Xn.get(v))&&(c=w({},o),sp(c,m)),e=e.ownerDocument||e,m=e.createElement("script"),Mt(m),Qt(m,"link",c),e.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Kc(c,o.precedence,e));return i.instance}function Kc(e,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,v=m,E=0;E<c.length;E++){var M=c[E];if(M.dataset.precedence===i)v=M;else if(v!==m)break}v?v.parentNode.insertBefore(e,v.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(e,i.firstChild))}function rp(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function sp(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Yc=null;function Sv(e,i,o){if(Yc===null){var c=new Map,m=Yc=new Map;m.set(o,c)}else m=Yc,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(e))return c;for(c.set(e,null),o=o.getElementsByTagName(e),m=0;m<o.length;m++){var v=o[m];if(!(v[ws]||v[Ot]||e==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var E=v.getAttribute(i)||"";E=e+E;var M=c.get(E);M?M.push(v):c.set(E,[v])}}return c}function Tv(e,i,o){e=e.ownerDocument||e,e.head.insertBefore(o,i==="title"?e.querySelector("head > title"):null)}function z2(e,i,o){if(o===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ev(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function P2(e,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=co(c.href),v=i.querySelector(Il(m));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Xc.bind(e),i.then(e,e)),o.state.loading|=4,o.instance=v,Mt(v);return}v=i.ownerDocument||i,c=bv(c),(m=Xn.get(m))&&rp(c,m),v=v.createElement("link"),Mt(v);var E=v;E._p=new Promise(function(M,U){E.onload=M,E.onerror=U}),Qt(v,"link",c),o.instance=v}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=Xc.bind(e),i.addEventListener("load",o),i.addEventListener("error",o))}}var ap=0;function D2(e,i){return e.stylesheets&&e.count===0&&Qc(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var c=setTimeout(function(){if(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend){var v=e.unsuspend;e.unsuspend=null,v()}},6e4+i);0<e.imgBytes&&ap===0&&(ap=62500*g2());var m=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend)){var v=e.unsuspend;e.unsuspend=null,v()}},(e.imgBytes>ap?50:800)+i);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function Xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Jc=null;function Qc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Jc=new Map,i.forEach(B2,e),Jc=null,Xc.call(e))}function B2(e,i){if(!(i.state.loading&4)){var o=Jc.get(e);if(o)var c=o.get(null);else{o=new Map,Jc.set(e,o);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var E=m[v];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),c=E)}c&&o.set(null,c)}m=i.instance,E=m.getAttribute("data-precedence"),v=o.get(E)||c,v===c&&o.set(null,m),o.set(E,m),this.count++,c=Xc.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),v?v.parentNode.insertBefore(m,v.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),i.state.loading|=4}}var Hl={$$typeof:P,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function N2(e,i,o,c,m,v,E,M,U){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wo(0),this.hiddenUpdates=Wo(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function jv(e,i,o,c,m,v,E,M,U,X,se,ce){return e=new N2(e,i,o,E,U,X,se,ce,M),i=1,v===!0&&(i|=24),v=sn(3,null,null,i),e.current=v,v.stateNode=e,i=Nh(),i.refCount++,e.pooledCache=i,i.refCount++,v.memoizedState={element:c,isDehydrated:o,cache:i},Hh(v),e}function Cv(e){return e?(e=Xi,e):Xi}function Av(e,i,o,c,m,v){m=Cv(m),c.context===null?c.context=m:c.pendingContext=m,c=Vr(i),c.payload={element:o},v=v===void 0?null:v,v!==null&&(c.callback=v),o=Hr(e,c,i),o!==null&&(jn(o,e,i),xl(o,e,i))}function kv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function op(e,i){kv(e,i),(e=e.alternate)&&kv(e,i)}function Rv(e){if(e.tag===13||e.tag===31){var i=Zn(e,67108864);i!==null&&jn(i,e,67108864),op(e,67108864)}}function Ov(e){if(e.tag===13||e.tag===31){var i=Nn();i=mn(i);var o=Zn(e,i);o!==null&&jn(o,e,i),op(e,i)}}var ed=!0;function U2(e,i,o,c){var m=H.T;H.T=null;var v=re.p;try{re.p=2,lp(e,i,o,c)}finally{re.p=v,H.T=m}}function I2(e,i,o,c){var m=H.T;H.T=null;var v=re.p;try{re.p=8,lp(e,i,o,c)}finally{re.p=v,H.T=m}}function lp(e,i,o,c){if(ed){var m=up(c);if(m===null)Gf(e,i,c,td,o),Lv(e,c);else if(H2(m,e,i,o,c))c.stopPropagation();else if(Lv(e,c),i&4&&-1<V2.indexOf(e)){for(;m!==null;){var v=br(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var E=Hi(v.pendingLanes);if(E!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;E;){var U=1<<31-cn(E);M.entanglements[1]|=U,E&=~U}Di(v),(et&6)===0&&(Bc=un()+500,Dl(0))}}break;case 31:case 13:M=Zn(v,2),M!==null&&jn(M,v,2),Uc(),op(v,2)}if(v=up(c),v===null&&Gf(e,i,c,td,o),v===m)break;m=v}m!==null&&c.stopPropagation()}else Gf(e,i,c,null,o)}}function up(e){return e=Cs(e),cp(e)}var td=null;function cp(e){if(td=null,e=Fi(e),e!==null){var i=d(e);if(i===null)e=null;else{var o=i.tag;if(o===13){if(e=h(i),e!==null)return e;e=null}else if(o===31){if(e=g(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return td=e,null}function Mv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ph()){case Ea:return 2;case Ho:return 8;case gs:case mh:return 32;case qo:return 268435456;default:return 32}default:return 32}}var dp=!1,Qr=null,es=null,ts=null,ql=new Map,Wl=new Map,ns=[],V2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lv(e,i){switch(e){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":ql.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(i.pointerId)}}function Fl(e,i,o,c,m,v){return e===null||e.nativeEvent!==v?(e={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:v,targetContainers:[m]},i!==null&&(i=br(i),i!==null&&Rv(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),e)}function H2(e,i,o,c,m){switch(i){case"focusin":return Qr=Fl(Qr,e,i,o,c,m),!0;case"dragenter":return es=Fl(es,e,i,o,c,m),!0;case"mouseover":return ts=Fl(ts,e,i,o,c,m),!0;case"pointerover":var v=m.pointerId;return ql.set(v,Fl(ql.get(v)||null,e,i,o,c,m)),!0;case"gotpointercapture":return v=m.pointerId,Wl.set(v,Fl(Wl.get(v)||null,e,i,o,c,m)),!0}return!1}function zv(e){var i=Fi(e.target);if(i!==null){var o=d(i);if(o!==null){if(i=o.tag,i===13){if(i=h(o),i!==null){e.blockedOn=i,$o(e.priority,function(){Ov(o)});return}}else if(i===31){if(i=g(o),i!==null){e.blockedOn=i,$o(e.priority,function(){Ov(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nd(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=up(e.nativeEvent);if(o===null){o=e.nativeEvent;var c=new o.constructor(o.type,o);Ra=c,o.target.dispatchEvent(c),Ra=null}else return i=br(o),i!==null&&Rv(i),e.blockedOn=o,!1;i.shift()}return!0}function Pv(e,i,o){nd(e)&&o.delete(i)}function q2(){dp=!1,Qr!==null&&nd(Qr)&&(Qr=null),es!==null&&nd(es)&&(es=null),ts!==null&&nd(ts)&&(ts=null),ql.forEach(Pv),Wl.forEach(Pv)}function id(e,i){e.blockedOn===i&&(e.blockedOn=null,dp||(dp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,q2)))}var rd=null;function Dv(e){rd!==e&&(rd=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){rd===e&&(rd=null);for(var i=0;i<e.length;i+=3){var o=e[i],c=e[i+1],m=e[i+2];if(typeof c!="function"){if(cp(c||o)===null)continue;break}var v=br(o);v!==null&&(e.splice(i,3),i-=3,uf(v,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function fo(e){function i(U){return id(U,e)}Qr!==null&&id(Qr,e),es!==null&&id(es,e),ts!==null&&id(ts,e),ql.forEach(i),Wl.forEach(i);for(var o=0;o<ns.length;o++){var c=ns[o];c.blockedOn===e&&(c.blockedOn=null)}for(;0<ns.length&&(o=ns[0],o.blockedOn===null);)zv(o),o.blockedOn===null&&ns.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],v=o[c+1],E=m[Wt]||null;if(typeof v=="function")E||Dv(o);else if(E){var M=null;if(v&&v.hasAttribute("formAction")){if(m=v,E=v[Wt]||null)M=E.formAction;else if(cp(m)!==null)continue}else M=E.action;typeof M=="function"?o[c+1]=M:(o.splice(c,3),c-=3),Dv(o)}}}function Bv(){function e(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(E){return m=E})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function hp(e){this._internalRoot=e}sd.prototype.render=hp.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,c=Nn();Av(o,c,e,i,null,null)},sd.prototype.unmount=hp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Av(e.current,2,null,e,null,null),Uc(),i[Wi]=null}};function sd(e){this._internalRoot=e}sd.prototype.unstable_scheduleHydration=function(e){if(e){var i=Fo();e={blockedOn:null,target:e,priority:i};for(var o=0;o<ns.length&&i!==0&&i<ns[o].priority;o++);ns.splice(o,0,e),o===0&&zv(e)}};var Nv=t.version;if(Nv!=="19.2.1")throw Error(a(527,Nv,"19.2.1"));re.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=_(i),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var W2={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{xr=ad.inject(W2),Kt=ad}catch{}}return Zl.createRoot=function(e,i){if(!l(e))throw Error(a(299));var o=!1,c="",m=Fy,v=$y,E=Zy;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),i=jv(e,1,!1,null,null,o,c,null,m,v,E,Bv),e[Wi]=i.current,Zf(e),new hp(i)},Zl.hydrateRoot=function(e,i,o){if(!l(e))throw Error(a(299));var c=!1,m="",v=Fy,E=$y,M=Zy,U=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),i=jv(e,1,!0,i,o??null,c,m,U,v,E,M,Bv),i.context=Cv(null),o=i.current,c=Nn(),c=mn(c),m=Vr(c),m.callback=null,Hr(o,m,c),o=c,i.current.lanes=o,qi(i,o),Di(i),e[Wi]=i.current,Zf(e),new sd(i)},Zl.version="19.2.1",Zl}var Gv;function eT(){if(Gv)return mp.exports;Gv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),mp.exports=Q2(),mp.exports}var tT=eT();const nT=Jd(tT);var Kv="popstate";function iT(n={}){function t(l,d){let{pathname:h="/",search:g="",hash:y=""}=va(l.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Fp("",{pathname:h,search:g,hash:y},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function r(l,d){let h=l.document.querySelector("base"),g="";if(h&&h.getAttribute("href")){let y=l.location.href,_=y.indexOf("#");g=_===-1?y:y.slice(0,_)}return g+"#"+(typeof d=="string"?d:cu(d))}function a(l,d){In(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return sT(t,r,a,n)}function vt(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function In(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rT(){return Math.random().toString(36).substring(2,10)}function Yv(n,t){return{usr:n.state,key:n.key,idx:t}}function Fp(n,t,r=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?va(t):t,state:r,key:t&&t.key||a||rT()}}function cu({pathname:n="/",search:t="",hash:r=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function va(n){let t={};if(n){let r=n.indexOf("#");r>=0&&(t.hash=n.substring(r),n=n.substring(0,r));let a=n.indexOf("?");a>=0&&(t.search=n.substring(a),n=n.substring(0,a)),n&&(t.pathname=n)}return t}function sT(n,t,r,a={}){let{window:l=document.defaultView,v5Compat:d=!1}=a,h=l.history,g="POP",y=null,_=b();_==null&&(_=0,h.replaceState({...h.state,idx:_},""));function b(){return(h.state||{idx:null}).idx}function w(){g="POP";let A=b(),z=A==null?null:A-_;_=A,y&&y({action:g,location:C.location,delta:z})}function S(A,z){g="PUSH";let D=Fp(C.location,A,z);r&&r(D,A),_=b()+1;let P=Yv(D,_),Z=C.createHref(D);try{h.pushState(P,"",Z)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;l.location.assign(Z)}d&&y&&y({action:g,location:C.location,delta:1})}function j(A,z){g="REPLACE";let D=Fp(C.location,A,z);r&&r(D,A),_=b();let P=Yv(D,_),Z=C.createHref(D);h.replaceState(P,"",Z),d&&y&&y({action:g,location:C.location,delta:0})}function k(A){return aT(A)}let C={get action(){return g},get location(){return n(l,h)},listen(A){if(y)throw new Error("A history only accepts one active listener");return l.addEventListener(Kv,w),y=A,()=>{l.removeEventListener(Kv,w),y=null}},createHref(A){return t(l,A)},createURL:k,encodeLocation(A){let z=k(A);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:S,replace:j,go(A){return h.go(A)}};return C}function aT(n,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),vt(r,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:cu(n);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function Qx(n,t,r="/"){return oT(n,t,r,!1)}function oT(n,t,r,a){let l=typeof t=="string"?va(t):t,d=mr(l.pathname||"/",r);if(d==null)return null;let h=eb(n);lT(h);let g=null;for(let y=0;g==null&&y<h.length;++y){let _=_T(d);g=yT(h[y],_,a)}return g}function eb(n,t=[],r=[],a="",l=!1){let d=(h,g,y=l,_)=>{let b={relativePath:_===void 0?h.path||"":_,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&y)return;vt(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let w=pr([a,b.relativePath]),S=r.concat(b);h.children&&h.children.length>0&&(vt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),eb(h.children,t,S,w,y)),!(h.path==null&&!h.index)&&t.push({path:w,score:mT(w,h.index),routesMeta:S})};return n.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))d(h,g);else for(let y of tb(h.path))d(h,g,!0,y)}),t}function tb(n){let t=n.split("/");if(t.length===0)return[];let[r,...a]=t,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(a.length===0)return l?[d,""]:[d];let h=tb(a.join("/")),g=[];return g.push(...h.map(y=>y===""?d:[d,y].join("/"))),l&&g.push(...h),g.map(y=>n.startsWith("/")&&y===""?"/":y)}function lT(n){n.sort((t,r)=>t.score!==r.score?r.score-t.score:gT(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var uT=/^:[\w-]+$/,cT=3,dT=2,hT=1,fT=10,pT=-2,Xv=n=>n==="*";function mT(n,t){let r=n.split("/"),a=r.length;return r.some(Xv)&&(a+=pT),t&&(a+=dT),r.filter(l=>!Xv(l)).reduce((l,d)=>l+(uT.test(d)?cT:d===""?hT:fT),a)}function gT(n,t){return n.length===t.length&&n.slice(0,-1).every((a,l)=>a===t[l])?n[n.length-1]-t[t.length-1]:0}function yT(n,t,r=!1){let{routesMeta:a}=n,l={},d="/",h=[];for(let g=0;g<a.length;++g){let y=a[g],_=g===a.length-1,b=d==="/"?t:t.slice(d.length)||"/",w=Ld({path:y.relativePath,caseSensitive:y.caseSensitive,end:_},b),S=y.route;if(!w&&_&&r&&!a[a.length-1].route.index&&(w=Ld({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},b)),!w)return null;Object.assign(l,w.params),h.push({params:l,pathname:pr([d,w.pathname]),pathnameBase:TT(pr([d,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(d=pr([d,w.pathnameBase]))}return h}function Ld(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,a]=vT(n.path,n.caseSensitive,n.end),l=t.match(r);if(!l)return null;let d=l[0],h=d.replace(/(.)\/+$/,"$1"),g=l.slice(1);return{params:a.reduce((_,{paramName:b,isOptional:w},S)=>{if(b==="*"){let k=g[S]||"";h=d.slice(0,d.length-k.length).replace(/(.)\/+$/,"$1")}const j=g[S];return w&&!j?_[b]=void 0:_[b]=(j||"").replace(/%2F/g,"/"),_},{}),pathname:d,pathnameBase:h,pattern:n}}function vT(n,t=!1,r=!0){In(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],l="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,y)=>(a.push({paramName:g,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),l+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":n!==""&&n!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function _T(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return In(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function mr(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=n.charAt(r);return a&&a!=="/"?null:n.slice(r)||"/"}var xT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bT=n=>xT.test(n);function wT(n,t="/"){let{pathname:r,search:a="",hash:l=""}=typeof n=="string"?va(n):n,d;if(r)if(bT(r))d=r;else{if(r.includes("//")){let h=r;r=r.replace(/\/\/+/g,"/"),In(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${r}`)}r.startsWith("/")?d=Jv(r.substring(1),"/"):d=Jv(r,t)}else d=t;return{pathname:d,search:ET(a),hash:jT(l)}}function Jv(n,t){let r=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function _p(n,t,r,a){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ST(n){return n.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Um(n){let t=ST(n);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function Im(n,t,r,a=!1){let l;typeof n=="string"?l=va(n):(l={...n},vt(!l.pathname||!l.pathname.includes("?"),_p("?","pathname","search",l)),vt(!l.pathname||!l.pathname.includes("#"),_p("#","pathname","hash",l)),vt(!l.search||!l.search.includes("#"),_p("#","search","hash",l)));let d=n===""||l.pathname==="",h=d?"/":l.pathname,g;if(h==null)g=r;else{let w=t.length-1;if(!a&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),w-=1;l.pathname=S.join("/")}g=w>=0?t[w]:"/"}let y=wT(l,g),_=h&&h!=="/"&&h.endsWith("/"),b=(d||h===".")&&r.endsWith("/");return!y.pathname.endsWith("/")&&(_||b)&&(y.pathname+="/"),y}var pr=n=>n.join("/").replace(/\/\/+/g,"/"),TT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ET=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function CT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function AT(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nb=["POST","PUT","PATCH","DELETE"];new Set(nb);var kT=["GET",...nb];new Set(kT);var Lo=R.createContext(null);Lo.displayName="DataRouter";var Qd=R.createContext(null);Qd.displayName="DataRouterState";R.createContext(!1);var ib=R.createContext({isTransitioning:!1});ib.displayName="ViewTransition";var RT=R.createContext(new Map);RT.displayName="Fetchers";var OT=R.createContext(null);OT.displayName="Await";var ni=R.createContext(null);ni.displayName="Navigation";var _u=R.createContext(null);_u.displayName="Location";var ii=R.createContext({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var Vm=R.createContext(null);Vm.displayName="RouteError";function MT(n,{relative:t}={}){vt(zo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=R.useContext(ni),{hash:l,pathname:d,search:h}=xu(n,{relative:t}),g=d;return r!=="/"&&(g=d==="/"?r:pr([r,d])),a.createHref({pathname:g,search:h,hash:l})}function zo(){return R.useContext(_u)!=null}function ri(){return vt(zo(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(_u).location}var rb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sb(n){R.useContext(ni).static||R.useLayoutEffect(n)}function wt(){let{isDataRoute:n}=R.useContext(ii);return n?ZT():LT()}function LT(){vt(zo(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(Lo),{basename:t,navigator:r}=R.useContext(ni),{matches:a}=R.useContext(ii),{pathname:l}=ri(),d=JSON.stringify(Um(a)),h=R.useRef(!1);return sb(()=>{h.current=!0}),R.useCallback((y,_={})=>{if(In(h.current,rb),!h.current)return;if(typeof y=="number"){r.go(y);return}let b=Im(y,JSON.parse(d),l,_.relative==="path");n==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:pr([t,b.pathname])),(_.replace?r.replace:r.push)(b,_.state,_)},[t,r,d,l,n])}var zT=R.createContext(null);function PT(n){let t=R.useContext(ii).outlet;return R.useMemo(()=>t&&R.createElement(zT.Provider,{value:n},t),[t,n])}function Hm(){let{matches:n}=R.useContext(ii),t=n[n.length-1];return t?t.params:{}}function xu(n,{relative:t}={}){let{matches:r}=R.useContext(ii),{pathname:a}=ri(),l=JSON.stringify(Um(r));return R.useMemo(()=>Im(n,JSON.parse(l),a,t==="path"),[n,l,a,t])}function DT(n,t){return ab(n,t)}function ab(n,t,r,a,l){vt(zo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=R.useContext(ni),{matches:h}=R.useContext(ii),g=h[h.length-1],y=g?g.params:{},_=g?g.pathname:"/",b=g?g.pathnameBase:"/",w=g&&g.route;{let D=w&&w.path||"";ob(_,!w||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let S=ri(),j;if(t){let D=typeof t=="string"?va(t):t;vt(b==="/"||D.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${D.pathname}" was given in the \`location\` prop.`),j=D}else j=S;let k=j.pathname||"/",C=k;if(b!=="/"){let D=b.replace(/^\//,"").split("/");C="/"+k.replace(/^\//,"").split("/").slice(D.length).join("/")}let A=Qx(n,{pathname:C});In(w||A!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),In(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=VT(A&&A.map(D=>Object.assign({},D,{params:Object.assign({},y,D.params),pathname:pr([b,d.encodeLocation?d.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?b:pr([b,d.encodeLocation?d.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),h,r,a,l);return t&&z?R.createElement(_u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},z):z}function BT(){let n=$T(),t=CT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},d={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:d},"ErrorBoundary")," or"," ",R.createElement("code",{style:d},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),r?R.createElement("pre",{style:l},r):null,h)}var NT=R.createElement(BT,null),UT=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?R.createElement(ii.Provider,{value:this.props.routeContext},R.createElement(Vm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IT({routeContext:n,match:t,children:r}){let a=R.useContext(Lo);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(ii.Provider,{value:n},r)}function VT(n,t=[],r=null,a=null,l=null){if(n==null){if(!r)return null;if(r.errors)n=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let d=n,h=r?.errors;if(h!=null){let b=d.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);vt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),d=d.slice(0,Math.min(d.length,b+1))}let g=!1,y=-1;if(r)for(let b=0;b<d.length;b++){let w=d[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=b),w.route.id){let{loaderData:S,errors:j}=r,k=w.route.loader&&!S.hasOwnProperty(w.route.id)&&(!j||j[w.route.id]===void 0);if(w.route.lazy||k){g=!0,y>=0?d=d.slice(0,y+1):d=[d[0]];break}}}let _=r&&a?(b,w)=>{a(b,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:AT(r.matches),errorInfo:w})}:void 0;return d.reduceRight((b,w,S)=>{let j,k=!1,C=null,A=null;r&&(j=h&&w.route.id?h[w.route.id]:void 0,C=w.route.errorElement||NT,g&&(y<0&&S===0?(ob("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,A=null):y===S&&(k=!0,A=w.route.hydrateFallbackElement||null)));let z=t.concat(d.slice(0,S+1)),D=()=>{let P;return j?P=C:k?P=A:w.route.Component?P=R.createElement(w.route.Component,null):w.route.element?P=w.route.element:P=b,R.createElement(IT,{match:w,routeContext:{outlet:b,matches:z,isDataRoute:r!=null},children:P})};return r&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?R.createElement(UT,{location:r.location,revalidation:r.revalidation,component:C,error:j,children:D(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:_}):D()},null)}function qm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HT(n){let t=R.useContext(Lo);return vt(t,qm(n)),t}function qT(n){let t=R.useContext(Qd);return vt(t,qm(n)),t}function WT(n){let t=R.useContext(ii);return vt(t,qm(n)),t}function Wm(n){let t=WT(n),r=t.matches[t.matches.length-1];return vt(r.route.id,`${n} can only be used on routes that contain a unique "id"`),r.route.id}function FT(){return Wm("useRouteId")}function $T(){let n=R.useContext(Vm),t=qT("useRouteError"),r=Wm("useRouteError");return n!==void 0?n:t.errors?.[r]}function ZT(){let{router:n}=HT("useNavigate"),t=Wm("useNavigate"),r=R.useRef(!1);return sb(()=>{r.current=!0}),R.useCallback(async(l,d={})=>{In(r.current,rb),r.current&&(typeof l=="number"?await n.navigate(l):await n.navigate(l,{fromRouteId:t,...d}))},[n,t])}var Qv={};function ob(n,t,r){!t&&!Qv[n]&&(Qv[n]=!0,In(!1,r))}R.memo(GT);function GT({routes:n,future:t,state:r,unstable_onError:a}){return ab(n,void 0,r,a,t)}function lb({to:n,replace:t,state:r,relative:a}){vt(zo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=R.useContext(ni);In(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=R.useContext(ii),{pathname:h}=ri(),g=wt(),y=Im(n,Um(d),h,a==="path"),_=JSON.stringify(y);return R.useEffect(()=>{g(JSON.parse(_),{replace:t,state:r,relative:a})},[g,_,a,t,r]),null}function KT(n){return PT(n.context)}function xt(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YT({basename:n="/",children:t=null,location:r,navigationType:a="POP",navigator:l,static:d=!1,unstable_useTransitions:h}){vt(!zo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=n.replace(/^\/*/,"/"),y=R.useMemo(()=>({basename:g,navigator:l,static:d,unstable_useTransitions:h,future:{}}),[g,l,d,h]);typeof r=="string"&&(r=va(r));let{pathname:_="/",search:b="",hash:w="",state:S=null,key:j="default"}=r,k=R.useMemo(()=>{let C=mr(_,g);return C==null?null:{location:{pathname:C,search:b,hash:w,state:S,key:j},navigationType:a}},[g,_,b,w,S,j,a]);return In(k!=null,`<Router basename="${g}"> is not able to match the URL "${_}${b}${w}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:R.createElement(ni.Provider,{value:y},R.createElement(_u.Provider,{children:t,value:k}))}function ub({children:n,location:t}){return DT($p(n),t)}function $p(n,t=[]){let r=[];return R.Children.forEach(n,(a,l)=>{if(!R.isValidElement(a))return;let d=[...t,l];if(a.type===R.Fragment){r.push.apply(r,$p(a.props.children,d));return}vt(a.type===xt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||d.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=$p(a.props.children,d)),r.push(h)}),r}var wd="get",Sd="application/x-www-form-urlencoded";function eh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function XT(n){return eh(n)&&n.tagName.toLowerCase()==="button"}function JT(n){return eh(n)&&n.tagName.toLowerCase()==="form"}function QT(n){return eh(n)&&n.tagName.toLowerCase()==="input"}function eE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function tE(n,t){return n.button===0&&(!t||t==="_self")&&!eE(n)}var od=null;function nE(){if(od===null)try{new FormData(document.createElement("form"),0),od=!1}catch{od=!0}return od}var iE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xp(n){return n!=null&&!iE.has(n)?(In(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sd}"`),null):n}function rE(n,t){let r,a,l,d,h;if(JT(n)){let g=n.getAttribute("action");a=g?mr(g,t):null,r=n.getAttribute("method")||wd,l=xp(n.getAttribute("enctype"))||Sd,d=new FormData(n)}else if(XT(n)||QT(n)&&(n.type==="submit"||n.type==="image")){let g=n.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||g.getAttribute("action");if(a=y?mr(y,t):null,r=n.getAttribute("formmethod")||g.getAttribute("method")||wd,l=xp(n.getAttribute("formenctype"))||xp(g.getAttribute("enctype"))||Sd,d=new FormData(g,n),!nE()){let{name:_,type:b,value:w}=n;if(b==="image"){let S=_?`${_}.`:"";d.append(`${S}x`,"0"),d.append(`${S}y`,"0")}else _&&d.append(_,w)}}else{if(eh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=wd,a=null,l=Sd,h=n}return d&&l==="text/plain"&&(h=d,d=void 0),{action:a,method:r.toLowerCase(),encType:l,formData:d,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fm(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function sE(n,t,r){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&mr(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function aE(n,t){if(n.id in t)return t[n.id];try{let r=await import(n.module);return t[n.id]=r,r}catch(r){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oE(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function lE(n,t,r){let a=await Promise.all(n.map(async l=>{let d=t.routes[l.route.id];if(d){let h=await aE(d,r);return h.links?h.links():[]}return[]}));return hE(a.flat(1).filter(oE).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function e_(n,t,r,a,l,d){let h=(y,_)=>r[_]?y.route.id!==r[_].route.id:!0,g=(y,_)=>r[_].pathname!==y.pathname||r[_].route.path?.endsWith("*")&&r[_].params["*"]!==y.params["*"];return d==="assets"?t.filter((y,_)=>h(y,_)||g(y,_)):d==="data"?t.filter((y,_)=>{let b=a.routes[y.route.id];if(!b||!b.hasLoader)return!1;if(h(y,_)||g(y,_))return!0;if(y.route.shouldRevalidate){let w=y.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function uE(n,t,{includeHydrateFallback:r}={}){return cE(n.map(a=>{let l=t.routes[a.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function cE(n){return[...new Set(n)]}function dE(n){let t={},r=Object.keys(n).sort();for(let a of r)t[a]=n[a];return t}function hE(n,t){let r=new Set;return new Set(t),n.reduce((a,l)=>{let d=JSON.stringify(dE(l));return r.has(d)||(r.add(d),a.push({key:d,link:l})),a},[])}function cb(){let n=R.useContext(Lo);return Fm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function fE(){let n=R.useContext(Qd);return Fm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $m=R.createContext(void 0);$m.displayName="FrameworkContext";function db(){let n=R.useContext($m);return Fm(n,"You must render this element inside a <HydratedRouter> element"),n}function pE(n,t){let r=R.useContext($m),[a,l]=R.useState(!1),[d,h]=R.useState(!1),{onFocus:g,onBlur:y,onMouseEnter:_,onMouseLeave:b,onTouchStart:w}=t,S=R.useRef(null);R.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let C=z=>{z.forEach(D=>{h(D.isIntersecting)})},A=new IntersectionObserver(C,{threshold:.5});return S.current&&A.observe(S.current),()=>{A.disconnect()}}},[n]),R.useEffect(()=>{if(a){let C=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(C)}}},[a]);let j=()=>{l(!0)},k=()=>{l(!1),h(!1)};return r?n!=="intent"?[d,S,{}]:[d,S,{onFocus:Gl(g,j),onBlur:Gl(y,k),onMouseEnter:Gl(_,j),onMouseLeave:Gl(b,k),onTouchStart:Gl(w,j)}]:[!1,S,{}]}function Gl(n,t){return r=>{n&&n(r),r.defaultPrevented||t(r)}}function mE({page:n,...t}){let{router:r}=cb(),a=R.useMemo(()=>Qx(r.routes,n,r.basename),[r.routes,n,r.basename]);return a?R.createElement(yE,{page:n,matches:a,...t}):null}function gE(n){let{manifest:t,routeModules:r}=db(),[a,l]=R.useState([]);return R.useEffect(()=>{let d=!1;return lE(n,t,r).then(h=>{d||l(h)}),()=>{d=!0}},[n,t,r]),a}function yE({page:n,matches:t,...r}){let a=ri(),{manifest:l,routeModules:d}=db(),{basename:h}=cb(),{loaderData:g,matches:y}=fE(),_=R.useMemo(()=>e_(n,t,y,l,a,"data"),[n,t,y,l,a]),b=R.useMemo(()=>e_(n,t,y,l,a,"assets"),[n,t,y,l,a]),w=R.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let k=new Set,C=!1;if(t.forEach(z=>{let D=l.routes[z.route.id];!D||!D.hasLoader||(!_.some(P=>P.route.id===z.route.id)&&z.route.id in g&&d[z.route.id]?.shouldRevalidate||D.hasClientLoader?C=!0:k.add(z.route.id))}),k.size===0)return[];let A=sE(n,h,"data");return C&&k.size>0&&A.searchParams.set("_routes",t.filter(z=>k.has(z.route.id)).map(z=>z.route.id).join(",")),[A.pathname+A.search]},[h,g,a,l,_,t,n,d]),S=R.useMemo(()=>uE(b,l),[b,l]),j=gE(b);return R.createElement(R.Fragment,null,w.map(k=>R.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...r})),S.map(k=>R.createElement("link",{key:k,rel:"modulepreload",href:k,...r})),j.map(({key:k,link:C})=>R.createElement("link",{key:k,nonce:r.nonce,...C})))}function vE(...n){return t=>{n.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var hb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hb&&(window.__reactRouterVersion="7.10.1")}catch{}function _E({basename:n,children:t,unstable_useTransitions:r,window:a}){let l=R.useRef();l.current==null&&(l.current=iT({window:a,v5Compat:!0}));let d=l.current,[h,g]=R.useState({action:d.action,location:d.location}),y=R.useCallback(_=>{r===!1?g(_):R.startTransition(()=>g(_))},[r]);return R.useLayoutEffect(()=>d.listen(y),[d,y]),R.createElement(YT,{basename:n,children:t,location:h.location,navigationType:h.action,navigator:d,unstable_useTransitions:r===!0})}var fb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pb=R.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:l,reloadDocument:d,replace:h,state:g,target:y,to:_,preventScrollReset:b,viewTransition:w,...S},j){let{basename:k,unstable_useTransitions:C}=R.useContext(ni),A=typeof _=="string"&&fb.test(_),z,D=!1;if(typeof _=="string"&&A&&(z=_,hb))try{let fe=new URL(window.location.href),te=_.startsWith("//")?new URL(fe.protocol+_):new URL(_),W=mr(te.pathname,k);te.origin===fe.origin&&W!=null?_=W+te.search+te.hash:D=!0}catch{In(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=MT(_,{relative:l}),[Z,$,V]=pE(a,S),K=wE(_,{replace:h,state:g,target:y,preventScrollReset:b,relative:l,viewTransition:w,unstable_useTransitions:C});function oe(fe){t&&t(fe),fe.defaultPrevented||K(fe)}let ye=R.createElement("a",{...S,...V,href:z||P,onClick:D||d?t:oe,ref:vE(j,$),target:y,"data-discover":!A&&r==="render"?"true":void 0});return Z&&!A?R.createElement(R.Fragment,null,ye,R.createElement(mE,{page:P})):ye});pb.displayName="Link";var Zp=R.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:l=!1,style:d,to:h,viewTransition:g,children:y,..._},b){let w=xu(h,{relative:_.relative}),S=ri(),j=R.useContext(Qd),{navigator:k,basename:C}=R.useContext(ni),A=j!=null&&CE(w)&&g===!0,z=k.encodeLocation?k.encodeLocation(w).pathname:w.pathname,D=S.pathname,P=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;r||(D=D.toLowerCase(),P=P?P.toLowerCase():null,z=z.toLowerCase()),P&&C&&(P=mr(P,C)||P);const Z=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let $=D===z||!l&&D.startsWith(z)&&D.charAt(Z)==="/",V=P!=null&&(P===z||!l&&P.startsWith(z)&&P.charAt(z.length)==="/"),K={isActive:$,isPending:V,isTransitioning:A},oe=$?t:void 0,ye;typeof a=="function"?ye=a(K):ye=[a,$?"active":null,V?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let fe=typeof d=="function"?d(K):d;return R.createElement(pb,{..._,"aria-current":oe,className:ye,ref:b,style:fe,to:h,viewTransition:g},typeof y=="function"?y(K):y)});Zp.displayName="NavLink";var xE=R.forwardRef(({discover:n="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:l,state:d,method:h=wd,action:g,onSubmit:y,relative:_,preventScrollReset:b,viewTransition:w,...S},j)=>{let{unstable_useTransitions:k}=R.useContext(ni),C=EE(),A=jE(g,{relative:_}),z=h.toLowerCase()==="get"?"get":"post",D=typeof g=="string"&&fb.test(g),P=Z=>{if(y&&y(Z),Z.defaultPrevented)return;Z.preventDefault();let $=Z.nativeEvent.submitter,V=$?.getAttribute("formmethod")||h,K=()=>C($||Z.currentTarget,{fetcherKey:t,method:V,navigate:r,replace:l,state:d,relative:_,preventScrollReset:b,viewTransition:w});k&&r!==!1?R.startTransition(()=>K()):K()};return R.createElement("form",{ref:j,method:z,action:A,onSubmit:a?y:P,...S,"data-discover":!D&&n==="render"?"true":void 0})});xE.displayName="Form";function bE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mb(n){let t=R.useContext(Lo);return vt(t,bE(n)),t}function wE(n,{target:t,replace:r,state:a,preventScrollReset:l,relative:d,viewTransition:h,unstable_useTransitions:g}={}){let y=wt(),_=ri(),b=xu(n,{relative:d});return R.useCallback(w=>{if(tE(w,t)){w.preventDefault();let S=r!==void 0?r:cu(_)===cu(b),j=()=>y(n,{replace:S,state:a,preventScrollReset:l,relative:d,viewTransition:h});g?R.startTransition(()=>j()):j()}},[_,y,b,r,a,t,n,l,d,h,g])}var SE=0,TE=()=>`__${String(++SE)}__`;function EE(){let{router:n}=mb("useSubmit"),{basename:t}=R.useContext(ni),r=FT(),a=n.fetch,l=n.navigate;return R.useCallback(async(d,h={})=>{let{action:g,method:y,encType:_,formData:b,body:w}=rE(d,t);if(h.navigate===!1){let S=h.fetcherKey||TE();await a(S,r,h.action||g,{preventScrollReset:h.preventScrollReset,formData:b,body:w,formMethod:h.method||y,formEncType:h.encType||_,flushSync:h.flushSync})}else await l(h.action||g,{preventScrollReset:h.preventScrollReset,formData:b,body:w,formMethod:h.method||y,formEncType:h.encType||_,replace:h.replace,state:h.state,fromRouteId:r,flushSync:h.flushSync,viewTransition:h.viewTransition})},[a,l,t,r])}function jE(n,{relative:t}={}){let{basename:r}=R.useContext(ni),a=R.useContext(ii);vt(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),d={...xu(n||".",{relative:t})},h=ri();if(n==null){d.search=h.search;let g=new URLSearchParams(d.search),y=g.getAll("index");if(y.some(b=>b==="")){g.delete("index"),y.filter(w=>w).forEach(w=>g.append("index",w));let b=g.toString();d.search=b?`?${b}`:""}}return(!n||n===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:pr([r,d.pathname])),cu(d)}function CE(n,{relative:t}={}){let r=R.useContext(ib);vt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=mb("useViewTransitionState"),l=xu(n,{relative:t});if(!r.isTransitioning)return!1;let d=mr(r.currentLocation.pathname,a)||r.currentLocation.pathname,h=mr(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Ld(l.pathname,h)!=null||Ld(l.pathname,d)!=null}var AE=Jx(),hr={},ld={},Gp=function(n,t){return Gp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},Gp(n,t)};function gb(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gp(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var zd=function(){return zd=Object.assign||function(t){for(var r,a=1,l=arguments.length;a<l;a++){r=arguments[a];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(t[d]=r[d])}return t},zd.apply(this,arguments)};function Po(n,t){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&t.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(n);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(n,a[l])&&(r[a[l]]=n[a[l]]);return r}function yb(n,t,r,a){var l=arguments.length,d=l<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,r):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,t,r,a);else for(var g=n.length-1;g>=0;g--)(h=n[g])&&(d=(l<3?h(d):l>3?h(t,r,d):h(t,r))||d);return l>3&&d&&Object.defineProperty(t,r,d),d}function vb(n,t){return function(r,a){t(r,a,n)}}function _b(n,t,r,a,l,d){function h(z){if(z!==void 0&&typeof z!="function")throw new TypeError("Function expected");return z}for(var g=a.kind,y=g==="getter"?"get":g==="setter"?"set":"value",_=!t&&n?a.static?n:n.prototype:null,b=t||(_?Object.getOwnPropertyDescriptor(_,a.name):{}),w,S=!1,j=r.length-1;j>=0;j--){var k={};for(var C in a)k[C]=C==="access"?{}:a[C];for(var C in a.access)k.access[C]=a.access[C];k.addInitializer=function(z){if(S)throw new TypeError("Cannot add initializers after decoration has completed");d.push(h(z||null))};var A=(0,r[j])(g==="accessor"?{get:b.get,set:b.set}:b[y],k);if(g==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(w=h(A.get))&&(b.get=w),(w=h(A.set))&&(b.set=w),(w=h(A.init))&&l.unshift(w)}else(w=h(A))&&(g==="field"?l.unshift(w):b[y]=w)}_&&Object.defineProperty(_,a.name,b),S=!0}function xb(n,t,r){for(var a=arguments.length>2,l=0;l<t.length;l++)r=a?t[l].call(n,r):t[l].call(n);return a?r:void 0}function bb(n){return typeof n=="symbol"?n:"".concat(n)}function wb(n,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Sb(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function be(n,t,r,a){function l(d){return d instanceof r?d:new r(function(h){h(d)})}return new(r||(r=Promise))(function(d,h){function g(b){try{_(a.next(b))}catch(w){h(w)}}function y(b){try{_(a.throw(b))}catch(w){h(w)}}function _(b){b.done?d(b.value):l(b.value).then(g,y)}_((a=a.apply(n,t||[])).next())})}function Tb(n,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,l,d,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=g(0),h.throw=g(1),h.return=g(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(_){return function(b){return y([_,b])}}function y(_){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,_[0]&&(r=0)),r;)try{if(a=1,l&&(d=_[0]&2?l.return:_[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,_[1])).done)return d;switch(l=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,l=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){r.label=_[1];break}if(_[0]===6&&r.label<d[1]){r.label=d[1],d=_;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(_);break}d[2]&&r.ops.pop(),r.trys.pop();continue}_=t.call(n,r)}catch(b){_=[6,b],l=0}finally{a=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}var th=Object.create?(function(n,t,r,a){a===void 0&&(a=r);var l=Object.getOwnPropertyDescriptor(t,r);(!l||("get"in l?!t.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,a,l)}):(function(n,t,r,a){a===void 0&&(a=r),n[a]=t[r]});function Eb(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&th(t,n,r)}function Pd(n){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&n[t],a=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zm(n,t){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var a=r.call(n),l,d=[],h;try{for(;(t===void 0||t-- >0)&&!(l=a.next()).done;)d.push(l.value)}catch(g){h={error:g}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(h)throw h.error}}return d}function jb(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(Zm(arguments[t]));return n}function Cb(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;for(var a=Array(n),l=0,t=0;t<r;t++)for(var d=arguments[t],h=0,g=d.length;h<g;h++,l++)a[l]=d[h];return a}function Ab(n,t,r){if(r||arguments.length===2)for(var a=0,l=t.length,d;a<l;a++)(d||!(a in t))&&(d||(d=Array.prototype.slice.call(t,0,a)),d[a]=t[a]);return n.concat(d||Array.prototype.slice.call(t))}function Ao(n){return this instanceof Ao?(this.v=n,this):new Ao(n)}function kb(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(n,t||[]),l,d=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",h),l[Symbol.asyncIterator]=function(){return this},l;function h(j){return function(k){return Promise.resolve(k).then(j,w)}}function g(j,k){a[j]&&(l[j]=function(C){return new Promise(function(A,z){d.push([j,C,A,z])>1||y(j,C)})},k&&(l[j]=k(l[j])))}function y(j,k){try{_(a[j](k))}catch(C){S(d[0][3],C)}}function _(j){j.value instanceof Ao?Promise.resolve(j.value.v).then(b,w):S(d[0][2],j)}function b(j){y("next",j)}function w(j){y("throw",j)}function S(j,k){j(k),d.shift(),d.length&&y(d[0][0],d[0][1])}}function Rb(n){var t,r;return t={},a("next"),a("throw",function(l){throw l}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(l,d){t[l]=n[l]?function(h){return(r=!r)?{value:Ao(n[l](h)),done:!1}:d?d(h):h}:d}}function Ob(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],r;return t?t.call(n):(n=typeof Pd=="function"?Pd(n):n[Symbol.iterator](),r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r);function a(d){r[d]=n[d]&&function(h){return new Promise(function(g,y){h=n[d](h),l(g,y,h.done,h.value)})}}function l(d,h,g,y){Promise.resolve(y).then(function(_){d({value:_,done:g})},h)}}function Mb(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}var kE=Object.create?(function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}):function(n,t){n.default=t},Kp=function(n){return Kp=Object.getOwnPropertyNames||function(t){var r=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[r.length]=a);return r},Kp(n)};function Lb(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var r=Kp(n),a=0;a<r.length;a++)r[a]!=="default"&&th(t,n,r[a]);return kE(t,n),t}function zb(n){return n&&n.__esModule?n:{default:n}}function Pb(n,t,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!a:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:t.get(n)}function Db(n,t,r,a,l){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!l:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?l.call(n,r):l?l.value=r:t.set(n,r),r}function Bb(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function Nb(n,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var a,l;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=t[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=t[Symbol.dispose],r&&(l=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");l&&(a=function(){try{l.call(this)}catch(d){return Promise.reject(d)}}),n.stack.push({value:t,dispose:a,async:r})}else r&&n.stack.push({async:!0});return t}var RE=typeof SuppressedError=="function"?SuppressedError:function(n,t,r){var a=new Error(r);return a.name="SuppressedError",a.error=n,a.suppressed=t,a};function Ub(n){function t(d){n.error=n.hasError?new RE(d,n.error,"An error was suppressed during disposal."):d,n.hasError=!0}var r,a=0;function l(){for(;r=n.stack.pop();)try{if(!r.async&&a===1)return a=0,n.stack.push(r),Promise.resolve().then(l);if(r.dispose){var d=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(d).then(l,function(h){return t(h),l()})}else a|=1}catch(h){t(h)}if(a===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return l()}function Ib(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,a,l,d,h){return a?t?".jsx":".js":l&&(!d||!h)?r:l+d+"."+h.toLowerCase()+"js"}):n}const OE={__extends:gb,__assign:zd,__rest:Po,__decorate:yb,__param:vb,__esDecorate:_b,__runInitializers:xb,__propKey:bb,__setFunctionName:wb,__metadata:Sb,__awaiter:be,__generator:Tb,__createBinding:th,__exportStar:Eb,__values:Pd,__read:Zm,__spread:jb,__spreadArrays:Cb,__spreadArray:Ab,__await:Ao,__asyncGenerator:kb,__asyncDelegator:Rb,__asyncValues:Ob,__makeTemplateObject:Mb,__importStar:Lb,__importDefault:zb,__classPrivateFieldGet:Pb,__classPrivateFieldSet:Db,__classPrivateFieldIn:Bb,__addDisposableResource:Nb,__disposeResources:Ub,__rewriteRelativeImportExtension:Ib},ME=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Nb,get __assign(){return zd},__asyncDelegator:Rb,__asyncGenerator:kb,__asyncValues:Ob,__await:Ao,__awaiter:be,__classPrivateFieldGet:Pb,__classPrivateFieldIn:Bb,__classPrivateFieldSet:Db,__createBinding:th,__decorate:yb,__disposeResources:Ub,__esDecorate:_b,__exportStar:Eb,__extends:gb,__generator:Tb,__importDefault:zb,__importStar:Lb,__makeTemplateObject:Mb,__metadata:Sb,__param:vb,__propKey:bb,__read:Zm,__rest:Po,__rewriteRelativeImportExtension:Ib,__runInitializers:xb,__setFunctionName:wb,__spread:jb,__spreadArray:Ab,__spreadArrays:Cb,__values:Pd,default:OE},Symbol.toStringTag,{value:"Module"})),LE=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);let nh=class extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}},Vb=class extends nh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Yp=class extends nh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Xp=class extends nh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Dd;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Dd||(Dd={}));class zE{constructor(t,{headers:r={},customFetch:a,region:l=Dd.Any}={}){this.url=t,this.headers=r,this.region=l,this.fetch=LE(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return be(this,arguments,void 0,function*(r,a={}){var l;let d,h;try{const{headers:g,method:y,body:_,signal:b,timeout:w}=a;let S={},{region:j}=a;j||(j=this.region);const k=new URL(`${this.url}/${r}`);j&&j!=="any"&&(S["x-region"]=j,k.searchParams.set("forceFunctionRegion",j));let C;_&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&_ instanceof Blob||_ instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",C=_):typeof _=="string"?(S["Content-Type"]="text/plain",C=_):typeof FormData<"u"&&_ instanceof FormData?C=_:(S["Content-Type"]="application/json",C=JSON.stringify(_)):C=_;let A=b;w&&(h=new AbortController,d=setTimeout(()=>h.abort(),w),b?(A=h.signal,b.addEventListener("abort",()=>h.abort())):A=h.signal);const z=yield this.fetch(k.toString(),{method:y||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),g),body:C,signal:A}).catch($=>{throw new Vb($)}),D=z.headers.get("x-relay-error");if(D&&D==="true")throw new Yp(z);if(!z.ok)throw new Xp(z);let P=((l=z.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),Z;return P==="application/json"?Z=yield z.json():P==="application/octet-stream"||P==="application/pdf"?Z=yield z.blob():P==="text/event-stream"?Z=z:P==="multipart/form-data"?Z=yield z.formData():Z=yield z.text(),{data:Z,error:null,response:z}}catch(g){return{data:null,error:g,response:g instanceof Xp||g instanceof Yp?g.context:void 0}}finally{d&&clearTimeout(d)}})}}const PE=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Dd},FunctionsClient:zE,FunctionsError:nh,FunctionsFetchError:Vb,FunctionsHttpError:Xp,FunctionsRelayError:Yp},Symbol.toStringTag,{value:"Module"})),Hb=vu(PE);var on={};const Do=vu(ME);var ud={},cd={},dd={},hd={},fd={},pd={},t_;function qb(){if(t_)return pd;t_=1,Object.defineProperty(pd,"__esModule",{value:!0});class n extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return pd.default=n,pd}var n_;function Wb(){if(n_)return fd;n_=1,Object.defineProperty(fd,"__esModule",{value:!0});const t=Do.__importDefault(qb());let r=class{constructor(l){var d,h;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(d=l.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=l.signal,this.isMaybeSingle=(h=l.isMaybeSingle)!==null&&h!==void 0?h:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,d){return this.headers=new Headers(this.headers),this.headers.set(l,d),this}then(l,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let g=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var _,b,w,S;let j=null,k=null,C=null,A=y.status,z=y.statusText;if(y.ok){if(this.method!=="HEAD"){const $=await y.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((_=this.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?k=$:k=JSON.parse($))}const P=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),Z=(w=y.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");P&&Z&&Z.length>1&&(C=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(j={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,C=null,A=406,z="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const P=await y.text();try{j=JSON.parse(P),Array.isArray(j)&&y.status===404&&(k=[],j=null,A=200,z="OK")}catch{y.status===404&&P===""?(A=204,z="No Content"):j={message:P}}if(j&&this.isMaybeSingle&&(!((S=j?.details)===null||S===void 0)&&S.includes("0 rows"))&&(j=null,A=200,z="OK"),j&&this.shouldThrowOnError)throw new t.default(j)}return{error:j,data:k,count:C,status:A,statusText:z}});return this.shouldThrowOnError||(g=g.catch(y=>{var _,b,w,S,j,k;let C="";const A=y?.cause;if(A){const z=(_=A?.message)!==null&&_!==void 0?_:"",D=(b=A?.code)!==null&&b!==void 0?b:"";C=`${(w=y?.name)!==null&&w!==void 0?w:"FetchError"}: ${y?.message}`,C+=`

Caused by: ${(S=A?.name)!==null&&S!==void 0?S:"Error"}: ${z}`,D&&(C+=` (${D})`),A?.stack&&(C+=`
${A.stack}`)}else C=(j=y?.stack)!==null&&j!==void 0?j:"";return{error:{message:`${(k=y?.name)!==null&&k!==void 0?k:"FetchError"}: ${y?.message}`,details:C,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),g.then(l,d)}returns(){return this}overrideTypes(){return this}};return fd.default=r,fd}var i_;function Fb(){if(i_)return hd;i_=1,Object.defineProperty(hd,"__esModule",{value:!0});const t=Do.__importDefault(Wb());let r=class extends t.default{select(l){let d=!1;const h=(l??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:d=!0,nullsFirst:h,foreignTable:g,referencedTable:y=g}={}){const _=y?`${y}.order`:"order",b=this.url.searchParams.get(_);return this.url.searchParams.set(_,`${b?`${b},`:""}${l}.${d?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:d,referencedTable:h=d}={}){const g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${l}`),this}range(l,d,{foreignTable:h,referencedTable:g=h}={}){const y=typeof g>"u"?"offset":`${g}.offset`,_=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(y,`${l}`),this.url.searchParams.set(_,`${d-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:d=!1,settings:h=!1,buffers:g=!1,wal:y=!1,format:_="text"}={}){var b;const w=[l?"analyze":null,d?"verbose":null,h?"settings":null,g?"buffers":null,y?"wal":null].filter(Boolean).join("|"),S=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${_}; for="${S}"; options=${w};`),_==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}};return hd.default=r,hd}var r_;function Gm(){if(r_)return dd;r_=1,Object.defineProperty(dd,"__esModule",{value:!0});const t=Do.__importDefault(Fb()),r=new RegExp("[,()]");let a=class extends t.default{eq(d,h){return this.url.searchParams.append(d,`eq.${h}`),this}neq(d,h){return this.url.searchParams.append(d,`neq.${h}`),this}gt(d,h){return this.url.searchParams.append(d,`gt.${h}`),this}gte(d,h){return this.url.searchParams.append(d,`gte.${h}`),this}lt(d,h){return this.url.searchParams.append(d,`lt.${h}`),this}lte(d,h){return this.url.searchParams.append(d,`lte.${h}`),this}like(d,h){return this.url.searchParams.append(d,`like.${h}`),this}likeAllOf(d,h){return this.url.searchParams.append(d,`like(all).{${h.join(",")}}`),this}likeAnyOf(d,h){return this.url.searchParams.append(d,`like(any).{${h.join(",")}}`),this}ilike(d,h){return this.url.searchParams.append(d,`ilike.${h}`),this}ilikeAllOf(d,h){return this.url.searchParams.append(d,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(d,h){return this.url.searchParams.append(d,`ilike(any).{${h.join(",")}}`),this}regexMatch(d,h){return this.url.searchParams.append(d,`match.${h}`),this}regexIMatch(d,h){return this.url.searchParams.append(d,`imatch.${h}`),this}is(d,h){return this.url.searchParams.append(d,`is.${h}`),this}isDistinct(d,h){return this.url.searchParams.append(d,`isdistinct.${h}`),this}in(d,h){const g=Array.from(new Set(h)).map(y=>typeof y=="string"&&r.test(y)?`"${y}"`:`${y}`).join(",");return this.url.searchParams.append(d,`in.(${g})`),this}contains(d,h){return typeof h=="string"?this.url.searchParams.append(d,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(d,`cs.{${h.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(h)}`),this}containedBy(d,h){return typeof h=="string"?this.url.searchParams.append(d,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(d,`cd.{${h.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(h)}`),this}rangeGt(d,h){return this.url.searchParams.append(d,`sr.${h}`),this}rangeGte(d,h){return this.url.searchParams.append(d,`nxl.${h}`),this}rangeLt(d,h){return this.url.searchParams.append(d,`sl.${h}`),this}rangeLte(d,h){return this.url.searchParams.append(d,`nxr.${h}`),this}rangeAdjacent(d,h){return this.url.searchParams.append(d,`adj.${h}`),this}overlaps(d,h){return typeof h=="string"?this.url.searchParams.append(d,`ov.${h}`):this.url.searchParams.append(d,`ov.{${h.join(",")}}`),this}textSearch(d,h,{config:g,type:y}={}){let _="";y==="plain"?_="pl":y==="phrase"?_="ph":y==="websearch"&&(_="w");const b=g===void 0?"":`(${g})`;return this.url.searchParams.append(d,`${_}fts${b}.${h}`),this}match(d){return Object.entries(d).forEach(([h,g])=>{this.url.searchParams.append(h,`eq.${g}`)}),this}not(d,h,g){return this.url.searchParams.append(d,`not.${h}.${g}`),this}or(d,{foreignTable:h,referencedTable:g=h}={}){const y=g?`${g}.or`:"or";return this.url.searchParams.append(y,`(${d})`),this}filter(d,h,g){return this.url.searchParams.append(d,`${h}.${g}`),this}};return dd.default=a,dd}var s_;function $b(){if(s_)return cd;s_=1,Object.defineProperty(cd,"__esModule",{value:!0});const t=Do.__importDefault(Gm());let r=class{constructor(l,{headers:d={},schema:h,fetch:g}){this.url=l,this.headers=new Headers(d),this.schema=h,this.fetch=g}select(l,d){const{head:h=!1,count:g}=d??{},y=h?"HEAD":"GET";let _=!1;const b=(l??"*").split("").map(w=>/\s/.test(w)&&!_?"":(w==='"'&&(_=!_),w)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer",`count=${g}`),new t.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:d,defaultToNull:h=!0}={}){var g;const y="POST";if(d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const _=l.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(_.length>0){const b=[...new Set(_)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(l,{onConflict:d,ignoreDuplicates:h=!1,count:g,defaultToNull:y=!0}={}){var _;const b="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),g&&this.headers.append("Prefer",`count=${g}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const w=l.reduce((S,j)=>S.concat(Object.keys(j)),[]);if(w.length>0){const S=[...new Set(w)].map(j=>`"${j}"`);this.url.searchParams.set("columns",S.join(","))}}return new t.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}update(l,{count:d}={}){var h;const g="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:l}={}){var d;const h="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};return cd.default=r,cd}var a_;function DE(){if(a_)return ud;a_=1,Object.defineProperty(ud,"__esModule",{value:!0});const n=Do,t=n.__importDefault($b()),r=n.__importDefault(Gm());let a=class Zb{constructor(d,{headers:h={},schema:g,fetch:y}={}){this.url=d,this.headers=new Headers(h),this.schemaName=g,this.fetch=y}from(d){if(!d||typeof d!="string"||d.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const h=new URL(`${this.url}/${d}`);return new t.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new Zb(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,h={},{head:g=!1,get:y=!1,count:_}={}){var b;let w;const S=new URL(`${this.url}/rpc/${d}`);let j;g||y?(w=g?"HEAD":"GET",Object.entries(h).filter(([C,A])=>A!==void 0).map(([C,A])=>[C,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([C,A])=>{S.searchParams.append(C,A)})):(w="POST",j=h);const k=new Headers(this.headers);return _&&k.set("Prefer",`count=${_}`),new r.default({method:w,url:S,headers:k,schema:this.schemaName,body:j,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};return ud.default=a,ud}var o_;function Gb(){if(o_)return on;o_=1,Object.defineProperty(on,"__esModule",{value:!0}),on.PostgrestError=on.PostgrestBuilder=on.PostgrestTransformBuilder=on.PostgrestFilterBuilder=on.PostgrestQueryBuilder=on.PostgrestClient=void 0;const n=Do,t=n.__importDefault(DE());on.PostgrestClient=t.default;const r=n.__importDefault($b());on.PostgrestQueryBuilder=r.default;const a=n.__importDefault(Gm());on.PostgrestFilterBuilder=a.default;const l=n.__importDefault(Fb());on.PostgrestTransformBuilder=l.default;const d=n.__importDefault(Wb());on.PostgrestBuilder=d.default;const h=n.__importDefault(qb());return on.PostgrestError=h.default,on.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:d.default,PostgrestError:h.default},on}class Kb{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const a=r.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const a=this.getWebSocketConstructor();return new a(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const BE="2.87.1",NE=`realtime-js/${BE}`,Yb="1.0.0",UE="2.0.0",l_=Yb,Jp=1e4,IE=1e3,VE=100;var ca;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ca||(ca={}));var Bt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Bt||(Bt={}));var xi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(xi||(xi={}));var Qp;(function(n){n.websocket="websocket"})(Qp||(Qp={}));var da;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(da||(da={}));class HE{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let a=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,a;const l=(a=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(t){var r,a;const l=(a=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:{},h=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(t,r,a){var l,d;const h=t.topic,g=(l=t.ref)!==null&&l!==void 0?l:"",y=(d=t.join_ref)!==null&&d!==void 0?d:"",_=t.payload.event,b=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(y.length>255)throw new Error(`joinRef length ${y.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`userEvent length ${_.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+y.length+g.length+h.length+_.length+w.length,j=new ArrayBuffer(this.HEADER_LENGTH+S);let k=new DataView(j),C=0;k.setUint8(C++,this.KINDS.userBroadcastPush),k.setUint8(C++,y.length),k.setUint8(C++,g.length),k.setUint8(C++,h.length),k.setUint8(C++,_.length),k.setUint8(C++,w.length),k.setUint8(C++,r),Array.from(y,z=>k.setUint8(C++,z.charCodeAt(0))),Array.from(g,z=>k.setUint8(C++,z.charCodeAt(0))),Array.from(h,z=>k.setUint8(C++,z.charCodeAt(0))),Array.from(_,z=>k.setUint8(C++,z.charCodeAt(0))),Array.from(w,z=>k.setUint8(C++,z.charCodeAt(0)));var A=new Uint8Array(j.byteLength+a.byteLength);return A.set(new Uint8Array(j),0),A.set(new Uint8Array(a),j.byteLength),A.buffer}decode(t,r){if(this._isArrayBuffer(t)){let a=this._binaryDecode(t);return r(a)}if(typeof t=="string"){const a=JSON.parse(t),[l,d,h,g,y]=a;return r({join_ref:l,ref:d,topic:h,event:g,payload:y})}return r({})}_binaryDecode(t){const r=new DataView(t),a=r.getUint8(0),l=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,l)}}_decodeUserBroadcast(t,r,a){const l=r.getUint8(1),d=r.getUint8(2),h=r.getUint8(3),g=r.getUint8(4);let y=this.HEADER_LENGTH+4;const _=a.decode(t.slice(y,y+l));y=y+l;const b=a.decode(t.slice(y,y+d));y=y+d;const w=a.decode(t.slice(y,y+h));y=y+h;const S=t.slice(y,t.byteLength),j=g===this.JSON_ENCODING?JSON.parse(a.decode(S)):S,k={type:this.BROADCAST_EVENT,event:b,payload:j};return h>0&&(k.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:_,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([a])=>r.includes(a)))}}class Xb{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(dt||(dt={}));const u_=(n,t,r={})=>{var a;const l=(a=r.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((d,h)=>(d[h]=qE(h,n,t,l),d),{}):{}},qE=(n,t,r,a)=>{const l=t.find(g=>g.name===n),d=l?.type,h=r[n];return d&&!a.includes(d)?Jb(d,h):em(h)},Jb=(n,t)=>{if(n.charAt(0)==="_"){const r=n.slice(1,n.length);return ZE(t,r)}switch(n){case dt.bool:return WE(t);case dt.float4:case dt.float8:case dt.int2:case dt.int4:case dt.int8:case dt.numeric:case dt.oid:return FE(t);case dt.json:case dt.jsonb:return $E(t);case dt.timestamp:return GE(t);case dt.abstime:case dt.date:case dt.daterange:case dt.int4range:case dt.int8range:case dt.money:case dt.reltime:case dt.text:case dt.time:case dt.timestamptz:case dt.timetz:case dt.tsrange:case dt.tstzrange:return em(t);default:return em(t)}},em=n=>n,WE=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},FE=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},$E=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},ZE=(n,t)=>{if(typeof n!="string")return n;const r=n.length-1,a=n[r];if(n[0]==="{"&&a==="}"){let d;const h=n.slice(1,r);try{d=JSON.parse("["+h+"]")}catch{d=h?h.split(","):[]}return d.map(g=>Jb(t,g))}return n},GE=n=>typeof n=="string"?n.replace(" ","T"):n,Qb=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class bp{constructor(t,r,a={},l=Jp){this.channel=t,this.event=r,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var tm;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(tm||(tm={}));let e1=class Td{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:d,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Td.syncState(this.state,l,d,h),this.pendingDiffs.forEach(y=>{this.state=Td.syncDiff(this.state,y,d,h)}),this.pendingDiffs=[],g()}),this.channel._on(a.diff,{},l=>{const{onJoin:d,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Td.syncDiff(this.state,l,d,h),g())}),this.onJoin((l,d,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:d,newPresences:h})}),this.onLeave((l,d,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:d,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,l){const d=this.cloneDeep(t),h=this.transformState(r),g={},y={};return this.map(d,(_,b)=>{h[_]||(y[_]=b)}),this.map(h,(_,b)=>{const w=d[_];if(w){const S=b.map(A=>A.presence_ref),j=w.map(A=>A.presence_ref),k=b.filter(A=>j.indexOf(A.presence_ref)<0),C=w.filter(A=>S.indexOf(A.presence_ref)<0);k.length>0&&(g[_]=k),C.length>0&&(y[_]=C)}else g[_]=b}),this.syncDiff(d,{joins:g,leaves:y},a,l)}static syncDiff(t,r,a,l){const{joins:d,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(d,(g,y)=>{var _;const b=(_=t[g])!==null&&_!==void 0?_:[];if(t[g]=this.cloneDeep(y),b.length>0){const w=t[g].map(j=>j.presence_ref),S=b.filter(j=>w.indexOf(j.presence_ref)<0);t[g].unshift(...S)}a(g,b,y)}),this.map(h,(g,y)=>{let _=t[g];if(!_)return;const b=y.map(w=>w.presence_ref);_=_.filter(w=>b.indexOf(w.presence_ref)<0),t[g]=_,l(g,_,y),_.length===0&&delete t[g]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const l=t[a];return"metas"in l?r[a]=l.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[a]=l,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var nm;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(nm||(nm={}));var Eo;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Eo||(Eo={}));var Bi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Bi||(Bi={}));const KE=Bt;let t1=class eu{constructor(t,r={config:{}},a){var l,d;if(this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new bp(this,xi.join,this.params,this.timeout),this.rejoinTimer=new Xb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xi.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new e1(this),this.broadcastEndpointURL=Qb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var a,l,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:h,presence:g,private:y}}=this.params,_=(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(j=>j.filter))!==null&&l!==void 0?l:[],b=!!this.bindings[Eo.PRESENCE]&&this.bindings[Eo.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},S={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:_,private:y};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(j=>t?.(Bi.CHANNEL_ERROR,j)),this._onClose(()=>t?.(Bi.CLOSED)),this.updateJoinPayload(Object.assign({config:S},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:j})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){t?.(Bi.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,A=(k=C?.length)!==null&&k!==void 0?k:0,z=[];for(let D=0;D<A;D++){const P=C[D],{filter:{event:Z,schema:$,table:V,filter:K}}=P,oe=j&&j[D];if(oe&&oe.event===Z&&eu.isFilterValueEqual(oe.schema,$)&&eu.isFilterValueEqual(oe.table,V)&&eu.isFilterValueEqual(oe.filter,K))z.push(Object.assign(Object.assign({},P),{id:oe.id}));else{this.unsubscribe(),this.state=Bt.errored,t?.(Bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=z,t&&t(Bi.SUBSCRIBED);return}}).receive("error",j=>{this.state=Bt.errored,t?.(Bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t?.(Bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this.state===Bt.joined&&t===Eo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,a)}async httpSend(t,r,a={}){var l;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(l=a.timeout)!==null&&l!==void 0?l:this.timeout);if(g.status===202)return{success:!0};let y=g.statusText;try{const _=await g.json();y=_.error||_.message||y}catch{}return Promise.reject(new Error(y))}async send(t,r={}){var a,l;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:h}=t,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:h,private:this.private}]})};try{const _=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=_.body)===null||l===void 0?void 0:l.cancel()),_.ok?"ok":"error"}catch(_){return _.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var h,g,y;const _=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((y=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||y===void 0)&&y.ack)&&d("ok"),_.receive("ok",()=>d("ok")),_.receive("error",()=>d("error")),_.receive("timeout",()=>d("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xi.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(l=>{a=new bp(this,xi.leave,{},t),a.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(t,r,a){const l=new AbortController,d=setTimeout(()=>l.abort(),a),h=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(d),h}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new bp(this,t,r,a);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>VE){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var l,d;const h=t.toLocaleLowerCase(),{close:g,error:y,leave:_,join:b}=xi;if(a&&[g,y,_,b].indexOf(h)>=0&&a!==this._joinRef())return;let S=this._onMessage(h,r,a);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(j=>{var k,C,A;return((k=j.filter)===null||k===void 0?void 0:k.event)==="*"||((A=(C=j.filter)===null||C===void 0?void 0:C.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===h}).map(j=>j.callback(S,a)):(d=this.bindings[h])===null||d===void 0||d.filter(j=>{var k,C,A,z,D,P;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const Z=j.id,$=(k=j.filter)===null||k===void 0?void 0:k.event;return Z&&((C=r.ids)===null||C===void 0?void 0:C.includes(Z))&&($==="*"||$?.toLocaleLowerCase()===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const Z=(D=(z=j?.filter)===null||z===void 0?void 0:z.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return Z==="*"||Z===((P=r?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof S=="object"&&"ids"in S){const k=S.data,{schema:C,table:A,commit_timestamp:z,type:D,errors:P}=k;S=Object.assign(Object.assign({},{schema:C,table:A,commit_timestamp:z,eventType:D,new:{},old:{},errors:P}),this._getPayloadRecords(k))}j.callback(S,a)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const l=t.toLocaleLowerCase(),d={type:l,filter:r,callback:a};return this.bindings[l]?this.bindings[l].push(d):this.bindings[l]=[d],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(l=>{var d;return!(((d=l.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===a&&eu.isEqual(l.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xi.close,{},t)}_onError(t){this._on(xi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=u_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=u_(t.columns,t.old_record)),r}};const wp=()=>{},md={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},YE=[1e3,2e3,5e3,1e4],XE=1e4,JE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let QE=class{constructor(t,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jp,this.transport=null,this.heartbeatIntervalMs=md.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wp,this.ref=0,this.reconnectTimer=null,this.vsn=l_,this.logger=wp,this.conn=null,this.sendBuffer=[],this.serializer=new HE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...d)=>l(...d):(...d)=>fetch(...d),!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Qp.websocket}`,this.httpEndpoint=Qb(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kb.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case ca.connecting:return da.Connecting;case ca.open:return da.Open;case ca.closing:return da.Closing;default:return da.Closed}}isConnected(){return this.connectionState()===da.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const a=`realtime:${t}`,l=this.getChannels().find(d=>d.topic===a);if(l)return l;{const d=new t1(`realtime:${t}`,r,this);return this.channels.push(d),d}}push(t){const{topic:r,event:a,payload:l,ref:d}=t,h=()=>{this.encode(t,g=>{var y;(y=this.conn)===null||y===void 0||y.send(g)})};this.log("push",`${r} ${a} (${d})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(IE,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},md.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(_){this.log("error","error in heartbeat callback",_)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:l,payload:d,ref:h}=r,g=h?`(${h})`:"",y=d.status||"";this.log("receive",`${y} ${a} ${l} ${g}`.trim(),d),this.channels.filter(_=>_._isMember(a)).forEach(_=>_._trigger(l,d,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ca.open||this.conn.readyState===ca.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(xi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${t}${a}${l}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([JE],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,a=!1;if(t)r=t,a=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const d={access_token:r,version:NE};r&&l.updateJoinPayload(d),l.joinedOnce&&l._isJoined()&&l._push(xi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(r)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Xb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},md.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,a,l,d,h,g,y,_,b,w,S,j;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:Jp,this.heartbeatIntervalMs=(l=t?.heartbeatIntervalMs)!==null&&l!==void 0?l:md.HEARTBEAT_INTERVAL,this.worker=(d=t?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(h=t?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=t?.heartbeatCallback)!==null&&g!==void 0?g:wp,this.vsn=(y=t?.vsn)!==null&&y!==void 0?y:l_,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(_=t?.reconnectAfterMs)!==null&&_!==void 0?_:(k=>YE[k-1]||XE),this.vsn){case Yb:this.encode=(b=t?.encode)!==null&&b!==void 0?b:((k,C)=>C(JSON.stringify(k))),this.decode=(w=t?.decode)!==null&&w!==void 0?w:((k,C)=>C(JSON.parse(k)));break;case UE:this.encode=(S=t?.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(j=t?.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const ej=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:KE,get REALTIME_LISTEN_TYPES(){return Eo},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return nm},get REALTIME_PRESENCE_LISTEN_EVENTS(){return tm},get REALTIME_SUBSCRIBE_STATES(){return Bi},RealtimeChannel:t1,RealtimeClient:QE,RealtimePresence:e1,WebSocketFactory:Kb},Symbol.toStringTag,{value:"Module"})),n1=vu(ej);class bu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function gt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class i1 extends bu{constructor(t,r,a){super(t),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bd extends bu{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Km=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),tj=()=>Response,im=n=>{if(Array.isArray(n))return n.map(r=>im(r));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([r,a])=>{const l=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));t[l]=im(a)}),t},nj=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ij=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),Sp=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},rj=(n,t,r)=>be(void 0,void 0,void 0,function*(){const a=yield tj();n instanceof a&&!r?.noResolveJson?n.json().then(l=>{const d=n.status||500,h=l?.statusCode||d+"";t(new i1(Sp(l),d,h))}).catch(l=>{t(new Bd(Sp(l),l))}):t(new Bd(Sp(n),n))}),sj=(n,t,r,a)=>{const l={method:n,headers:t?.headers||{}};return n==="GET"||!a?l:(nj(a)?(l.headers=Object.assign({"Content-Type":"application/json"},t?.headers),l.body=JSON.stringify(a)):l.body=a,t?.duplex&&(l.duplex=t.duplex),Object.assign(Object.assign({},l),r))};function wu(n,t,r,a,l,d){return be(this,void 0,void 0,function*(){return new Promise((h,g)=>{n(r,sj(t,a,l,d)).then(y=>{if(!y.ok)throw y;return a?.noResolveJson?y:y.json()}).then(y=>h(y)).catch(y=>rj(y,g,a))})})}function du(n,t,r,a){return be(this,void 0,void 0,function*(){return wu(n,"GET",t,r,a)})}function _i(n,t,r,a,l){return be(this,void 0,void 0,function*(){return wu(n,"POST",t,a,l,r)})}function rm(n,t,r,a,l){return be(this,void 0,void 0,function*(){return wu(n,"PUT",t,a,l,r)})}function aj(n,t,r,a){return be(this,void 0,void 0,function*(){return wu(n,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Ym(n,t,r,a,l){return be(this,void 0,void 0,function*(){return wu(n,"DELETE",t,a,l,r)})}class oj{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return be(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gt(t))return{data:null,error:t};throw t}})}}var r1;class lj{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[r1]="BlobDownloadBuilder",this.promise=null}asStream(){return new oj(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return be(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gt(t))return{data:null,error:t};throw t}})}}r1=Symbol.toStringTag;const uj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},c_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cj{constructor(t,r={},a,l){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=a,this.fetch=Km(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,a,l){return be(this,void 0,void 0,function*(){try{let d;const h=Object.assign(Object.assign({},c_),l);let g=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(h.upsert)});const y=h.metadata;typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),y&&d.append("metadata",this.encodeMetadata(y)),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.has("cacheControl")||d.append("cacheControl",h.cacheControl),y&&!d.has("metadata")&&d.append("metadata",this.encodeMetadata(y))):(d=a,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,y&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(y))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!h.duplex&&(h.duplex="half")),l?.headers&&(g=Object.assign(Object.assign({},g),l.headers));const _=this._removeEmptyFolders(r),b=this._getFinalPath(_),w=yield(t=="PUT"?rm:_i)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:g},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:_,id:w.Id,fullPath:w.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(gt(d))return{data:null,error:d};throw d}})}upload(t,r,a){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,l){return be(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),g=new URL(this.url+`/object/upload/sign/${h}`);g.searchParams.set("token",r);try{let y;const _=Object.assign({upsert:c_.upsert},l),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(_.upsert)});typeof Blob<"u"&&a instanceof Blob?(y=new FormData,y.append("cacheControl",_.cacheControl),y.append("",a)):typeof FormData<"u"&&a instanceof FormData?(y=a,y.append("cacheControl",_.cacheControl)):(y=a,b["cache-control"]=`max-age=${_.cacheControl}`,b["content-type"]=_.contentType);const w=yield rm(this.fetch,g.toString(),y,{headers:b});return{data:{path:d,fullPath:w.Key},error:null}}catch(y){if(this.shouldThrowOnError)throw y;if(gt(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(t,r){return be(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const l=Object.assign({},this.headers);r?.upsert&&(l["x-upsert"]="true");const d=yield _i(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),h=new URL(this.url+d.url),g=h.searchParams.get("token");if(!g)throw new bu("No token returned by API");return{data:{signedUrl:h.toString(),path:t,token:g},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}update(t,r,a){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return be(this,void 0,void 0,function*(){try{return{data:yield _i(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}})}copy(t,r,a){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield _i(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}})}createSignedUrl(t,r,a){return be(this,void 0,void 0,function*(){try{let l=this._getFinalPath(t),d=yield _i(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const h=a?.download?`&download=${a.download===!0?"":a.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${h}`)},{data:d,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}})}createSignedUrls(t,r,a){return be(this,void 0,void 0,function*(){try{const l=yield _i(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),d=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${d}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}})}download(t,r){const l=typeof r?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(r?.transform||{}),h=d?`?${d}`:"",g=this._getFinalPath(t),y=()=>du(this.fetch,`${this.url}/${l}/${g}${h}`,{headers:this.headers,noResolveJson:!0});return new lj(y,this.shouldThrowOnError)}info(t){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield du(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:im(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}exists(t){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield aj(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a)&&a instanceof Bd){const l=a.originalError;if([400,404].includes(l?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),l=[],d=r?.download?`download=${r.download===!0?"":r.download}`:"";d!==""&&l.push(d);const g=typeof r?.transform<"u"?"render/image":"object",y=this.transformOptsToQueryString(r?.transform||{});y!==""&&l.push(y);let _=l.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${a}${_}`)}}}remove(t){return be(this,void 0,void 0,function*(){try{return{data:yield Ym(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}list(t,r,a){return be(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},uj),r),{prefix:t||""});return{data:yield _i(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}})}listV2(t,r){return be(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield _i(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const s1="2.87.1",a1={"X-Client-Info":`storage-js/${s1}`};class dj{constructor(t,r={},a,l){this.shouldThrowOnError=!1;const d=new URL(t);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a1),r),this.fetch=Km(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return be(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield du(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}getBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield du(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}createBucket(t){return be(this,arguments,void 0,function*(r,a={public:!1}){try{return{data:yield _i(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}})}updateBucket(t,r){return be(this,void 0,void 0,function*(){try{return{data:yield rm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}emptyBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield _i(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Ym(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var hu=class extends Error{constructor(n,t){super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hj(n,t,r){const a=new URL(t,n);if(r)for(const[l,d]of Object.entries(r))d!==void 0&&a.searchParams.set(l,d);return a.toString()}async function fj(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function pj(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:r,path:a,query:l,body:d,headers:h}){const g=hj(n.baseUrl,a,l),y=await fj(n.auth),_=await t(g,{method:r,headers:{...d?{"Content-Type":"application/json"}:{},...y,...h},body:d?JSON.stringify(d):void 0}),b=await _.text(),w=(_.headers.get("content-type")||"").includes("application/json"),S=w&&b?JSON.parse(b):b;if(!_.ok){const j=w?S:void 0,k=j?.error;throw new hu(k?.message??`Request failed with status ${_.status}`,{status:_.status,icebergType:k?.type,icebergCode:k?.code,details:j})}return{status:_.status,headers:_.headers,data:S}}}}function gd(n){return n.join("")}var mj=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:gd(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(n,t){const r={namespace:n.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gd(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gd(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gd(n.namespace)}`}),!0}catch(t){if(t instanceof hu&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(r){if(r instanceof hu&&r.status===409)return;throw r}}};function po(n){return n.join("")}var gj=class{constructor(n,t="",r){this.client=n,this.prefix=t,this.accessDelegation=r}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${po(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${po(n.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(n,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${po(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${po(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${po(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${po(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(r){if(r instanceof hu&&r.status===404)return!1;throw r}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(r){if(r instanceof hu&&r.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw r}}},yj=class{constructor(n){let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const r=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=pj({baseUrl:r,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new mj(this.client,t),this.tableOps=new gj(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}};class o1{constructor(t,r={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a1),r),this.fetch=Km(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield _i(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}listBuckets(t){return be(this,void 0,void 0,function*(){try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const a=r.toString(),l=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield du(this.fetch,l,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Ym(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}})}from(t){if(!ij(t))throw new bu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new yj({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>be(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(r,{get(d,h){const g=d[h];return typeof g!="function"?g:(...y)=>be(this,void 0,void 0,function*(){try{return{data:yield g.apply(d,y),error:null}}catch(_){if(a)throw _;return{data:null,error:_}}})}})}}const Xm={"X-Client-Info":`storage-js/${s1}`,"Content-Type":"application/json"};class Jm extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function An(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Ed extends Jm{constructor(t,r,a){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class l1 extends Jm{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var sm;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(sm||(sm={}));const ih=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),vj=()=>Response,u1=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_j=n=>Array.from(new Float32Array(n)),xj=(n,t)=>{if(t!==void 0&&n.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${n.float32.length}`)},d_=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),bj=(n,t,r)=>be(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!r?.noResolveJson){const l=n.status||500,d=n;if(typeof d.json=="function")d.json().then(h=>{const g=h?.statusCode||h?.code||l+"";t(new Ed(d_(h),l,g))}).catch(()=>{const h=l+"",g=d.statusText||`HTTP ${l} error`;t(new Ed(g,l,h))});else{const h=l+"",g=d.statusText||`HTTP ${l} error`;t(new Ed(g,l,h))}}else t(new l1(d_(n),n))}),wj=(n,t,r,a)=>{const l={method:n,headers:t?.headers||{}};return a?(u1(a)?(l.headers=Object.assign({"Content-Type":"application/json"},t?.headers),l.body=JSON.stringify(a)):l.body=a,Object.assign(Object.assign({},l),r)):l};function Sj(n,t,r,a,l,d){return be(this,void 0,void 0,function*(){return new Promise((h,g)=>{n(r,wj(t,a,l,d)).then(y=>{if(!y.ok)throw y;if(a?.noResolveJson)return y;const _=y.headers.get("content-type");return!_||!_.includes("application/json")?{}:y.json()}).then(y=>h(y)).catch(y=>bj(y,g,a))})})}function Un(n,t,r,a,l){return be(this,void 0,void 0,function*(){return Sj(n,"POST",t,a,l,r)})}class c1{constructor(t,r={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xm),r),this.fetch=ih(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return be(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}getIndex(t,r){return be(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}listIndexes(t){return be(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return be(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}}class d1{constructor(t,r={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xm),r),this.fetch=ih(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return be(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Un(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}getVectors(t){return be(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}listVectors(t){return be(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Un(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}queryVectors(t){return be(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}deleteVectors(t){return be(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Un(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}}class h1{constructor(t,r={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xm),r),this.fetch=ih(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return be(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}getBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}listBuckets(){return be(this,arguments,void 0,function*(t={}){try{return{data:yield Un(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}}class f1 extends h1{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new p1(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return be(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return be(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return be(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return be(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class p1 extends c1{constructor(t,r,a,l){super(t,r,l),this.vectorBucketName=a}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return be(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return be(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return be(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return be(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new m1(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class m1 extends d1{constructor(t,r,a,l,d){super(t,r,d),this.vectorBucketName=a,this.indexName=l}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return be(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return be(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return be(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return be(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return be(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Tj extends dj{constructor(t,r={},a,l){super(t,r,a,l)}from(t){return new cj(this.url,this.headers,t,this.fetch)}get vectors(){return new f1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new o1(this.url+"/iceberg",this.headers,this.fetch)}}const Ej=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:o1,StorageApiError:i1,StorageClient:Tj,StorageError:bu,StorageUnknownError:Bd,StorageVectorsApiError:Ed,StorageVectorsClient:f1,StorageVectorsError:Jm,get StorageVectorsErrorCode(){return sm},StorageVectorsUnknownError:l1,VectorBucketApi:h1,VectorBucketScope:p1,VectorDataApi:d1,VectorIndexApi:c1,VectorIndexScope:m1,isPlainObject:u1,isStorageError:gt,isStorageVectorsError:An,normalizeToFloat32:_j,resolveFetch:ih,resolveResponse:vj,validateVectorDimension:xj},Symbol.toStringTag,{value:"Module"})),jj=vu(Ej);var Tp={},Kl={},h_;function Cj(){return h_||(h_=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.version=void 0,Kl.version="2.87.1"),Kl}var f_;function Aj(){return f_||(f_=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_REALTIME_OPTIONS=n.DEFAULT_AUTH_OPTIONS=n.DEFAULT_DB_OPTIONS=n.DEFAULT_GLOBAL_OPTIONS=n.DEFAULT_HEADERS=void 0;const t=Cj();let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",n.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${t.version}`},n.DEFAULT_GLOBAL_OPTIONS={headers:n.DEFAULT_HEADERS},n.DEFAULT_DB_OPTIONS={schema:"public"},n.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n.DEFAULT_REALTIME_OPTIONS={}})(Tp)),Tp}var Ep={},p_;function kj(){return p_||(p_=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchWithAuth=n.resolveHeadersConstructor=n.resolveFetch=void 0;const t=l=>l?(...d)=>l(...d):(...d)=>fetch(...d);n.resolveFetch=t;const r=()=>Headers;n.resolveHeadersConstructor=r;const a=(l,d,h)=>{const g=(0,n.resolveFetch)(h),y=(0,n.resolveHeadersConstructor)();return async(_,b)=>{var w;const S=(w=await d())!==null&&w!==void 0?w:l;let j=new y(b?.headers);return j.has("apikey")||j.set("apikey",l),j.has("Authorization")||j.set("Authorization",`Bearer ${S}`),g(_,Object.assign(Object.assign({},b),{headers:j}))}};n.fetchWithAuth=a})(Ep)),Ep}var fr={},m_;function Rj(){if(m_)return fr;m_=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.isBrowser=void 0,fr.uuid=n,fr.ensureTrailingSlash=t,fr.applySettingDefaults=a,fr.validateSupabaseUrl=l;function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var h=Math.random()*16|0,g=d=="x"?h:h&3|8;return g.toString(16)})}function t(d){return d.endsWith("/")?d:d+"/"}const r=()=>typeof window<"u";fr.isBrowser=r;function a(d,h){var g,y;const{db:_,auth:b,realtime:w,global:S}=d,{db:j,auth:k,realtime:C,global:A}=h,z={db:Object.assign(Object.assign({},j),_),auth:Object.assign(Object.assign({},k),b),realtime:Object.assign(Object.assign({},C),w),storage:{},global:Object.assign(Object.assign(Object.assign({},A),S),{headers:Object.assign(Object.assign({},(g=A?.headers)!==null&&g!==void 0?g:{}),(y=S?.headers)!==null&&y!==void 0?y:{})}),accessToken:async()=>""};return d.accessToken?z.accessToken=d.accessToken:delete z.accessToken,z}function l(d){const h=d?.trim();if(!h)throw new Error("supabaseUrl is required.");if(!h.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(h))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return fr}var Yl={};const g1="2.87.1",vo=30*1e3,am=3,jp=am*vo,Oj="http://localhost:9999",Mj="supabase.auth.token",Lj={"X-Client-Info":`gotrue-js/${g1}`},om="X-Supabase-Api-Version",y1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Pj=600*1e3;let ko=class extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}};function Ce(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}let v1=class extends ko{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}};function _1(n){return Ce(n)&&n.name==="AuthApiError"}let as=class extends ko{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}},_r=class extends ko{constructor(t,r,a,l){super(t,a,l),this.name=r,this.status=a}},Cn=class extends _r{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function x1(n){return Ce(n)&&n.name==="AuthSessionMissingError"}let aa=class extends _r{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},tu=class extends _r{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},nu=class extends _r{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function b1(n){return Ce(n)&&n.name==="AuthImplicitGrantRedirectError"}let lm=class extends _r{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Nd=class extends _r{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}};function jd(n){return Ce(n)&&n.name==="AuthRetryableFetchError"}let um=class extends _r{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}};function Dj(n){return Ce(n)&&n.name==="AuthWeakPasswordError"}let Ud=class extends _r{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const Id="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),g_=` 	
\r=`.split(""),Bj=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<g_.length;t+=1)n[g_[t].charCodeAt(0)]=-2;for(let t=0;t<Id.length;t+=1)n[Id[t].charCodeAt(0)]=t;return n})();function y_(n,t,r){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Id[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Id[a]),t.queuedBits-=6}}function w1(n,t,r){const a=Bj[n];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function v_(n){const t=[],r=h=>{t.push(String.fromCodePoint(h))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},d=h=>{Ij(h,a,r)};for(let h=0;h<n.length;h+=1)w1(n.charCodeAt(h),l,d);return t.join("")}function Nj(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Uj(n,t){for(let r=0;r<n.length;r+=1){let a=n.charCodeAt(r);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(n.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}Nj(a,t)}}function Ij(n,t,r){if(t.utf8seq===0){if(n<=127){r(n);return}for(let a=1;a<6;a+=1)if((n>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function jo(n){const t=[],r={queue:0,queuedBits:0},a=l=>{t.push(l)};for(let l=0;l<n.length;l+=1)w1(n.charCodeAt(l),r,a);return new Uint8Array(t)}function Vj(n){const t=[];return Uj(n,r=>t.push(r)),new Uint8Array(t)}function ha(n){const t=[],r={queue:0,queuedBits:0},a=l=>{t.push(l)};return n.forEach(l=>y_(l,r,a)),y_(null,r,a),t.join("")}function Hj(n){return Math.round(Date.now()/1e3)+n}function qj(){return Symbol("auth-callback")}const tn=()=>typeof window<"u"&&typeof document<"u",ia={tested:!1,writable:!1},S1=()=>{if(!tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ia.tested)return ia.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ia.tested=!0,ia.writable=!0}catch{ia.tested=!0,ia.writable=!1}return ia.writable};function Wj(n){const t={},r=new URL(n);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,d)=>{t[d]=l})}catch{}return r.searchParams.forEach((a,l)=>{t[l]=a}),t}const T1=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Fj=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",_o=async(n,t,r)=>{await n.setItem(t,JSON.stringify(r))},ra=async(n,t)=>{const r=await n.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},en=async(n,t)=>{await n.removeItem(t)};class rh{constructor(){this.promise=new rh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}rh.promiseConstructor=Promise;function Cp(n){const t=n.split(".");if(t.length!==3)throw new Ud("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!zj.test(t[a]))throw new Ud("JWT not in base64url format");return{header:JSON.parse(v_(t[0])),payload:JSON.parse(v_(t[1])),signature:jo(t[2]),raw:{header:t[0],payload:t[1]}}}async function $j(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function Zj(n,t){return new Promise((a,l)=>{(async()=>{for(let d=0;d<1/0;d++)try{const h=await n(d);if(!t(d,null,h)){a(h);return}}catch(h){if(!t(d,h)){l(h);return}}})()})}function Gj(n){return("0"+n.toString(16)).substr(-2)}function Kj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let l="";for(let d=0;d<56;d++)l+=r.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(t),Array.from(t,Gj).join("")}async function Yj(n){const r=new TextEncoder().encode(n),a=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(a);return Array.from(l).map(d=>String.fromCharCode(d)).join("")}async function Xj(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const r=await Yj(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mo(n,t,r=!1){const a=Kj();let l=a;r&&(l+="/PASSWORD_RECOVERY"),await _o(n,`${t}-code-verifier`,l);const d=await Xj(a);return[d,a===d?"plain":"s256"]}const Jj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Qj(n){const t=n.headers.get(om);if(!t||!t.match(Jj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function eC(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function tC(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function go(n){if(!nC.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ap(){const n={};return new Proxy(n,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iC(n,t){return new Proxy(n,{get:(r,a,l)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const d=a.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,a,l)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,a,l)}})}function __(n){return JSON.parse(JSON.stringify(n))}const oa=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),rC=[502,503,504];async function x_(n){var t;if(!Fj(n))throw new Nd(oa(n),0);if(rC.includes(n.status))throw new Nd(oa(n),n.status);let r;try{r=await n.json()}catch(d){throw new as(oa(d),d)}let a;const l=Qj(n);if(l&&l.getTime()>=y1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new um(oa(r),n.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Cn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,h)=>d&&typeof h=="string",!0))throw new um(oa(r),n.status,r.weak_password.reasons);throw new v1(oa(r),n.status||500,a)}const sC=(n,t,r,a)=>{const l={method:n,headers:t?.headers||{}};return n==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),r))};async function Me(n,t,r,a){var l;const d=Object.assign({},a?.headers);d[om]||(d[om]=y1["2024-01-01"].name),a?.jwt&&(d.Authorization=`Bearer ${a.jwt}`);const h=(l=a?.query)!==null&&l!==void 0?l:{};a?.redirectTo&&(h.redirect_to=a.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",y=await aC(n,t,r+g,{headers:d,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(y):{data:Object.assign({},y),error:null}}async function aC(n,t,r,a,l,d){const h=sC(t,a,l,d);let g;try{g=await n(r,Object.assign({},h))}catch(y){throw console.error(y),new Nd(oa(y),0)}if(g.ok||await x_(g),a?.noResolveJson)return g;try{return await g.json()}catch(y){await x_(y)}}function yi(n){var t;let r=null;uC(n)&&(r=Object.assign({},n),n.expires_at||(r.expires_at=Hj(n.expires_in)));const a=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:r,user:a},error:null}}function b_(n){const t=yi(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=n.weak_password),t}function os(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function oC(n){return{data:n,error:null}}function lC(n){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:l,verification_type:d}=n,h=Po(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:t,email_otp:r,hashed_token:a,redirect_to:l,verification_type:d},y=Object.assign({},h);return{data:{properties:g,user:y},error:null}}function w_(n){return n}function uC(n){return n.access_token&&n.refresh_token&&n.expires_in}const Cd=["global","local","others"];let Qm=class{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=T1(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Cd[0]){if(Cd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cd.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:os})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=Po(t,["options"]),l=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(l.new_email=a?.newEmail,delete l.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:lC,redirectTo:r?.redirectTo})}catch(r){if(Ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:os})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,l,d,h,g,y;try{const _={nextPage:null,lastPage:0,total:0},b=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(d=(l=t?.perPage)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:""},xform:w_});if(b.error)throw b.error;const w=await b.json(),S=(h=b.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(y=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return j.length>0&&(j.forEach(k=>{const C=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(k.split(";")[1].split("=")[1]);_[`${A}Page`]=C}),_.total=parseInt(S)),{data:Object.assign(Object.assign({},w),_),error:null}}catch(_){if(Ce(_))return{data:{users:[]},error:_};throw _}}async getUserById(t){go(t);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:os})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){go(t);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:os})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){go(t);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:os})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){go(t.userId);try{const{data:r,error:a}=await Me(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:a}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _deleteFactor(t){go(t.userId),go(t.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,a,l,d,h,g,y;try{const _={nextPage:null,lastPage:0,total:0},b=await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(d=(l=t?.perPage)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:""},xform:w_});if(b.error)throw b.error;const w=await b.json(),S=(h=b.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(y=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return j.length>0&&(j.forEach(k=>{const C=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(k.split(";")[1].split("=")[1]);_[`${A}Page`]=C}),_.total=parseInt(S)),{data:Object.assign(Object.assign({},w),_),error:null}}catch(_){if(Ce(_))return{data:{clients:[]},error:_};throw _}}async _createOAuthClient(t){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}};function S_(n={}){return{getItem:t=>n[t]||null,setItem:(t,r)=>{n[t]=r},removeItem:t=>{delete n[t]}}}const la={debug:!!(globalThis&&S1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let E1=class extends eg{};class cC extends eg{}async function j1(n,t,r){la.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),la.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){la.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,l.name);try{return await r()}finally{la.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,l.name)}}else{if(t===0)throw la.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new E1(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(la.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const T_={};async function dC(n,t,r){var a;const l=(a=T_[n])!==null&&a!==void 0?a:Promise.resolve(),d=Promise.race([l.catch(()=>null),t>=0?new Promise((h,g)=>{setTimeout(()=>{g(new cC(`Acquring process lock with name "${n}" timed out`))},t)}):null].filter(h=>h)).catch(h=>{if(h&&h.isAcquireTimeout)throw h;return null}).then(async()=>await r());return T_[n]=d.catch(async h=>{if(h&&h.isAcquireTimeout)return await l,null;throw h}),await d}function hC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function C1(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function fC(n){return parseInt(n,16)}function pC(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function mC(n){var t;const{chainId:r,domain:a,expirationTime:l,issuedAt:d=new Date,nonce:h,notBefore:g,requestId:y,resources:_,scheme:b,uri:w,version:S}=n;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const j=C1(n.address),k=b?`${b}://${a}`:a,C=n.statement?`${n.statement}
`:"",A=`${k} wants you to sign in with your Ethereum account:
${j}

${C}`;let z=`URI: ${w}
Version: ${S}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${d.toISOString()}`;if(l&&(z+=`
Expiration Time: ${l.toISOString()}`),g&&(z+=`
Not Before: ${g.toISOString()}`),y&&(z+=`
Request ID: ${y}`),_){let D=`
Resources:`;for(const P of _){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);D+=`
- ${P}`}z+=D}return`${A}
${z}`}class Nt extends Error{constructor({message:t,code:r,cause:a,name:l}){var d;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(d=l??(a instanceof Error?a.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class Vd extends Nt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function gC({error:n,options:t}){var r,a,l;const{publicKey:d}=t;if(!d)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((a=d.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((l=d.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Nt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return d.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const h=window.location.hostname;if(A1(h)){if(d.rp.id!==h)return new Nt({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function yC({error:n,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Nt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(A1(a)){if(r.rpId!==a)return new Nt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class vC{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const _C=new vC;function xC(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:r,excludeCredentials:a}=n,l=Po(n,["challenge","user","excludeCredentials"]),d=jo(t).buffer,h=Object.assign(Object.assign({},r),{id:jo(r.id).buffer}),g=Object.assign(Object.assign({},l),{challenge:d,user:h});if(a&&a.length>0){g.excludeCredentials=new Array(a.length);for(let y=0;y<a.length;y++){const _=a[y];g.excludeCredentials[y]=Object.assign(Object.assign({},_),{id:jo(_.id).buffer,type:_.type||"public-key",transports:_.transports})}}return g}function bC(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:r}=n,a=Po(n,["challenge","allowCredentials"]),l=jo(t).buffer,d=Object.assign(Object.assign({},a),{challenge:l});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const g=r[h];d.allowCredentials[h]=Object.assign(Object.assign({},g),{id:jo(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function wC(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const r=n;return{id:n.id,rawId:n.id,response:{attestationObject:ha(new Uint8Array(n.response.attestationObject)),clientDataJSON:ha(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function SC(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const r=n,a=n.getClientExtensionResults(),l=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:ha(new Uint8Array(l.authenticatorData)),clientDataJSON:ha(new Uint8Array(l.clientDataJSON)),signature:ha(new Uint8Array(l.signature)),userHandle:l.userHandle?ha(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function A1(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function E_(){var n,t;return!!(tn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function TC(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Vd("Browser returned unexpected credential type",t)}:{data:null,error:new Vd("Empty credential response",t)}}catch(t){return{data:null,error:gC({error:t,options:n})}}}async function EC(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Vd("Browser returned unexpected credential type",t)}:{data:null,error:new Vd("Empty credential response",t)}}catch(t){return{data:null,error:yC({error:t,options:n})}}}const jC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},CC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hd(...n){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),a={};for(const l of n)if(l)for(const d in l){const h=l[d];if(h!==void 0)if(Array.isArray(h))a[d]=h;else if(r(h))a[d]=h;else if(t(h)){const g=a[d];t(g)?a[d]=Hd(g,h):a[d]=Hd(h)}else a[d]=h}return a}function AC(n,t){return Hd(jC,n,t||{})}function kC(n,t){return Hd(CC,n,t||{})}class RC{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:a,signal:l},d){try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!h)return{data:null,error:g};const y=l??_C.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:_}=h.webauthn.credential_options.publicKey;_.name||(_.name=`${_.id}:${a}`),_.displayName||(_.displayName=_.name)}switch(h.webauthn.type){case"create":{const _=AC(h.webauthn.credential_options.publicKey,d?.create),{data:b,error:w}=await TC({publicKey:_,signal:y});return b?{data:{factorId:t,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const _=kC(h.webauthn.credential_options.publicKey,d?.request),{data:b,error:w}=await EC(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:_,signal:y}));return b?{data:{factorId:t,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new as("Unexpected error in challenge",h)}}}async _verify({challengeId:t,factorId:r,webauthn:a}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},d){if(!r)return{data:null,error:new ko("rpId is required for WebAuthn authentication")};try{if(!E_())return{data:null,error:new as("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:a},signal:l},{request:d});if(!h)return{data:null,error:g};const{webauthn:y}=h;return this._verify({factorId:t,challengeId:h.challengeId,webauthn:{type:y.type,rpId:r,rpOrigins:a,credential_response:y.credential_response}})}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new as("Unexpected error in authenticate",h)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},d){if(!r)return{data:null,error:new ko("rpId is required for WebAuthn registration")};try{if(!E_())return{data:null,error:new as("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this._enroll({friendlyName:t});if(!h)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===t&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:y,error:_}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:l},{create:d});return y?this._verify({factorId:h.id,challengeId:y.challengeId,webauthn:{rpId:r,rpOrigins:a,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:_}}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new as("Unexpected error in register",h)}}}}hC();const OC={url:Oj,storageKey:Mj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Lj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function j_(n,t,r){return await r()}const yo={};let tg=class cm{get jwks(){var t,r;return(r=(t=yo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){yo[this.storageKey]=Object.assign(Object.assign({},yo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=yo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){yo[this.storageKey]=Object.assign(Object.assign({},yo[this.storageKey]),{cachedAt:t})}constructor(t){var r,a,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},OC),t);if(this.storageKey=d.storageKey,this.instanceID=(r=cm.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,cm.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&tn()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new Qm({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=T1(d.fetch),this.lock=d.lock||j_,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:this.persistSession&&tn()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=j1:this.lock=j_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new RC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:S1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=S_(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=S_(this.memoryStorage)),tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${g1}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},a="none";if(tn()&&(r=Wj(window.location.href),this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce")),tn()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:d}=await this._getSessionFromURL(r,a);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),b1(d)){const y=(t=d.details)===null||t===void 0?void 0:t.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:h,redirectType:g}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ce(r)?this._returnResult({error:r}):this._returnResult({error:new as("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,l;try{const d=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=t?.options)===null||l===void 0?void 0:l.captchaToken}},xform:yi}),{data:h,error:g}=d;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const y=h.session,_=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:_,session:y},error:null})}catch(d){if(Ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(t){var r,a,l;try{let d;if("email"in t){const{email:b,password:w,options:S}=t;let j=null,k=null;this.flowType==="pkce"&&([j,k]=await mo(this.storage,this.storageKey)),d=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:b,password:w,data:(r=S?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:j,code_challenge_method:k},xform:yi})}else if("phone"in t){const{phone:b,password:w,options:S}=t;d=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(a=S?.data)!==null&&a!==void 0?a:{},channel:(l=S?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:yi})}else throw new tu("You must provide either an email or phone number and a password");const{data:h,error:g}=d;if(g||!h)return await en(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const y=h.session,_=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:_,session:y},error:null})}catch(d){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(t){try{let r;if("email"in t){const{email:d,password:h,options:g}=t;r=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:b_})}else if("phone"in t){const{phone:d,password:h,options:g}=t;r=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:b_})}else throw new tu("You must provide either an email or phone number and a password");const{data:a,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a||!a.session||!a.user){const d=new aa;return this._returnResult({data:{user:null,session:null},error:d})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,a,l,d;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(d=t.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,a,l,d,h,g,y,_,b,w,S;let j,k;if("message"in t)j=t.message,k=t.signature;else{const{chain:C,wallet:A,statement:z,options:D}=t;let P;if(tn())if(typeof A=="object")P=A;else{const ye=window;if("ethereum"in ye&&typeof ye.ethereum=="object"&&"request"in ye.ethereum&&typeof ye.ethereum.request=="function")P=ye.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=A}const Z=new URL((r=D?.url)!==null&&r!==void 0?r:window.location.href),$=await P.request({method:"eth_requestAccounts"}).then(ye=>ye).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=C1($[0]);let K=(a=D?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!K){const ye=await P.request({method:"eth_chainId"});K=fC(ye)}const oe={domain:Z.host,address:V,statement:z,uri:Z.href,version:"1",chainId:K,nonce:(l=D?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(h=(d=D?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=D?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(y=D?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(_=D?.signInWithEthereum)===null||_===void 0?void 0:_.requestId,resources:(b=D?.signInWithEthereum)===null||b===void 0?void 0:b.resources};j=mC(oe),k=await P.request({method:"personal_sign",params:[pC(j),V]})}try{const{data:C,error:A}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:k},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:yi});if(A)throw A;if(!C||!C.session||!C.user){const z=new aa;return this._returnResult({data:{user:null,session:null},error:z})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:A})}catch(C){if(Ce(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(t){var r,a,l,d,h,g,y,_,b,w,S,j;let k,C;if("message"in t)k=t.message,C=t.signature;else{const{chain:A,wallet:z,statement:D,options:P}=t;let Z;if(tn())if(typeof z=="object")Z=z;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))Z=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=z}const $=new URL((r=P?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Z&&Z.signIn){const V=await Z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),D?{statement:D}:null));let K;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")K=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)K=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)k=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),C=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Z)||typeof Z.signMessage!="function"||!("publicKey"in Z)||typeof Z!="object"||!Z.publicKey||!("toBase58"in Z.publicKey)||typeof Z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${$.host} wants you to sign in with your Solana account:`,Z.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(l=(a=P?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((d=P?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((h=P?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((g=P?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((y=P?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((_=P?.signInWithSolana)===null||_===void 0)&&_.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((w=(b=P?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...P.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);const V=await Z.signMessage(new TextEncoder().encode(k),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=V}}try{const{data:A,error:z}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:ha(C)},!((S=t.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:yi});if(z)throw z;if(!A||!A.session||!A.user){const D=new aa;return this._returnResult({data:{user:null,session:null},error:D})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:z})}catch(A){if(Ce(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const r=await ra(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(r??"").split("/");try{const{data:d,error:h}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:yi});if(await en(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!d||!d.session||!d.user){const g=new aa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:l??null}),error:h})}catch(d){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ce(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(t){try{const{options:r,provider:a,token:l,access_token:d,nonce:h}=t,g=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:d,nonce:h,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:yi}),{data:y,error:_}=g;if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!y||!y.session||!y.user){const b=new aa;return this._returnResult({data:{user:null,session:null},error:b})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:y,error:_})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,a,l,d,h;try{if("email"in t){const{email:g,options:y}=t;let _=null,b=null;this.flowType==="pkce"&&([_,b]=await mo(this.storage,this.storageKey));const{error:w}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=y?.data)!==null&&r!==void 0?r:{},create_user:(a=y?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:_,code_challenge_method:b},redirectTo:y?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in t){const{phone:g,options:y}=t,{data:_,error:b}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(l=y?.data)!==null&&l!==void 0?l:{},create_user:(d=y?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(h=y?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:_?.message_id},error:b})}throw new tu("You must provide either an email or phone number.")}catch(g){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ce(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(t){var r,a;try{let l,d;"options"in t&&(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo,d=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:h,error:g}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:d}}),redirectTo:l,xform:yi});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const y=h.session,_=h.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),this._returnResult({data:{user:_,session:y},error:null})}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(t){var r,a,l,d,h;try{let g=null,y=null;this.flowType==="pkce"&&([g,y]=await mo(this.storage,this.storageKey));const _=await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=t?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:y}),headers:this.headers,xform:oC});return!((d=_.data)===null||d===void 0)&&d.url&&tn()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(_.data.url),this._returnResult(_)}catch(g){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ce(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new Cn;const{error:l}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:l,options:d}=t,{error:h}=await Me(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:a,type:l,options:d}=t,{data:h,error:g}=await Me(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:g})}throw new tu("You must provide either an email or phone number and a type")}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ra(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<jp:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const h=await ra(this.userStorage,this.storageKey+"-user");h?.user?t.user=h.user:t.user=Ap()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=iC(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:d}=await this._callRefreshToken(t.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:os}):await this._useSession(async r=>{var a,l,d;const{data:h,error:g}=r;if(g)throw g;return!(!((a=h.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cn}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0,xform:os})})}catch(r){if(Ce(r))return x1(r)&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:l,error:d}=a;if(d)throw d;if(!l.session)throw new Cn;const h=l.session;let g=null,y=null;this.flowType==="pkce"&&t.email!=null&&([g,y]=await mo(this.storage,this.storageKey));const{data:_,error:b}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:g,code_challenge_method:y}),jwt:h.access_token,xform:os});if(b)throw b;return h.user=_.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(a){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ce(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Cn;const r=Date.now()/1e3;let a=r,l=!0,d=null;const{payload:h}=Cp(t.access_token);if(h.exp&&(a=h.exp,l=a<=r),l){const{data:g,error:y}=await this._callRefreshToken(t.refresh_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!g)return{data:{user:null,session:null},error:null};d=g}else{const{data:g,error:y}=await this._getUser(t.access_token);if(y)throw y;d={access_token:t.access_token,refresh_token:t.refresh_token,user:g.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(r){if(Ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:h,error:g}=r;if(g)throw g;t=(a=h.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new Cn;const{data:l,error:d}=await this._callRefreshToken(t.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!tn())throw new nu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new nu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new lm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new lm("No code detected.");const{data:D,error:P}=await this._exchangeCodeForSession(t.code);if(P)throw P;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:d,refresh_token:h,expires_in:g,expires_at:y,token_type:_}=t;if(!d||!g||!h||!_)throw new nu("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(g);let S=b+w;y&&(S=parseInt(y));const j=S-b;j*1e3<=vo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${w}s`);const k=S-w;b-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,S,b):b-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,S,b);const{data:C,error:A}=await this._getUser(d);if(A)throw A;const z={provider_token:a,provider_refresh_token:l,access_token:d,expires_in:w,expires_at:S,refresh_token:h,token_type:_,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:z,redirectType:t.type},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ra(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:l,error:d}=r;if(d)return this._returnResult({error:d});const h=(a=l.session)===null||a===void 0?void 0:a.access_token;if(h){const{error:g}=await this.admin.signOut(h,t);if(g&&!(_1(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return t!=="others"&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=qj(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,l;try{const{data:{session:d},error:h}=r;if(h)throw h;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",t,"session",d)}catch(d){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",d),console.error(d)}})}async resetPasswordForEmail(t,r={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await mo(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ce(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:a,error:l}=await this._useSession(async d=>{var h,g,y,_,b;const{data:w,error:S}=d;if(S)throw S;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=t.options)===null||g===void 0?void 0:g.scopes,queryParams:(y=t.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",j,{headers:this.headers,jwt:(b=(_=w.session)===null||_===void 0?void 0:_.access_token)!==null&&b!==void 0?b:void 0})});if(l)throw l;return tn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:t.provider,url:a?.url},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{provider:t.provider,url:null},error:a});throw a}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var a;try{const{error:l,data:{session:d}}=r;if(l)throw l;const{options:h,provider:g,token:y,access_token:_,nonce:b}=t,w=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=d?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:g,id_token:y,access_token:_,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:yi}),{data:S,error:j}=w;return j?this._returnResult({data:{user:null,session:null},error:j}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new aa}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:j}))}catch(l){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,l;const{data:d,error:h}=r;if(h)throw h;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(a=d.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await Zj(async l=>(l>0&&await $j(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:yi})),(l,d)=>{const h=200*Math.pow(2,l);return d&&jd(d)&&Date.now()+h-a<vo})}catch(a){if(this._debug(r,"error",a),Ce(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),tn()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const l=await ra(this.storage,this.storageKey);if(l&&this.userStorage){let h=await ra(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:l.user},await _o(this.userStorage,this.storageKey+"-user",h)),l.user=(t=h?.user)!==null&&t!==void 0?t:Ap()}else if(l&&!l.user&&!l.user){const h=await ra(this.storage,this.storageKey+"-user");h&&h?.user?(l.user=h.user,await en(this.storage,this.storageKey+"-user"),await _o(this.storage,this.storageKey,l)):l.user=Ap()}if(this._debug(a,"session from storage",l),!this._isValidSession(l)){this._debug(a,"session is not valid"),l!==null&&await this._removeSession();return}const d=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<jp;if(this._debug(a,`session has${d?"":" not"} expired with margin of ${jp}s`),d){if(this.autoRefreshToken&&l.refresh_token){const{error:h}=await this._callRefreshToken(l.refresh_token);h&&(console.error(h),jd(h)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(l.access_token);!g&&h?.user?(l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(a,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(a,"error",l),console.error(l);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new Cn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new rh;const{data:d,error:h}=await this._refreshAccessToken(t);if(h)throw h;if(!d.session)throw new Cn;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const g={data:d.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(d){if(this._debug(l,"error",d),Ce(d)){const h={data:null,error:d};return jd(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(d),d}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,r,a=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const d=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(t,r)}catch(y){d.push(y)}});if(await Promise.all(h),d.length>0){for(let g=0;g<d.length;g+=1)console.error(d[g]);throw d[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await en(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await _o(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const d=__(l);await _o(this.storage,this.storageKey,d)}else{const l=__(r);await _o(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await en(this.storage,this.storageKey),await en(this.storage,this.storageKey+"-code-verifier"),await en(this.storage,this.storageKey+"-user"),this.userStorage&&await en(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&tn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-t)/vo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${vo}ms, refresh threshold is ${am} ticks`),l<=am&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof eg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const l=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[d,h]=await mo(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(g.toString())}if(a?.queryParams){const d=new URLSearchParams(a.queryParams);l.push(d.toString())}return a?.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:l,error:d}=r;return d?this._returnResult({data:null,error:d}):await Me(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:y,error:_}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(a=d?.session)===null||a===void 0?void 0:a.access_token});return _?this._returnResult({data:null,error:_}):(t.factorType==="totp"&&y.type==="totp"&&(!((l=y?.totp)===null||l===void 0)&&l.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),this._returnResult({data:y,error:null}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:d}=r;if(d)return this._returnResult({data:null,error:d});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?wC(t.webauthn.credential_response):SC(t.webauthn.credential_response)})}:{code:t.code}),{data:g,error:y}=await Me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return y?this._returnResult({data:null,error:y}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:y}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:d}=r;if(d)return this._returnResult({data:null,error:d});const h=await Me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:xC(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:bC(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const l={all:[],phone:[],totp:[],webauthn:[]};for(const d of(t=r?.factors)!==null&&t!==void 0?t:[])l.all.push(d),d.status==="verified"&&l[d.factor_type].push(d);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:a},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Cp(a.access_token);let h=null;d.aal&&(h=d.aal);let g=h;((r=(t=a.user.factors)===null||t===void 0?void 0:t.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");const _=d.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:_},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;return l?this._returnResult({data:null,error:l}):a?await Me(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Cn})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async a=>{const{data:{session:l},error:d}=a;if(d)return this._returnResult({data:null,error:d});if(!l)return this._returnResult({data:null,error:new Cn});const h=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&tn()&&!r?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(a){if(Ce(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(t,r){try{return await this._useSession(async a=>{const{data:{session:l},error:d}=a;if(d)return this._returnResult({data:null,error:d});if(!l)return this._returnResult({data:null,error:new Cn});const h=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&tn()&&!r?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(a){if(Ce(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?await Me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Cn})})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;return l?this._returnResult({data:null,error:l}):a?(await Me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Cn})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(g=>g.kid===t);if(a)return a;const l=Date.now();if(a=this.jwks.keys.find(g=>g.kid===t),a&&this.jwks_cached_at+Pj>l)return a;const{data:d,error:h}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=l,a=d.keys.find(g=>g.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:j,error:k}=await this.getSession();if(k||!j.session)return this._returnResult({data:null,error:k});a=j.session.access_token}const{header:l,payload:d,signature:h,raw:{header:g,payload:y}}=Cp(a);r?.allowExpired||eC(d.exp);const _=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!_){const{error:j}=await this.getUser(a);if(j)throw j;return{data:{claims:d,header:l,signature:h},error:null}}const b=tC(l.alg),w=await crypto.subtle.importKey("jwk",_,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,h,Vj(`${g}.${y}`)))throw new Ud("Invalid JWT signature");return{data:{claims:d,header:l,signature:h},error:null}}catch(a){if(Ce(a))return this._returnResult({data:null,error:a});throw a}}};tg.nextInstanceID={};const MC=Qm,LC=tg,zC=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:MC,AuthApiError:v1,AuthClient:LC,AuthError:ko,AuthImplicitGrantRedirectError:nu,AuthInvalidCredentialsError:tu,AuthInvalidJwtError:Ud,AuthInvalidTokenResponseError:aa,AuthPKCEGrantCodeExchangeError:lm,AuthRetryableFetchError:Nd,AuthSessionMissingError:Cn,AuthUnknownError:as,AuthWeakPasswordError:um,CustomAuthError:_r,GoTrueAdminApi:Qm,GoTrueClient:tg,NavigatorLockAcquireTimeoutError:E1,SIGN_OUT_SCOPES:Cd,isAuthApiError:_1,isAuthError:Ce,isAuthImplicitGrantRedirectError:b1,isAuthRetryableFetchError:jd,isAuthSessionMissingError:x1,isAuthWeakPasswordError:Dj,lockInternals:la,navigatorLock:j1,processLock:dC},Symbol.toStringTag,{value:"Module"})),k1=vu(zC);var C_;function PC(){if(C_)return Yl;C_=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.SupabaseAuthClient=void 0;const n=k1;let t=class extends n.AuthClient{constructor(a){super(a)}};return Yl.SupabaseAuthClient=t,Yl}var A_;function k_(){if(A_)return ld;A_=1,Object.defineProperty(ld,"__esModule",{value:!0});const n=Hb,t=Gb(),r=n1,a=jj,l=Aj(),d=kj(),h=Rj(),g=PC();class y{constructor(b,w,S){var j,k,C;this.supabaseUrl=b,this.supabaseKey=w;const A=(0,h.validateSupabaseUrl)(b);if(!w)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",A),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",A),this.storageUrl=new URL("storage/v1",A),this.functionsUrl=new URL("functions/v1",A);const z=`sb-${A.hostname.split(".")[0]}-auth-token`,D={db:l.DEFAULT_DB_OPTIONS,realtime:l.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},l.DEFAULT_AUTH_OPTIONS),{storageKey:z}),global:l.DEFAULT_GLOBAL_OPTIONS},P=(0,h.applySettingDefaults)(S??{},D);this.storageKey=(j=P.auth.storageKey)!==null&&j!==void 0?j:"",this.headers=(k=P.global.headers)!==null&&k!==void 0?k:{},P.accessToken?(this.accessToken=P.accessToken,this.auth=new Proxy({},{get:(Z,$)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String($)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((C=P.auth)!==null&&C!==void 0?C:{},this.headers,P.global.fetch),this.fetch=(0,d.fetchWithAuth)(w,this._getAccessToken.bind(this),P.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},P.realtime)),this.accessToken&&this.accessToken().then(Z=>this.realtime.setAuth(Z)).catch(Z=>console.warn("Failed to set initial Realtime auth token:",Z)),this.rest=new t.PostgrestClient(new URL("rest/v1",A).href,{headers:this.headers,schema:P.db.schema,fetch:this.fetch}),this.storage=new a.StorageClient(this.storageUrl.href,this.headers,this.fetch,S?.storage),P.accessToken||this._listenForAuthEvents()}get functions(){return new n.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(b){return this.rest.from(b)}schema(b){return this.rest.schema(b)}rpc(b,w={},S={head:!1,get:!1,count:void 0}){return this.rest.rpc(b,w,S)}channel(b,w={config:{}}){return this.realtime.channel(b,w)}getChannels(){return this.realtime.getChannels()}removeChannel(b){return this.realtime.removeChannel(b)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var b,w;if(this.accessToken)return await this.accessToken();const{data:S}=await this.auth.getSession();return(w=(b=S.session)===null||b===void 0?void 0:b.access_token)!==null&&w!==void 0?w:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:b,persistSession:w,detectSessionInUrl:S,storage:j,userStorage:k,storageKey:C,flowType:A,lock:z,debug:D,throwOnError:P},Z,$){const V={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new g.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},V),Z),storageKey:C,autoRefreshToken:b,persistSession:w,detectSessionInUrl:S,storage:j,userStorage:k,flowType:A,lock:z,debug:D,throwOnError:P,fetch:$,hasCustomAuthorizationHeader:Object.keys(this.headers).some(K=>K.toLowerCase()==="authorization")})}_initRealtimeClient(b){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},b),{params:Object.assign({apikey:this.supabaseKey},b?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((w,S)=>{this._handleTokenChanged(w,"CLIENT",S?.access_token)})}_handleTokenChanged(b,w,S){(b==="TOKEN_REFRESHED"||b==="SIGNED_IN")&&this.changedAccessToken!==S?(this.changedAccessToken=S,this.realtime.setAuth(S)):b==="SIGNED_OUT"&&(this.realtime.setAuth(),w=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return ld.default=y,ld}var R_;function DC(){return R_||(R_=1,(function(n){var t=hr&&hr.__createBinding||(Object.create?(function(b,w,S,j){j===void 0&&(j=S);var k=Object.getOwnPropertyDescriptor(w,S);(!k||("get"in k?!w.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return w[S]}}),Object.defineProperty(b,j,k)}):(function(b,w,S,j){j===void 0&&(j=S),b[j]=w[S]})),r=hr&&hr.__exportStar||function(b,w){for(var S in b)S!=="default"&&!Object.prototype.hasOwnProperty.call(w,S)&&t(w,b,S)},a=hr&&hr.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(n,"__esModule",{value:!0}),n.createClient=n.SupabaseClient=n.FunctionRegion=n.FunctionsError=n.FunctionsRelayError=n.FunctionsFetchError=n.FunctionsHttpError=n.PostgrestError=void 0;const l=a(k_());r(k1,n);var d=Gb();Object.defineProperty(n,"PostgrestError",{enumerable:!0,get:function(){return d.PostgrestError}});var h=Hb;Object.defineProperty(n,"FunctionsHttpError",{enumerable:!0,get:function(){return h.FunctionsHttpError}}),Object.defineProperty(n,"FunctionsFetchError",{enumerable:!0,get:function(){return h.FunctionsFetchError}}),Object.defineProperty(n,"FunctionsRelayError",{enumerable:!0,get:function(){return h.FunctionsRelayError}}),Object.defineProperty(n,"FunctionsError",{enumerable:!0,get:function(){return h.FunctionsError}}),Object.defineProperty(n,"FunctionRegion",{enumerable:!0,get:function(){return h.FunctionRegion}}),r(n1,n);var g=k_();Object.defineProperty(n,"SupabaseClient",{enumerable:!0,get:function(){return a(g).default}});const y=(b,w,S)=>new l.default(b,w,S);n.createClient=y;function _(){if(typeof window<"u"||typeof process>"u")return!1;const b=process.version;if(b==null)return!1;const w=b.match(/^v(\d+)\./);return w?parseInt(w[1],10)<=18:!1}_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(hr)),hr}var R1=DC();const O1=Jd(R1),BC=$2({__proto__:null,default:O1},[R1]),{PostgrestError:SP,FunctionsHttpError:TP,FunctionsFetchError:EP,FunctionsRelayError:jP,FunctionsError:CP,FunctionRegion:AP,SupabaseClient:kP,createClient:NC,GoTrueAdminApi:RP,GoTrueClient:OP,AuthAdminApi:MP,AuthClient:LP,navigatorLock:zP,NavigatorLockAcquireTimeoutError:PP,lockInternals:DP,processLock:BP,SIGN_OUT_SCOPES:NP,AuthError:UP,AuthApiError:IP,AuthUnknownError:VP,CustomAuthError:HP,AuthSessionMissingError:qP,AuthInvalidTokenResponseError:WP,AuthInvalidCredentialsError:FP,AuthImplicitGrantRedirectError:$P,AuthPKCEGrantCodeExchangeError:ZP,AuthRetryableFetchError:GP,AuthWeakPasswordError:KP,AuthInvalidJwtError:YP,isAuthError:XP,isAuthApiError:JP,isAuthSessionMissingError:QP,isAuthImplicitGrantRedirectError:eD,isAuthRetryableFetchError:tD,isAuthWeakPasswordError:nD,RealtimePresence:iD,RealtimeChannel:rD,RealtimeClient:sD,REALTIME_LISTEN_TYPES:aD,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:oD,REALTIME_PRESENCE_LISTEN_EVENTS:lD,REALTIME_SUBSCRIBE_STATES:uD,REALTIME_CHANNEL_STATES:cD}=O1||BC,UC="https://upisshnwndbiaiffladc.supabase.co",IC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVwaXNzaG53bmRiaWFpZmZsYWRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzNDI4MDMsImV4cCI6MjA4MDkxODgwM30.1tmdQA5HFxlJBxUNbIlOUnW2rBvLdiVtOKALOEEyQAA",ae=NC(UC,IC),M1=R.createContext({}),Rt=()=>R.useContext(M1),VC=({children:n})=>{const[t,r]=R.useState(null),[a,l]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const{data:{session:y},error:_}=await ae.auth.getSession();_?console.error("Error getting session:",_):r(y?.user??null)}catch(y){console.error("Error initializing auth:",y)}finally{l(!1)}})();const{data:{subscription:g}}=ae.auth.onAuthStateChange((y,_)=>{console.log("Auth state changed:",y,_?.user?.id),y==="SIGNED_IN"&&_?(r(_.user),window.location.pathname.includes("/chai-in"),window.location.hash="#/en/home"):r(y==="SIGNED_OUT"?null:_?.user??null),l(!1)});return()=>{g&&g.unsubscribe()}},[]);const d={user:t,loading:a,signInWithGoogle:async()=>{const{error:h}=await ae.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}${window.location.pathname.includes("/chai-in")?"/chai-in":""}/`}});if(h)throw h},signOut:async()=>{const{error:h}=await ae.auth.signOut();if(h)throw h}};return f.jsx(M1.Provider,{value:d,children:n})},ng=R.createContext({});function ig(n){const t=R.useRef(null);return t.current===null&&(t.current=n()),t.current}const rg=typeof window<"u",L1=rg?R.useLayoutEffect:R.useEffect,sh=R.createContext(null);function sg(n,t){n.indexOf(t)===-1&&n.push(t)}function ag(n,t){const r=n.indexOf(t);r>-1&&n.splice(r,1)}const gr=(n,t,r)=>r>t?t:r<n?n:r;let og=()=>{};const yr={},z1=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function P1(n){return typeof n=="object"&&n!==null}const D1=n=>/^0[^.\s]+$/u.test(n);function lg(n){let t;return()=>(t===void 0&&(t=n()),t)}const ei=n=>n,HC=(n,t)=>r=>t(n(r)),Su=(...n)=>n.reduce(HC),fu=(n,t,r)=>{const a=t-n;return a===0?1:(r-n)/a};class ug{constructor(){this.subscriptions=[]}add(t){return sg(this.subscriptions,t),()=>ag(this.subscriptions,t)}notify(t,r,a){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,r,a);else for(let d=0;d<l;d++){const h=this.subscriptions[d];h&&h(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ni=n=>n*1e3,Qn=n=>n/1e3;function B1(n,t){return t?n*(1e3/t):0}const N1=(n,t,r)=>(((1-3*r+3*t)*n+(3*r-6*t))*n+3*t)*n,qC=1e-7,WC=12;function FC(n,t,r,a,l){let d,h,g=0;do h=t+(r-t)/2,d=N1(h,a,l)-n,d>0?r=h:t=h;while(Math.abs(d)>qC&&++g<WC);return h}function Tu(n,t,r,a){if(n===t&&r===a)return ei;const l=d=>FC(d,0,1,n,r);return d=>d===0||d===1?d:N1(l(d),t,a)}const U1=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,I1=n=>t=>1-n(1-t),V1=Tu(.33,1.53,.69,.99),cg=I1(V1),H1=U1(cg),q1=n=>(n*=2)<1?.5*cg(n):.5*(2-Math.pow(2,-10*(n-1))),dg=n=>1-Math.sin(Math.acos(n)),W1=I1(dg),F1=U1(dg),$C=Tu(.42,0,1,1),ZC=Tu(0,0,.58,1),$1=Tu(.42,0,.58,1),GC=n=>Array.isArray(n)&&typeof n[0]!="number",Z1=n=>Array.isArray(n)&&typeof n[0]=="number",KC={linear:ei,easeIn:$C,easeInOut:$1,easeOut:ZC,circIn:dg,circInOut:F1,circOut:W1,backIn:cg,backInOut:H1,backOut:V1,anticipate:q1},YC=n=>typeof n=="string",O_=n=>{if(Z1(n)){og(n.length===4);const[t,r,a,l]=n;return Tu(t,r,a,l)}else if(YC(n))return KC[n];return n},yd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function XC(n,t){let r=new Set,a=new Set,l=!1,d=!1;const h=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1};function y(b){h.has(b)&&(_.schedule(b),n()),b(g)}const _={schedule:(b,w=!1,S=!1)=>{const k=S&&l?r:a;return w&&h.add(b),k.has(b)||k.add(b),b},cancel:b=>{a.delete(b),h.delete(b)},process:b=>{if(g=b,l){d=!0;return}l=!0,[r,a]=[a,r],r.forEach(y),r.clear(),l=!1,d&&(d=!1,_.process(b))}};return _}const JC=40;function G1(n,t){let r=!1,a=!0;const l={delta:0,timestamp:0,isProcessing:!1},d=()=>r=!0,h=yd.reduce((P,Z)=>(P[Z]=XC(d),P),{}),{setup:g,read:y,resolveKeyframes:_,preUpdate:b,update:w,preRender:S,render:j,postRender:k}=h,C=()=>{const P=yr.useManualTiming?l.timestamp:performance.now();r=!1,yr.useManualTiming||(l.delta=a?1e3/60:Math.max(Math.min(P-l.timestamp,JC),1)),l.timestamp=P,l.isProcessing=!0,g.process(l),y.process(l),_.process(l),b.process(l),w.process(l),S.process(l),j.process(l),k.process(l),l.isProcessing=!1,r&&t&&(a=!1,n(C))},A=()=>{r=!0,a=!0,l.isProcessing||n(C)};return{schedule:yd.reduce((P,Z)=>{const $=h[Z];return P[Z]=(V,K=!1,oe=!1)=>(r||A(),$.schedule(V,K,oe)),P},{}),cancel:P=>{for(let Z=0;Z<yd.length;Z++)h[yd[Z]].cancel(P)},state:l,steps:h}}const{schedule:yt,cancel:us,state:nn,steps:kp}=G1(typeof requestAnimationFrame<"u"?requestAnimationFrame:ei,!0);let Ad;function QC(){Ad=void 0}const kn={now:()=>(Ad===void 0&&kn.set(nn.isProcessing||yr.useManualTiming?nn.timestamp:performance.now()),Ad),set:n=>{Ad=n,queueMicrotask(QC)}},K1=n=>t=>typeof t=="string"&&t.startsWith(n),Y1=K1("--"),eA=K1("var(--"),hg=n=>eA(n)?tA.test(n.split("/*")[0].trim()):!1,tA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Bo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},pu={...Bo,transform:n=>gr(0,1,n)},vd={...Bo,default:1},su=n=>Math.round(n*1e5)/1e5,fg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function nA(n){return n==null}const iA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pg=(n,t)=>r=>!!(typeof r=="string"&&iA.test(r)&&r.startsWith(n)||t&&!nA(r)&&Object.prototype.hasOwnProperty.call(r,t)),X1=(n,t,r)=>a=>{if(typeof a!="string")return a;const[l,d,h,g]=a.match(fg);return{[n]:parseFloat(l),[t]:parseFloat(d),[r]:parseFloat(h),alpha:g!==void 0?parseFloat(g):1}},rA=n=>gr(0,255,n),Rp={...Bo,transform:n=>Math.round(rA(n))},fa={test:pg("rgb","red"),parse:X1("red","green","blue"),transform:({red:n,green:t,blue:r,alpha:a=1})=>"rgba("+Rp.transform(n)+", "+Rp.transform(t)+", "+Rp.transform(r)+", "+su(pu.transform(a))+")"};function sA(n){let t="",r="",a="",l="";return n.length>5?(t=n.substring(1,3),r=n.substring(3,5),a=n.substring(5,7),l=n.substring(7,9)):(t=n.substring(1,2),r=n.substring(2,3),a=n.substring(3,4),l=n.substring(4,5),t+=t,r+=r,a+=a,l+=l),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:l?parseInt(l,16)/255:1}}const dm={test:pg("#"),parse:sA,transform:fa.transform},Eu=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),rs=Eu("deg"),Ui=Eu("%"),Pe=Eu("px"),aA=Eu("vh"),oA=Eu("vw"),M_={...Ui,parse:n=>Ui.parse(n)/100,transform:n=>Ui.transform(n*100)},xo={test:pg("hsl","hue"),parse:X1("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(n)+", "+Ui.transform(su(t))+", "+Ui.transform(su(r))+", "+su(pu.transform(a))+")"},Ut={test:n=>fa.test(n)||dm.test(n)||xo.test(n),parse:n=>fa.test(n)?fa.parse(n):xo.test(n)?xo.parse(n):dm.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?fa.transform(n):xo.transform(n),getAnimatableNone:n=>{const t=Ut.parse(n);return t.alpha=0,Ut.transform(t)}},lA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uA(n){return isNaN(n)&&typeof n=="string"&&(n.match(fg)?.length||0)+(n.match(lA)?.length||0)>0}const J1="number",Q1="color",cA="var",dA="var(",L_="${}",hA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mu(n){const t=n.toString(),r=[],a={color:[],number:[],var:[]},l=[];let d=0;const g=t.replace(hA,y=>(Ut.test(y)?(a.color.push(d),l.push(Q1),r.push(Ut.parse(y))):y.startsWith(dA)?(a.var.push(d),l.push(cA),r.push(y)):(a.number.push(d),l.push(J1),r.push(parseFloat(y))),++d,L_)).split(L_);return{values:r,split:g,indexes:a,types:l}}function ew(n){return mu(n).values}function tw(n){const{split:t,types:r}=mu(n),a=t.length;return l=>{let d="";for(let h=0;h<a;h++)if(d+=t[h],l[h]!==void 0){const g=r[h];g===J1?d+=su(l[h]):g===Q1?d+=Ut.transform(l[h]):d+=l[h]}return d}}const fA=n=>typeof n=="number"?0:Ut.test(n)?Ut.getAnimatableNone(n):n;function pA(n){const t=ew(n);return tw(n)(t.map(fA))}const cs={test:uA,parse:ew,createTransformer:tw,getAnimatableNone:pA};function Op(n,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(t-n)*6*r:r<1/2?t:r<2/3?n+(t-n)*(2/3-r)*6:n}function mA({hue:n,saturation:t,lightness:r,alpha:a}){n/=360,t/=100,r/=100;let l=0,d=0,h=0;if(!t)l=d=h=r;else{const g=r<.5?r*(1+t):r+t-r*t,y=2*r-g;l=Op(y,g,n+1/3),d=Op(y,g,n),h=Op(y,g,n-1/3)}return{red:Math.round(l*255),green:Math.round(d*255),blue:Math.round(h*255),alpha:a}}function qd(n,t){return r=>r>0?t:n}const bt=(n,t,r)=>n+(t-n)*r,Mp=(n,t,r)=>{const a=n*n,l=r*(t*t-a)+a;return l<0?0:Math.sqrt(l)},gA=[dm,fa,xo],yA=n=>gA.find(t=>t.test(n));function z_(n){const t=yA(n);if(!t)return!1;let r=t.parse(n);return t===xo&&(r=mA(r)),r}const P_=(n,t)=>{const r=z_(n),a=z_(t);if(!r||!a)return qd(n,t);const l={...r};return d=>(l.red=Mp(r.red,a.red,d),l.green=Mp(r.green,a.green,d),l.blue=Mp(r.blue,a.blue,d),l.alpha=bt(r.alpha,a.alpha,d),fa.transform(l))},hm=new Set(["none","hidden"]);function vA(n,t){return hm.has(n)?r=>r<=0?n:t:r=>r>=1?t:n}function _A(n,t){return r=>bt(n,t,r)}function mg(n){return typeof n=="number"?_A:typeof n=="string"?hg(n)?qd:Ut.test(n)?P_:wA:Array.isArray(n)?nw:typeof n=="object"?Ut.test(n)?P_:xA:qd}function nw(n,t){const r=[...n],a=r.length,l=n.map((d,h)=>mg(d)(d,t[h]));return d=>{for(let h=0;h<a;h++)r[h]=l[h](d);return r}}function xA(n,t){const r={...n,...t},a={};for(const l in r)n[l]!==void 0&&t[l]!==void 0&&(a[l]=mg(n[l])(n[l],t[l]));return l=>{for(const d in a)r[d]=a[d](l);return r}}function bA(n,t){const r=[],a={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const d=t.types[l],h=n.indexes[d][a[d]],g=n.values[h]??0;r[l]=g,a[d]++}return r}const wA=(n,t)=>{const r=cs.createTransformer(t),a=mu(n),l=mu(t);return a.indexes.var.length===l.indexes.var.length&&a.indexes.color.length===l.indexes.color.length&&a.indexes.number.length>=l.indexes.number.length?hm.has(n)&&!l.values.length||hm.has(t)&&!a.values.length?vA(n,t):Su(nw(bA(a,l),l.values),r):qd(n,t)};function iw(n,t,r){return typeof n=="number"&&typeof t=="number"&&typeof r=="number"?bt(n,t,r):mg(n)(n,t)}const SA=n=>{const t=({timestamp:r})=>n(r);return{start:(r=!0)=>yt.update(t,r),stop:()=>us(t),now:()=>nn.isProcessing?nn.timestamp:kn.now()}},rw=(n,t,r=10)=>{let a="";const l=Math.max(Math.round(t/r),2);for(let d=0;d<l;d++)a+=Math.round(n(d/(l-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Wd=2e4;function gg(n){let t=0;const r=50;let a=n.next(t);for(;!a.done&&t<Wd;)t+=r,a=n.next(t);return t>=Wd?1/0:t}function TA(n,t=100,r){const a=r({...n,keyframes:[0,t]}),l=Math.min(gg(a),Wd);return{type:"keyframes",ease:d=>a.next(l*d).value/t,duration:Qn(l)}}const EA=5;function sw(n,t,r){const a=Math.max(t-EA,0);return B1(r-n(a),t-a)}const Ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lp=.001;function jA({duration:n=Ct.duration,bounce:t=Ct.bounce,velocity:r=Ct.velocity,mass:a=Ct.mass}){let l,d,h=1-t;h=gr(Ct.minDamping,Ct.maxDamping,h),n=gr(Ct.minDuration,Ct.maxDuration,Qn(n)),h<1?(l=_=>{const b=_*h,w=b*n,S=b-r,j=fm(_,h),k=Math.exp(-w);return Lp-S/j*k},d=_=>{const w=_*h*n,S=w*r+r,j=Math.pow(h,2)*Math.pow(_,2)*n,k=Math.exp(-w),C=fm(Math.pow(_,2),h);return(-l(_)+Lp>0?-1:1)*((S-j)*k)/C}):(l=_=>{const b=Math.exp(-_*n),w=(_-r)*n+1;return-Lp+b*w},d=_=>{const b=Math.exp(-_*n),w=(r-_)*(n*n);return b*w});const g=5/n,y=AA(l,d,g);if(n=Ni(n),isNaN(y))return{stiffness:Ct.stiffness,damping:Ct.damping,duration:n};{const _=Math.pow(y,2)*a;return{stiffness:_,damping:h*2*Math.sqrt(a*_),duration:n}}}const CA=12;function AA(n,t,r){let a=r;for(let l=1;l<CA;l++)a=a-n(a)/t(a);return a}function fm(n,t){return n*Math.sqrt(1-t*t)}const kA=["duration","bounce"],RA=["stiffness","damping","mass"];function D_(n,t){return t.some(r=>n[r]!==void 0)}function OA(n){let t={velocity:Ct.velocity,stiffness:Ct.stiffness,damping:Ct.damping,mass:Ct.mass,isResolvedFromDuration:!1,...n};if(!D_(n,RA)&&D_(n,kA))if(n.visualDuration){const r=n.visualDuration,a=2*Math.PI/(r*1.2),l=a*a,d=2*gr(.05,1,1-(n.bounce||0))*Math.sqrt(l);t={...t,mass:Ct.mass,stiffness:l,damping:d}}else{const r=jA(n);t={...t,...r,mass:Ct.mass},t.isResolvedFromDuration=!0}return t}function Fd(n=Ct.visualDuration,t=Ct.bounce){const r=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:a,restDelta:l}=r;const d=r.keyframes[0],h=r.keyframes[r.keyframes.length-1],g={done:!1,value:d},{stiffness:y,damping:_,mass:b,duration:w,velocity:S,isResolvedFromDuration:j}=OA({...r,velocity:-Qn(r.velocity||0)}),k=S||0,C=_/(2*Math.sqrt(y*b)),A=h-d,z=Qn(Math.sqrt(y/b)),D=Math.abs(A)<5;a||(a=D?Ct.restSpeed.granular:Ct.restSpeed.default),l||(l=D?Ct.restDelta.granular:Ct.restDelta.default);let P;if(C<1){const $=fm(z,C);P=V=>{const K=Math.exp(-C*z*V);return h-K*((k+C*z*A)/$*Math.sin($*V)+A*Math.cos($*V))}}else if(C===1)P=$=>h-Math.exp(-z*$)*(A+(k+z*A)*$);else{const $=z*Math.sqrt(C*C-1);P=V=>{const K=Math.exp(-C*z*V),oe=Math.min($*V,300);return h-K*((k+C*z*A)*Math.sinh(oe)+$*A*Math.cosh(oe))/$}}const Z={calculatedDuration:j&&w||null,next:$=>{const V=P($);if(j)g.done=$>=w;else{let K=$===0?k:0;C<1&&(K=$===0?Ni(k):sw(P,$,V));const oe=Math.abs(K)<=a,ye=Math.abs(h-V)<=l;g.done=oe&&ye}return g.value=g.done?h:V,g},toString:()=>{const $=Math.min(gg(Z),Wd),V=rw(K=>Z.next($*K).value,$,30);return $+"ms "+V},toTransition:()=>{}};return Z}Fd.applyToOptions=n=>{const t=TA(n,100,Fd);return n.ease=t.ease,n.duration=Ni(t.duration),n.type="keyframes",n};function pm({keyframes:n,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:l=10,bounceStiffness:d=500,modifyTarget:h,min:g,max:y,restDelta:_=.5,restSpeed:b}){const w=n[0],S={done:!1,value:w},j=oe=>g!==void 0&&oe<g||y!==void 0&&oe>y,k=oe=>g===void 0?y:y===void 0||Math.abs(g-oe)<Math.abs(y-oe)?g:y;let C=r*t;const A=w+C,z=h===void 0?A:h(A);z!==A&&(C=z-w);const D=oe=>-C*Math.exp(-oe/a),P=oe=>z+D(oe),Z=oe=>{const ye=D(oe),fe=P(oe);S.done=Math.abs(ye)<=_,S.value=S.done?z:fe};let $,V;const K=oe=>{j(S.value)&&($=oe,V=Fd({keyframes:[S.value,k(S.value)],velocity:sw(P,oe,S.value),damping:l,stiffness:d,restDelta:_,restSpeed:b}))};return K(0),{calculatedDuration:null,next:oe=>{let ye=!1;return!V&&$===void 0&&(ye=!0,Z(oe),K(oe)),$!==void 0&&oe>=$?V.next(oe-$):(!ye&&Z(oe),S)}}}function MA(n,t,r){const a=[],l=r||yr.mix||iw,d=n.length-1;for(let h=0;h<d;h++){let g=l(n[h],n[h+1]);if(t){const y=Array.isArray(t)?t[h]||ei:t;g=Su(y,g)}a.push(g)}return a}function LA(n,t,{clamp:r=!0,ease:a,mixer:l}={}){const d=n.length;if(og(d===t.length),d===1)return()=>t[0];if(d===2&&t[0]===t[1])return()=>t[1];const h=n[0]===n[1];n[0]>n[d-1]&&(n=[...n].reverse(),t=[...t].reverse());const g=MA(t,a,l),y=g.length,_=b=>{if(h&&b<n[0])return t[0];let w=0;if(y>1)for(;w<n.length-2&&!(b<n[w+1]);w++);const S=fu(n[w],n[w+1],b);return g[w](S)};return r?b=>_(gr(n[0],n[d-1],b)):_}function zA(n,t){const r=n[n.length-1];for(let a=1;a<=t;a++){const l=fu(0,t,a);n.push(bt(r,1,l))}}function PA(n){const t=[0];return zA(t,n.length-1),t}function DA(n,t){return n.map(r=>r*t)}function BA(n,t){return n.map(()=>t||$1).splice(0,n.length-1)}function au({duration:n=300,keyframes:t,times:r,ease:a="easeInOut"}){const l=GC(a)?a.map(O_):O_(a),d={done:!1,value:t[0]},h=DA(r&&r.length===t.length?r:PA(t),n),g=LA(h,t,{ease:Array.isArray(l)?l:BA(t,l)});return{calculatedDuration:n,next:y=>(d.value=g(y),d.done=y>=n,d)}}const NA=n=>n!==null;function yg(n,{repeat:t,repeatType:r="loop"},a,l=1){const d=n.filter(NA),g=l<0||t&&r!=="loop"&&t%2===1?0:d.length-1;return!g||a===void 0?d[g]:a}const UA={decay:pm,inertia:pm,tween:au,keyframes:au,spring:Fd};function aw(n){typeof n.type=="string"&&(n.type=UA[n.type])}class vg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const IA=n=>n/100;class _g extends vg{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==kn.now()&&this.tick(kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;aw(t);const{type:r=au,repeat:a=0,repeatDelay:l=0,repeatType:d,velocity:h=0}=t;let{keyframes:g}=t;const y=r||au;y!==au&&typeof g[0]!="number"&&(this.mixKeyframes=Su(IA,iw(g[0],g[1])),g=[0,100]);const _=y({...t,keyframes:g});d==="mirror"&&(this.mirroredGenerator=y({...t,keyframes:[...g].reverse(),velocity:-h})),_.calculatedDuration===null&&(_.calculatedDuration=gg(_));const{calculatedDuration:b}=_;this.calculatedDuration=b,this.resolvedDuration=b+l,this.totalDuration=this.resolvedDuration*(a+1)-l,this.generator=_}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:l,mixKeyframes:d,mirroredGenerator:h,resolvedDuration:g,calculatedDuration:y}=this;if(this.startTime===null)return a.next(0);const{delay:_=0,keyframes:b,repeat:w,repeatType:S,repeatDelay:j,type:k,onUpdate:C,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const z=this.currentTime-_*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?z<0:z>l;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let P=this.currentTime,Z=a;if(w){const oe=Math.min(this.currentTime,l)/g;let ye=Math.floor(oe),fe=oe%1;!fe&&oe>=1&&(fe=1),fe===1&&ye--,ye=Math.min(ye,w+1),!!(ye%2)&&(S==="reverse"?(fe=1-fe,j&&(fe-=j/g)):S==="mirror"&&(Z=h)),P=gr(0,1,fe)*g}const $=D?{done:!1,value:b[0]}:Z.next(P);d&&($.value=d($.value));let{done:V}=$;!D&&y!==null&&(V=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const K=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return K&&k!==pm&&($.value=yg(b,this.options,A,this.speed)),C&&C($.value),K&&this.finish(),$}then(t,r){return this.finished.then(t,r)}get duration(){return Qn(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Qn(t)}get time(){return Qn(this.currentTime)}set time(t){t=Ni(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(kn.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Qn(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=SA,startTime:r}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function VA(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const pa=n=>n*180/Math.PI,mm=n=>{const t=pa(Math.atan2(n[1],n[0]));return gm(t)},HA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:mm,rotateZ:mm,skewX:n=>pa(Math.atan(n[1])),skewY:n=>pa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},gm=n=>(n=n%360,n<0&&(n+=360),n),B_=mm,N_=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),U_=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),qA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:N_,scaleY:U_,scale:n=>(N_(n)+U_(n))/2,rotateX:n=>gm(pa(Math.atan2(n[6],n[5]))),rotateY:n=>gm(pa(Math.atan2(-n[2],n[0]))),rotateZ:B_,rotate:B_,skewX:n=>pa(Math.atan(n[4])),skewY:n=>pa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function ym(n){return n.includes("scale")?1:0}function vm(n,t){if(!n||n==="none")return ym(t);const r=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,l;if(r)a=qA,l=r;else{const g=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=HA,l=g}if(!l)return ym(t);const d=a[t],h=l[1].split(",").map(FA);return typeof d=="function"?d(h):h[d]}const WA=(n,t)=>{const{transform:r="none"}=getComputedStyle(n);return vm(r,t)};function FA(n){return parseFloat(n.trim())}const No=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(No),I_=n=>n===Bo||n===Pe,$A=new Set(["x","y","z"]),ZA=No.filter(n=>!$A.has(n));function GA(n){const t=[];return ZA.forEach(r=>{const a=n.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const ma={width:({x:n},{paddingLeft:t="0",paddingRight:r="0"})=>n.max-n.min-parseFloat(t)-parseFloat(r),height:({y:n},{paddingTop:t="0",paddingBottom:r="0"})=>n.max-n.min-parseFloat(t)-parseFloat(r),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>vm(t,"x"),y:(n,{transform:t})=>vm(t,"y")};ma.translateX=ma.x;ma.translateY=ma.y;const ga=new Set;let _m=!1,xm=!1,bm=!1;function ow(){if(xm){const n=Array.from(ga).filter(a=>a.needsMeasurement),t=new Set(n.map(a=>a.element)),r=new Map;t.forEach(a=>{const l=GA(a);l.length&&(r.set(a,l),a.render())}),n.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const l=r.get(a);l&&l.forEach(([d,h])=>{a.getValue(d)?.set(h)})}),n.forEach(a=>a.measureEndState()),n.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}xm=!1,_m=!1,ga.forEach(n=>n.complete(bm)),ga.clear()}function lw(){ga.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(xm=!0)})}function KA(){bm=!0,lw(),ow(),bm=!1}class xg{constructor(t,r,a,l,d,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=l,this.element=d,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(ga.add(this),_m||(_m=!0,yt.read(lw),yt.resolveKeyframes(ow))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:l}=this;if(t[0]===null){const d=l?.get(),h=t[t.length-1];if(d!==void 0)t[0]=d;else if(a&&r){const g=a.readValue(r,h);g!=null&&(t[0]=g)}t[0]===void 0&&(t[0]=h),l&&d===void 0&&l.set(t[0])}VA(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ga.delete(this)}cancel(){this.state==="scheduled"&&(ga.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const YA=n=>n.startsWith("--");function XA(n,t,r){YA(t)?n.style.setProperty(t,r):n.style[t]=r}const JA=lg(()=>window.ScrollTimeline!==void 0),QA={};function ek(n,t){const r=lg(n);return()=>QA[t]??r()}const uw=ek(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),iu=([n,t,r,a])=>`cubic-bezier(${n}, ${t}, ${r}, ${a})`,V_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:iu([0,.65,.55,1]),circOut:iu([.55,0,1,.45]),backIn:iu([.31,.01,.66,-.59]),backOut:iu([.33,1.53,.69,.99])};function cw(n,t){if(n)return typeof n=="function"?uw()?rw(n,t):"ease-out":Z1(n)?iu(n):Array.isArray(n)?n.map(r=>cw(r,t)||V_.easeOut):V_[n]}function tk(n,t,r,{delay:a=0,duration:l=300,repeat:d=0,repeatType:h="loop",ease:g="easeOut",times:y}={},_=void 0){const b={[t]:r};y&&(b.offset=y);const w=cw(g,l);Array.isArray(w)&&(b.easing=w);const S={delay:a,duration:l,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:d+1,direction:h==="reverse"?"alternate":"normal"};return _&&(S.pseudoElement=_),n.animate(b,S)}function dw(n){return typeof n=="function"&&"applyToOptions"in n}function nk({type:n,...t}){return dw(n)&&uw()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class ik extends vg{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:l,pseudoElement:d,allowFlatten:h=!1,finalKeyframe:g,onComplete:y}=t;this.isPseudoElement=!!d,this.allowFlatten=h,this.options=t,og(typeof t.type!="string");const _=nk(t);this.animation=tk(r,a,l,_,d),_.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const b=yg(l,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(b):XA(r,a,b),this.animation.cancel()}y?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Qn(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Qn(t)}get time(){return Qn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ni(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&JA()?(this.animation.timeline=t,ei):r(this)}}const hw={anticipate:q1,backInOut:H1,circInOut:F1};function rk(n){return n in hw}function sk(n){typeof n.ease=="string"&&rk(n.ease)&&(n.ease=hw[n.ease])}const H_=10;class ak extends ik{constructor(t){sk(t),aw(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:l,element:d,...h}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const g=new _g({...h,autoplay:!1}),y=Ni(this.finishedTime??this.time);r.setWithVelocity(g.sample(y-H_).value,g.sample(y).value,H_),g.stop()}}const q_=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(cs.test(n)||n==="0")&&!n.startsWith("url("));function ok(n){const t=n[0];if(n.length===1)return!0;for(let r=0;r<n.length;r++)if(n[r]!==t)return!0}function lk(n,t,r,a){const l=n[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const d=n[n.length-1],h=q_(l,t),g=q_(d,t);return!h||!g?!1:ok(n)||(r==="spring"||dw(r))&&a}function wm(n){n.duration=0,n.type="keyframes"}const uk=new Set(["opacity","clipPath","filter","transform"]),ck=lg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function dk(n){const{motionValue:t,name:r,repeatDelay:a,repeatType:l,damping:d,type:h}=n;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:y,transformTemplate:_}=t.owner.getProps();return ck()&&r&&uk.has(r)&&(r!=="transform"||!_)&&!y&&!a&&l!=="mirror"&&d!==0&&h!=="inertia"}const hk=40;class fk extends vg{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:l=0,repeatDelay:d=0,repeatType:h="loop",keyframes:g,name:y,motionValue:_,element:b,...w}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=kn.now();const S={autoplay:t,delay:r,type:a,repeat:l,repeatDelay:d,repeatType:h,name:y,motionValue:_,element:b,...w},j=b?.KeyframeResolver||xg;this.keyframeResolver=new j(g,(k,C,A)=>this.onKeyframesResolved(k,C,S,!A),y,_,b),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,a,l){this.keyframeResolver=void 0;const{name:d,type:h,velocity:g,delay:y,isHandoff:_,onUpdate:b}=a;this.resolvedAt=kn.now(),lk(t,d,h,g)||((yr.instantAnimations||!y)&&b?.(yg(t,a,r)),t[0]=t[t.length-1],wm(a),a.repeat=0);const S={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>hk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},j=!_&&dk(S)?new ak({...S,element:S.motionValue.owner.current}):new _g(S);j.finished.then(()=>this.notifyFinished()).catch(ei),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),KA()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const pk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mk(n){const t=pk.exec(n);if(!t)return[,];const[,r,a,l]=t;return[`--${r??a}`,l]}function fw(n,t,r=1){const[a,l]=mk(n);if(!a)return;const d=window.getComputedStyle(t).getPropertyValue(a);if(d){const h=d.trim();return z1(h)?parseFloat(h):h}return hg(l)?fw(l,t,r+1):l}function bg(n,t){return n?.[t]??n?.default??n}const pw=new Set(["width","height","top","left","right","bottom",...No]),gk={test:n=>n==="auto",parse:n=>n},mw=n=>t=>t.test(n),gw=[Bo,Pe,Ui,rs,oA,aA,gk],W_=n=>gw.find(mw(n));function yk(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||D1(n):!0}const vk=new Set(["brightness","contrast","saturate","opacity"]);function _k(n){const[t,r]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[a]=r.match(fg)||[];if(!a)return n;const l=r.replace(a,"");let d=vk.has(t)?1:0;return a!==r&&(d*=100),t+"("+d+l+")"}const xk=/\b([a-z-]*)\(.*?\)/gu,Sm={...cs,getAnimatableNone:n=>{const t=n.match(xk);return t?t.map(_k).join(" "):n}},F_={...Bo,transform:Math.round},bk={rotate:rs,rotateX:rs,rotateY:rs,rotateZ:rs,scale:vd,scaleX:vd,scaleY:vd,scaleZ:vd,skew:rs,skewX:rs,skewY:rs,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:pu,originX:M_,originY:M_,originZ:Pe},wg={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,...bk,zIndex:F_,fillOpacity:pu,strokeOpacity:pu,numOctaves:F_},wk={...wg,color:Ut,backgroundColor:Ut,outlineColor:Ut,fill:Ut,stroke:Ut,borderColor:Ut,borderTopColor:Ut,borderRightColor:Ut,borderBottomColor:Ut,borderLeftColor:Ut,filter:Sm,WebkitFilter:Sm},yw=n=>wk[n];function vw(n,t){let r=yw(n);return r!==Sm&&(r=cs),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Sk=new Set(["auto","none","0"]);function Tk(n,t,r){let a=0,l;for(;a<n.length&&!l;){const d=n[a];typeof d=="string"&&!Sk.has(d)&&mu(d).values.length&&(l=n[a]),a++}if(l&&r)for(const d of t)n[d]=vw(r,l)}class Ek extends xg{constructor(t,r,a,l,d){super(t,r,a,l,d,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let y=0;y<t.length;y++){let _=t[y];if(typeof _=="string"&&(_=_.trim(),hg(_))){const b=fw(_,r.current);b!==void 0&&(t[y]=b),y===t.length-1&&(this.finalKeyframe=_)}}if(this.resolveNoneKeyframes(),!pw.has(a)||t.length!==2)return;const[l,d]=t,h=W_(l),g=W_(d);if(h!==g)if(I_(h)&&I_(g))for(let y=0;y<t.length;y++){const _=t[y];typeof _=="string"&&(t[y]=parseFloat(_))}else ma[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let l=0;l<t.length;l++)(t[l]===null||yk(t[l]))&&a.push(l);a.length&&Tk(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ma[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const l=r[r.length-1];l!==void 0&&t.getValue(a,l).jump(l,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const l=t.getValue(r);l&&l.jump(this.measuredOrigin,!1);const d=a.length-1,h=a[d];a[d]=ma[r](t.measureViewportBox(),window.getComputedStyle(t.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),this.removedTransforms?.length&&this.removedTransforms.forEach(([g,y])=>{t.getValue(g).set(y)}),this.resolveNoneKeyframes()}}function jk(n,t,r){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let a=document;const l=r?.[n]??a.querySelectorAll(n);return l?Array.from(l):[]}return Array.from(n)}const _w=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function xw(n){return P1(n)&&"offsetHeight"in n}const $_=30,Ck=n=>!isNaN(parseFloat(n));class Ak{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const l=kn.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=kn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Ck(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new ug);const a=this.events[t].add(r);return t==="change"?()=>{a(),yt.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>$_)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,$_);return B1(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ro(n,t){return new Ak(n,t)}const{schedule:Sg}=G1(queueMicrotask,!1),vi={x:!1,y:!1};function bw(){return vi.x||vi.y}function kk(n){return n==="x"||n==="y"?vi[n]?null:(vi[n]=!0,()=>{vi[n]=!1}):vi.x||vi.y?null:(vi.x=vi.y=!0,()=>{vi.x=vi.y=!1})}function ww(n,t){const r=jk(n),a=new AbortController,l={passive:!0,...t,signal:a.signal};return[r,l,()=>a.abort()]}function Z_(n){return!(n.pointerType==="touch"||bw())}function Rk(n,t,r={}){const[a,l,d]=ww(n,r),h=g=>{if(!Z_(g))return;const{target:y}=g,_=t(y,g);if(typeof _!="function"||!y)return;const b=w=>{Z_(w)&&(_(w),y.removeEventListener("pointerleave",b))};y.addEventListener("pointerleave",b,l)};return a.forEach(g=>{g.addEventListener("pointerenter",h,l)}),d}const Sw=(n,t)=>t?n===t?!0:Sw(n,t.parentElement):!1,Tg=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Ok=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Mk(n){return Ok.has(n.tagName)||n.tabIndex!==-1}const kd=new WeakSet;function G_(n){return t=>{t.key==="Enter"&&n(t)}}function zp(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Lk=(n,t)=>{const r=n.currentTarget;if(!r)return;const a=G_(()=>{if(kd.has(r))return;zp(r,"down");const l=G_(()=>{zp(r,"up")}),d=()=>zp(r,"cancel");r.addEventListener("keyup",l,t),r.addEventListener("blur",d,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function K_(n){return Tg(n)&&!bw()}function zk(n,t,r={}){const[a,l,d]=ww(n,r),h=g=>{const y=g.currentTarget;if(!K_(g))return;kd.add(y);const _=t(y,g),b=(j,k)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",S),kd.has(y)&&kd.delete(y),K_(j)&&typeof _=="function"&&_(j,{success:k})},w=j=>{b(j,y===window||y===document||r.useGlobalTarget||Sw(y,j.target))},S=j=>{b(j,!1)};window.addEventListener("pointerup",w,l),window.addEventListener("pointercancel",S,l)};return a.forEach(g=>{(r.useGlobalTarget?window:g).addEventListener("pointerdown",h,l),xw(g)&&(g.addEventListener("focus",_=>Lk(_,l)),!Mk(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),d}function Tw(n){return P1(n)&&"ownerSVGElement"in n}function Pk(n){return Tw(n)&&n.tagName==="svg"}const ln=n=>!!(n&&n.getVelocity),Dk=[...gw,Ut,cs],Bk=n=>Dk.find(mw(n)),Eg=R.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Y_(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function Nk(...n){return t=>{let r=!1;const a=n.map(l=>{const d=Y_(l,t);return!r&&typeof d=="function"&&(r=!0),d});if(r)return()=>{for(let l=0;l<a.length;l++){const d=a[l];typeof d=="function"?d():Y_(n[l],null)}}}}function Uk(...n){return R.useCallback(Nk(...n),n)}class Ik extends R.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=r.offsetParent,l=xw(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=r.offsetHeight||0,d.width=r.offsetWidth||0,d.top=r.offsetTop,d.left=r.offsetLeft,d.right=l-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Vk({children:n,isPresent:t,anchorX:r,root:a}){const l=R.useId(),d=R.useRef(null),h=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=R.useContext(Eg),y=Uk(d,n?.ref);return R.useInsertionEffect(()=>{const{width:_,height:b,top:w,left:S,right:j}=h.current;if(t||!d.current||!_||!b)return;const k=r==="left"?`left: ${S}`:`right: ${j}`;d.current.dataset.motionPopId=l;const C=document.createElement("style");g&&(C.nonce=g);const A=a??document.head;return A.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${_}px !important;
            height: ${b}px !important;
            ${k}px !important;
            top: ${w}px !important;
          }
        `),()=>{A.contains(C)&&A.removeChild(C)}},[t]),f.jsx(Ik,{isPresent:t,childRef:d,sizeRef:h,children:R.cloneElement(n,{ref:y})})}const Hk=({children:n,initial:t,isPresent:r,onExitComplete:a,custom:l,presenceAffectsLayout:d,mode:h,anchorX:g,root:y})=>{const _=ig(qk),b=R.useId();let w=!0,S=R.useMemo(()=>(w=!1,{id:b,initial:t,isPresent:r,custom:l,onExitComplete:j=>{_.set(j,!0);for(const k of _.values())if(!k)return;a&&a()},register:j=>(_.set(j,!1),()=>_.delete(j))}),[r,_,a]);return d&&w&&(S={...S}),R.useMemo(()=>{_.forEach((j,k)=>_.set(k,!1))},[r]),R.useEffect(()=>{!r&&!_.size&&a&&a()},[r]),h==="popLayout"&&(n=f.jsx(Vk,{isPresent:r,anchorX:g,root:y,children:n})),f.jsx(sh.Provider,{value:S,children:n})};function qk(){return new Map}function Ew(n=!0){const t=R.useContext(sh);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:l}=t,d=R.useId();R.useEffect(()=>{if(n)return l(d)},[n]);const h=R.useCallback(()=>n&&a&&a(d),[d,a,n]);return!r&&a?[!1,h]:[!0]}const _d=n=>n.key||"";function X_(n){const t=[];return R.Children.forEach(n,r=>{R.isValidElement(r)&&t.push(r)}),t}const ju=({children:n,custom:t,initial:r=!0,onExitComplete:a,presenceAffectsLayout:l=!0,mode:d="sync",propagate:h=!1,anchorX:g="left",root:y})=>{const[_,b]=Ew(h),w=R.useMemo(()=>X_(n),[n]),S=h&&!_?[]:w.map(_d),j=R.useRef(!0),k=R.useRef(w),C=ig(()=>new Map),[A,z]=R.useState(w),[D,P]=R.useState(w);L1(()=>{j.current=!1,k.current=w;for(let V=0;V<D.length;V++){const K=_d(D[V]);S.includes(K)?C.delete(K):C.get(K)!==!0&&C.set(K,!1)}},[D,S.length,S.join("-")]);const Z=[];if(w!==A){let V=[...w];for(let K=0;K<D.length;K++){const oe=D[K],ye=_d(oe);S.includes(ye)||(V.splice(K,0,oe),Z.push(oe))}return d==="wait"&&Z.length&&(V=Z),P(X_(V)),z(w),null}const{forceRender:$}=R.useContext(ng);return f.jsx(f.Fragment,{children:D.map(V=>{const K=_d(V),oe=h&&!_?!1:w===D||S.includes(K),ye=()=>{if(C.has(K))C.set(K,!0);else return;let fe=!0;C.forEach(te=>{te||(fe=!1)}),fe&&($?.(),P(k.current),h&&b?.(),a&&a())};return f.jsx(Hk,{isPresent:oe,initial:!j.current||r?void 0:!1,custom:t,presenceAffectsLayout:l,mode:d,root:y,onExitComplete:oe?void 0:ye,anchorX:g,children:V},K)})})},jw=R.createContext({strict:!1}),J_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Oo={};for(const n in J_)Oo[n]={isEnabled:t=>J_[n].some(r=>!!t[r])};function Wk(n){for(const t in n)Oo[t]={...Oo[t],...n[t]}}const Fk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $d(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Fk.has(n)}let Cw=n=>!$d(n);function $k(n){typeof n=="function"&&(Cw=t=>t.startsWith("on")?!$d(t):n(t))}try{$k(require("@emotion/is-prop-valid").default)}catch{}function Zk(n,t,r){const a={};for(const l in n)l==="values"&&typeof n.values=="object"||(Cw(l)||r===!0&&$d(l)||!t&&!$d(l)||n.draggable&&l.startsWith("onDrag"))&&(a[l]=n[l]);return a}const ah=R.createContext({});function oh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function gu(n){return typeof n=="string"||Array.isArray(n)}const jg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cg=["initial",...jg];function lh(n){return oh(n.animate)||Cg.some(t=>gu(n[t]))}function Aw(n){return!!(lh(n)||n.variants)}function Gk(n,t){if(lh(n)){const{initial:r,animate:a}=n;return{initial:r===!1||gu(r)?r:void 0,animate:gu(a)?a:void 0}}return n.inherit!==!1?t:{}}function Kk(n){const{initial:t,animate:r}=Gk(n,R.useContext(ah));return R.useMemo(()=>({initial:t,animate:r}),[Q_(t),Q_(r)])}function Q_(n){return Array.isArray(n)?n.join(" "):n}function ex(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Xl={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Pe.test(n))n=parseFloat(n);else return n;const r=ex(n,t.target.x),a=ex(n,t.target.y);return`${r}% ${a}%`}},Yk={correct:(n,{treeScale:t,projectionDelta:r})=>{const a=n,l=cs.parse(n);if(l.length>5)return a;const d=cs.createTransformer(n),h=typeof l[0]!="number"?1:0,g=r.x.scale*t.x,y=r.y.scale*t.y;l[0+h]/=g,l[1+h]/=y;const _=bt(g,y,.5);return typeof l[2+h]=="number"&&(l[2+h]/=_),typeof l[3+h]=="number"&&(l[3+h]/=_),d(l)}},Tm={borderRadius:{...Xl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xl,borderTopRightRadius:Xl,borderBottomLeftRadius:Xl,borderBottomRightRadius:Xl,boxShadow:Yk};function kw(n,{layout:t,layoutId:r}){return Uo.has(n)||n.startsWith("origin")||(t||r!==void 0)&&(!!Tm[n]||n==="opacity")}const Xk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Jk=No.length;function Qk(n,t,r){let a="",l=!0;for(let d=0;d<Jk;d++){const h=No[d],g=n[h];if(g===void 0)continue;let y=!0;if(typeof g=="number"?y=g===(h.startsWith("scale")?1:0):y=parseFloat(g)===0,!y||r){const _=_w(g,wg[h]);if(!y){l=!1;const b=Xk[h]||h;a+=`${b}(${_}) `}r&&(t[h]=_)}}return a=a.trim(),r?a=r(t,l?"":a):l&&(a="none"),a}function Ag(n,t,r){const{style:a,vars:l,transformOrigin:d}=n;let h=!1,g=!1;for(const y in t){const _=t[y];if(Uo.has(y)){h=!0;continue}else if(Y1(y)){l[y]=_;continue}else{const b=_w(_,wg[y]);y.startsWith("origin")?(g=!0,d[y]=b):a[y]=b}}if(t.transform||(h||r?a.transform=Qk(t,n.transform,r):a.transform&&(a.transform="none")),g){const{originX:y="50%",originY:_="50%",originZ:b=0}=d;a.transformOrigin=`${y} ${_} ${b}`}}const kg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Rw(n,t,r){for(const a in t)!ln(t[a])&&!kw(a,r)&&(n[a]=t[a])}function eR({transformTemplate:n},t){return R.useMemo(()=>{const r=kg();return Ag(r,t,n),Object.assign({},r.vars,r.style)},[t])}function tR(n,t){const r=n.style||{},a={};return Rw(a,r,n),Object.assign(a,eR(n,t)),a}function nR(n,t){const r={},a=tR(n,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=a,r}const iR={offset:"stroke-dashoffset",array:"stroke-dasharray"},rR={offset:"strokeDashoffset",array:"strokeDasharray"};function sR(n,t,r=1,a=0,l=!0){n.pathLength=1;const d=l?iR:rR;n[d.offset]=Pe.transform(-a);const h=Pe.transform(t),g=Pe.transform(r);n[d.array]=`${h} ${g}`}function Ow(n,{attrX:t,attrY:r,attrScale:a,pathLength:l,pathSpacing:d=1,pathOffset:h=0,...g},y,_,b){if(Ag(n,g,_),y){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:w,style:S}=n;w.transform&&(S.transform=w.transform,delete w.transform),(S.transform||w.transformOrigin)&&(S.transformOrigin=w.transformOrigin??"50% 50%",delete w.transformOrigin),S.transform&&(S.transformBox=b?.transformBox??"fill-box",delete w.transformBox),t!==void 0&&(w.x=t),r!==void 0&&(w.y=r),a!==void 0&&(w.scale=a),l!==void 0&&sR(w,l,d,h,!1)}const Mw=()=>({...kg(),attrs:{}}),Lw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function aR(n,t,r,a){const l=R.useMemo(()=>{const d=Mw();return Ow(d,t,Lw(a),n.transformTemplate,n.style),{...d.attrs,style:{...d.style}}},[t]);if(n.style){const d={};Rw(d,n.style,n),l.style={...d,...l.style}}return l}const oR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rg(n){return typeof n!="string"||n.includes("-")?!1:!!(oR.indexOf(n)>-1||/[A-Z]/u.test(n))}function lR(n,t,r,{latestValues:a},l,d=!1){const g=(Rg(n)?aR:nR)(t,a,l,n),y=Zk(t,typeof n=="string",d),_=n!==R.Fragment?{...y,...g,ref:r}:{},{children:b}=t,w=R.useMemo(()=>ln(b)?b.get():b,[b]);return R.createElement(n,{..._,children:w})}function tx(n){const t=[{},{}];return n?.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function Og(n,t,r,a){if(typeof t=="function"){const[l,d]=tx(a);t=t(r!==void 0?r:n.custom,l,d)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[l,d]=tx(a);t=t(r!==void 0?r:n.custom,l,d)}return t}function Rd(n){return ln(n)?n.get():n}function uR({scrapeMotionValuesFromProps:n,createRenderState:t},r,a,l){return{latestValues:cR(r,a,l,n),renderState:t()}}function cR(n,t,r,a){const l={},d=a(n,{});for(const S in d)l[S]=Rd(d[S]);let{initial:h,animate:g}=n;const y=lh(n),_=Aw(n);t&&_&&!y&&n.inherit!==!1&&(h===void 0&&(h=t.initial),g===void 0&&(g=t.animate));let b=r?r.initial===!1:!1;b=b||h===!1;const w=b?g:h;if(w&&typeof w!="boolean"&&!oh(w)){const S=Array.isArray(w)?w:[w];for(let j=0;j<S.length;j++){const k=Og(n,S[j]);if(k){const{transitionEnd:C,transition:A,...z}=k;for(const D in z){let P=z[D];if(Array.isArray(P)){const Z=b?P.length-1:0;P=P[Z]}P!==null&&(l[D]=P)}for(const D in C)l[D]=C[D]}}}return l}const zw=n=>(t,r)=>{const a=R.useContext(ah),l=R.useContext(sh),d=()=>uR(n,t,a,l);return r?d():ig(d)};function Mg(n,t,r){const{style:a}=n,l={};for(const d in a)(ln(a[d])||t.style&&ln(t.style[d])||kw(d,n)||r?.getValue(d)?.liveStyle!==void 0)&&(l[d]=a[d]);return l}const dR=zw({scrapeMotionValuesFromProps:Mg,createRenderState:kg});function Pw(n,t,r){const a=Mg(n,t,r);for(const l in n)if(ln(n[l])||ln(t[l])){const d=No.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;a[d]=n[l]}return a}const hR=zw({scrapeMotionValuesFromProps:Pw,createRenderState:Mw}),fR=Symbol.for("motionComponentSymbol");function bo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function pR(n,t,r){return R.useCallback(a=>{a&&n.onMount&&n.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):bo(r)&&(r.current=a))},[t])}const Lg=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mR="framerAppearId",Dw="data-"+Lg(mR),Bw=R.createContext({});function gR(n,t,r,a,l){const{visualElement:d}=R.useContext(ah),h=R.useContext(jw),g=R.useContext(sh),y=R.useContext(Eg).reducedMotion,_=R.useRef(null);a=a||h.renderer,!_.current&&a&&(_.current=a(n,{visualState:t,parent:d,props:r,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:y}));const b=_.current,w=R.useContext(Bw);b&&!b.projection&&l&&(b.type==="html"||b.type==="svg")&&yR(_.current,r,l,w);const S=R.useRef(!1);R.useInsertionEffect(()=>{b&&S.current&&b.update(r,g)});const j=r[Dw],k=R.useRef(!!j&&!window.MotionHandoffIsComplete?.(j)&&window.MotionHasOptimisedAnimation?.(j));return L1(()=>{b&&(S.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),k.current&&b.animationState&&b.animationState.animateChanges())}),R.useEffect(()=>{b&&(!k.current&&b.animationState&&b.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(j)}),k.current=!1),b.enteringChildren=void 0)}),b}function yR(n,t,r,a){const{layoutId:l,layout:d,drag:h,dragConstraints:g,layoutScroll:y,layoutRoot:_,layoutCrossfade:b}=t;n.projection=new r(n.latestValues,t["data-framer-portal-id"]?void 0:Nw(n.parent)),n.projection.setOptions({layoutId:l,layout:d,alwaysMeasureLayout:!!h||g&&bo(g),visualElement:n,animationType:typeof d=="string"?d:"both",initialPromotionConfig:a,crossfade:b,layoutScroll:y,layoutRoot:_})}function Nw(n){if(n)return n.options.allowProjection!==!1?n.projection:Nw(n.parent)}function Pp(n,{forwardMotionProps:t=!1}={},r,a){r&&Wk(r);const l=Rg(n)?hR:dR;function d(g,y){let _;const b={...R.useContext(Eg),...g,layoutId:vR(g)},{isStatic:w}=b,S=Kk(g),j=l(g,w);if(!w&&rg){_R();const k=xR(b);_=k.MeasureLayout,S.visualElement=gR(n,j,b,a,k.ProjectionNode)}return f.jsxs(ah.Provider,{value:S,children:[_&&S.visualElement?f.jsx(_,{visualElement:S.visualElement,...b}):null,lR(n,g,pR(j,S.visualElement,y),j,w,t)]})}d.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const h=R.forwardRef(d);return h[fR]=n,h}function vR({layoutId:n}){const t=R.useContext(ng).id;return t&&n!==void 0?t+"-"+n:n}function _R(n,t){R.useContext(jw).strict}function xR(n){const{drag:t,layout:r}=Oo;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t?.isEnabled(n)||r?.isEnabled(n)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function bR(n,t){if(typeof Proxy>"u")return Pp;const r=new Map,a=(d,h)=>Pp(d,h,n,t),l=(d,h)=>a(d,h);return new Proxy(l,{get:(d,h)=>h==="create"?a:(r.has(h)||r.set(h,Pp(h,void 0,n,t)),r.get(h))})}function Uw({top:n,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:n,max:a}}}function wR({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function SR(n,t){if(!t)return n;const r=t({x:n.left,y:n.top}),a=t({x:n.right,y:n.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function Dp(n){return n===void 0||n===1}function Em({scale:n,scaleX:t,scaleY:r}){return!Dp(n)||!Dp(t)||!Dp(r)}function ua(n){return Em(n)||Iw(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Iw(n){return nx(n.x)||nx(n.y)}function nx(n){return n&&n!=="0%"}function Zd(n,t,r){const a=n-r,l=t*a;return r+l}function ix(n,t,r,a,l){return l!==void 0&&(n=Zd(n,l,a)),Zd(n,r,a)+t}function jm(n,t=0,r=1,a,l){n.min=ix(n.min,t,r,a,l),n.max=ix(n.max,t,r,a,l)}function Vw(n,{x:t,y:r}){jm(n.x,t.translate,t.scale,t.originPoint),jm(n.y,r.translate,r.scale,r.originPoint)}const rx=.999999999999,sx=1.0000000000001;function TR(n,t,r,a=!1){const l=r.length;if(!l)return;t.x=t.y=1;let d,h;for(let g=0;g<l;g++){d=r[g],h=d.projectionDelta;const{visualElement:y}=d.options;y&&y.props.style&&y.props.style.display==="contents"||(a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&So(n,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,Vw(n,h)),a&&ua(d.latestValues)&&So(n,d.latestValues))}t.x<sx&&t.x>rx&&(t.x=1),t.y<sx&&t.y>rx&&(t.y=1)}function wo(n,t){n.min=n.min+t,n.max=n.max+t}function ax(n,t,r,a,l=.5){const d=bt(n.min,n.max,l);jm(n,t,r,d,a)}function So(n,t){ax(n.x,t.x,t.scaleX,t.scale,t.originX),ax(n.y,t.y,t.scaleY,t.scale,t.originY)}function Hw(n,t){return Uw(SR(n.getBoundingClientRect(),t))}function ER(n,t,r){const a=Hw(n,r),{scroll:l}=t;return l&&(wo(a.x,l.offset.x),wo(a.y,l.offset.y)),a}const ox=()=>({translate:0,scale:1,origin:0,originPoint:0}),To=()=>({x:ox(),y:ox()}),lx=()=>({min:0,max:0}),qt=()=>({x:lx(),y:lx()}),Cm={current:null},qw={current:!1};function jR(){if(qw.current=!0,!!rg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Cm.current=n.matches;n.addEventListener("change",t),t()}else Cm.current=!1}const CR=new WeakMap;function AR(n,t,r){for(const a in t){const l=t[a],d=r[a];if(ln(l))n.addValue(a,l);else if(ln(d))n.addValue(a,Ro(l,{owner:n}));else if(d!==l)if(n.hasValue(a)){const h=n.getValue(a);h.liveStyle===!0?h.jump(l):h.hasAnimated||h.set(l)}else{const h=n.getStaticValue(a);n.addValue(a,Ro(h!==void 0?h:l,{owner:n}))}}for(const a in r)t[a]===void 0&&n.removeValue(a);return t}const ux=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kR{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:l,blockInitialAnimation:d,visualState:h},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=kn.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,yt.render(this.render,!1,!0))};const{latestValues:y,renderState:_}=h;this.latestValues=y,this.baseTarget={...y},this.initialValues=r.initial?{...y}:{},this.renderState=_,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=g,this.blockInitialAnimation=!!d,this.isControllingVariants=lh(r),this.isVariantNode=Aw(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:b,...w}=this.scrapeMotionValuesFromProps(r,{},this);for(const S in w){const j=w[S];y[S]!==void 0&&ln(j)&&j.set(y[S])}}mount(t){this.current=t,CR.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),qw.current||jR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cm.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),us(this.notifyUpdate),us(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=Uo.has(t);a&&this.onBindTransform&&this.onBindTransform();const l=r.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&yt.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{l(),d&&d(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Oo){const r=Oo[t];if(!r)continue;const{isEnabled:a,Feature:l}=r;if(!this.features[t]&&l&&a(this.props)&&(this.features[t]=new l(this)),this.features[t]){const d=this.features[t];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<ux.length;a++){const l=ux[a];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const d="on"+l,h=t[d];h&&(this.propEventSubscriptions[l]=this.on(l,h))}this.prevMotionValues=AR(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=Ro(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(z1(a)||D1(a))?a=parseFloat(a):!Bk(a)&&cs.test(r)&&(a=vw(t,r)),this.setBaseTarget(t,ln(a)?a.get():a)),ln(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const d=Og(this.props,r,this.presenceContext?.custom);d&&(a=d[t])}if(r&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!ln(l)?l:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new ug),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Sg.render(this.render)}}class Ww extends kR{constructor(){super(...arguments),this.KeyframeResolver=Ek}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ln(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Fw(n,{style:t,vars:r},a,l){const d=n.style;let h;for(h in t)d[h]=t[h];l?.applyProjectionStyles(d,a);for(h in r)d.setProperty(h,r[h])}function RR(n){return window.getComputedStyle(n)}class OR extends Ww{constructor(){super(...arguments),this.type="html",this.renderInstance=Fw}readValueFromInstance(t,r){if(Uo.has(r))return this.projection?.isProjecting?ym(r):WA(t,r);{const a=RR(t),l=(Y1(r)?a.getPropertyValue(r):a[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Hw(t,r)}build(t,r,a){Ag(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return Mg(t,r,a)}}const $w=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function MR(n,t,r,a){Fw(n,t,void 0,a);for(const l in t.attrs)n.setAttribute($w.has(l)?l:Lg(l),t.attrs[l])}class LR extends Ww{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qt}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Uo.has(r)){const a=yw(r);return a&&a.default||0}return r=$w.has(r)?r:Lg(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return Pw(t,r,a)}build(t,r,a){Ow(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,l){MR(t,r,a,l)}mount(t){this.isSVGTag=Lw(t.tagName),super.mount(t)}}const zR=(n,t)=>Rg(n)?new LR(t):new OR(t,{allowProjection:n!==R.Fragment});function Co(n,t,r){const a=n.getProps();return Og(a,t,r!==void 0?r:a.custom,n)}const Am=n=>Array.isArray(n);function PR(n,t,r){n.hasValue(t)?n.getValue(t).set(r):n.addValue(t,Ro(r))}function DR(n){return Am(n)?n[n.length-1]||0:n}function BR(n,t){const r=Co(n,t);let{transitionEnd:a={},transition:l={},...d}=r||{};d={...d,...a};for(const h in d){const g=DR(d[h]);PR(n,h,g)}}function NR(n){return!!(ln(n)&&n.add)}function km(n,t){const r=n.getValue("willChange");if(NR(r))return r.add(t);if(!r&&yr.WillChange){const a=new yr.WillChange("auto");n.addValue("willChange",a),a.add(t)}}function Zw(n){return n.props[Dw]}const UR=n=>n!==null;function IR(n,{repeat:t,repeatType:r="loop"},a){const l=n.filter(UR),d=t&&r!=="loop"&&t%2===1?0:l.length-1;return l[d]}const VR={type:"spring",stiffness:500,damping:25,restSpeed:10},HR=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),qR={type:"keyframes",duration:.8},WR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},FR=(n,{keyframes:t})=>t.length>2?qR:Uo.has(n)?n.startsWith("scale")?HR(t[1]):VR:WR;function $R({when:n,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:l,repeat:d,repeatType:h,repeatDelay:g,from:y,elapsed:_,...b}){return!!Object.keys(b).length}const zg=(n,t,r,a={},l,d)=>h=>{const g=bg(a,n)||{},y=g.delay||a.delay||0;let{elapsed:_=0}=a;_=_-Ni(y);const b={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...g,delay:-_,onUpdate:S=>{t.set(S),g.onUpdate&&g.onUpdate(S)},onComplete:()=>{h(),g.onComplete&&g.onComplete()},name:n,motionValue:t,element:d?void 0:l};$R(g)||Object.assign(b,FR(n,b)),b.duration&&(b.duration=Ni(b.duration)),b.repeatDelay&&(b.repeatDelay=Ni(b.repeatDelay)),b.from!==void 0&&(b.keyframes[0]=b.from);let w=!1;if((b.type===!1||b.duration===0&&!b.repeatDelay)&&(wm(b),b.delay===0&&(w=!0)),(yr.instantAnimations||yr.skipAnimations)&&(w=!0,wm(b),b.delay=0),b.allowFlatten=!g.type&&!g.ease,w&&!d&&t.get()!==void 0){const S=IR(b.keyframes,g);if(S!==void 0){yt.update(()=>{b.onUpdate(S),b.onComplete()});return}}return g.isSync?new _g(b):new fk(b)};function ZR({protectedKeys:n,needsAnimating:t},r){const a=n.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function Gw(n,t,{delay:r=0,transitionOverride:a,type:l}={}){let{transition:d=n.getDefaultTransition(),transitionEnd:h,...g}=t;a&&(d=a);const y=[],_=l&&n.animationState&&n.animationState.getState()[l];for(const b in g){const w=n.getValue(b,n.latestValues[b]??null),S=g[b];if(S===void 0||_&&ZR(_,b))continue;const j={delay:r,...bg(d||{},b)},k=w.get();if(k!==void 0&&!w.isAnimating&&!Array.isArray(S)&&S===k&&!j.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const z=Zw(n);if(z){const D=window.MotionHandoffAnimation(z,b,yt);D!==null&&(j.startTime=D,C=!0)}}km(n,b),w.start(zg(b,w,S,n.shouldReduceMotion&&pw.has(b)?{type:!1}:j,n,C));const A=w.animation;A&&y.push(A)}return h&&Promise.all(y).then(()=>{yt.update(()=>{h&&BR(n,h)})}),y}function Kw(n,t,r,a=0,l=1){const d=Array.from(n).sort((_,b)=>_.sortNodePosition(b)).indexOf(t),h=n.size,g=(h-1)*a;return typeof r=="function"?r(d,h):l===1?d*a:g-d*a}function Rm(n,t,r={}){const a=Co(n,t,r.type==="exit"?n.presenceContext?.custom:void 0);let{transition:l=n.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(l=r.transitionOverride);const d=a?()=>Promise.all(Gw(n,a,r)):()=>Promise.resolve(),h=n.variantChildren&&n.variantChildren.size?(y=0)=>{const{delayChildren:_=0,staggerChildren:b,staggerDirection:w}=l;return GR(n,t,y,_,b,w,r)}:()=>Promise.resolve(),{when:g}=l;if(g){const[y,_]=g==="beforeChildren"?[d,h]:[h,d];return y().then(()=>_())}else return Promise.all([d(),h(r.delay)])}function GR(n,t,r=0,a=0,l=0,d=1,h){const g=[];for(const y of n.variantChildren)y.notify("AnimationStart",t),g.push(Rm(y,t,{...h,delay:r+(typeof a=="function"?0:a)+Kw(n.variantChildren,y,a,l,d)}).then(()=>y.notify("AnimationComplete",t)));return Promise.all(g)}function KR(n,t,r={}){n.notify("AnimationStart",t);let a;if(Array.isArray(t)){const l=t.map(d=>Rm(n,d,r));a=Promise.all(l)}else if(typeof t=="string")a=Rm(n,t,r);else{const l=typeof t=="function"?Co(n,t,r.custom):t;a=Promise.all(Gw(n,l,r))}return a.then(()=>{n.notify("AnimationComplete",t)})}function Yw(n,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==n.length)return!1;for(let a=0;a<r;a++)if(t[a]!==n[a])return!1;return!0}const YR=Cg.length;function Xw(n){if(!n)return;if(!n.isControllingVariants){const r=n.parent?Xw(n.parent)||{}:{};return n.props.initial!==void 0&&(r.initial=n.props.initial),r}const t={};for(let r=0;r<YR;r++){const a=Cg[r],l=n.props[a];(gu(l)||l===!1)&&(t[a]=l)}return t}const XR=[...jg].reverse(),JR=jg.length;function QR(n){return t=>Promise.all(t.map(({animation:r,options:a})=>KR(n,r,a)))}function eO(n){let t=QR(n),r=cx(),a=!0;const l=y=>(_,b)=>{const w=Co(n,b,y==="exit"?n.presenceContext?.custom:void 0);if(w){const{transition:S,transitionEnd:j,...k}=w;_={..._,...k,...j}}return _};function d(y){t=y(n)}function h(y){const{props:_}=n,b=Xw(n.parent)||{},w=[],S=new Set;let j={},k=1/0;for(let A=0;A<JR;A++){const z=XR[A],D=r[z],P=_[z]!==void 0?_[z]:b[z],Z=gu(P),$=z===y?D.isActive:null;$===!1&&(k=A);let V=P===b[z]&&P!==_[z]&&Z;if(V&&a&&n.manuallyAnimateOnMount&&(V=!1),D.protectedKeys={...j},!D.isActive&&$===null||!P&&!D.prevProp||oh(P)||typeof P=="boolean")continue;const K=tO(D.prevProp,P);let oe=K||z===y&&D.isActive&&!V&&Z||A>k&&Z,ye=!1;const fe=Array.isArray(P)?P:[P];let te=fe.reduce(l(z),{});$===!1&&(te={});const{prevResolvedValues:W={}}=D,xe={...W,...te},Le=re=>{oe=!0,S.has(re)&&(ye=!0,S.delete(re)),D.needsAnimating[re]=!0;const ie=n.getValue(re);ie&&(ie.liveStyle=!1)};for(const re in xe){const ie=te[re],Se=W[re];if(j.hasOwnProperty(re))continue;let ge=!1;Am(ie)&&Am(Se)?ge=!Yw(ie,Se):ge=ie!==Se,ge?ie!=null?Le(re):S.add(re):ie!==void 0&&S.has(re)?Le(re):D.protectedKeys[re]=!0}D.prevProp=P,D.prevResolvedValues=te,D.isActive&&(j={...j,...te}),a&&n.blockInitialAnimation&&(oe=!1);const he=V&&K;oe&&(!he||ye)&&w.push(...fe.map(re=>{const ie={type:z};if(typeof re=="string"&&a&&!he&&n.manuallyAnimateOnMount&&n.parent){const{parent:Se}=n,ge=Co(Se,re);if(Se.enteringChildren&&ge){const{delayChildren:N}=ge.transition||{};ie.delay=Kw(Se.enteringChildren,n,N)}}return{animation:re,options:ie}}))}if(S.size){const A={};if(typeof _.initial!="boolean"){const z=Co(n,Array.isArray(_.initial)?_.initial[0]:_.initial);z&&z.transition&&(A.transition=z.transition)}S.forEach(z=>{const D=n.getBaseTarget(z),P=n.getValue(z);P&&(P.liveStyle=!0),A[z]=D??null}),w.push({animation:A})}let C=!!w.length;return a&&(_.initial===!1||_.initial===_.animate)&&!n.manuallyAnimateOnMount&&(C=!1),a=!1,C?t(w):Promise.resolve()}function g(y,_){if(r[y].isActive===_)return Promise.resolve();n.variantChildren?.forEach(w=>w.animationState?.setActive(y,_)),r[y].isActive=_;const b=h(y);for(const w in r)r[w].protectedKeys={};return b}return{animateChanges:h,setActive:g,setAnimateFunction:d,getState:()=>r,reset:()=>{r=cx()}}}function tO(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!Yw(t,n):!1}function sa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cx(){return{animate:sa(!0),whileInView:sa(),whileHover:sa(),whileTap:sa(),whileDrag:sa(),whileFocus:sa(),exit:sa()}}class hs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class nO extends hs{constructor(t){super(t),t.animationState||(t.animationState=eO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();oh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let iO=0;class rO extends hs{constructor(){super(...arguments),this.id=iO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const l=this.node.animationState.setActive("exit",!t);r&&!t&&l.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const sO={animation:{Feature:nO},exit:{Feature:rO}};function yu(n,t,r,a={passive:!0}){return n.addEventListener(t,r,a),()=>n.removeEventListener(t,r)}function Cu(n){return{point:{x:n.pageX,y:n.pageY}}}const aO=n=>t=>Tg(t)&&n(t,Cu(t));function ou(n,t,r,a){return yu(n,t,aO(r),a)}const Jw=1e-4,oO=1-Jw,lO=1+Jw,Qw=.01,uO=0-Qw,cO=0+Qw;function pn(n){return n.max-n.min}function dO(n,t,r){return Math.abs(n-t)<=r}function dx(n,t,r,a=.5){n.origin=a,n.originPoint=bt(t.min,t.max,n.origin),n.scale=pn(r)/pn(t),n.translate=bt(r.min,r.max,n.origin)-n.originPoint,(n.scale>=oO&&n.scale<=lO||isNaN(n.scale))&&(n.scale=1),(n.translate>=uO&&n.translate<=cO||isNaN(n.translate))&&(n.translate=0)}function lu(n,t,r,a){dx(n.x,t.x,r.x,a?a.originX:void 0),dx(n.y,t.y,r.y,a?a.originY:void 0)}function hx(n,t,r){n.min=r.min+t.min,n.max=n.min+pn(t)}function hO(n,t,r){hx(n.x,t.x,r.x),hx(n.y,t.y,r.y)}function fx(n,t,r){n.min=t.min-r.min,n.max=n.min+pn(t)}function Gd(n,t,r){fx(n.x,t.x,r.x),fx(n.y,t.y,r.y)}function Jn(n){return[n("x"),n("y")]}const eS=({current:n})=>n?n.ownerDocument.defaultView:null,px=(n,t)=>Math.abs(n-t);function fO(n,t){const r=px(n.x,t.x),a=px(n.y,t.y);return Math.sqrt(r**2+a**2)}class tS{constructor(t,r,{transformPagePoint:a,contextWindow:l=window,dragSnapToOrigin:d=!1,distanceThreshold:h=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Np(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,k=fO(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!k)return;const{point:C}=S,{timestamp:A}=nn;this.history.push({...C,timestamp:A});const{onStart:z,onMove:D}=this.handlers;j||(z&&z(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,S)},this.handlePointerMove=(S,j)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=Bp(j,this.transformPagePoint),yt.update(this.updatePoint,!0)},this.handlePointerUp=(S,j)=>{this.end();const{onEnd:k,onSessionEnd:C,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=Np(S.type==="pointercancel"?this.lastMoveEventInfo:Bp(j,this.transformPagePoint),this.history);this.startEvent&&k&&k(S,z),C&&C(S,z)},!Tg(t))return;this.dragSnapToOrigin=d,this.handlers=r,this.transformPagePoint=a,this.distanceThreshold=h,this.contextWindow=l||window;const g=Cu(t),y=Bp(g,this.transformPagePoint),{point:_}=y,{timestamp:b}=nn;this.history=[{..._,timestamp:b}];const{onSessionStart:w}=r;w&&w(t,Np(y,this.history)),this.removeListeners=Su(ou(this.contextWindow,"pointermove",this.handlePointerMove),ou(this.contextWindow,"pointerup",this.handlePointerUp),ou(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),us(this.updatePoint)}}function Bp(n,t){return t?{point:t(n.point)}:n}function mx(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Np({point:n},t){return{point:n,delta:mx(n,nS(t)),offset:mx(n,pO(t)),velocity:mO(t,.1)}}function pO(n){return n[0]}function nS(n){return n[n.length-1]}function mO(n,t){if(n.length<2)return{x:0,y:0};let r=n.length-1,a=null;const l=nS(n);for(;r>=0&&(a=n[r],!(l.timestamp-a.timestamp>Ni(t)));)r--;if(!a)return{x:0,y:0};const d=Qn(l.timestamp-a.timestamp);if(d===0)return{x:0,y:0};const h={x:(l.x-a.x)/d,y:(l.y-a.y)/d};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function gO(n,{min:t,max:r},a){return t!==void 0&&n<t?n=a?bt(t,n,a.min):Math.max(n,t):r!==void 0&&n>r&&(n=a?bt(r,n,a.max):Math.min(n,r)),n}function gx(n,t,r){return{min:t!==void 0?n.min+t:void 0,max:r!==void 0?n.max+r-(n.max-n.min):void 0}}function yO(n,{top:t,left:r,bottom:a,right:l}){return{x:gx(n.x,r,l),y:gx(n.y,t,a)}}function yx(n,t){let r=t.min-n.min,a=t.max-n.max;return t.max-t.min<n.max-n.min&&([r,a]=[a,r]),{min:r,max:a}}function vO(n,t){return{x:yx(n.x,t.x),y:yx(n.y,t.y)}}function _O(n,t){let r=.5;const a=pn(n),l=pn(t);return l>a?r=fu(t.min,t.max-a,n.min):a>l&&(r=fu(n.min,n.max-l,t.min)),gr(0,1,r)}function xO(n,t){const r={};return t.min!==void 0&&(r.min=t.min-n.min),t.max!==void 0&&(r.max=t.max-n.min),r}const Om=.35;function bO(n=Om){return n===!1?n=0:n===!0&&(n=Om),{x:vx(n,"left","right"),y:vx(n,"top","bottom")}}function vx(n,t,r){return{min:_x(n,t),max:_x(n,r)}}function _x(n,t){return typeof n=="number"?n:n[t]||0}const wO=new WeakMap;class SO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:a}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const d=w=>{const{dragSnapToOrigin:S}=this.getProps();S?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Cu(w).point)},h=(w,S)=>{const{drag:j,dragPropagation:k,onDragStart:C}=this.getProps();if(j&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kk(j),!this.openDragLock))return;this.latestPointerEvent=w,this.latestPanInfo=S,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jn(z=>{let D=this.getAxisMotionValue(z).get()||0;if(Ui.test(D)){const{projection:P}=this.visualElement;if(P&&P.layout){const Z=P.layout.layoutBox[z];Z&&(D=pn(Z)*(parseFloat(D)/100))}}this.originPoint[z]=D}),C&&yt.postRender(()=>C(w,S)),km(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},g=(w,S)=>{this.latestPointerEvent=w,this.latestPanInfo=S;const{dragPropagation:j,dragDirectionLock:k,onDirectionLock:C,onDrag:A}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:z}=S;if(k&&this.currentDirection===null){this.currentDirection=TO(z),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",S.point,z),this.updateAxis("y",S.point,z),this.visualElement.render(),A&&A(w,S)},y=(w,S)=>{this.latestPointerEvent=w,this.latestPanInfo=S,this.stop(w,S),this.latestPointerEvent=null,this.latestPanInfo=null},_=()=>Jn(w=>this.getAnimationState(w)==="paused"&&this.getAxisMotionValue(w).animation?.play()),{dragSnapToOrigin:b}=this.getProps();this.panSession=new tS(t,{onSessionStart:d,onStart:h,onMove:g,onSessionEnd:y,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,distanceThreshold:a,contextWindow:eS(this.visualElement)})}stop(t,r){const a=t||this.latestPointerEvent,l=r||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!l||!a)return;const{velocity:h}=l;this.startAnimation(h);const{onDragEnd:g}=this.getProps();g&&yt.postRender(()=>g(a,l))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:l}=this.getProps();if(!a||!xd(t,l,this.currentDirection))return;const d=this.getAxisMotionValue(t);let h=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(h=gO(h,this.constraints[t],this.elastic[t])),d.set(h)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;t&&bo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=yO(a.layoutBox,t):this.constraints=!1,this.elastic=bO(r),l!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Jn(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=xO(a.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!bo(t))return!1;const a=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const d=ER(a,l.root,this.visualElement.getTransformPagePoint());let h=vO(l.layout.layoutBox,d);if(r){const g=r(wR(h));this.hasMutatedConstraints=!!g,g&&(h=Uw(g))}return h}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:l,dragTransition:d,dragSnapToOrigin:h,onDragTransitionEnd:g}=this.getProps(),y=this.constraints||{},_=Jn(b=>{if(!xd(b,r,this.currentDirection))return;let w=y&&y[b]||{};h&&(w={min:0,max:0});const S=l?200:1e6,j=l?40:1e7,k={type:"inertia",velocity:a?t[b]:0,bounceStiffness:S,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...d,...w};return this.startAxisValueAnimation(b,k)});return Promise.all(_).then(g)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return km(this.visualElement,t),a.start(zg(t,a,0,r,this.visualElement,!1))}stopAnimation(){Jn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Jn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),l=a[r];return l||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Jn(r=>{const{drag:a}=this.getProps();if(!xd(r,a,this.currentDirection))return;const{projection:l}=this.visualElement,d=this.getAxisMotionValue(r);if(l&&l.layout){const{min:h,max:g}=l.layout.layoutBox[r];d.set(t[r]-bt(h,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!bo(r)||!a||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Jn(h=>{const g=this.getAxisMotionValue(h);if(g&&this.constraints!==!1){const y=g.get();l[h]=_O({min:y,max:y},this.constraints[h])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Jn(h=>{if(!xd(h,t,null))return;const g=this.getAxisMotionValue(h),{min:y,max:_}=this.constraints[h];g.set(bt(y,_,l[h]))})}addListeners(){if(!this.visualElement.current)return;wO.set(this.visualElement,this);const t=this.visualElement.current,r=ou(t,"pointerdown",y=>{const{drag:_,dragListener:b=!0}=this.getProps();_&&b&&this.start(y)}),a=()=>{const{dragConstraints:y}=this.getProps();bo(y)&&y.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,d=l.addEventListener("measure",a);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),yt.read(a);const h=yu(window,"resize",()=>this.scalePositionWithinConstraints()),g=l.addEventListener("didUpdate",(({delta:y,hasLayoutChanged:_})=>{this.isDragging&&_&&(Jn(b=>{const w=this.getAxisMotionValue(b);w&&(this.originPoint[b]+=y[b].translate,w.set(w.get()+y[b].translate))}),this.visualElement.render())}));return()=>{h(),r(),d(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:l=!1,dragConstraints:d=!1,dragElastic:h=Om,dragMomentum:g=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:l,dragConstraints:d,dragElastic:h,dragMomentum:g}}}function xd(n,t,r){return(t===!0||t===n)&&(r===null||r===n)}function TO(n,t=10){let r=null;return Math.abs(n.y)>t?r="y":Math.abs(n.x)>t&&(r="x"),r}class EO extends hs{constructor(t){super(t),this.removeGroupControls=ei,this.removeListeners=ei,this.controls=new SO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ei}unmount(){this.removeGroupControls(),this.removeListeners()}}const xx=n=>(t,r)=>{n&&yt.postRender(()=>n(t,r))};class jO extends hs{constructor(){super(...arguments),this.removePointerDownListener=ei}onPointerDown(t){this.session=new tS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eS(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:l}=this.node.getProps();return{onSessionStart:xx(t),onStart:xx(r),onMove:a,onEnd:(d,h)=>{delete this.session,l&&yt.postRender(()=>l(d,h))}}}mount(){this.removePointerDownListener=ou(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Od={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Up=!1;class CO extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:l}=this.props,{projection:d}=t;d&&(r.group&&r.group.add(d),a&&a.register&&l&&a.register(d),Up&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),Od.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:l,isPresent:d}=this.props,{projection:h}=a;return h&&(h.isPresent=d,Up=!0,l||t.layoutDependency!==r||r===void 0||t.isPresent!==d?h.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?h.promote():h.relegate()||yt.postRender(()=>{const g=h.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Sg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:l}=t;Up=!0,l&&(l.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(l),a&&a.deregister&&a.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function iS(n){const[t,r]=Ew(),a=R.useContext(ng);return f.jsx(CO,{...n,layoutGroup:a,switchLayoutGroup:R.useContext(Bw),isPresent:t,safeToRemove:r})}function AO(n,t,r){const a=ln(n)?n:Ro(n);return a.start(zg("",a,t,r)),a.animation}const kO=(n,t)=>n.depth-t.depth;class RO{constructor(){this.children=[],this.isDirty=!1}add(t){sg(this.children,t),this.isDirty=!0}remove(t){ag(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kO),this.isDirty=!1,this.children.forEach(t)}}function OO(n,t){const r=kn.now(),a=({timestamp:l})=>{const d=l-r;d>=t&&(us(a),n(d-t))};return yt.setup(a,!0),()=>us(a)}const rS=["TopLeft","TopRight","BottomLeft","BottomRight"],MO=rS.length,bx=n=>typeof n=="string"?parseFloat(n):n,wx=n=>typeof n=="number"||Pe.test(n);function LO(n,t,r,a,l,d){l?(n.opacity=bt(0,r.opacity??1,zO(a)),n.opacityExit=bt(t.opacity??1,0,PO(a))):d&&(n.opacity=bt(t.opacity??1,r.opacity??1,a));for(let h=0;h<MO;h++){const g=`border${rS[h]}Radius`;let y=Sx(t,g),_=Sx(r,g);if(y===void 0&&_===void 0)continue;y||(y=0),_||(_=0),y===0||_===0||wx(y)===wx(_)?(n[g]=Math.max(bt(bx(y),bx(_),a),0),(Ui.test(_)||Ui.test(y))&&(n[g]+="%")):n[g]=_}(t.rotate||r.rotate)&&(n.rotate=bt(t.rotate||0,r.rotate||0,a))}function Sx(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const zO=sS(0,.5,W1),PO=sS(.5,.95,ei);function sS(n,t,r){return a=>a<n?0:a>t?1:r(fu(n,t,a))}function Tx(n,t){n.min=t.min,n.max=t.max}function gi(n,t){Tx(n.x,t.x),Tx(n.y,t.y)}function Ex(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function jx(n,t,r,a,l){return n-=t,n=Zd(n,1/r,a),l!==void 0&&(n=Zd(n,1/l,a)),n}function DO(n,t=0,r=1,a=.5,l,d=n,h=n){if(Ui.test(t)&&(t=parseFloat(t),t=bt(h.min,h.max,t/100)-h.min),typeof t!="number")return;let g=bt(d.min,d.max,a);n===d&&(g-=t),n.min=jx(n.min,t,r,g,l),n.max=jx(n.max,t,r,g,l)}function Cx(n,t,[r,a,l],d,h){DO(n,t[r],t[a],t[l],t.scale,d,h)}const BO=["x","scaleX","originX"],NO=["y","scaleY","originY"];function Ax(n,t,r,a){Cx(n.x,t,BO,r?r.x:void 0,a?a.x:void 0),Cx(n.y,t,NO,r?r.y:void 0,a?a.y:void 0)}function kx(n){return n.translate===0&&n.scale===1}function aS(n){return kx(n.x)&&kx(n.y)}function Rx(n,t){return n.min===t.min&&n.max===t.max}function UO(n,t){return Rx(n.x,t.x)&&Rx(n.y,t.y)}function Ox(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function oS(n,t){return Ox(n.x,t.x)&&Ox(n.y,t.y)}function Mx(n){return pn(n.x)/pn(n.y)}function Lx(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class IO{constructor(){this.members=[]}add(t){sg(this.members,t),t.scheduleRender()}remove(t){if(ag(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(l=>t===l);if(r===0)return!1;let a;for(let l=r;l>=0;l--){const d=this.members[l];if(d.isPresent!==!1){a=d;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VO(n,t,r){let a="";const l=n.x.translate/t.x,d=n.y.translate/t.y,h=r?.z||0;if((l||d||h)&&(a=`translate3d(${l}px, ${d}px, ${h}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:_,rotate:b,rotateX:w,rotateY:S,skewX:j,skewY:k}=r;_&&(a=`perspective(${_}px) ${a}`),b&&(a+=`rotate(${b}deg) `),w&&(a+=`rotateX(${w}deg) `),S&&(a+=`rotateY(${S}deg) `),j&&(a+=`skewX(${j}deg) `),k&&(a+=`skewY(${k}deg) `)}const g=n.x.scale*t.x,y=n.y.scale*t.y;return(g!==1||y!==1)&&(a+=`scale(${g}, ${y})`),a||"none"}const Ip=["","X","Y","Z"],HO=1e3;let qO=0;function Vp(n,t,r,a){const{latestValues:l}=t;l[n]&&(r[n]=l[n],t.setStaticValue(n,0),a&&(a[n]=0))}function lS(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const r=Zw(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:l,layoutId:d}=n.options;window.MotionCancelOptimisedAnimation(r,"transform",yt,!(l||d))}const{parent:a}=n;a&&!a.hasCheckedOptimisedAppear&&lS(a)}function uS({attachResizeListener:n,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:l}){return class{constructor(h={},g=t?.()){this.id=qO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($O),this.nodes.forEach(YO),this.nodes.forEach(XO),this.nodes.forEach(ZO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let y=0;y<this.path.length;y++)this.path[y].shouldResetTransform=!0;this.root===this&&(this.nodes=new RO)}addEventListener(h,g){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new ug),this.eventHandlers.get(h).add(g)}notifyListeners(h,...g){const y=this.eventHandlers.get(h);y&&y.notify(...g)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=Tw(h)&&!Pk(h),this.instance=h;const{layoutId:g,layout:y,visualElement:_}=this.options;if(_&&!_.current&&_.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(y||g)&&(this.isLayoutDirty=!0),n){let b,w=0;const S=()=>this.root.updateBlockedByResize=!1;yt.read(()=>{w=window.innerWidth}),n(h,()=>{const j=window.innerWidth;j!==w&&(w=j,this.root.updateBlockedByResize=!0,b&&b(),b=OO(S,250),Od.hasAnimatedSinceResize&&(Od.hasAnimatedSinceResize=!1,this.nodes.forEach(Dx)))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&_&&(g||y)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:w,hasRelativeLayoutChanged:S,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||_.getDefaultTransition()||nM,{onLayoutAnimationStart:C,onLayoutAnimationComplete:A}=_.getProps(),z=!this.targetLayout||!oS(this.targetLayout,j),D=!w&&S;if(this.options.layoutRoot||this.resumeFrom||D||w&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...bg(k,"layout"),onPlay:C,onComplete:A};(_.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(b,D)}else w||Dx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),us(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JO),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let b=0;b<this.path.length;b++){const w=this.path[b];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:g,layout:y}=this.options;if(g===void 0&&!y)return;const _=this.getTransformTemplate();this.prevTransformTemplateValue=_?_(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Px);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(KO),this.nodes.forEach(WO),this.nodes.forEach(FO)):this.nodes.forEach(Px),this.clearAllSnapshots();const g=kn.now();nn.delta=gr(0,1e3/60,g-nn.timestamp),nn.timestamp=g,nn.isProcessing=!0,kp.update.process(nn),kp.preRender.process(nn),kp.render.process(nn),nn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(GO),this.sharedNodes.forEach(QO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pn(this.snapshot.measuredBox.x)&&!pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let y=0;y<this.path.length;y++)this.path[y].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(g=!1),g&&this.instance){const y=a(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:y,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:y}}}resetTransform(){if(!l)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!aS(this.projectionDelta),y=this.getTransformTemplate(),_=y?y(this.latestValues,""):void 0,b=_!==this.prevTransformTemplateValue;h&&this.instance&&(g||ua(this.latestValues)||b)&&(l(this.instance,_),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const g=this.measurePageBox();let y=this.removeElementScroll(g);return h&&(y=this.removeTransform(y)),iM(y),{animationId:this.root.animationId,measuredBox:g,layoutBox:y,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:h}=this.options;if(!h)return qt();const g=h.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(rM))){const{scroll:_}=this.root;_&&(wo(g.x,_.offset.x),wo(g.y,_.offset.y))}return g}removeElementScroll(h){const g=qt();if(gi(g,h),this.scroll?.wasRoot)return g;for(let y=0;y<this.path.length;y++){const _=this.path[y],{scroll:b,options:w}=_;_!==this.root&&b&&w.layoutScroll&&(b.wasRoot&&gi(g,h),wo(g.x,b.offset.x),wo(g.y,b.offset.y))}return g}applyTransform(h,g=!1){const y=qt();gi(y,h);for(let _=0;_<this.path.length;_++){const b=this.path[_];!g&&b.options.layoutScroll&&b.scroll&&b!==b.root&&So(y,{x:-b.scroll.offset.x,y:-b.scroll.offset.y}),ua(b.latestValues)&&So(y,b.latestValues)}return ua(this.latestValues)&&So(y,this.latestValues),y}removeTransform(h){const g=qt();gi(g,h);for(let y=0;y<this.path.length;y++){const _=this.path[y];if(!_.instance||!ua(_.latestValues))continue;Em(_.latestValues)&&_.updateSnapshot();const b=qt(),w=_.measurePageBox();gi(b,w),Ax(g,_.latestValues,_.snapshot?_.snapshot.layoutBox:void 0,b)}return ua(this.latestValues)&&Ax(g,this.latestValues),g}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==g;if(!(h||y&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:w}=this.options;if(!this.layout||!(b||w))return;this.resolvedRelativeTargetAt=nn.timestamp;const S=this.getClosestProjectingParent();S&&this.linkedParentVersion!==S.layoutVersion&&!S.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(S&&S.layout?this.createRelativeTarget(S,this.layout.layoutBox,S.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qt(),this.targetWithTransforms=qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),Vw(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?this.createRelativeTarget(S,this.target,S.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Em(this.parent.latestValues)||Iw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(h,g,y){this.relativeParent=h,this.linkedParentVersion=h.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qt(),this.relativeTargetOrigin=qt(),Gd(this.relativeTargetOrigin,g,y),gi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const h=this.getLead(),g=!!this.resumingFrom||this!==h;let y=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(y=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===nn.timestamp&&(y=!1),y)return;const{layout:_,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||b))return;gi(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,S=this.treeScale.y;TR(this.layoutCorrected,this.treeScale,this.path,g),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=qt());const{target:j}=h;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ex(this.prevProjectionDelta.x,this.projectionDelta.x),Ex(this.prevProjectionDelta.y,this.projectionDelta.y)),lu(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==S||!Lx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Lx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){if(this.options.visualElement?.scheduleRender(),h){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=To(),this.projectionDelta=To(),this.projectionDeltaWithTransform=To()}setAnimationOrigin(h,g=!1){const y=this.snapshot,_=y?y.latestValues:{},b={...this.latestValues},w=To();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const S=qt(),j=y?y.source:void 0,k=this.layout?this.layout.source:void 0,C=j!==k,A=this.getStack(),z=!A||A.members.length<=1,D=!!(C&&!z&&this.options.crossfade===!0&&!this.path.some(tM));this.animationProgress=0;let P;this.mixTargetDelta=Z=>{const $=Z/1e3;Bx(w.x,h.x,$),Bx(w.y,h.y,$),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gd(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eM(this.relativeTarget,this.relativeTargetOrigin,S,$),P&&UO(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=qt()),gi(P,this.relativeTarget)),C&&(this.animationValues=b,LO(b,_,this.latestValues,$,D,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(us(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yt.update(()=>{Od.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ro(0)),this.currentAnimation=AO(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),h.onUpdate&&h.onUpdate(g)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:g,target:y,layout:_,latestValues:b}=h;if(!(!g||!y||!_)){if(this!==h&&this.layout&&_&&cS(this.options.animationType,this.layout.layoutBox,_.layoutBox)){y=this.target||qt();const w=pn(this.layout.layoutBox.x);y.x.min=h.target.x.min,y.x.max=y.x.min+w;const S=pn(this.layout.layoutBox.y);y.y.min=h.target.y.min,y.y.max=y.y.min+S}gi(g,y),So(g,b),lu(this.projectionDeltaWithTransform,this.layoutCorrected,g,b)}}registerSharedNode(h,g){this.sharedNodes.has(h)||this.sharedNodes.set(h,new IO),this.sharedNodes.get(h).add(g);const _=g.options.initialPromotionConfig;g.promote({transition:_?_.transition:void 0,preserveFollowOpacity:_&&_.shouldPreserveFollowOpacity?_.shouldPreserveFollowOpacity(g):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){const{layoutId:h}=this.options;return h?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:h}=this.options;return h?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:g,preserveFollowOpacity:y}={}){const _=this.getStack();_&&_.promote(this,y),h&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let g=!1;const{latestValues:y}=h;if((y.z||y.rotate||y.rotateX||y.rotateY||y.rotateZ||y.skewX||y.skewY)&&(g=!0),!g)return;const _={};y.z&&Vp("z",h,_,this.animationValues);for(let b=0;b<Ip.length;b++)Vp(`rotate${Ip[b]}`,h,_,this.animationValues),Vp(`skew${Ip[b]}`,h,_,this.animationValues);h.render();for(const b in _)h.setStaticValue(b,_[b]),this.animationValues&&(this.animationValues[b]=_[b]);h.scheduleRender()}applyProjectionStyles(h,g){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const y=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=Rd(g?.pointerEvents)||"",h.transform=y?y(this.latestValues,""):"none";return}const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=Rd(g?.pointerEvents)||""),this.hasProjected&&!ua(this.latestValues)&&(h.transform=y?y({},""):"none",this.hasProjected=!1);return}h.visibility="";const b=_.animationValues||_.latestValues;this.applyTransformsToTarget();let w=VO(this.projectionDeltaWithTransform,this.treeScale,b);y&&(w=y(b,w)),h.transform=w;const{x:S,y:j}=this.projectionDelta;h.transformOrigin=`${S.origin*100}% ${j.origin*100}% 0`,_.animationValues?h.opacity=_===this?b.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:h.opacity=_===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const k in Tm){if(b[k]===void 0)continue;const{correct:C,applyTo:A,isCSSVariable:z}=Tm[k],D=w==="none"?b[k]:C(b[k],_);if(A){const P=A.length;for(let Z=0;Z<P;Z++)h[A[Z]]=D}else z?this.options.visualElement.renderState.vars[k]=D:h[k]=D}this.options.layoutId&&(h.pointerEvents=_===this?Rd(g?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>h.currentAnimation?.stop()),this.root.nodes.forEach(zx),this.root.sharedNodes.clear()}}}function WO(n){n.updateLayout()}function FO(n){const t=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=n.layout,{animationType:l}=n.options,d=t.source!==n.layout.source;l==="size"?Jn(b=>{const w=d?t.measuredBox[b]:t.layoutBox[b],S=pn(w);w.min=r[b].min,w.max=w.min+S}):cS(l,t.layoutBox,r)&&Jn(b=>{const w=d?t.measuredBox[b]:t.layoutBox[b],S=pn(r[b]);w.max=w.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[b].max=n.relativeTarget[b].min+S)});const h=To();lu(h,r,t.layoutBox);const g=To();d?lu(g,n.applyTransform(a,!0),t.measuredBox):lu(g,r,t.layoutBox);const y=!aS(h);let _=!1;if(!n.resumeFrom){const b=n.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:w,layout:S}=b;if(w&&S){const j=qt();Gd(j,t.layoutBox,w.layoutBox);const k=qt();Gd(k,r,S.layoutBox),oS(j,k)||(_=!0),b.options.layoutRoot&&(n.relativeTarget=k,n.relativeTargetOrigin=j,n.relativeParent=b)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:g,layoutDelta:h,hasLayoutChanged:y,hasRelativeLayoutChanged:_})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function $O(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function ZO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function GO(n){n.clearSnapshot()}function zx(n){n.clearMeasurements()}function Px(n){n.isLayoutDirty=!1}function KO(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function Dx(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function YO(n){n.resolveTargetDelta()}function XO(n){n.calcProjection()}function JO(n){n.resetSkewAndRotation()}function QO(n){n.removeLeadSnapshot()}function Bx(n,t,r){n.translate=bt(t.translate,0,r),n.scale=bt(t.scale,1,r),n.origin=t.origin,n.originPoint=t.originPoint}function Nx(n,t,r,a){n.min=bt(t.min,r.min,a),n.max=bt(t.max,r.max,a)}function eM(n,t,r,a){Nx(n.x,t.x,r.x,a),Nx(n.y,t.y,r.y,a)}function tM(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const nM={duration:.45,ease:[.4,0,.1,1]},Ux=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Ix=Ux("applewebkit/")&&!Ux("chrome/")?Math.round:ei;function Vx(n){n.min=Ix(n.min),n.max=Ix(n.max)}function iM(n){Vx(n.x),Vx(n.y)}function cS(n,t,r){return n==="position"||n==="preserve-aspect"&&!dO(Mx(t),Mx(r),.2)}function rM(n){return n!==n.root&&n.scroll?.wasRoot}const sM=uS({attachResizeListener:(n,t)=>yu(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hp={current:void 0},dS=uS({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Hp.current){const n=new sM({});n.mount(window),n.setOptions({layoutScroll:!0}),Hp.current=n}return Hp.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),aM={pan:{Feature:jO},drag:{Feature:EO,ProjectionNode:dS,MeasureLayout:iS}};function Hx(n,t,r){const{props:a}=n;n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",r==="Start");const l="onHover"+r,d=a[l];d&&yt.postRender(()=>d(t,Cu(t)))}class oM extends hs{mount(){const{current:t}=this.node;t&&(this.unmount=Rk(t,(r,a)=>(Hx(this.node,a,"Start"),l=>Hx(this.node,l,"End"))))}unmount(){}}class lM extends hs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Su(yu(this.node.current,"focus",()=>this.onFocus()),yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qx(n,t,r){const{props:a}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&a.whileTap&&n.animationState.setActive("whileTap",r==="Start");const l="onTap"+(r==="End"?"":r),d=a[l];d&&yt.postRender(()=>d(t,Cu(t)))}class uM extends hs{mount(){const{current:t}=this.node;t&&(this.unmount=zk(t,(r,a)=>(qx(this.node,a,"Start"),(l,{success:d})=>qx(this.node,l,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Mm=new WeakMap,qp=new WeakMap,cM=n=>{const t=Mm.get(n.target);t&&t(n)},dM=n=>{n.forEach(cM)};function hM({root:n,...t}){const r=n||document;qp.has(r)||qp.set(r,{});const a=qp.get(r),l=JSON.stringify(t);return a[l]||(a[l]=new IntersectionObserver(dM,{root:n,...t})),a[l]}function fM(n,t,r){const a=hM(t);return Mm.set(n,r),a.observe(n),()=>{Mm.delete(n),a.unobserve(n)}}const pM={some:0,all:1};class mM extends hs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:l="some",once:d}=t,h={root:r?r.current:void 0,rootMargin:a,threshold:typeof l=="number"?l:pM[l]},g=y=>{const{isIntersecting:_}=y;if(this.isInView===_||(this.isInView=_,d&&!_&&this.hasEnteredView))return;_&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",_);const{onViewportEnter:b,onViewportLeave:w}=this.node.getProps(),S=_?b:w;S&&S(y)};return fM(this.node.current,h,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(gM(t,r))&&this.startObserver()}unmount(){}}function gM({viewport:n={}},{viewport:t={}}={}){return r=>n[r]!==t[r]}const yM={inView:{Feature:mM},tap:{Feature:uM},focus:{Feature:lM},hover:{Feature:oM}},vM={layout:{ProjectionNode:dS,MeasureLayout:iS}},_M={...sO,...yM,...aM,...vM},_e=bR(_M,zR),xM=()=>{const{signInWithGoogle:n,user:t,loading:r}=Rt(),a=wt(),[l,d]=R.useState(!1);R.useEffect(()=>{t&&(console.log("User logged in, redirecting to home:",t),a("/en/home"))},[t,a]);const h=async()=>{d(!0);try{console.log("Starting Google sign in..."),await n(),console.log("Google sign in initiated")}catch(g){console.error("Login error:",g),d(!1)}};return r?f.jsx("div",{style:{minHeight:"100vh",background:"var(--bg-white)",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx("div",{children:"Loading..."})}):f.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-white)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",textAlign:"center"},children:[f.jsxs(_e.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},style:{marginBottom:"40px"},children:[f.jsx("div",{style:{position:"relative",width:"120px",height:"120px",margin:"0 auto"},children:f.jsx("img",{src:"./chai_logo.png",alt:"Chai-in Logo",style:{width:"120px",height:"120px",objectFit:"contain"},onError:g=>{g.target.src="https://ui-avatars.com/api/?name=Chai-in&background=EF2A39&color=fff&rounded=true"}})}),f.jsx("h1",{style:{marginTop:"20px",fontSize:"2.5rem",fontWeight:"900",color:"var(--primary)",letterSpacing:"-1px"},children:"Chai-in"}),f.jsx("p",{style:{color:"var(--text-muted)",fontSize:"1.1rem",fontWeight:"600"},children:"Discover Kerala's Best Eats"})]}),f.jsxs(_e.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},style:{width:"100%",maxWidth:"350px"},children:[f.jsx("button",{onClick:h,disabled:l,style:{width:"100%",padding:"18px",borderRadius:"24px",background:"var(--primary)",color:"white",border:"none",fontSize:"1.1rem",fontWeight:"800",boxShadow:"var(--shadow-lg)",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:l?"Connecting...":f.jsxs(f.Fragment,{children:[f.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",width:"20",alt:"Google"}),"Sign in with Google"]})}),f.jsx("p",{style:{marginTop:"24px",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.5"},children:"By continuing, you agree to discover the most delicious spots in Kerala."})]}),f.jsx("div",{style:{position:"absolute",top:"-100px",right:"-100px",width:"300px",height:"300px",borderRadius:"50%",background:"rgba(239, 42, 57, 0.05)",zIndex:-1}}),f.jsx("div",{style:{position:"absolute",bottom:"-80px",left:"-80px",width:"250px",height:"250px",borderRadius:"50%",background:"rgba(239, 42, 57, 0.05)",zIndex:-1}})]})};const bM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),Wx=n=>{const t=wM(n);return t.charAt(0).toUpperCase()+t.slice(1)},hS=(...n)=>n.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),SM=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var TM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EM=R.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:d,iconNode:h,...g},y)=>R.createElement("svg",{ref:y,...TM,width:t,height:t,stroke:n,strokeWidth:a?Number(r)*24/Number(t):r,className:hS("lucide",l),...!d&&!SM(g)&&{"aria-hidden":"true"},...g},[...h.map(([_,b])=>R.createElement(_,b)),...Array.isArray(d)?d:[d]]));const Te=(n,t)=>{const r=R.forwardRef(({className:a,...l},d)=>R.createElement(EM,{ref:d,iconNode:t,className:hS(`lucide-${bM(Wx(n))}`,`lucide-${n}`,a),...l}));return r.displayName=Wx(n),r};const jM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fs=Te("arrow-left",jM);const CM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],AM=Te("arrow-right",CM);const kM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],RM=Te("award",kM);const OM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Kd=Te("bell",OM);const MM=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Au=Te("camera",MM);const LM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Lm=Te("check",LM);const zM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ku=Te("chevron-left",zM);const PM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ss=Te("chevron-right",PM);const DM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],BM=Te("circle-alert",DM);const NM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fS=Te("circle-check-big",NM);const UM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pS=Te("circle-x",UM);const IM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zm=Te("clock",IM);const VM=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],mS=Te("coffee",VM);const HM=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],qM=Te("crop",HM);const WM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],FM=Te("crosshair",WM);const $M=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Pg=Te("crown",$M);const ZM=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],gS=Te("dollar-sign",ZM);const GM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yS=Te("eye",GM);const KM=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Dg=Te("file-text",KM);const YM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Pm=Te("globe",YM);const XM=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ya=Te("heart",XM);const JM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],vS=Te("house",JM);const QM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Fx=Te("image",QM);const e5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],t5=Te("info",e5);const n5=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],_S=Te("instagram",n5);const i5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],r5=Te("layers",i5);const s5=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],uh=Te("loader",s5);const a5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],o5=Te("lock",a5);const l5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],u5=Te("log-out",l5);const c5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],d5=Te("mail",c5);const h5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ti=Te("map-pin",h5);const f5=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ch=Te("map",f5);const p5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],dh=Te("message-circle",p5);const m5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],xS=Te("message-square",m5);const g5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],y5=Te("moon",g5);const v5=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],_5=Te("navigation",v5);const x5=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],b5=Te("pause",x5);const w5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Bg=Te("pen-line",w5);const S5=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Yd=Te("phone",S5);const T5=[["path",{d:"m12 14-1 1",key:"11onhr"}],["path",{d:"m13.75 18.25-1.25 1.42",key:"1yisr3"}],["path",{d:"M17.775 5.654a15.68 15.68 0 0 0-12.121 12.12",key:"1qtqk6"}],["path",{d:"M18.8 9.3a1 1 0 0 0 2.1 7.7",key:"fbbbr2"}],["path",{d:"M21.964 20.732a1 1 0 0 1-1.232 1.232l-18-5a1 1 0 0 1-.695-1.232A19.68 19.68 0 0 1 15.732 2.037a1 1 0 0 1 1.232.695z",key:"1hyfdd"}]],E5=Te("pizza",T5);const j5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],C5=Te("play",j5);const A5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Mo=Te("plus",A5);const k5=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],R5=Te("rotate-cw",k5);const O5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Dm=Te("search",O5);const M5=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],bS=Te("send",M5);const L5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],z5=Te("settings",L5);const P5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],D5=Te("shield-alert",P5);const B5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Bm=Te("shield",B5);const N5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],U5=Te("sparkles",N5);const I5=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ru=Te("star",I5);const V5=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],H5=Te("sun",V5);const q5=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Xd=Te("tag",q5);const W5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ng=Te("trash-2",W5);const F5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],$5=Te("trending-up",F5);const Z5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],G5=Te("triangle-alert",Z5);const K5=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Y5=Te("trophy",K5);const X5=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],J5=Te("user-check",X5);const Q5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vr=Te("user",Q5);const eL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hh=Te("users",eL);const tL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_a=Te("x",tL);const nL=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],iL=Te("youtube",nL);const rL=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],sL=Te("zap",rL),wS=({images:n,interval:t=3e3,showControls:r=!1})=>{const a=n&&n.length>0?n.slice(0,5):["https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&q=80"],[l,d]=R.useState(0),[h,g]=R.useState(!0);R.useEffect(()=>{let _;return h&&a.length>1&&(_=setInterval(()=>{d(b=>(b+1)%a.length)},t)),()=>clearInterval(_)},[h,a.length,t]);const y=_=>{_.stopPropagation(),g(!h)};return a.length===0?null:f.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},children:[a.map((_,b)=>f.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:b===l?1:0,transition:"opacity 0.5s ease-in-out",pointerEvents:"none"},children:f.jsx("img",{src:_,alt:`Slide ${b+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}})},b)),r&&a.length>1&&f.jsx("button",{onClick:y,style:{position:"absolute",bottom:"20px",left:"20px",background:"rgba(0, 0, 0, 0.5)",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:20,color:"white",backdropFilter:"blur(4px)"},children:h?f.jsx(b5,{size:16,fill:"white"}):f.jsx(C5,{size:16,fill:"white"})}),a.length>1&&f.jsx("div",{style:{position:"absolute",bottom:"10px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"6px",zIndex:20},children:a.map((_,b)=>f.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:b===l?"white":"rgba(255,255,255,0.4)",transition:"background 0.3s"}},b))})]})},fh=R.memo(({spot:n})=>{const{name:t,rating:r,reviews_count:a,images:l,distance:d,tags:h,price_level:g,id:y,instagram_handle:_,whatsapp_number:b}=n,w=wt(),{user:S}=Rt(),[j,k]=ls.useState(!1),[C,A]=ls.useState(!1),[z,D]=ls.useState(0),[P,Z]=ls.useState(null),$=W=>({1:"50-150",2:"150-300",3:"300-600",4:"600+"})[W]||"50-150";R.useEffect(()=>{let W=!0;return y&&(fe(W),V(W),n.opening_hours?Z(ye(n.opening_hours)):Z(null)),()=>{W=!1}},[y,S,n.opening_hours]);const V=async W=>{if(!S)return;const{data:xe}=await ae.from("user_favorites").select("*").eq("spot_id",y).eq("user_id",S.id).maybeSingle();W&&A(!!xe)},K=async W=>{if(W.stopPropagation(),!S)return;const xe=C;A(!xe);try{xe?await ae.from("user_favorites").delete().eq("spot_id",y).eq("user_id",S.id):await ae.from("user_favorites").insert({spot_id:y,user_id:S.id})}catch{A(xe)}},oe=()=>new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"})),ye=W=>{if(!W||!W.open||!W.close)return null;const xe=oe(),[Le,he=0]=W.open.split(":").map(Number),[H,re=0]=W.close.split(":").map(Number),ie=new Date(xe);ie.setHours(Le,he,0,0);const Se=new Date(xe);return Se.setHours(H,re,0,0),Se<=ie&&(xe<ie?ie.setDate(ie.getDate()-1):Se.setDate(Se.getDate()+1)),xe>=ie&&xe<=Se},fe=async W=>{try{const{count:xe}=await ae.from("visited_spots").select("*",{count:"exact",head:!0}).eq("spot_id",y);if(W&&D(xe||0),S){const{data:Le}=await ae.from("visited_spots").select("user_id").eq("spot_id",y).eq("user_id",S.id).maybeSingle();W&&k(!!Le)}}catch(xe){console.error(xe)}},te=()=>{const W=window.location.pathname.includes("/ml/")?"ml":"en";w(`/${W}/spot/${y}`)};return f.jsxs(_e.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},whileHover:{y:-5},transition:{duration:.3},onClick:te,style:{background:"var(--bg-white)",borderRadius:"var(--radius-lg)",padding:"8px",boxShadow:"var(--shadow-md)",cursor:"pointer",marginBottom:"8px",display:"flex",flexDirection:"column",gap:"6px",width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[f.jsxs("div",{style:{position:"relative",height:"120px",borderRadius:"20px",overflow:"hidden"},onClick:W=>W.stopPropagation(),children:[f.jsx(wS,{images:l,interval:4e3}),f.jsxs("div",{style:{position:"absolute",top:"6px",left:"50%",transform:"translateX(-50%)",background:P===null?"rgba(100, 116, 139, 0.7)":P?"rgba(16, 185, 129, 0.9)":"rgba(239, 68, 68, 0.9)",backdropFilter:"blur(8px)",color:"white",padding:"3px 8px",borderRadius:"16px",fontSize:"0.55rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"3px"},children:[f.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"white"}}),P===null?"HOURS N/A":P?"OPEN":"CLOSED"]}),f.jsxs("div",{style:{position:"absolute",bottom:"6px",left:"6px",background:"white",padding:"2px 6px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"3px",fontSize:"0.65rem",fontWeight:"800"},children:[f.jsx(Ru,{size:8,fill:"#FFB800",color:"#FFB800"})," ",r]})]}),f.jsxs("div",{style:{padding:"0 2px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[f.jsxs("div",{style:{flex:1,minWidth:0,marginRight:"8px"},children:[f.jsx("h3",{style:{fontSize:"0.85rem",fontWeight:"900",margin:"0 0 2px 0",color:"var(--text-main)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:t}),f.jsxs("p",{style:{fontSize:"0.7rem",color:"var(--text-muted)",margin:0,lineHeight:"1.2"},children:[d," km"]})]}),f.jsx(_e.button,{whileTap:{scale:.8},onClick:K,style:{background:"none",border:"none",cursor:"pointer",padding:"2px",flexShrink:0},children:f.jsx(ya,{size:18,fill:C?"var(--primary)":"none",color:C?"var(--primary)":"var(--text-muted)"})})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[f.jsx("div",{style:{display:"flex",gap:"4px"},children:(h||[]).slice(0,1).map((W,xe)=>f.jsxs("span",{style:{fontSize:"0.65rem",color:"var(--primary)",fontWeight:"700"},children:["#",W]},xe))}),f.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"900",color:"var(--primary)",background:"rgba(239, 42, 57, 0.1)",padding:"4px 8px",borderRadius:"8px"},children:$(g)})]}),f.jsx("div",{style:{marginTop:"6px",fontSize:"0.7rem",color:"var(--text-muted)",fontWeight:"700"},children:n.opening_hours?.open&&n.opening_hours?.close?`Kerala time: ${n.opening_hours.open} - ${n.opening_hours.close}`:"Hours not set"})]})]})}),xa=({message:n="Tasting the flavors..."})=>f.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px",gap:"20px"},children:[f.jsxs("div",{style:{position:"relative",width:"80px",height:"80px"},children:[f.jsx(_e.div,{animate:{rotate:360},transition:{repeat:1/0,duration:2,ease:"linear"},style:{width:"100%",height:"100%",borderRadius:"50%",border:"4px dashed var(--primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx(E5,{size:40,color:"var(--primary)"})}),f.jsx(_e.div,{animate:{scale:[1,1.2,1],opacity:[.3,.7,.3]},transition:{repeat:1/0,duration:1.5},style:{position:"absolute",top:-10,right:-10,background:"white",padding:"4px",borderRadius:"50%",boxShadow:"var(--shadow-sm)"},children:f.jsx(mS,{size:16,color:"var(--primary)"})})]}),f.jsx(_e.p,{animate:{opacity:[.4,1,.4]},transition:{repeat:1/0,duration:2},style:{fontWeight:"800",color:"var(--text-main)",fontSize:"1rem",margin:0},children:n})]}),aL=({lang:n})=>{const t=wt(),{user:r}=Rt(),[a,l]=R.useState([]),[d,h]=R.useState(!0),[g,y]=R.useState(""),[_,b]=R.useState(null),[w,S]=R.useState("All Kerala"),[j,k]=R.useState("All"),[C,A]=R.useState(!1),[z,D]=R.useState(""),[P,Z]=R.useState(!1);R.useEffect(()=>{$();const fe=ae.channel("home_spots_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"spots",filter:"is_verified=eq.true"},W=>{console.log("Home page received real-time update:",W),W.new.is_verified&&$()}).subscribe(),te=W=>{console.log("Home page received custom verification event:",W.detail),$()};return window.addEventListener("spotVerified",te),()=>{fe.unsubscribe(),window.removeEventListener("spotVerified",te)}},[_]);const $=async()=>{h(!0),console.log("Fetching spots from database...");const{data:fe,error:te}=await ae.from("spots").select("*").eq("is_verified",!0).order("created_at",{ascending:!1});if(te)console.error("Error fetching spots:",te);else{console.log("Fetched spots:",fe);let W=fe||[];_&&(W=W.filter(xe=>K(_.lat,_.lng,xe.latitude,xe.longitude)<=30)),console.log("Setting spots state:",W),l(W)}h(!1)},V=R.useMemo(()=>a.filter(fe=>{const te=fe.name.toLowerCase().includes(g.toLowerCase()),W=j==="All"||fe.category===j;return te&&W}),[a,g,j]);function K(fe,te,W,xe){var Le=6371,he=(W-fe)*Math.PI/180,H=(xe-te)*Math.PI/180,re=Math.sin(he/2)*Math.sin(he/2)+Math.cos(fe*Math.PI/180)*Math.cos(W*Math.PI/180)*Math.sin(H/2)*Math.sin(H/2);return Le*(2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re)))}const oe=async()=>{if(z.trim()){Z(!0);try{const te=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(z+", Kerala, India")}&limit=1`)).json();if(te&&te.length>0){const W={lat:parseFloat(te[0].lat),lng:parseFloat(te[0].lon),name:te[0].display_name.split(",")[0]};b(W),S(W.name),A(!1),D("")}}catch(fe){console.error("Error searching location:",fe)}finally{Z(!1)}}},ye=()=>{b(null),S("All Kerala"),A(!1),D("")};return f.jsx("div",{style:{paddingBottom:"100px",background:"var(--bg-main)",minHeight:"100vh"},children:f.jsxs("div",{className:"container",style:{padding:"0 16px",maxWidth:"100%",boxSizing:"border-box"},children:[f.jsxs("header",{style:{marginBottom:"24px"},children:[f.jsxs("p",{style:{margin:0,fontSize:"1rem",color:"var(--text-muted)"},children:["Hello ",r?.user_metadata?.full_name?.split(" ")[0]||"Foodie",","]}),f.jsx("h1",{style:{margin:"4px 0",fontSize:"1.6rem",fontWeight:"900",color:"var(--text-main)"},children:"What do you want to eat today?"})]}),f.jsxs("div",{style:{position:"relative",marginBottom:"24px"},children:[f.jsx("input",{type:"text",placeholder:"Search dishes, restaurants...",value:g,onChange:fe=>{const te=fe.target.value;te==="#admin"?(t(`/${n}/admin`),y("")):y(te)},style:{width:"100%",padding:"16px 20px 16px 50px",borderRadius:"var(--radius-lg)",border:"none",background:"var(--secondary)",fontSize:"1rem",fontWeight:"600"}}),f.jsx(Dm,{size:22,color:"var(--text-muted)",style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)"}})]}),f.jsx("div",{className:"hide-scrollbar",style:{display:"flex",gap:"12px",overflowX:"auto",marginBottom:"30px",padding:"4px 0"},children:["All","Trending","Arabian","Burger","Cafes","Desserts"].map(fe=>f.jsx(_e.button,{whileTap:{scale:.95},onClick:()=>k(fe),style:{padding:"10px 24px",borderRadius:"16px",background:j===fe?"var(--primary)":"var(--secondary)",color:j===fe?"white":"var(--text-muted)",border:"none",fontWeight:"800",whiteSpace:"nowrap",boxShadow:j===fe?"var(--shadow-sm)":"none",transition:"all 0.3s ease"},children:fe},fe))}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[f.jsxs(_e.button,{whileTap:{scale:.95},onClick:()=>A(!C),style:{background:"rgba(239, 42, 57, 0.1)",color:"var(--primary)",padding:"8px 16px",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"6px",border:"none",cursor:"pointer",transition:"all 0.3s ease",flexShrink:0},children:[f.jsx(ti,{size:16})," ",w]}),f.jsx("div",{style:{flex:1,minWidth:"200px"},children:f.jsxs("div",{style:{position:"relative"},children:[f.jsx("input",{type:"text",placeholder:"Search location in Kerala...",value:z,onChange:fe=>D(fe.target.value),onKeyPress:fe=>fe.key==="Enter"&&oe(),style:{width:"100%",height:"44px",padding:"0 70px 0 45px",borderRadius:"25px",border:"2px solid var(--primary)",background:"var(--bg-white)",fontSize:"0.85rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(239, 42, 57, 0.15)",transition:"all 0.3s ease",boxSizing:"border-box",lineHeight:"44px"}}),f.jsx(Dm,{size:20,color:"var(--primary)",style:{position:"absolute",left:"15px",top:"12px",zIndex:2}}),f.jsx(_e.button,{whileTap:{scale:.95},onClick:oe,disabled:P,style:{position:"absolute",right:"8px",top:"7px",background:"var(--primary)",color:"white",border:"none",padding:"8px 16px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"700",cursor:P?"not-allowed":"pointer",opacity:P?.6:1,boxShadow:"0 2px 8px rgba(239, 42, 57, 0.3)",zIndex:2,height:"30px"},children:P?"...":"Go"})]})}),_&&f.jsx(_e.button,{whileTap:{scale:.95},onClick:ye,style:{background:"var(--secondary)",color:"var(--text-muted)",padding:"8px 16px",borderRadius:"15px",fontSize:"0.75rem",fontWeight:"600",border:"none",cursor:"pointer",transition:"all 0.3s ease",flexShrink:0,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:"Clear"})]}),d?f.jsx(xa,{message:"Finding delicious spots..."}):f.jsx(_e.div,{layout:!0,style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:f.jsx(ju,{children:V.map(fe=>f.jsx(fh,{spot:fe},fe.id))})}),f.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 0.6; }
                    50% { opacity: 0.3; }
                    100% { opacity: 0.6; }
                }
            `})]})})},oL=({lang:n})=>{const{user:t,signOut:r}=Rt(),a=wt(),[l,d]=R.useState(!0),[h,g]=R.useState(null),[y,_]=R.useState({spots:0,reviews:0,xp:0}),[b,w]=R.useState("favorites"),[S,j]=R.useState([]),[k,C]=R.useState(!1),[A,z]=R.useState(!1),[D,P]=R.useState(!1),[Z,$]=R.useState(!1);R.useEffect(()=>{if(t){V(),window.addEventListener("focus",V),window.addEventListener("userProfileUpdated",V),window.addEventListener("visitUpdated",V);const W=localStorage.getItem("darkMode")==="true";$(W),W&&document.body.classList.add("dark-mode")}return()=>{window.removeEventListener("focus",V),window.removeEventListener("userProfileUpdated",V),window.removeEventListener("visitUpdated",V)}},[t]),R.useEffect(()=>{t&&K()},[b,t]);const V=async()=>{d(!0);const{data:W}=await ae.from("user_preferences").select("*").eq("user_id",t.id).maybeSingle();g(W);const{count:xe}=await ae.from("spots").select("*",{count:"exact",head:!0}).eq("created_by",t.id),{count:Le}=await ae.from("reviews").select("*",{count:"exact",head:!0}).eq("user_id",t.id),{count:he}=await ae.from("user_favorites").select("*",{count:"exact",head:!0}).eq("user_id",t.id),{count:H}=await ae.from("visited_spots").select("*",{count:"exact",head:!0}).eq("user_id",t.id);_({spots:xe||0,reviews:Le||0,favorites:he||0,visits:H||0,xp:(xe||0)*100+(Le||0)*10+(H||0)*5}),d(!1)},K=async()=>{if(C(!0),b==="favorites"){const{data:W}=await ae.from("user_favorites").select("spot_id").eq("user_id",t.id);if(W&&W.length>0){const xe=W.map(he=>he.spot_id),{data:Le}=await ae.from("spots").select("*").in("id",xe);j(Le||[])}else j([])}else if(b==="reviews"){const{data:W}=await ae.from("reviews").select("*, spots(name)").eq("user_id",t.id).order("created_at",{ascending:!1});j(W||[])}else if(b==="added"){const{data:W}=await ae.from("spots").select("*").eq("created_by",t.id).order("created_at",{ascending:!1});j(W||[])}C(!1)},oe=async()=>{await r(),a(`/${n||"en"}/login`)},ye=()=>{const W=!Z;$(W),W?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",W.toString())},fe=async()=>{if(t){P(!0);try{const{data:W}=await ae.from("user_preferences").select("user_id").eq("username","admin").maybeSingle(),xe=W?.user_id;if(!xe)throw new Error("Admin user not found. Please contact support.");await ae.from("community_posts").delete().eq("user_id",t.id),await ae.from("post_comments").delete().eq("user_id",t.id),await ae.from("reviews").delete().eq("user_id",t.id),await ae.from("user_favorites").delete().eq("user_id",t.id),await ae.from("visited_spots").delete().eq("user_id",t.id),await ae.from("spots").update({created_by:xe}).eq("created_by",t.id),await ae.from("user_preferences").delete().eq("user_id",t.id),await ae.auth.updateUser({data:{deleted:!0,email:`deleted_${t.id}@deleted.com`}}),await r(),a(`/${n||"en"}/login`)}catch(W){console.error("Error deleting account:",W),alert("Error deleting account: "+W.message)}finally{P(!1),z(!1)}}},te=[{id:"favorites",label:"Favorites",icon:ya,count:y.favorites},{id:"reviews",label:"Reviews",icon:xS,count:y.reviews},{id:"added",label:"Added",icon:Mo,count:y.spots}];return f.jsxs("div",{style:{paddingBottom:"120px",background:"var(--bg-white)",minHeight:"100vh"},children:[f.jsx("div",{style:{height:"180px",background:"linear-gradient(135deg, var(--primary) 0%, #FF6B6B 100%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx("div",{style:{position:"absolute",inset:0,opacity:.1,backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"24px 24px"}})}),f.jsxs("div",{style:{marginTop:"-60px",textAlign:"center",padding:"0 20px",position:"relative"},children:[f.jsx(_e.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{width:"120px",height:"120px",borderRadius:"40px",background:"white",margin:"0 auto",padding:"6px",boxShadow:"var(--shadow-lg)"},children:f.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"34px",overflow:"hidden",background:"var(--secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:h?.avatar_url?f.jsx("img",{src:h.avatar_url,style:{width:"100%",height:"100%",objectFit:"cover"}}):f.jsx(vr,{size:50,color:"var(--text-muted)"})})}),f.jsx("h1",{style:{marginTop:"16px",fontSize:"1.6rem",fontWeight:"900",color:"var(--text-main)",margin:"16px 0 4px 0"},children:h?.display_name||t?.user_metadata?.full_name||"Foodie Voyager"}),f.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.95rem",fontWeight:"500"},children:"Elite Level Discoverer  Kerala, IN"})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",padding:"24px 20px"},children:[{label:"Visits",value:y.visits,icon:ti},{label:"Reviews",value:y.reviews,icon:Ru},{label:"Added",value:y.spots,icon:Mo},{label:"XP",value:y.xp,icon:sL}].map((W,xe)=>f.jsxs("div",{style:{background:"var(--secondary)",padding:"16px 8px",borderRadius:"24px",textAlign:"center"},children:[f.jsx(W.icon,{size:20,color:"var(--primary)",style:{marginBottom:"8px"}}),f.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"900",color:"var(--text-main)"},children:W.value}),f.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-muted)",marginTop:"2px"},children:W.label})]},xe))}),f.jsx("div",{style:{padding:"0 20px",marginBottom:"20px"},children:f.jsx("div",{style:{display:"flex",gap:"8px",background:"var(--secondary)",padding:"6px",borderRadius:"20px"},children:te.map(W=>f.jsxs("button",{onClick:()=>a(`/${n}/profile/${W.id}`),style:{flex:1,padding:"12px",borderRadius:"16px",background:"transparent",border:"none",fontWeight:"800",fontSize:"0.85rem",color:"var(--text-muted)",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[f.jsx(W.icon,{size:16}),W.label," (",W.count,")"]},W.id))})}),f.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"12px",marginTop:"20px"},children:[f.jsxs(_e.div,{whileTap:{scale:.98},onClick:()=>a(`/${n}/settings`),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"white",borderRadius:"24px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",cursor:"pointer",border:"1px solid var(--secondary)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[f.jsx("div",{style:{padding:"10px",borderRadius:"14px",background:"#EEF2FF"},children:f.jsx(z5,{size:22,color:"#4F46E5"})}),f.jsx("span",{style:{fontWeight:"800",fontSize:"1.05rem",color:"var(--text-main)"},children:"Settings"})]}),f.jsx(ss,{size:20,color:"var(--text-muted)"})]}),f.jsxs(_e.div,{whileTap:{scale:.98},onClick:()=>a(`/${n}/leaderboard`),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"white",borderRadius:"24px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",cursor:"pointer",border:"1px solid var(--secondary)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[f.jsx("div",{style:{padding:"10px",borderRadius:"14px",background:"#FFFBEB"},children:f.jsx(RM,{size:22,color:"#F59E0B"})}),f.jsx("span",{style:{fontWeight:"800",fontSize:"1.05rem",color:"var(--text-main)"},children:"Leaderboard"})]}),f.jsx(ss,{size:20,color:"var(--text-muted)"})]}),f.jsxs(_e.div,{whileTap:{scale:.98},onClick:()=>a(`/${n}/privacy-policy`),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"white",borderRadius:"24px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",cursor:"pointer",border:"1px solid var(--secondary)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[f.jsx("div",{style:{padding:"10px",borderRadius:"14px",background:"#F0FDF4"},children:f.jsx(Bm,{size:22,color:"#10B981"})}),f.jsx("span",{style:{fontWeight:"800",fontSize:"1.05rem",color:"var(--text-main)"},children:"Privacy Policy"})]}),f.jsx(ss,{size:20,color:"var(--text-muted)"})]}),f.jsxs(_e.div,{whileTap:{scale:.98},onClick:()=>a(`/${n}/contact-admin`),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"white",borderRadius:"24px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",cursor:"pointer",border:"1px solid var(--secondary)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[f.jsx("div",{style:{padding:"10px",borderRadius:"14px",background:"#FEF2F2"},children:f.jsx(dh,{size:22,color:"#EF4444"})}),f.jsx("span",{style:{fontWeight:"800",fontSize:"1.05rem",color:"var(--text-main)"},children:"Contact Admin"})]}),f.jsx(ss,{size:20,color:"var(--text-muted)"})]}),f.jsxs(_e.div,{whileTap:{scale:.98},onClick:ye,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"white",borderRadius:"24px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",cursor:"pointer",border:"1px solid var(--secondary)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[f.jsx("div",{style:{padding:"10px",borderRadius:"14px",background:Z?"#1F2937":"#FEF3C7"},children:Z?f.jsx(y5,{size:22,color:"#F59E0B"}):f.jsx(H5,{size:22,color:"#F59E0B"})}),f.jsx("span",{style:{fontWeight:"800",fontSize:"1.05rem",color:"var(--text-main)"},children:Z?"Dark Mode":"Light Mode"})]}),f.jsx(ss,{size:20,color:"var(--text-muted)"})]}),f.jsxs(_e.div,{whileTap:{scale:.98},onClick:oe,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"white",borderRadius:"24px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",cursor:"pointer",border:"1px solid var(--secondary)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[f.jsx("div",{style:{padding:"10px",borderRadius:"14px",background:"#F3F4F6"},children:f.jsx(u5,{size:22,color:"#6B7280"})}),f.jsx("span",{style:{fontWeight:"800",fontSize:"1.05rem",color:"var(--text-main)"},children:"Logout"})]}),f.jsx(ss,{size:20,color:"var(--text-muted)"})]}),f.jsxs(_e.div,{whileTap:{scale:.98},onClick:()=>z(!0),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"white",borderRadius:"24px",boxShadow:"0 4px 15px rgba(0,0,0,0.03)",cursor:"pointer",border:"1px solid #FEE2E2"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[f.jsx("div",{style:{padding:"10px",borderRadius:"14px",background:"#FEE2E2"},children:f.jsx(Ng,{size:22,color:"#DC2626"})}),f.jsx("span",{style:{fontWeight:"800",fontSize:"1.05rem",color:"#DC2626"},children:"Delete Account"})]}),f.jsx(ss,{size:20,color:"#DC2626"})]})]}),A&&f.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},children:f.jsxs("div",{style:{background:"white",borderRadius:"24px",padding:"32px",maxWidth:"400px",width:"100%",textAlign:"center"},children:[f.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#FEE2E2",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:f.jsx(G5,{size:30,color:"#DC2626"})}),f.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"900",color:"var(--text-main)",marginBottom:"12px"},children:"Delete Account?"}),f.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",marginBottom:"24px"},children:"This action cannot be undone. All your data including posts, reviews, favorites, and visits will be permanently deleted. Your added spots will be transferred to admin."}),f.jsxs("div",{style:{display:"flex",gap:"12px"},children:[f.jsx("button",{onClick:()=>z(!1),disabled:D,style:{flex:1,padding:"16px",borderRadius:"16px",border:"2px solid var(--secondary)",background:"white",color:"var(--text-main)",fontWeight:"800",cursor:D?"not-allowed":"pointer"},children:"Cancel"}),f.jsx("button",{onClick:fe,disabled:D,style:{flex:1,padding:"16px",borderRadius:"16px",border:"none",background:"#DC2626",color:"white",fontWeight:"800",cursor:D?"not-allowed":"pointer",opacity:D?.7:1},children:D?"Deleting...":"Delete Forever"})]})]})})]})},uu=({children:n,onClick:t,variant:r="primary",className:a="",...l})=>{const g={...{padding:"12px 24px",borderRadius:"var(--radius-full)",fontWeight:"600",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"transform var(--transition-fast), box-shadow var(--transition-fast)",boxShadow:"var(--shadow-sm)"},...{primary:{background:"var(--primary)",color:"#fff"},secondary:{background:"var(--secondary)",color:"var(--text-main)"},outline:{background:"transparent",border:"2px solid var(--primary)",color:"var(--primary)"}}[r]};return f.jsx("button",{onClick:t,style:g,className:a,onMouseEnter:y=>y.target.style.transform="scale(1.05)",onMouseLeave:y=>y.target.style.transform="scale(1)",...l,children:n})},Ou=({message:n,type:t="success",onClose:r})=>(R.useEffect(()=>{const a=setTimeout(()=>{r()},3e3);return()=>clearTimeout(a)},[r]),f.jsxs("div",{className:"animate-fade-in",style:{position:"fixed",bottom:"100px",left:"50%",transform:"translateX(-50%)",background:t==="success"?"#2e7d32":"#c62828",color:"white",padding:"12px 24px",borderRadius:"30px",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:2e3,minWidth:"300px",justifyContent:"center"},children:[t==="success"?f.jsx(fS,{size:20}):f.jsx(pS,{size:20}),f.jsx("span",{style:{fontWeight:600},children:n})]})),lL=()=>{const{user:n}=Rt(),t=wt(),[r,a]=R.useState(!0),[l,d]=R.useState(!1),[h,g]=R.useState(!1),[y,_]=R.useState(null),[b,w]=R.useState({displayName:"",avatarUrl:"",notificationsEnabled:!0,notifyNewSpots:!0,notifyReviewReplies:!0,notifyWeeklyDigest:!1,lastDisplayNameChange:null});R.useEffect(()=>{n&&S()},[n]);const S=async()=>{a(!0);const{data:C}=await ae.from("user_preferences").select("*").eq("user_id",n.id).single();C&&w({displayName:C.display_name||n.user_metadata?.full_name||"",avatarUrl:C.avatar_url||n.user_metadata?.avatar_url||"",notificationsEnabled:C.notifications_enabled,notifyNewSpots:C.notify_new_spots,notifyReviewReplies:C.notify_review_replies,notifyWeeklyDigest:C.notify_weekly_digest,lastDisplayNameChange:C.last_display_name_change}),a(!1)},j=async C=>{const A=C.target.files[0];if(A){g(!0);try{const z=`${n.id}-${Date.now()}.${A.name.split(".").pop()}`;await ae.storage.from("avatars").upload(`avatars/${z}`,A);const{data:{publicUrl:D}}=ae.storage.from("avatars").getPublicUrl(`avatars/${z}`);w({...b,avatarUrl:D}),_({message:"Avatar updated! Ready to save.",type:"success"})}catch{_({message:"Upload failed",type:"error"})}finally{g(!1)}}},k=async()=>{d(!0);try{const C=new Date,A=b.lastDisplayNameChange?new Date(b.lastDisplayNameChange):null,z=A?(C-A)/(1e3*60*60):25;if(z<24){const Z=Math.ceil(24-z);_({message:`You can only change your display name once every 24 hours. Please wait ${Z} more hours.`,type:"error"}),d(!1);return}const{data:D}=await ae.from("user_preferences").select("display_name").eq("display_name",b.displayName).not("user_id","eq",n.id).maybeSingle();if(D){_({message:"This display name is already taken.",type:"error"}),d(!1);return}const P={user_id:n.id,display_name:b.displayName,avatar_url:b.avatarUrl,notifications_enabled:b.notificationsEnabled,notify_new_spots:b.notifyNewSpots,notify_review_replies:b.notifyReviewReplies,notify_weekly_digest:b.notifyWeeklyDigest,last_display_name_change:C.toISOString()};await ae.from("user_preferences").upsert(P,{onConflict:"user_id"}),window.dispatchEvent(new CustomEvent("userProfileUpdated",{detail:{displayName:b.displayName,avatarUrl:b.avatarUrl}})),_({message:"Settings saved successfully! ",type:"success"}),setTimeout(()=>t(-1),1500)}catch{_({message:"Failed to save",type:"error"})}finally{d(!1)}};return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--secondary)",paddingBottom:"120px"},children:[y&&f.jsx(Ou,{message:y.message,type:y.type,onClose:()=>_(null)}),f.jsxs("div",{style:{height:"140px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[f.jsx("button",{onClick:()=>t(-1),style:{position:"absolute",left:"20px",background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white"},children:f.jsx(ku,{size:24})}),f.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.4rem",margin:0},children:"App Settings"})]}),f.jsx("div",{className:"container",style:{padding:"0 20px",marginTop:"-40px"},children:r?f.jsx("div",{style:{textAlign:"center",padding:"40px"},children:f.jsx(_e.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},children:f.jsx(t5,{size:30,color:"var(--primary)"})})}):f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[f.jsxs("div",{style:{background:"white",borderRadius:"32px",padding:"24px",boxShadow:"var(--shadow-md)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[f.jsx(vr,{size:20,color:"var(--primary)"}),f.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"900",color:"var(--text-main)",margin:0},children:"Account Details"})]}),f.jsx("div",{style:{textAlign:"center",marginBottom:"24px"},children:f.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[f.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"32px",border:"4px solid var(--secondary)",overflow:"hidden",boxShadow:"var(--shadow-sm)"},children:b.avatarUrl?f.jsx("img",{src:b.avatarUrl,style:{width:"100%",height:"100%",objectFit:"cover"}}):f.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--secondary)"},children:f.jsx(vr,{size:40,color:"var(--text-muted)"})})}),f.jsx("label",{htmlFor:"avatar-upload",style:{position:"absolute",bottom:"-5px",right:"-5px",background:"var(--primary)",color:"white",padding:"8px",borderRadius:"12px",cursor:"pointer",boxShadow:"var(--shadow-md)"},children:f.jsx(Au,{size:18})}),f.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:j,style:{display:"none"}})]})}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"DISPLAY NAME"}),f.jsx("input",{type:"text",value:b.displayName,onChange:C=>w({...b,displayName:C.target.value}),style:{width:"100%",padding:"14px",borderRadius:"16px",background:"var(--secondary)",border:"none",fontWeight:"700",outline:"none"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"EMAIL ADDRESS"}),f.jsx("div",{style:{width:"100%",padding:"14px",borderRadius:"16px",background:"var(--secondary)",color:"var(--text-muted)",fontWeight:"700",opacity:.8},children:n?.email})]})]})]}),f.jsxs("div",{style:{background:"white",borderRadius:"32px",padding:"24px",boxShadow:"var(--shadow-md)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[f.jsx(Kd,{size:20,color:"var(--primary)"}),f.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"900",color:"var(--text-main)",margin:0},children:"Notifications"})]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[{id:"notificationsEnabled",label:"Push Notifications",desc:"Main alert switch"},{id:"notifyNewSpots",label:"New Spots",desc:"Alerts for nearby additions"},{id:"notifyReviewReplies",label:"Review Replies",desc:"When someone chats back"}].map(C=>f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{fontWeight:"800",fontSize:"0.95rem"},children:C.label}),f.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontWeight:"600"},children:C.desc})]}),f.jsx("input",{type:"checkbox",checked:b[C.id],onChange:A=>w({...b,[C.id]:A.target.checked}),style:{width:"22px",height:"22px",accentColor:"var(--primary)"}})]},C.id))})]}),f.jsx(_e.button,{whileTap:{scale:.95},onClick:k,disabled:l,style:{width:"100%",padding:"20px",borderRadius:"24px",background:"var(--primary)",color:"white",border:"none",fontWeight:"900",fontSize:"1rem",boxShadow:"var(--shadow-md)",opacity:l?.6:1},children:l?"Saving...":"Save Settings "})]})})]})},SS=({isOpen:n,onClose:t,onSelectLocation:r,initialCenter:a=[11.2588,75.7804]})=>{const[l,d]=R.useState(null),[h,g]=R.useState(!1),[y,_]=R.useState(!1),[b,w]=R.useState(""),[S,j]=R.useState(!1),k=R.useRef(null),C=R.useRef(null),A=R.useRef(null),z=R.useRef(null),D=R.useRef(null);R.useEffect(()=>{if(!n)return;(()=>{if(window.L){g(!0);return}if(document.getElementById("leaflet-script")){document.getElementById("leaflet-script").addEventListener("load",()=>g(!0));return}if(!document.getElementById("leaflet-css")){const oe=document.createElement("link");oe.id="leaflet-css",oe.rel="stylesheet",oe.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(oe)}const K=document.createElement("script");K.id="leaflet-script",K.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",K.async=!0,K.onload=()=>g(!0),document.body.appendChild(K)})()},[n]),R.useEffect(()=>{if(!(!n||!h||!k.current)){C.current&&(C.current.remove(),C.current=null);try{const V=window.L.map(k.current).setView(a,13);C.current=V;const K=window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}),oe=window.L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EBP, and the GIS User Community"});y?oe.addTo(V):K.addTo(V),z.current=K,D.current=oe;const ye=window.L.marker(a,{draggable:!0,icon:window.L.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})}).addTo(V);A.current=ye,ye.bindPopup("Drag me to select location!").openPopup(),ye.on("dragend",function(te){const W=te.target.getLatLng();d({lat:W.lat,lng:W.lng})}),V.on("click",function(te){ye.setLatLng(te.latlng),d({lat:te.latlng.lat,lng:te.latlng.lng})});const fe=window.L.Control.extend({options:{position:"bottomright"},onAdd:function(te){const W=window.L.DomUtil.create("button","leaflet-bar leaflet-control leaflet-control-custom");return W.innerHTML="",W.style.backgroundColor="white",W.style.width="30px",W.style.height="30px",W.style.cursor="pointer",W.style.border="2px solid rgba(0,0,0,0.2)",W.style.borderRadius="4px",W.title="Locate Me",W.onclick=function(xe){xe.preventDefault(),xe.stopPropagation(),te.locate({setView:!0,maxZoom:16})},W}});V.addControl(new fe),V.on("locationfound",function(te){ye.setLatLng(te.latlng),d({lat:te.latlng.lat,lng:te.latlng.lng})}),setTimeout(()=>{V.invalidateSize()},300),d({lat:a[0],lng:a[1]})}catch(V){console.error("Map initialization error:",V)}return()=>{C.current&&(C.current.remove(),C.current=null)}}},[n,h]);const P=()=>{if(!C.current||!z.current||!D.current)return;const V=C.current;y?(V.removeLayer(D.current),z.current.addTo(V)):(V.removeLayer(z.current),D.current.addTo(V)),_(!y)},Z=async()=>{if(!(!b.trim()||S)){j(!0);try{const K=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(b)}`)).json();if(K&&K.length>0){const{lat:oe,lon:ye}=K[0],fe=[parseFloat(oe),parseFloat(ye)];C.current&&A.current&&(C.current.setView(fe,16),A.current.setLatLng(fe),d({lat:parseFloat(oe),lng:parseFloat(ye)}))}else alert("Location not found.")}catch(V){console.error("Search error:",V)}finally{j(!1)}}},$=()=>{l&&r(l.lat,l.lng)};return n?f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backdropFilter:"blur(4px)"},children:f.jsxs("div",{style:{background:"white",borderRadius:"16px",width:"100%",maxWidth:"600px",height:"80vh",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[f.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",zIndex:10},children:[f.jsxs("div",{children:[f.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:"700",color:"#1a1a1a"},children:" Select Location"}),f.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.85rem",color:"#666"},children:"Drag pin or click map to pinpoint spot"})]}),f.jsx("button",{onClick:t,style:{background:"#f5f5f5",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#666",transition:"all 0.2s"},children:f.jsx(_a,{size:20})})]}),f.jsxs("div",{style:{padding:"0.8rem 1rem",background:"#fff",borderBottom:"1px solid #eee",display:"flex",gap:"8px"},children:[f.jsxs("div",{style:{flex:1,position:"relative"},children:[f.jsx("input",{type:"text",placeholder:"Search location (e.g. Kozhikode)",value:b,onChange:V=>w(V.target.value),onKeyDown:V=>V.key==="Enter"&&Z(),style:{width:"100%",padding:"10px 12px 10px 40px",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"0.9rem"}}),f.jsx(Dm,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}})]}),f.jsx("button",{onClick:Z,disabled:S||!b.trim(),style:{padding:"8px 16px",background:"var(--primary)",color:"white",border:"none",borderRadius:"10px",fontWeight:"600",fontSize:"0.85rem",cursor:"pointer",opacity:S?.6:1},children:S?"...":"Search"})]}),f.jsxs("div",{style:{flex:1,position:"relative"},children:[!h&&f.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#f8fafc",zIndex:20},children:f.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[f.jsx(uh,{className:"animate-spin",size:32,color:"var(--primary)"}),f.jsx("span",{style:{color:"#64748b",fontWeight:"500"},children:"Loading map resources..."})]})}),f.jsxs("button",{onClick:V=>{V.preventDefault(),P()},style:{position:"absolute",top:"12px",right:"12px",zIndex:1e3,background:y?"#10b981":"white",color:y?"white":"#1e293b",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontWeight:"600",fontSize:"0.85rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[f.jsx(r5,{size:16}),y?"Satellite":"Map View"]}),f.jsx("div",{ref:k,style:{width:"100%",height:"100%",background:"#e2e8f0",touchAction:"none"}})]}),f.jsxs("div",{style:{padding:"1rem",borderTop:"1px solid #eee",background:"white",zIndex:10},children:[f.jsx("div",{style:{display:"flex",gap:"12px"},children:f.jsx("div",{style:{flex:1},children:l?f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem",color:"#0f172a",background:"#f1f5f9",padding:"8px 12px",borderRadius:"8px",marginBottom:"12px"},children:[f.jsx(ti,{size:16,className:"text-primary"}),f.jsxs("span",{children:[l.lat.toFixed(4),", ",l.lng.toFixed(4)]})]}):f.jsx("div",{style:{height:"36px"}})})}),f.jsx("button",{onClick:$,disabled:!l,style:{width:"100%",padding:"14px",background:l?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"#e2e8f0",color:l?"white":"#94a3b8",border:"none",borderRadius:"12px",fontWeight:"700",fontSize:"1rem",cursor:l?"pointer":"not-allowed",transition:"all 0.2s",boxShadow:l?"0 4px 12px rgba(16, 185, 129, 0.2)":"none"},children:"Confirm Location"})]})]})}):null},uL=({lang:n})=>{const t=wt(),{user:r}=Rt(),a=R.useRef(null),[l,d]=R.useState(1),[h,g]=R.useState(!1),[y,_]=R.useState(!1),[b,w]=R.useState(!1),[S,j]=R.useState([11.2588,75.7804]),[k,C]=R.useState(null),[A,z]=R.useState({name:"",category:"",price:2,location_text:"",latitude:null,longitude:null,description:"",instagram:"",instagram_link:"",whatsapp:"",opening_time:"10:00",closing_time:"22:00",tags:[],images:[]}),D=["Cafe","Restaurant","Street Food","Bakery","Juice Shop","Tea Stall"],P=[{level:1,label:"50-150",description:"Budget Friendly"},{level:2,label:"150-300",description:"Moderate"},{level:3,label:"300-600",description:"Premium"},{level:4,label:"600+",description:"Fine Dining"}],Z=(te,W="success")=>{C({message:te,type:W})},$=()=>{if(l===1&&!A.name)return Z("Please enter a name","error");if(l===1&&!A.category)return Z("Please select a category","error");if(l===2&&!A.location_text)return Z("Please set a location","error");d(te=>te+1)},V=()=>d(te=>te-1),K=()=>{g(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(te=>{const W=te.coords.latitude,xe=te.coords.longitude;z({...A,latitude:W,longitude:xe,location_text:`${W.toFixed(4)}, ${xe.toFixed(4)}`}),j([W,xe]),g(!1),Z("Location updated!")},te=>{Z("Could not get location.","error"),g(!1)}):(Z("Geolocation not supported","error"),g(!1))},oe=(te,W)=>{z({...A,latitude:te,longitude:W,location_text:`${te.toFixed(4)}, ${W.toFixed(4)}`}),w(!1),Z("Location selected from map!")},ye=async te=>{const W=Array.from(te.target.files);if(W.length!==0){if(A.images.length+W.length>5)return Z("Max 5 images allowed","error");_(!0);try{for(const xe of W){const Le=`${Math.random()}.${xe.name.split(".").pop()}`;await ae.storage.from("food-images").upload(Le,xe);const{data:he}=ae.storage.from("food-images").getPublicUrl(Le);z(H=>({...H,images:[...H.images,he.publicUrl]}))}Z(`${W.length} images uploaded!`)}catch{Z("Error uploading images.","error")}finally{_(!1)}}},fe=async()=>{if(!r)return Z("Please login first","error");g(!0);try{const te={name:A.name,category:A.category,price_level:A.price,location_text:A.location_text,latitude:A.latitude,longitude:A.longitude,description:A.description,instagram_handle:A.instagram,whatsapp_number:A.whatsapp,opening_hours:{open:A.opening_time,close:A.closing_time},tags:A.tags,images:A.images,created_by:r.id},{error:W}=await ae.from("spots").insert([te]);if(W)throw W;Z("Spot shared! Redirecting...","success"),setTimeout(()=>t(`/${n}/home`),2e3)}catch(te){console.error("Error saving spot:",te),Z(`Error saving spot: ${te.message}`,"error"),g(!1)}};return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--secondary)",paddingBottom:"100px"},children:[k&&f.jsx(Ou,{message:k.message,type:k.type,onClose:()=>C(null)}),f.jsx(SS,{isOpen:b,onClose:()=>w(!1),onSelectLocation:oe,initialCenter:S}),f.jsxs("div",{style:{height:"140px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:[f.jsx("button",{onClick:()=>t(-1),style:{position:"absolute",left:"20px",background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white"},children:f.jsx(ku,{size:24})}),f.jsx("h1",{style:{color:"white",fontSize:"1.4rem",fontWeight:"900"},children:"Add New Spot"})]}),f.jsxs("div",{className:"container",style:{marginTop:"-40px",padding:"0 16px",maxWidth:"100%",boxSizing:"border-box"},children:[f.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",justifyContent:"center"},children:[1,2,3,4].map(te=>f.jsx("div",{style:{width:te===l?"32px":"10px",height:"10px",borderRadius:"5px",background:te<=l?"var(--primary)":"#ddd",transition:"all 0.3s"}},te))}),f.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"rgba(239, 42, 57, 0.05)",padding:"16px",borderRadius:"20px",marginBottom:"16px",border:"2px dashed var(--primary)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[f.jsx(BM,{size:20,color:"var(--primary)",style:{flexShrink:0,marginTop:"2px"}}),f.jsxs("div",{children:[f.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:"800",color:"var(--primary)",margin:"0 0 4px 0"},children:" Verification Required"}),f.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",margin:0,lineHeight:"1.5"},children:"Your spot will be added to Chai.in only after our admin team verifies it. This helps maintain quality and accuracy!"})]})]}),f.jsxs("a",{href:"https://www.youtube.com/watch?v=PLACEHOLDER_VIDEO_ID",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"8px",background:"#FF0000",color:"white",padding:"10px 16px",borderRadius:"12px",textDecoration:"none",fontWeight:"700",fontSize:"0.85rem",justifyContent:"center"},children:[f.jsx(iL,{size:18}),"Watch Tutorial: How to Add a Spot"]})]}),f.jsx(_e.div,{layout:!0,style:{background:"white",borderRadius:"32px",padding:"24px",boxShadow:"var(--shadow-md)"},children:f.jsxs(ju,{mode:"wait",children:[l===1&&f.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[f.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"The Basics "}),f.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"SPOT NAME"}),f.jsx("input",{type:"text",placeholder:"Enter spot name...",value:A.name,onChange:te=>z({...A,name:te.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px",boxSizing:"border-box"}}),f.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"12px",display:"block"},children:"CATEGORY"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px",marginBottom:"24px"},children:D.map(te=>f.jsx("button",{onClick:()=>z({...A,category:te}),style:{padding:"14px",borderRadius:"18px",border:"none",background:A.category===te?"var(--primary)":"var(--secondary)",color:A.category===te?"white":"var(--text-main)",fontWeight:"800",transition:"all 0.2s",fontSize:"0.9rem"},children:te},te))}),f.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"12px",display:"block"},children:"PRICE RANGE"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px",marginBottom:"24px"},children:P.map(te=>f.jsxs("button",{onClick:()=>z({...A,price:te.level}),style:{padding:"16px 12px",borderRadius:"18px",border:"none",background:A.price===te.level?"var(--primary)":"var(--secondary)",color:A.price===te.level?"white":"var(--text-main)",fontWeight:"800",transition:"all 0.2s",textAlign:"left",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"4px"},children:[f.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"900"},children:te.label}),f.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:te.description})]},te.level))}),f.jsx(uu,{onClick:$,style:{width:"100%",padding:"18px",borderRadius:"24px",justifyContent:"center"},children:"Continue"})]},"step1"),l===2&&f.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[f.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Location "}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"16px"},children:[f.jsxs("button",{onClick:K,style:{flex:1,padding:"14px",borderRadius:"18px",border:"none",background:"#ECFDF5",color:"#10B981",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[f.jsx(FM,{size:18})," GPS"]}),f.jsxs("button",{onClick:()=>w(!0),style:{flex:1,padding:"14px",borderRadius:"18px",border:"none",background:"#EFF6FF",color:"#3B82F6",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[f.jsx(ch,{size:18})," Map"]})]}),f.jsx("input",{type:"text",placeholder:"Location address...",value:A.location_text,onChange:te=>z({...A,location_text:te.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px"}}),f.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px"},children:[f.jsx("button",{onClick:V,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800"},children:"Back"}),f.jsx(uu,{onClick:$,style:{flex:2,padding:"18px",borderRadius:"24px",justifyContent:"center"},children:"Next"})]})]},"step2"),l===3&&f.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[f.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Socials & Details "}),f.jsx("textarea",{placeholder:"Add a juicy description...",value:A.description,onChange:te=>z({...A,description:te.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"16px",minHeight:"100px"}}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"16px"},children:[f.jsx("input",{placeholder:"WhatsApp Number",value:A.whatsapp,onChange:te=>z({...A,whatsapp:te.target.value}),style:{padding:"14px",borderRadius:"16px",background:"var(--secondary)",border:"none",fontWeight:"700"}}),f.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:[f.jsx("label",{style:{fontSize:"0.75rem",fontWeight:"800",color:"var(--text-muted)"},children:"Opening"}),f.jsx("input",{type:"time",value:A.opening_time,onChange:te=>z({...A,opening_time:te.target.value}),style:{padding:"12px",borderRadius:"14px",background:"var(--secondary)",border:"none",fontWeight:"700"}})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:[f.jsx("label",{style:{fontSize:"0.75rem",fontWeight:"800",color:"var(--text-muted)"},children:"Closing"}),f.jsx("input",{type:"time",value:A.closing_time,onChange:te=>z({...A,closing_time:te.target.value}),style:{padding:"12px",borderRadius:"14px",background:"var(--secondary)",border:"none",fontWeight:"700"}})]})]})]}),f.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"INSTAGRAM"}),f.jsx("input",{placeholder:"Insta @user or instagram.com/user",value:A.instagram,onChange:te=>z({...A,instagram:te.target.value}),style:{width:"100%",padding:"14px",borderRadius:"16px",background:"var(--secondary)",border:"none",fontWeight:"700",marginBottom:"16px"}}),f.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"TAGS"}),f.jsx("input",{type:"text",placeholder:"e.g. burger, spicy, budget-friendly",onChange:te=>z({...A,tags:te.target.value.split(",").map(W=>W.trim())}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px"}}),f.jsxs("div",{style:{display:"flex",gap:"12px"},children:[f.jsx("button",{onClick:V,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800"},children:"Back"}),f.jsx(uu,{onClick:$,style:{flex:2,padding:"18px",borderRadius:"24px",justifyContent:"center"},children:"Next"})]})]},"step3"),l===4&&f.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[f.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Photos "}),f.jsxs("div",{onClick:()=>a.current.click(),style:{border:"2px dashed #ddd",borderRadius:"24px",padding:"30px",textAlign:"center",background:"var(--secondary)",cursor:"pointer",marginBottom:"20px"},children:[f.jsx("input",{type:"file",multiple:!0,ref:a,onChange:ye,style:{display:"none"}}),y?f.jsx(uh,{className:"animate-spin",size:30,color:"var(--primary)"}):f.jsx(Au,{size:40,color:"var(--primary)"}),f.jsx("p",{style:{fontWeight:"800",marginTop:"10px",fontSize:"0.9rem"},children:"Upload up to 5 photos"})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginBottom:"20px"},children:A.images.map((te,W)=>f.jsx("div",{style:{width:"100%",paddingTop:"100%",position:"relative",borderRadius:"14px",overflow:"hidden"},children:f.jsx("img",{src:te,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},W))}),f.jsxs("div",{style:{display:"flex",gap:"12px"},children:[f.jsx("button",{onClick:V,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800"},children:"Back"}),f.jsx("button",{onClick:fe,disabled:h,style:{flex:2,padding:"18px",borderRadius:"24px",background:"var(--primary)",color:"white",border:"none",fontWeight:"900",fontSize:"1.1rem",boxShadow:"var(--shadow-md)"},children:h?"Submitting...":"Post Spot "})]})]},"step4")]})})]})]})};function TS(n,t){const r=R.useRef(t);R.useEffect(function(){t!==r.current&&n.attributionControl!=null&&(r.current!=null&&n.attributionControl.removeAttribution(r.current),t!=null&&n.attributionControl.addAttribution(t)),r.current=t},[n,t])}const cL=1;function dL(n){return Object.freeze({__version:cL,map:n})}function hL(n,t){return Object.freeze({...n,...t})}const Ug=R.createContext(null);function ES(){const n=R.use(Ug);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function fL(n){function t(r,a){const{instance:l,context:d}=n(r).current;R.useImperativeHandle(a,()=>l);const{children:h}=r;return h==null?null:ls.createElement(Ug,{value:d},h)}return R.forwardRef(t)}function pL(n){function t(r,a){const[l,d]=R.useState(!1),{instance:h}=n(r,d).current;R.useImperativeHandle(a,()=>h),R.useEffect(function(){l&&h.update()},[h,l,r.children]);const g=h._contentNode;return g?AE.createPortal(r.children,g):null}return R.forwardRef(t)}function mL(n){function t(r,a){const{instance:l}=n(r).current;return R.useImperativeHandle(a,()=>l),null}return R.forwardRef(t)}function jS(n,t){const r=R.useRef(void 0);R.useEffect(function(){return t!=null&&n.instance.on(t),r.current=t,function(){r.current!=null&&n.instance.off(r.current),r.current=null}},[n,t])}function Ig(n,t){const r=n.pane??t.pane;return r?{...n,pane:r}:n}function gL(n,t){return function(a,l){const d=ES(),h=n(Ig(a,d),d);return TS(d.map,a.attribution),jS(h.current,a.eventHandlers),t(h.current,d,a,l),h}}var ru={exports:{}};var yL=ru.exports,$x;function vL(){return $x||($x=1,(function(n,t){(function(r,a){a(t)})(yL,(function(r){var a="1.9.4";function l(s){var u,p,x,T;for(p=1,x=arguments.length;p<x;p++){T=arguments[p];for(u in T)s[u]=T[u]}return s}var d=Object.create||(function(){function s(){}return function(u){return s.prototype=u,new s}})();function h(s,u){var p=Array.prototype.slice;if(s.bind)return s.bind.apply(s,p.call(arguments,1));var x=p.call(arguments,2);return function(){return s.apply(u,x.length?x.concat(p.call(arguments)):arguments)}}var g=0;function y(s){return"_leaflet_id"in s||(s._leaflet_id=++g),s._leaflet_id}function _(s,u,p){var x,T,O,B;return B=function(){x=!1,T&&(O.apply(p,T),T=!1)},O=function(){x?T=arguments:(s.apply(p,arguments),setTimeout(B,u),x=!0)},O}function b(s,u,p){var x=u[1],T=u[0],O=x-T;return s===x&&p?s:((s-T)%O+O)%O+T}function w(){return!1}function S(s,u){if(u===!1)return s;var p=Math.pow(10,u===void 0?6:u);return Math.round(s*p)/p}function j(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return j(s).split(/\s+/)}function C(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?d(s.options):{});for(var p in u)s.options[p]=u[p];return s.options}function A(s,u,p){var x=[];for(var T in s)x.push(encodeURIComponent(p?T.toUpperCase():T)+"="+encodeURIComponent(s[T]));return(!u||u.indexOf("?")===-1?"?":"&")+x.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function D(s,u){return s.replace(z,function(p,x){var T=u[x];if(T===void 0)throw new Error("No value provided for variable "+p);return typeof T=="function"&&(T=T(u)),T})}var P=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function Z(s,u){for(var p=0;p<s.length;p++)if(s[p]===u)return p;return-1}var $="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var K=0;function oe(s){var u=+new Date,p=Math.max(0,16-(u-K));return K=u+p,window.setTimeout(s,p)}var ye=window.requestAnimationFrame||V("RequestAnimationFrame")||oe,fe=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function te(s,u,p){if(p&&ye===oe)s.call(u);else return ye.call(window,h(s,u))}function W(s){s&&fe.call(window,s)}var xe={__proto__:null,extend:l,create:d,bind:h,get lastId(){return g},stamp:y,throttle:_,wrapNum:b,falseFn:w,formatNum:S,trim:j,splitWords:k,setOptions:C,getParamString:A,template:D,isArray:P,indexOf:Z,emptyImageUrl:$,requestFn:ye,cancelFn:fe,requestAnimFrame:te,cancelAnimFrame:W};function Le(){}Le.extend=function(s){var u=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,x=d(p);x.constructor=u,u.prototype=x;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(u[T]=this[T]);return s.statics&&l(u,s.statics),s.includes&&(he(s.includes),l.apply(null,[x].concat(s.includes))),l(x,s),delete x.statics,delete x.includes,x.options&&(x.options=p.options?d(p.options):{},l(x.options,s.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,B=x._initHooks.length;O<B;O++)x._initHooks[O].call(this)}},u},Le.include=function(s){var u=this.prototype.options;return l(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},Le.mergeOptions=function(s){return l(this.prototype.options,s),this},Le.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),p=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function he(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=P(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(s,u,p){if(typeof s=="object")for(var x in s)this._on(x,s[x],u);else{s=k(s);for(var T=0,O=s.length;T<O;T++)this._on(s[T],u,p)}return this},off:function(s,u,p){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var x in s)this._off(x,s[x],u);else{s=k(s);for(var T=arguments.length===1,O=0,B=s.length;O<B;O++)T?this._off(s[O]):this._off(s[O],u,p)}return this},_on:function(s,u,p,x){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,p)===!1){p===this&&(p=void 0);var T={fn:u,ctx:p};x&&(T.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(T)}},_off:function(s,u,p){var x,T,O;if(this._events&&(x=this._events[s],!!x)){if(arguments.length===1){if(this._firingCount)for(T=0,O=x.length;T<O;T++)x[T].fn=w;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var B=this._listens(s,u,p);if(B!==!1){var F=x[B];this._firingCount&&(F.fn=w,this._events[s]=x=x.slice()),x.splice(B,1)}}},fire:function(s,u,p){if(!this.listens(s,p))return this;var x=l({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var T=this._events[s];if(T){this._firingCount=this._firingCount+1||1;for(var O=0,B=T.length;O<B;O++){var F=T[O],J=F.fn;F.once&&this.off(s,J,F.ctx),J.call(F.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(s,u,p,x){typeof s!="string"&&console.warn('"string" type argument expected');var T=u;typeof u!="function"&&(x=!!u,T=void 0,p=void 0);var O=this._events&&this._events[s];if(O&&O.length&&this._listens(s,T,p)!==!1)return!0;if(x){for(var B in this._eventParents)if(this._eventParents[B].listens(s,u,p,x))return!0}return!1},_listens:function(s,u,p){if(!this._events)return!1;var x=this._events[s]||[];if(!u)return!!x.length;p===this&&(p=void 0);for(var T=0,O=x.length;T<O;T++)if(x[T].fn===u&&x[T].ctx===p)return T;return!1},once:function(s,u,p){if(typeof s=="object")for(var x in s)this._on(x,s[x],u,!0);else{s=k(s);for(var T=0,O=s.length;T<O;T++)this._on(s[T],u,p,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[y(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[y(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,l({layer:s.target,propagatedFrom:s.target},s),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var re=Le.extend(H);function ie(s,u,p){this.x=p?Math.round(s):s,this.y=p?Math.round(u):u}var Se=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(s){return this.clone()._add(ge(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ge(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new ie(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new ie(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Se(this.x),this.y=Se(this.y),this},distanceTo:function(s){s=ge(s);var u=s.x-this.x,p=s.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(s){return s=ge(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ge(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function ge(s,u,p){return s instanceof ie?s:P(s)?new ie(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new ie(s.x,s.y):new ie(s,u,p)}function N(s,u){if(s)for(var p=u?[s,u]:s,x=0,T=p.length;x<T;x++)this.extend(p[x])}N.prototype={extend:function(s){var u,p;if(!s)return this;if(s instanceof ie||typeof s[0]=="number"||"x"in s)u=p=ge(s);else if(s=ne(s),u=s.min,p=s.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(s){return ge((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ge(this.min.x,this.max.y)},getTopRight:function(){return ge(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,p;return typeof s[0]=="number"||s instanceof ie?s=ge(s):s=ne(s),s instanceof N?(u=s.min,p=s.max):u=p=s,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(s){s=ne(s);var u=this.min,p=this.max,x=s.min,T=s.max,O=T.x>=u.x&&x.x<=p.x,B=T.y>=u.y&&x.y<=p.y;return O&&B},overlaps:function(s){s=ne(s);var u=this.min,p=this.max,x=s.min,T=s.max,O=T.x>u.x&&x.x<p.x,B=T.y>u.y&&x.y<p.y;return O&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,p=this.max,x=Math.abs(u.x-p.x)*s,T=Math.abs(u.y-p.y)*s;return ne(ge(u.x-x,u.y-T),ge(p.x+x,p.y+T))},equals:function(s){return s?(s=ne(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ne(s,u){return!s||s instanceof N?s:new N(s,u)}function me(s,u){if(s)for(var p=u?[s,u]:s,x=0,T=p.length;x<T;x++)this.extend(p[x])}me.prototype={extend:function(s){var u=this._southWest,p=this._northEast,x,T;if(s instanceof de)x=s,T=s;else if(s instanceof me){if(x=s._southWest,T=s._northEast,!x||!T)return this}else return s?this.extend(pe(s)||G(s)):this;return!u&&!p?(this._southWest=new de(x.lat,x.lng),this._northEast=new de(T.lat,T.lng)):(u.lat=Math.min(x.lat,u.lat),u.lng=Math.min(x.lng,u.lng),p.lat=Math.max(T.lat,p.lat),p.lng=Math.max(T.lng,p.lng)),this},pad:function(s){var u=this._southWest,p=this._northEast,x=Math.abs(u.lat-p.lat)*s,T=Math.abs(u.lng-p.lng)*s;return new me(new de(u.lat-x,u.lng-T),new de(p.lat+x,p.lng+T))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof de||"lat"in s?s=pe(s):s=G(s);var u=this._southWest,p=this._northEast,x,T;return s instanceof me?(x=s.getSouthWest(),T=s.getNorthEast()):x=T=s,x.lat>=u.lat&&T.lat<=p.lat&&x.lng>=u.lng&&T.lng<=p.lng},intersects:function(s){s=G(s);var u=this._southWest,p=this._northEast,x=s.getSouthWest(),T=s.getNorthEast(),O=T.lat>=u.lat&&x.lat<=p.lat,B=T.lng>=u.lng&&x.lng<=p.lng;return O&&B},overlaps:function(s){s=G(s);var u=this._southWest,p=this._northEast,x=s.getSouthWest(),T=s.getNorthEast(),O=T.lat>u.lat&&x.lat<p.lat,B=T.lng>u.lng&&x.lng<p.lng;return O&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=G(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function G(s,u){return s instanceof me?s:new me(s,u)}function de(s,u,p){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,p!==void 0&&(this.alt=+p)}de.prototype={equals:function(s,u){if(!s)return!1;s=pe(s);var p=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return p<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+S(this.lat,s)+", "+S(this.lng,s)+")"},distanceTo:function(s){return Ge.distance(this,pe(s))},wrap:function(){return Ge.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,p=u/Math.cos(Math.PI/180*this.lat);return G([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function pe(s,u,p){return s instanceof de?s:P(s)&&typeof s[0]!="object"?s.length===3?new de(s[0],s[1],s[2]):s.length===2?new de(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new de(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new de(s,u,p)}var ke={latLngToPoint:function(s,u){var p=this.projection.project(s),x=this.scale(u);return this.transformation._transform(p,x)},pointToLatLng:function(s,u){var p=this.scale(u),x=this.transformation.untransform(s,p);return this.projection.unproject(x)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(s),x=this.transformation.transform(u.min,p),T=this.transformation.transform(u.max,p);return new N(x,T)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?b(s.lng,this.wrapLng,!0):s.lng,p=this.wrapLat?b(s.lat,this.wrapLat,!0):s.lat,x=s.alt;return new de(p,u,x)},wrapLatLngBounds:function(s){var u=s.getCenter(),p=this.wrapLatLng(u),x=u.lat-p.lat,T=u.lng-p.lng;if(x===0&&T===0)return s;var O=s.getSouthWest(),B=s.getNorthEast(),F=new de(O.lat-x,O.lng-T),J=new de(B.lat-x,B.lng-T);return new me(F,J)}},Ge=l({},ke,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var p=Math.PI/180,x=s.lat*p,T=u.lat*p,O=Math.sin((u.lat-s.lat)*p/2),B=Math.sin((u.lng-s.lng)*p/2),F=O*O+Math.cos(x)*Math.cos(T)*B*B,J=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F));return this.R*J}}),Ke=6378137,lt={R:Ke,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,s.lat),-p),T=Math.sin(x*u);return new ie(this.R*s.lng*u,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(s){var u=180/Math.PI;return new de((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:(function(){var s=Ke*Math.PI;return new N([-s,-s],[s,s])})()};function Gt(s,u,p,x){if(P(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=p,this._d=x}Gt.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new ie((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function Ii(s,u,p,x){return new Gt(s,u,p,x)}var ba=l({},Ge,{code:"EPSG:3857",projection:lt,transformation:(function(){var s=.5/(Math.PI*lt.R);return Ii(s,.5,-s,.5)})()}),Vi=l({},ba,{code:"EPSG:900913"});function wa(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Sa(s,u){var p="",x,T,O,B,F,J;for(x=0,O=s.length;x<O;x++){for(F=s[x],T=0,B=F.length;T<B;T++)J=F[T],p+=(T?"L":"M")+J.x+" "+J.y;p+=u?je.svg?"z":"x":""}return p||"M0 0"}var Io=document.documentElement.style,ps="ActiveXObject"in window,Vo=ps&&!document.addEventListener,Ta="msLaunchUri"in navigator&&!("documentMode"in document),ms=mn("webkit"),Lu=mn("android"),zu=mn("android 2")||mn("android 3"),un=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ph=Lu&&mn("Google")&&un<537&&!("AudioNode"in window),Ea=!!window.opera,Ho=!Ta&&mn("chrome"),gs=mn("gecko")&&!ms&&!Ea&&!ps,mh=!Ho&&mn("safari"),qo=mn("phantom"),Pu="OTransition"in Io,gh=navigator.platform.indexOf("Win")===0,xr=ps&&"transition"in Io,Kt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zu,si="MozPerspective"in Io,cn=!window.L_DISABLE_3D&&(xr||Kt||si)&&!Pu&&!qo,ys=typeof orientation<"u"||mn("mobile"),yh=ys&&ms,vh=ys&&Kt,vs=!window.PointerEvent&&window.MSPointerEvent,_s=!!(window.PointerEvent||vs),xs="ontouchstart"in window||!!window.TouchEvent,Hi=!window.L_NO_TOUCH&&(xs||_s),ja=ys&&Ea,bs=ys&&gs,_h=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Du=(function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",w,u),window.removeEventListener("testPassiveEventSupport",w,u)}catch{}return s})(),Wo=(function(){return!!document.createElement("canvas").getContext})(),qi=!!(document.createElementNS&&wa("svg").createSVGRect),xh=!!qi&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Bu=!qi&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),Nu=navigator.platform.indexOf("Mac")===0,Uu=navigator.platform.indexOf("Linux")===0;function mn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var je={ie:ps,ielt9:Vo,edge:Ta,webkit:ms,android:Lu,android23:zu,androidStock:ph,opera:Ea,chrome:Ho,gecko:gs,safari:mh,phantom:qo,opera12:Pu,win:gh,ie3d:xr,webkit3d:Kt,gecko3d:si,any3d:cn,mobile:ys,mobileWebkit:yh,mobileWebkit3d:vh,msPointer:vs,pointer:_s,touch:Hi,touchNative:xs,mobileOpera:ja,mobileGecko:bs,retina:_h,passiveEvents:Du,canvas:Wo,svg:qi,vml:Bu,inlineSvg:xh,mac:Nu,linux:Uu},Fo=je.msPointer?"MSPointerDown":"pointerdown",$o=je.msPointer?"MSPointerMove":"pointermove",ai=je.msPointer?"MSPointerUp":"pointerup",Ot=je.msPointer?"MSPointerCancel":"pointercancel",Wt={touchstart:Fo,touchmove:$o,touchend:ai,touchcancel:Ot},Wi={touchstart:wr,touchmove:wi,touchend:wi,touchcancel:wi},bi={},Iu=!1;function bh(s,u,p){return u==="touchstart"&&br(),Wi[u]?(p=Wi[u].bind(this,p),s.addEventListener(Wt[u],p,!1),p):(console.warn("wrong event specified:",u),w)}function Vu(s,u,p){if(!Wt[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(Wt[u],p,!1)}function ws(s){bi[s.pointerId]=s}function Zo(s){bi[s.pointerId]&&(bi[s.pointerId]=s)}function Fi(s){delete bi[s.pointerId]}function br(){Iu||(document.addEventListener(Fo,ws,!0),document.addEventListener($o,Zo,!0),document.addEventListener(ai,Fi,!0),document.addEventListener(Ot,Fi,!0),Iu=!0)}function wi(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in bi)u.touches.push(bi[p]);u.changedTouches=[u],s(u)}}function wr(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&St(u),wi(s,u)}function Mt(s){var u={},p,x;for(x in s)p=s[x],u[x]=p&&p.bind?p.bind(s):p;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var Hu=200;function qu(s,u){s.addEventListener("dblclick",u);var p=0,x;function T(O){if(O.detail!==1){x=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var B=ks(O);if(!(B.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!B.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var F=Date.now();F-p<=Hu?(x++,x===2&&u(Mt(O))):x=1,p=F}}}return s.addEventListener("click",T),{dblclick:u,simDblclick:T}}function $i(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var Si=Es(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ss=Es(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Go=Ss==="webkitTransition"||Ss==="OTransition"?Ss+"End":"transitionend";function Ko(s){return typeof s=="string"?document.getElementById(s):s}function Ts(s,u){var p=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(s,null);p=x?x[u]:null}return p==="auto"?null:p}function Ve(s,u,p){var x=document.createElement(s);return x.className=u||"",p&&p.appendChild(x),x}function rt(s){var u=s.parentNode;u&&u.removeChild(s)}function gn(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function It(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function Zi(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function Yo(s,u){if(s.classList!==void 0)return s.classList.contains(u);var p=Ca(s);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function De(s,u){if(s.classList!==void 0)for(var p=k(u),x=0,T=p.length;x<T;x++)s.classList.add(p[x]);else if(!Yo(s,u)){var O=Ca(s);Sr(s,(O?O+" ":"")+u)}}function pt(s,u){s.classList!==void 0?s.classList.remove(u):Sr(s,j((" "+Ca(s)+" ").replace(" "+u+" "," ")))}function Sr(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function Ca(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function ht(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&Xo(s,u)}function Xo(s,u){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=s.filters.item(x)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):s.style.filter+=" progid:"+x+"(opacity="+u+")"}function Es(s){for(var u=document.documentElement.style,p=0;p<s.length;p++)if(s[p]in u)return s[p];return!1}function oi(s,u,p){var x=u||new ie(0,0);s.style[Si]=(je.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function ut(s,u){s._leaflet_pos=u,je.any3d?oi(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function Ti(s){return s._leaflet_pos||new ie(0,0)}var Tr,Vn,Jo;if("onselectstart"in document)Tr=function(){ze(window,"selectstart",St)},Vn=function(){tt(window,"selectstart",St)};else{var Er=Es(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Tr=function(){if(Er){var s=document.documentElement.style;Jo=s[Er],s[Er]="none"}},Vn=function(){Er&&(document.documentElement.style[Er]=Jo,Jo=void 0)}}function Aa(){ze(window,"dragstart",St)}function js(){tt(window,"dragstart",St)}var ka,Qo;function jr(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(yn(),ka=s,Qo=s.style.outlineStyle,s.style.outlineStyle="none",ze(window,"keydown",yn))}function yn(){ka&&(ka.style.outlineStyle=Qo,ka=void 0,Qo=void 0,tt(window,"keydown",yn))}function Ra(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Cs(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var Cr={__proto__:null,TRANSFORM:Si,TRANSITION:Ss,TRANSITION_END:Go,get:Ko,getStyle:Ts,create:Ve,remove:rt,empty:gn,toFront:It,toBack:Zi,hasClass:Yo,addClass:De,removeClass:pt,setClass:Sr,getClass:Ca,setOpacity:ht,testProp:Es,setTransform:oi,setPosition:ut,getPosition:Ti,get disableTextSelection(){return Tr},get enableTextSelection(){return Vn},disableImageDrag:Aa,enableImageDrag:js,preventOutline:jr,restoreOutline:yn,getSizedParentNode:Ra,getScale:Cs};function ze(s,u,p,x){if(u&&typeof u=="object")for(var T in u)On(s,T,u[T],p);else{u=k(u);for(var O=0,B=u.length;O<B;O++)On(s,u[O],p,x)}return this}var Rn="_leaflet_events";function tt(s,u,p,x){if(arguments.length===1)el(s),delete s[Rn];else if(u&&typeof u=="object")for(var T in u)As(s,T,u[T],p);else if(u=k(u),arguments.length===2)el(s,function(F){return Z(u,F)!==-1});else for(var O=0,B=u.length;O<B;O++)As(s,u[O],p,x);return this}function el(s,u){for(var p in s[Rn]){var x=p.split(/\d/)[0];(!u||u(x))&&As(s,x,null,null,p)}}var Gi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function On(s,u,p,x){var T=u+y(p)+(x?"_"+y(x):"");if(s[Rn]&&s[Rn][T])return this;var O=function(F){return p.call(x||s,F||window.event)},B=O;!je.touchNative&&je.pointer&&u.indexOf("touch")===0?O=bh(s,u,O):je.touch&&u==="dblclick"?O=qu(s,O):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(Gi[u]||u,O,je.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(O=function(F){F=F||window.event,li(s,F)&&B(F)},s.addEventListener(Gi[u],O,!1)):s.addEventListener(u,B,!1):s.attachEvent("on"+u,O),s[Rn]=s[Rn]||{},s[Rn][T]=O}function As(s,u,p,x,T){T=T||u+y(p)+(x?"_"+y(x):"");var O=s[Rn]&&s[Rn][T];if(!O)return this;!je.touchNative&&je.pointer&&u.indexOf("touch")===0?Vu(s,u,O):je.touch&&u==="dblclick"?$i(s,O):"removeEventListener"in s?s.removeEventListener(Gi[u]||u,O,!1):s.detachEvent("on"+u,O),s[Rn][T]=null}function Mn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Hn(s){return On(s,"wheel",Mn),this}function Ki(s){return ze(s,"mousedown touchstart dblclick contextmenu",Mn),s._leaflet_disable_click=!0,this}function St(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Ei(s){return St(s),Mn(s),this}function ks(s){if(s.composedPath)return s.composedPath();for(var u=[],p=s.target;p;)u.push(p),p=p.parentNode;return u}function Rs(s,u){if(!u)return new ie(s.clientX,s.clientY);var p=Cs(u),x=p.boundingClientRect;return new ie((s.clientX-x.left)/p.x-u.clientLeft,(s.clientY-x.top)/p.y-u.clientTop)}var Wu=je.linux&&je.chrome?window.devicePixelRatio:je.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Yt(s){return je.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Wu:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function li(s,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==s;)p=p.parentNode}catch{return!1}return p!==s}var Oa={__proto__:null,on:ze,off:tt,stopPropagation:Mn,disableScrollPropagation:Hn,disableClickPropagation:Ki,preventDefault:St,stop:Ei,getPropagationPath:ks,getMousePosition:Rs,getWheelDelta:Yt,isExternalTarget:li,addListener:ze,removeListener:tt},Ar=re.extend({run:function(s,u,p,x){this.stop(),this._el=s,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=Ti(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var p=this._startPos.add(this._offset.multiplyBy(s));u&&p._round(),ut(this._el,p),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Fe=re.extend({options:{crs:ba,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=C(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(pe(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ss&&je.any3d&&!je.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,Go,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(pe(s),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=l({animate:p.animate},p.zoom),p.pan=l({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,p.zoom):this._tryAnimatedPan(s,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,p){var x=this.getZoomScale(u),T=this.getSize().divideBy(2),O=s instanceof ie?s:this.latLngToContainerPoint(s),B=O.subtract(T).multiplyBy(1-1/x),F=this.containerPointToLatLng(T.add(B));return this.setView(F,u,{zoom:p})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():G(s);var p=ge(u.paddingTopLeft||u.padding||[0,0]),x=ge(u.paddingBottomRight||u.padding||[0,0]),T=this.getBoundsZoom(s,!1,p.add(x));if(T=typeof u.maxZoom=="number"?Math.min(u.maxZoom,T):T,T===1/0)return{center:s.getCenter(),zoom:T};var O=x.subtract(p).divideBy(2),B=this.project(s.getSouthWest(),T),F=this.project(s.getNorthEast(),T),J=this.unproject(B.add(F).divideBy(2).add(O),T);return{center:J,zoom:T}},fitBounds:function(s,u){if(s=G(s),!s.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(s,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=ge(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ar,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){De(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,p){if(p=p||{},p.animate===!1||!je.any3d)return this.setView(s,u,p);this._stop();var x=this.project(this.getCenter()),T=this.project(s),O=this.getSize(),B=this._zoom;s=pe(s),u=u===void 0?B:u;var F=Math.max(O.x,O.y),J=F*this.getZoomScale(B,u),ue=T.distanceTo(x)||1,ve=1.42,Ae=ve*ve;function Ue(_t){var hi=_t?-1:1,Qi=_t?J:F,ml=J*J-F*F+hi*Ae*Ae*ue*ue,$s=2*Qi*Ae*ue,Zs=ml/$s,zi=Math.sqrt(Zs*Zs+1)-Zs,fi=zi<1e-9?-18:Math.log(zi);return fi}function Vt(_t){return(Math.exp(_t)-Math.exp(-_t))/2}function Tt(_t){return(Math.exp(_t)+Math.exp(-_t))/2}function hn(_t){return Vt(_t)/Tt(_t)}var Ye=Ue(0);function Xe(_t){return F*(Tt(Ye)/Tt(Ye+ve*_t))}function He(_t){return F*(Tt(Ye)*hn(Ye+ve*_t)-Vt(Ye))/Ae}function Mi(_t){return 1-Math.pow(1-_t,1.5)}var bn=Date.now(),Fa=(Ue(1)-Ye)/ve,Li=p.duration?1e3*p.duration:1e3*Fa*.8;function pl(){var _t=(Date.now()-bn)/Li,hi=Mi(_t)*Fa;_t<=1?(this._flyToFrame=te(pl,this),this._move(this.unproject(x.add(T.subtract(x).multiplyBy(He(hi)/ue)),B),this.getScaleZoom(F/Xe(hi),B),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),pl.call(this),this},flyToBounds:function(s,u){var p=this._getBoundsCenterZoom(s,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(s){return s=G(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,G(s));return p.equals(x)||this.panTo(x,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var p=ge(u.paddingTopLeft||u.padding||[0,0]),x=ge(u.paddingBottomRight||u.padding||[0,0]),T=this.project(this.getCenter()),O=this.project(s),B=this.getPixelBounds(),F=ne([B.min.add(p),B.max.subtract(x)]),J=F.getSize();if(!F.contains(O)){this._enforcingBounds=!0;var ue=O.subtract(F.getCenter()),ve=F.extend(O).getSize().subtract(J);T.x+=ue.x<0?-ve.x:ve.x,T.y+=ue.y<0?-ve.y:ve.y,this.panTo(this.unproject(T),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=l({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=u.divideBy(2).round(),T=p.divideBy(2).round(),O=x.subtract(T);return!O.x&&!O.y?this:(s.animate&&s.pan?this.panBy(O):(s.pan&&this._rawPanBy(O),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=l({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=h(this._handleGeolocationResponse,this),p=h(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,s):navigator.geolocation.getCurrentPosition(u,p,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,p=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,p=s.coords.longitude,x=new de(u,p),T=x.toBounds(s.coords.accuracy*2),O=this._locateOptions;if(O.setView){var B=this.getBoundsZoom(T);this.setView(x,O.maxZoom?Math.min(B,O.maxZoom):B)}var F={latlng:x,bounds:T,timestamp:s.timestamp};for(var J in s.coords)typeof s.coords[J]=="number"&&(F[J]=s.coords[J]);this.fire("locationfound",F)}},addHandler:function(s,u){if(!u)return this;var p=this[s]=new u(this);return this._handlers.push(p),this.options[s]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),rt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)rt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var p="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),x=Ve("div",p,u||this._mapPane);return s&&(this._panes[s]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),p=this.unproject(s.getTopRight());return new me(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,p){s=G(s),p=ge(p||[0,0]);var x=this.getZoom()||0,T=this.getMinZoom(),O=this.getMaxZoom(),B=s.getNorthWest(),F=s.getSouthEast(),J=this.getSize().subtract(p),ue=ne(this.project(F,x),this.project(B,x)).getSize(),ve=je.any3d?this.options.zoomSnap:1,Ae=J.x/ue.x,Ue=J.y/ue.y,Vt=u?Math.max(Ae,Ue):Math.min(Ae,Ue);return x=this.getScaleZoom(Vt,x),ve&&(x=Math.round(x/(ve/100))*(ve/100),x=u?Math.ceil(x/ve)*ve:Math.floor(x/ve)*ve),Math.max(T,Math.min(O,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var p=this._getTopLeftPoint(s,u);return new N(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(s)/p.scale(u)},getScaleZoom:function(s,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var x=p.zoom(s*p.scale(u));return isNaN(x)?1/0:x},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(pe(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ge(s),u)},layerPointToLatLng:function(s){var u=ge(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(pe(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(pe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(G(s))},distance:function(s,u){return this.options.crs.distance(pe(s),pe(u))},containerPointToLayerPoint:function(s){return ge(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ge(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(ge(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(s)))},mouseEventToContainerPoint:function(s){return Rs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=Ko(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(u,"scroll",this._onScroll,this),this._containerId=y(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&je.any3d,De(s,"leaflet-container"+(je.touch?" leaflet-touch":"")+(je.retina?" leaflet-retina":"")+(je.ielt9?" leaflet-oldie":"")+(je.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Ts(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ut(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(De(s.markerPane,"leaflet-zoom-hide"),De(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,p){ut(this._mapPane,new ie(0,0));var x=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var T=this._zoom!==u;this._moveStart(T,p)._move(s,u)._moveEnd(T),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,p,x){u===void 0&&(u=this._zoom);var T=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),x?p&&p.pinch&&this.fire("zoom",p):((T||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ut(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[y(this._container)]=this;var u=s?tt:ze;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),je.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var p=[],x,T=u==="mouseout"||u==="mouseover",O=s.target||s.srcElement,B=!1;O;){if(x=this._targets[y(O)],x&&(u==="click"||u==="preclick")&&this._draggableMoved(x)){B=!0;break}if(x&&x.listens(u,!0)&&(T&&!li(O,s)||(p.push(x),T))||O===this._container)break;O=O.parentNode}return!p.length&&!B&&!T&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var p=s.type;p==="mousedown"&&jr(u),this._fireDOMEvent(s,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,p){if(s.type==="click"){var x=l({},s);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var T=this._findEventTargets(s,u);if(p){for(var O=[],B=0;B<p.length;B++)p[B].listens(u,!0)&&O.push(p[B]);T=O.concat(T)}if(T.length){u==="contextmenu"&&St(s);var F=T[0],J={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var ue=F.getLatLng&&(!F._radius||F._radius<=10);J.containerPoint=ue?this.latLngToContainerPoint(F.getLatLng()):this.mouseEventToContainerPoint(s),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=ue?F.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(B=0;B<T.length;B++)if(T[B].fire(u,J,!0),J.originalEvent._stopped||T[B].options.bubblingMouseEvents===!1&&Z(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return Ti(this._mapPane)||new ie(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var p=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var p=this.getSize()._divideBy(2);return this.project(s,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,p){var x=this._getNewPixelOrigin(p,u);return this.project(s,u)._subtract(x)},_latLngBoundsToNewLayerBounds:function(s,u,p){var x=this._getNewPixelOrigin(p,u);return ne([this.project(s.getSouthWest(),u)._subtract(x),this.project(s.getNorthWest(),u)._subtract(x),this.project(s.getSouthEast(),u)._subtract(x),this.project(s.getNorthEast(),u)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,p){if(!p)return s;var x=this.project(s,u),T=this.getSize().divideBy(2),O=new N(x.subtract(T),x.add(T)),B=this._getBoundsOffset(O,p,u);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?s:this.unproject(x.add(B),u)},_limitOffset:function(s,u){if(!u)return s;var p=this.getPixelBounds(),x=new N(p.min.add(s),p.max.add(s));return s.add(this._getBoundsOffset(x,u))},_getBoundsOffset:function(s,u,p){var x=ne(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),T=x.min.subtract(s.min),O=x.max.subtract(s.max),B=this._rebound(T.x,-O.x),F=this._rebound(T.y,-O.y);return new ie(B,F)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),p=this.getMaxZoom(),x=je.any3d?this.options.zoomSnap:1;return x&&(s=Math.round(s/x)*x),Math.max(u,Math.min(p,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var p=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var s=this._proxy=Ve("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var p=Si,x=this._proxy.style[p];oi(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){rt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();oi(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(u),T=this._getCenterOffset(s)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(T)?!1:(te(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,De(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function tl(s,u){return new Fe(s,u)}var dn=Le.extend({options:{position:"topright"},initialize:function(s){C(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),p=this.getPosition(),x=s._controlCorners[p];return De(u,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(u,x.firstChild):x.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(rt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ui=function(s){return new dn(s)};Fe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",p=this._controlContainer=Ve("div",u+"control-container",this._container);function x(T,O){var B=u+T+" "+u+O;s[T+O]=Ve("div",B,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)rt(this._controlCorners[s]);rt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Os=dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,p,x){return p<x?-1:x<p?1:0}},initialize:function(s,u,p){C(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in s)this._addLayer(s[x],x);for(x in u)this._addLayer(u[x],x,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return dn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(y(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){De(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(De(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=Ve("div",s),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Ki(u),Hn(u);var x=this._section=Ve("section",s+"-list");p&&(this._map.on("click",this.collapse,this),ze(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Ve("a",s+"-toggle",u);T.href="#",T.title="Layers",T.setAttribute("role","button"),ze(T,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){St(O),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Ve("div",s+"-base",x),this._separator=Ve("div",s+"-separator",x),this._overlaysList=Ve("div",s+"-overlays",x),u.appendChild(x)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&y(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,p){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(h(function(x,T){return this.options.sortFunction(x.layer,T.layer,x.name,T.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gn(this._baseLayersList),gn(this._overlaysList),this._layerControlInputs=[];var s,u,p,x,T=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),u=u||x.overlay,s=s||!x.overlay,T+=x.overlay?0:1;return this.options.hideSingleBase&&(s=s&&T>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(y(s.target)),p=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(s,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(s){var u=document.createElement("label"),p=this._map.hasLayer(s.layer),x;s.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+y(this),p),this._layerControlInputs.push(x),x.layerId=y(s.layer),ze(x,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+s.name;var O=document.createElement("span");u.appendChild(O),O.appendChild(x),O.appendChild(T);var B=s.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,p,x=[],T=[];this._handlingClick=!0;for(var O=s.length-1;O>=0;O--)u=s[O],p=this._getLayer(u.layerId).layer,u.checked?x.push(p):u.checked||T.push(p);for(O=0;O<T.length;O++)this._map.hasLayer(T[O])&&this._map.removeLayer(T[O]);for(O=0;O<x.length;O++)this._map.hasLayer(x[O])||this._map.addLayer(x[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,p,x=this._map.getZoom(),T=s.length-1;T>=0;T--)u=s[T],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ze(s,"click",St),this.expand();var u=this;setTimeout(function(){tt(s,"click",St),u._preventClick=!1})}}),Fu=function(s,u,p){return new Os(s,u,p)},nl=dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",p=Ve("div",u+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,p,x,T){var O=Ve("a",p,x);return O.innerHTML=s,O.href="#",O.title=u,O.setAttribute("role","button"),O.setAttribute("aria-label",u),Ki(O),ze(O,"click",Ei),ze(O,"click",T,this),ze(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";pt(this._zoomInButton,u),pt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(De(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(De(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fe.mergeOptions({zoomControl:!0}),Fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new nl,this.addControl(this.zoomControl))});var wh=function(s){return new nl(s)},$u=dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",p=Ve("div",u),x=this.options;return this._addScales(x,u+"-line",p),s.on(x.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),p},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,p){s.metric&&(this._mScale=Ve("div",u,p)),s.imperial&&(this._iScale=Ve("div",u,p))},_update:function(){var s=this._map,u=s.getSize().y/2,p=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/s)},_updateImperial:function(s){var u=s*3.2808399,p,x,T;u>5280?(p=u/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(T=this._getRoundNum(u),this._updateScale(this._iScale,T+" ft",T/u))},_updateScale:function(s,u,p){s.style.width=Math.round(this.options.maxWidth*p)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),p=s/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),il=function(s){return new $u(s)},Sh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',rl=dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(je.inlineSvg?Sh+" ":"")+"Leaflet</a>"},initialize:function(s){C(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ve("div","leaflet-control-attribution"),Ki(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),s.length&&p.push(s.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Fe.mergeOptions({attributionControl:!0}),Fe.addInitHook(function(){this.options.attributionControl&&new rl().addTo(this)});var Th=function(s){return new rl(s)};dn.Layers=Os,dn.Zoom=nl,dn.Scale=$u,dn.Attribution=rl,ui.layers=Fu,ui.zoom=wh,ui.scale=il,ui.attribution=Th;var qn=Le.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});qn.addTo=function(s,u){return s.addHandler(u,this),this};var Eh={Events:H},sl=je.touch?"touchstart mousedown":"mousedown",ji=re.extend({options:{clickTolerance:3},initialize:function(s,u,p,x){C(this,x),this._element=s,this._dragStartTarget=u||s,this._preventOutline=p},enable:function(){this._enabled||(ze(this._dragStartTarget,sl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ji._dragging===this&&this.finishDrag(!0),tt(this._dragStartTarget,sl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Yo(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ji._dragging===this&&this.finishDrag();return}if(!(ji._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ji._dragging=this,this._preventOutline&&jr(this._element),Aa(),Tr(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,p=Ra(this._element);this._startPoint=new ie(u.clientX,u.clientY),this._startPos=Ti(this._element),this._parentScale=Cs(p);var x=s.type==="mousedown";ze(document,x?"mousemove":"touchmove",this._onMove,this),ze(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,p=new ie(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,St(s),this._moved||(this.fire("dragstart"),this._moved=!0,De(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),De(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ut(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){pt(document.body,"leaflet-dragging"),this._lastTarget&&(pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),tt(document,"mousemove touchmove",this._onMove,this),tt(document,"mouseup touchend touchcancel",this._onUp,this),js(),Vn();var u=this._moved&&this._moving;this._moving=!1,ji._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Zu(s,u,p){var x,T=[1,4,2,8],O,B,F,J,ue,ve,Ae,Ue;for(O=0,ve=s.length;O<ve;O++)s[O]._code=Yi(s[O],u);for(F=0;F<4;F++){for(Ae=T[F],x=[],O=0,ve=s.length,B=ve-1;O<ve;B=O++)J=s[O],ue=s[B],J._code&Ae?ue._code&Ae||(Ue=Ma(ue,J,Ae,u,p),Ue._code=Yi(Ue,u),x.push(Ue)):(ue._code&Ae&&(Ue=Ma(ue,J,Ae,u,p),Ue._code=Yi(Ue,u),x.push(Ue)),x.push(J));s=x}return s}function Gu(s,u){var p,x,T,O,B,F,J,ue,ve;if(!s||s.length===0)throw new Error("latlngs not passed");vn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ae=pe([0,0]),Ue=G(s),Vt=Ue.getNorthWest().distanceTo(Ue.getSouthWest())*Ue.getNorthEast().distanceTo(Ue.getNorthWest());Vt<1700&&(Ae=al(s));var Tt=s.length,hn=[];for(p=0;p<Tt;p++){var Ye=pe(s[p]);hn.push(u.project(pe([Ye.lat-Ae.lat,Ye.lng-Ae.lng])))}for(F=J=ue=0,p=0,x=Tt-1;p<Tt;x=p++)T=hn[p],O=hn[x],B=T.y*O.x-O.y*T.x,J+=(T.x+O.x)*B,ue+=(T.y+O.y)*B,F+=B*3;F===0?ve=hn[0]:ve=[J/F,ue/F];var Xe=u.unproject(ge(ve));return pe([Xe.lat+Ae.lat,Xe.lng+Ae.lng])}function al(s){for(var u=0,p=0,x=0,T=0;T<s.length;T++){var O=pe(s[T]);u+=O.lat,p+=O.lng,x++}return pe([u/x,p/x])}var ol={__proto__:null,clipPolygon:Zu,polygonCenter:Gu,centroid:al};function Ku(s,u){if(!u||!s.length)return s.slice();var p=u*u;return s=Ch(s,p),s=Xu(s,p),s}function Yu(s,u,p){return Math.sqrt(Ms(s,u,p,!0))}function jh(s,u,p){return Ms(s,u,p)}function Xu(s,u){var p=s.length,x=typeof Uint8Array<"u"?Uint8Array:Array,T=new x(p);T[0]=T[p-1]=1,ll(s,T,u,0,p-1);var O,B=[];for(O=0;O<p;O++)T[O]&&B.push(s[O]);return B}function ll(s,u,p,x,T){var O=0,B,F,J;for(F=x+1;F<=T-1;F++)J=Ms(s[F],s[x],s[T],!0),J>O&&(B=F,O=J);O>p&&(u[B]=1,ll(s,u,p,x,B),ll(s,u,p,B,T))}function Ch(s,u){for(var p=[s[0]],x=1,T=0,O=s.length;x<O;x++)Ah(s[x],s[T])>u&&(p.push(s[x]),T=x);return T<O-1&&p.push(s[O-1]),p}var Ju;function Qu(s,u,p,x,T){var O=x?Ju:Yi(s,p),B=Yi(u,p),F,J,ue;for(Ju=B;;){if(!(O|B))return[s,u];if(O&B)return!1;F=O||B,J=Ma(s,u,F,p,T),ue=Yi(J,p),F===O?(s=J,O=ue):(u=J,B=ue)}}function Ma(s,u,p,x,T){var O=u.x-s.x,B=u.y-s.y,F=x.min,J=x.max,ue,ve;return p&8?(ue=s.x+O*(J.y-s.y)/B,ve=J.y):p&4?(ue=s.x+O*(F.y-s.y)/B,ve=F.y):p&2?(ue=J.x,ve=s.y+B*(J.x-s.x)/O):p&1&&(ue=F.x,ve=s.y+B*(F.x-s.x)/O),new ie(ue,ve,T)}function Yi(s,u){var p=0;return s.x<u.min.x?p|=1:s.x>u.max.x&&(p|=2),s.y<u.min.y?p|=4:s.y>u.max.y&&(p|=8),p}function Ah(s,u){var p=u.x-s.x,x=u.y-s.y;return p*p+x*x}function Ms(s,u,p,x){var T=u.x,O=u.y,B=p.x-T,F=p.y-O,J=B*B+F*F,ue;return J>0&&(ue=((s.x-T)*B+(s.y-O)*F)/J,ue>1?(T=p.x,O=p.y):ue>0&&(T+=B*ue,O+=F*ue)),B=s.x-T,F=s.y-O,x?B*B+F*F:new ie(T,O)}function vn(s){return!P(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function La(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vn(s)}function kr(s,u){var p,x,T,O,B,F,J,ue;if(!s||s.length===0)throw new Error("latlngs not passed");vn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ve=pe([0,0]),Ae=G(s),Ue=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());Ue<1700&&(ve=al(s));var Vt=s.length,Tt=[];for(p=0;p<Vt;p++){var hn=pe(s[p]);Tt.push(u.project(pe([hn.lat-ve.lat,hn.lng-ve.lng])))}for(p=0,x=0;p<Vt-1;p++)x+=Tt[p].distanceTo(Tt[p+1])/2;if(x===0)ue=Tt[0];else for(p=0,O=0;p<Vt-1;p++)if(B=Tt[p],F=Tt[p+1],T=B.distanceTo(F),O+=T,O>x){J=(O-x)/T,ue=[F.x-J*(F.x-B.x),F.y-J*(F.y-B.y)];break}var Ye=u.unproject(ge(ue));return pe([Ye.lat+ve.lat,Ye.lng+ve.lng])}var kh={__proto__:null,simplify:Ku,pointToSegmentDistance:Yu,closestPointOnSegment:jh,clipSegment:Qu,_getEdgeIntersection:Ma,_getBitCode:Yi,_sqClosestPointOnSegment:Ms,isFlat:vn,_flat:La,polylineCenter:kr},za={project:function(s){return new ie(s.lng,s.lat)},unproject:function(s){return new de(s.y,s.x)},bounds:new N([-180,-90],[180,90])},Pa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new N([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,p=this.R,x=s.lat*u,T=this.R_MINOR/p,O=Math.sqrt(1-T*T),B=O*Math.sin(x),F=Math.tan(Math.PI/4-x/2)/Math.pow((1-B)/(1+B),O/2);return x=-p*Math.log(Math.max(F,1e-10)),new ie(s.lng*u*p,x)},unproject:function(s){for(var u=180/Math.PI,p=this.R,x=this.R_MINOR/p,T=Math.sqrt(1-x*x),O=Math.exp(-s.y/p),B=Math.PI/2-2*Math.atan(O),F=0,J=.1,ue;F<15&&Math.abs(J)>1e-7;F++)ue=T*Math.sin(B),ue=Math.pow((1-ue)/(1+ue),T/2),J=Math.PI/2-2*Math.atan(O*ue)-B,B+=J;return new de(B*u,s.x*u/p)}},ec={__proto__:null,LonLat:za,Mercator:Pa,SphericalMercator:lt},tc=l({},Ge,{code:"EPSG:3395",projection:Pa,transformation:(function(){var s=.5/(Math.PI*Pa.R);return Ii(s,.5,-s,.5)})()}),ul=l({},Ge,{code:"EPSG:4326",projection:za,transformation:Ii(1/180,1,-1/180,.5)}),Rr=l({},ke,{projection:za,transformation:Ii(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var p=u.lng-s.lng,x=u.lat-s.lat;return Math.sqrt(p*p+x*x)},infinite:!0});ke.Earth=Ge,ke.EPSG3395=tc,ke.EPSG3857=ba,ke.EPSG900913=Vi,ke.EPSG4326=ul,ke.Simple=Rr;var Ln=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[y(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[y(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Fe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=y(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=y(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return y(s)in this._layers},eachLayer:function(s,u){for(var p in this._layers)s.call(u,this._layers[p]);return this},_addLayers:function(s){s=s?P(s)?s:[s]:[];for(var u=0,p=s.length;u<p;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[y(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=y(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var T=this._zoomBoundLayers[x].options;s=T.minZoom===void 0?s:Math.min(s,T.minZoom),u=T.maxZoom===void 0?u:Math.max(u,T.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Or=Ln.extend({initialize:function(s,u){C(this,u),this._layers={};var p,x;if(s)for(p=0,x=s.length;p<x;p++)this.addLayer(s[p])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[s]&&x[s].apply(x,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var p in this._layers)s.call(u,this._layers[p]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return y(s)}}),Rh=function(s,u){return new Or(s,u)},Wn=Or.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Or.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Or.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new me;for(var u in this._layers){var p=this._layers[u];s.extend(p.getBounds?p.getBounds():p.getLatLng())}return s}}),nc=function(s,u){return new Wn(s,u)},Fn=Le.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){C(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var p=this._getIconUrl(s);if(!p){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(x,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(s,u){var p=this.options,x=p[u+"Size"];typeof x=="number"&&(x=[x,x]);var T=ge(x),O=ge(u==="shadow"&&p.shadowAnchor||p.iconAnchor||T&&T.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(p.className||""),O&&(s.style.marginLeft=-O.x+"px",s.style.marginTop=-O.y+"px"),T&&(s.style.width=T.x+"px",s.style.height=T.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return je.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Ls(s){return new Fn(s)}var zs=Fn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof zs.imagePath!="string"&&(zs.imagePath=this._detectIconPath()),(this.options.imagePath||zs.imagePath)+Fn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(p,x,T){var O=x.exec(p);return O&&O[T]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ve("div","leaflet-default-icon-path",document.body),u=Ts(s,"background-image")||Ts(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Ps=qn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ji(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),De(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,p=u._map,x=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,O=Ti(u._icon),B=p.getPixelBounds(),F=p.getPixelOrigin(),J=ne(B.min._subtract(F).add(T),B.max._subtract(F).subtract(T));if(!J.contains(O)){var ue=ge((Math.max(J.max.x,O.x)-J.max.x)/(B.max.x-J.max.x)-(Math.min(J.min.x,O.x)-J.min.x)/(B.min.x-J.min.x),(Math.max(J.max.y,O.y)-J.max.y)/(B.max.y-J.max.y)-(Math.min(J.min.y,O.y)-J.min.y)/(B.min.y-J.min.y)).multiplyBy(x);p.panBy(ue,{animate:!1}),this._draggable._newPos._add(ue),this._draggable._startPos._add(ue),ut(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=te(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,p=u._shadow,x=Ti(u._icon),T=u._map.layerPointToLatLng(x);p&&ut(p,x),u._latlng=T,s.latlng=T,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ds=Ln.extend({options:{icon:new zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){C(this,u),this._latlng=pe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=pe(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=s.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,s.title&&(p.title=s.title),p.tagName==="IMG"&&(p.alt=s.alt||"")),De(p,u),s.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(p,"focus",this._panOnFocus,this);var T=s.icon.createShadow(this._shadow),O=!1;T!==this._shadow&&(this._removeShadow(),O=!0),T&&(De(T,u),T.alt=""),this._shadow=T,s.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&O&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&tt(this._icon,"focus",this._panOnFocus,this),rt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&rt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ut(this._icon,s),this._shadow&&ut(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(De(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ps)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ps(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&ht(this._icon,s),this._shadow&&ht(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,p=u.iconSize?ge(u.iconSize):ge(0,0),x=u.iconAnchor?ge(u.iconAnchor):ge(0,0);s.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ic(s,u){return new Ds(s,u)}var $n=Ln.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return C(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Mr=$n.extend({options:{fill:!0,radius:10},initialize:function(s,u){C(this,u),this._latlng=pe(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=pe(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return $n.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,p=this._clickTolerance(),x=[s+p,u+p];this._pxBounds=new N(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function rc(s,u){return new Mr(s,u)}var Da=Mr.extend({initialize:function(s,u,p){if(typeof u=="number"&&(u=l({},p,{radius:u})),C(this,u),this._latlng=pe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:$n.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===Ge.distance){var T=Math.PI/180,O=this._mRadius/Ge.R/T,B=p.project([u+O,s]),F=p.project([u-O,s]),J=B.add(F).divideBy(2),ue=p.unproject(J).lat,ve=Math.acos((Math.cos(O*T)-Math.sin(u*T)*Math.sin(ue*T))/(Math.cos(u*T)*Math.cos(ue*T)))/T;(isNaN(ve)||ve===0)&&(ve=O/Math.cos(Math.PI/180*u)),this._point=J.subtract(p.getPixelOrigin()),this._radius=isNaN(ve)?0:J.x-p.project([ue,s-ve]).x,this._radiusY=J.y-B.y}else{var Ae=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Ae).x}this._updateBounds()}});function sc(s,u,p){return new Da(s,u,p)}var ci=$n.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){C(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,p=null,x=Ms,T,O,B=0,F=this._parts.length;B<F;B++)for(var J=this._parts[B],ue=1,ve=J.length;ue<ve;ue++){T=J[ue-1],O=J[ue];var Ae=x(s,T,O,!0);Ae<u&&(u=Ae,p=x(s,T,O))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=pe(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new me,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return vn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],p=vn(s),x=0,T=s.length;x<T;x++)p?(u[x]=pe(s[x]),this._bounds.extend(u[x])):u[x]=this._convertLatLngs(s[x]);return u},_project:function(){var s=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new ie(s,s);this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,p){var x=s[0]instanceof de,T=s.length,O,B;if(x){for(B=[],O=0;O<T;O++)B[O]=this._map.latLngToLayerPoint(s[O]),p.extend(B[O]);u.push(B)}else for(O=0;O<T;O++)this._projectLatlngs(s[O],u,p)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,x,T,O,B,F,J;for(p=0,T=0,O=this._rings.length;p<O;p++)for(J=this._rings[p],x=0,B=J.length;x<B-1;x++)F=Qu(J[x],J[x+1],s,x,!0),F&&(u[T]=u[T]||[],u[T].push(F[0]),(F[1]!==J[x+1]||x===B-2)&&(u[T].push(F[1]),T++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,p=0,x=s.length;p<x;p++)s[p]=Ku(s[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var p,x,T,O,B,F,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(p=0,O=this._parts.length;p<O;p++)for(F=this._parts[p],x=0,B=F.length,T=B-1;x<B;T=x++)if(!(!u&&x===0)&&Yu(s,F[T],F[x])<=J)return!0;return!1}});function Oh(s,u){return new ci(s,u)}ci._flat=La;var Lr=ci.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=ci.prototype._convertLatLngs.call(this,s),p=u.length;return p>=2&&u[0]instanceof de&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(s){ci.prototype._setLatLngs.call(this,s),vn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,p=new ie(u,u);if(s=new N(s.min.subtract(p),s.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,T=this._rings.length,O;x<T;x++)O=Zu(this._rings[x],s,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,p,x,T,O,B,F,J,ue;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(O=0,J=this._parts.length;O<J;O++)for(p=this._parts[O],B=0,ue=p.length,F=ue-1;B<ue;F=B++)x=p[B],T=p[F],x.y>s.y!=T.y>s.y&&s.x<(T.x-x.x)*(s.y-x.y)/(T.y-x.y)+x.x&&(u=!u);return u||ci.prototype._containsPoint.call(this,s,!0)}});function Mh(s,u){return new Lr(s,u)}var di=Wn.extend({initialize:function(s,u){C(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=P(s)?s:s.features,p,x,T;if(u){for(p=0,x=u.length;p<x;p++)T=u[p],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var O=this.options;if(O.filter&&!O.filter(s))return this;var B=Ft(s,O);return B?(B.feature=Ua(s),B.defaultOptions=B.options,this.resetStyle(B),O.onEachFeature&&O.onEachFeature(s,B),this.addLayer(B)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=l({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function Ft(s,u){var p=s.type==="Feature"?s.geometry:s,x=p?p.coordinates:null,T=[],O=u&&u.pointToLayer,B=u&&u.coordsToLatLng||Ba,F,J,ue,ve;if(!x&&!p)return null;switch(p.type){case"Point":return F=B(x),zr(O,s,F,u);case"MultiPoint":for(ue=0,ve=x.length;ue<ve;ue++)F=B(x[ue]),T.push(zr(O,s,F,u));return new Wn(T);case"LineString":case"MultiLineString":return J=Bs(x,p.type==="LineString"?0:1,B),new ci(J,u);case"Polygon":case"MultiPolygon":return J=Bs(x,p.type==="Polygon"?1:2,B),new Lr(J,u);case"GeometryCollection":for(ue=0,ve=p.geometries.length;ue<ve;ue++){var Ae=Ft({geometry:p.geometries[ue],type:"Feature",properties:s.properties},u);Ae&&T.push(Ae)}return new Wn(T);case"FeatureCollection":for(ue=0,ve=p.features.length;ue<ve;ue++){var Ue=Ft(p.features[ue],u);Ue&&T.push(Ue)}return new Wn(T);default:throw new Error("Invalid GeoJSON object.")}}function zr(s,u,p,x){return s?s(u,p):new Ds(p,x&&x.markersInheritOptions&&x)}function Ba(s){return new de(s[1],s[0],s[2])}function Bs(s,u,p){for(var x=[],T=0,O=s.length,B;T<O;T++)B=u?Bs(s[T],u-1,p):(p||Ba)(s[T]),x.push(B);return x}function Na(s,u){return s=pe(s),s.alt!==void 0?[S(s.lng,u),S(s.lat,u),S(s.alt,u)]:[S(s.lng,u),S(s.lat,u)]}function Ns(s,u,p,x){for(var T=[],O=0,B=s.length;O<B;O++)T.push(u?Ns(s[O],vn(s[O])?0:u-1,p,x):Na(s[O],x));return!u&&p&&T.length>0&&T.push(T[0].slice()),T}function Ci(s,u){return s.feature?l({},s.feature,{geometry:u}):Ua(u)}function Ua(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Ai={toGeoJSON:function(s){return Ci(this,{type:"Point",coordinates:Na(this.getLatLng(),s)})}};Ds.include(Ai),Da.include(Ai),Mr.include(Ai),ci.include({toGeoJSON:function(s){var u=!vn(this._latlngs),p=Ns(this._latlngs,u?1:0,!1,s);return Ci(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),Lr.include({toGeoJSON:function(s){var u=!vn(this._latlngs),p=u&&!vn(this._latlngs[0]),x=Ns(this._latlngs,p?2:u?1:0,!0,s);return u||(x=[x]),Ci(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),Or.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(s).geometry.coordinates)}),Ci(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var p=u==="GeometryCollection",x=[];return this.eachLayer(function(T){if(T.toGeoJSON){var O=T.toGeoJSON(s);if(p)x.push(O.geometry);else{var B=Ua(O);B.type==="FeatureCollection"?x.push.apply(x,B.features):x.push(B)}}}),p?Ci(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function Ia(s,u){return new di(s,u)}var Us=Ia,Pr=Ln.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,p){this._url=s,this._bounds=G(u),C(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(De(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){rt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&It(this._image),this},bringToBack:function(){return this._map&&Zi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=G(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:Ve("img");if(De(u,"leaflet-image-layer"),this._zoomAnimated&&De(u,"leaflet-zoom-animated"),this.options.className&&De(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onload=h(this.fire,this,"load"),u.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;oi(this._image,p,u)},_reset:function(){var s=this._image,u=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();ut(s,u.min),s.style.width=p.x+"px",s.style.height=p.y+"px"},_updateOpacity:function(){ht(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),ac=function(s,u,p){return new Pr(s,u,p)},ki=Pr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:Ve("video");if(De(u,"leaflet-image-layer"),this._zoomAnimated&&De(u,"leaflet-zoom-animated"),this.options.className&&De(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onloadeddata=h(this.fire,this,"load"),s){for(var p=u.getElementsByTagName("source"),x=[],T=0;T<p.length;T++)x.push(p[T].src);this._url=p.length>0?x:[u.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var B=Ve("source");B.src=this._url[O],u.appendChild(B)}}});function Dr(s,u,p){return new ki(s,u,p)}var Va=Pr.extend({_initImage:function(){var s=this._image=this._url;De(s,"leaflet-image-layer"),this._zoomAnimated&&De(s,"leaflet-zoom-animated"),this.options.className&&De(s,this.options.className),s.onselectstart=w,s.onmousemove=w}});function oc(s,u,p){return new Va(s,u,p)}var $t=Ln.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof de||P(s))?(this._latlng=pe(s),C(this,u)):(C(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&ht(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&ht(this._container,1),this.bringToFront(),this.options.interactive&&(De(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(ht(this._container,0),this._removeTimeout=setTimeout(h(rt,void 0,this._container),200)):rt(this._container),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=pe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&It(this._container),this},bringToBack:function(){return this._map&&Zi(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof Wn){u=null;var p=this._source._layers;for(var x in p)if(p[x]._map){u=p[x];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=ge(this.options.offset),p=this._getAnchor();this._zoomAnimated?ut(this._container,s.add(p)):u=u.add(s).add(p);var x=this._containerBottom=-u.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=x+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Fe.include({_initOverlay:function(s,u,p,x){var T=u;return T instanceof s||(T=new s(x).setContent(u)),p&&T.setLatLng(p),T}}),Ln.include({_initOverlay:function(s,u,p,x){var T=p;return T instanceof s?(C(T,x),T._source=this):(T=u&&!x?u:new s(x,this),T.setContent(p)),T}});var Is=$t.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,$t.prototype.openOn.call(this,s)},onAdd:function(s){$t.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof $n||this._source.on("preclick",Mn))},onRemove:function(s){$t.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof $n||this._source.off("preclick",Mn))},getEvents:function(){var s=$t.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=Ve("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Ve("div",s+"-content-wrapper",u);if(this._contentNode=Ve("div",s+"-content",p),Ki(u),Hn(this._contentNode),ze(u,"contextmenu",Mn),this._tipContainer=Ve("div",s+"-tip-container",u),this._tip=Ve("div",s+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=Ve("a",s+"-close-button",u);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',ze(x,"click",function(T){St(T),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var p=s.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var x=s.offsetHeight,T=this.options.maxHeight,O="leaflet-popup-scrolled";T&&x>T?(u.height=T+"px",De(s,O)):pt(s,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),p=this._getAnchor();ut(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt(Ts(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,x=this._containerWidth,T=new ie(this._containerLeft,-p-this._containerBottom);T._add(Ti(this._container));var O=s.layerPointToContainerPoint(T),B=ge(this.options.autoPanPadding),F=ge(this.options.autoPanPaddingTopLeft||B),J=ge(this.options.autoPanPaddingBottomRight||B),ue=s.getSize(),ve=0,Ae=0;O.x+x+J.x>ue.x&&(ve=O.x+x-ue.x+J.x),O.x-ve-F.x<0&&(ve=O.x-F.x),O.y+p+J.y>ue.y&&(Ae=O.y+p-ue.y+J.y),O.y-Ae-F.y<0&&(Ae=O.y-F.y),(ve||Ae)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ve,Ae]))}},_getAnchor:function(){return ge(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lc=function(s,u){return new Is(s,u)};Fe.mergeOptions({closePopupOnClick:!0}),Fe.include({openPopup:function(s,u,p){return this._initOverlay(Is,s,u,p).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ln.include({bindPopup:function(s,u){return this._popup=this._initOverlay(Is,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Wn||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Ei(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof $n)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Vs=$t.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){$t.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){$t.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=$t.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ve("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,p,x=this._map,T=this._container,O=x.latLngToContainerPoint(x.getCenter()),B=x.layerPointToContainerPoint(s),F=this.options.direction,J=T.offsetWidth,ue=T.offsetHeight,ve=ge(this.options.offset),Ae=this._getAnchor();F==="top"?(u=J/2,p=ue):F==="bottom"?(u=J/2,p=0):F==="center"?(u=J/2,p=ue/2):F==="right"?(u=0,p=ue/2):F==="left"?(u=J,p=ue/2):B.x<O.x?(F="right",u=0,p=ue/2):(F="left",u=J+(ve.x+Ae.x)*2,p=ue/2),s=s.subtract(ge(u,p,!0)).add(ve).add(Ae),pt(T,"leaflet-tooltip-right"),pt(T,"leaflet-tooltip-left"),pt(T,"leaflet-tooltip-top"),pt(T,"leaflet-tooltip-bottom"),De(T,"leaflet-tooltip-"+F),ut(T,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&ht(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return ge(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Lh=function(s,u){return new Vs(s,u)};Fe.include({openTooltip:function(s,u,p){return this._initOverlay(Vs,s,u,p).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ln.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Vs,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Wn||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(ze(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ze(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,p,x;this._tooltip.options.sticky&&s.originalEvent&&(p=this._map.mouseEventToContainerPoint(s.originalEvent),x=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(u)}});var uc=Fn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),p=this.options;if(p.html instanceof Element?(gn(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=ge(p.bgPos);u.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function zh(s){return new uc(s)}Fn.Default=zs;var Br=Ln.extend({options:{tileSize:256,opacity:1,updateWhenIdle:je.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){C(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),rt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(It(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Zi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof ie?s:new ie(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,p=-s(-1/0,1/0),x=0,T=u.length,O;x<T;x++)O=u[x].style.zIndex,u[x]!==this._container&&O&&(p=s(p,+O));isFinite(p)&&(this.options.zIndex=p+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!je.ielt9){ht(this._container,this.options.opacity);var s=+new Date,u=!1,p=!1;for(var x in this._tiles){var T=this._tiles[x];if(!(!T.current||!T.loaded)){var O=Math.min(1,(s-T.loaded)/200);ht(T.el,O),O<1?u=!0:(T.active?p=!0:this._onOpaqueTile(T),T.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(W(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Ve("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===s?(this._levels[p].el.style.zIndex=u-Math.abs(s-p),this._onUpdateLevel(p)):(rt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[s],T=this._map;return x||(x=this._levels[s]={},x.el=Ve("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=u,x.origin=T.project(T.unproject(T.getPixelOrigin()),s).round(),x.zoom=s,this._setZoomTransform(x,T.getCenter(),T.getZoom()),w(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var s,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var x=u.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)rt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,p,x){var T=Math.floor(s/2),O=Math.floor(u/2),B=p-1,F=new ie(+T,+O);F.z=+B;var J=this._tileCoordsToKey(F),ue=this._tiles[J];return ue&&ue.active?(ue.retain=!0,!0):(ue&&ue.loaded&&(ue.retain=!0),B>x?this._retainParent(T,O,B,x):!1)},_retainChildren:function(s,u,p,x){for(var T=2*s;T<2*s+2;T++)for(var O=2*u;O<2*u+2;O++){var B=new ie(T,O);B.z=p+1;var F=this._tileCoordsToKey(B),J=this._tiles[F];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);p+1<x&&this._retainChildren(T,O,p+1,x)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,p,x){var T=Math.round(u);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var O=this.options.updateWhenZooming&&T!==this._tileZoom;(!x||O)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(s),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],s,u)},_setZoomTransform:function(s,u,p){var x=this._map.getZoomScale(p,s.zoom),T=s.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(u,p)).round();je.any3d?oi(s.el,T,x):ut(s.el,T)},_resetGrid:function(){var s=this._map,u=s.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],x).x/p.x),Math.ceil(s.project([0,u.wrapLng[1]],x).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],x).y/p.x),Math.ceil(s.project([u.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),x=u.getZoomScale(p,this._tileZoom),T=u.project(s,this._tileZoom).floor(),O=u.getSize().divideBy(x*2);return new N(T.subtract(O),T.add(O))},_update:function(s){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(s),T=this._pxBoundsToTileRange(x),O=T.getCenter(),B=[],F=this.options.keepBuffer,J=new N(T.getBottomLeft().subtract([F,-F]),T.getTopRight().add([F,-F]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ue in this._tiles){var ve=this._tiles[ue].coords;(ve.z!==this._tileZoom||!J.contains(new ie(ve.x,ve.y)))&&(this._tiles[ue].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(s,p);return}for(var Ae=T.min.y;Ae<=T.max.y;Ae++)for(var Ue=T.min.x;Ue<=T.max.x;Ue++){var Vt=new ie(Ue,Ae);if(Vt.z=this._tileZoom,!!this._isValidTile(Vt)){var Tt=this._tiles[this._tileCoordsToKey(Vt)];Tt?Tt.current=!0:B.push(Vt)}}if(B.sort(function(Ye,Xe){return Ye.distanceTo(O)-Xe.distanceTo(O)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hn=document.createDocumentFragment();for(Ue=0;Ue<B.length;Ue++)this._addTile(B[Ue],hn);this._level.el.appendChild(hn)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(s.x<p.min.x||s.x>p.max.x)||!u.wrapLat&&(s.y<p.min.y||s.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(s);return G(this.options.bounds).overlaps(x)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,p=this.getTileSize(),x=s.scaleBy(p),T=x.add(p),O=u.unproject(x,s.z),B=u.unproject(T,s.z);return[O,B]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),p=new me(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),p=new ie(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(s){var u=this._tiles[s];u&&(rt(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){De(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=w,s.onmousemove=w,je.ielt9&&this.options.opacity<1&&ht(s,this.options.opacity)},_addTile:function(s,u){var p=this._getTilePos(s),x=this._tileCoordsToKey(s),T=this.createTile(this._wrapCoords(s),h(this._tileReady,this,s));this._initTile(T),this.createTile.length<2&&te(h(this._tileReady,this,s,null,T)),ut(T,p),this._tiles[x]={el:T,coords:s,current:!0},u.appendChild(T),this.fire("tileloadstart",{tile:T,coords:s})},_tileReady:function(s,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:s});var x=this._tileCoordsToKey(s);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(ht(p.el,0),W(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(De(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),je.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new ie(this._wrapX?b(s.x,this._wrapX):s.x,this._wrapY?b(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new N(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function cc(s){return new Br(s)}var Ri=Br.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=C(this,u),u.detectRetina&&je.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var p=document.createElement("img");return ze(p,"load",h(this._tileOnLoad,this,u,p)),ze(p,"error",h(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(s),p},getTileUrl:function(s){var u={r:je.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=p),u["-y"]=p}return D(this._url,l(u,this.options))},_tileOnLoad:function(s,u){je.ielt9?setTimeout(h(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,p){var x=this.options.errorTileUrl;x&&u.getAttribute("src")!==x&&(u.src=x),s(p,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(s=u-s),s+x},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=w,u.onerror=w,!u.complete)){u.src=$;var p=this._tiles[s].coords;rt(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",$),Br.prototype._removeTile.call(this,s)},_tileReady:function(s,u,p){if(!(!this._map||p&&p.getAttribute("src")===$))return Br.prototype._tileReady.call(this,s,u,p)}});function _n(s,u){return new Ri(s,u)}var Hs=Ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var p=l({},this.defaultWmsParams);for(var x in u)x in this.options||(p[x]=u[x]);u=C(this,u);var T=u.detectRetina&&je.retina?2:1,O=this.getTileSize();p.width=O.x*T,p.height=O.y*T,this.wmsParams=p},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Ri.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),p=this._crs,x=ne(p.project(u[0]),p.project(u[1])),T=x.min,O=x.max,B=(this._wmsVersion>=1.3&&this._crs===ul?[T.y,T.x,O.y,O.x]:[T.x,T.y,O.x,O.y]).join(","),F=Ri.prototype.getTileUrl.call(this,s);return F+A(this.wmsParams,F,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(s,u){return l(this.wmsParams,s),u||this.redraw(),this}});function xn(s,u){return new Hs(s,u)}Ri.WMS=Hs,_n.wms=xn;var rn=Ln.extend({options:{padding:.1},initialize:function(s){C(this,s),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),De(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var p=this._map.getZoomScale(u,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,u),O=x.multiplyBy(-p).add(T).subtract(this._map._getNewPixelOrigin(s,u));je.any3d?oi(this._container,O,p):ut(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new N(p,p.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ha=rn.extend({options:{tolerance:0},getEvents:function(){var s=rn.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){rn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ze(s,"mousemove",this._onMouseMove,this),ze(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,rt(this._container),tt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){rn.prototype._update.call(this);var s=this._bounds,u=this._container,p=s.getSize(),x=je.retina?2:1;ut(u,s.min),u.width=x*p.x,u.height=x*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",je.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){rn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[y(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,p=u.next,x=u.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete s._order,delete this._layers[y(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),p=[],x,T;for(T=0;T<u.length;T++){if(x=Number(u[T]),isNaN(x))return;p.push(x)}s.options._dashArray=p}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)s=x.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var p,x,T,O,B=s._parts,F=B.length,J=this._ctx;if(F){for(J.beginPath(),p=0;p<F;p++){for(x=0,T=B[p].length;x<T;x++)O=B[p][x],J[x?"lineTo":"moveTo"](O.x,O.y);u&&J.closePath()}this._fillStroke(J,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,p=this._ctx,x=Math.max(Math.round(s._radius),1),T=(Math.max(Math.round(s._radiusY),1)||x)/x;T!==1&&(p.save(),p.scale(1,T)),p.beginPath(),p.arc(u.x,u.y/T,x,0,Math.PI*2,!1),T!==1&&p.restore(),this._fillStroke(p,s)}},_fillStroke:function(s,u){var p=u.options;p.fill&&(s.globalAlpha=p.fillOpacity,s.fillStyle=p.fillColor||p.color,s.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=p.opacity,s.lineWidth=p.weight,s.strokeStyle=p.color,s.lineCap=p.lineCap,s.lineJoin=p.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),p,x,T=this._drawFirst;T;T=T.next)p=T.layer,p.options.interactive&&p._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(pt(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var p,x,T=this._drawFirst;T;T=T.next)p=T.layer,p.options.interactive&&p._containsPoint(u)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(s),x&&(De(this._container,"leaflet-interactive"),this._fireEvent([x],s,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,p){this._map._fireDOMEvent(u,p||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var p=u.next,x=u.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var p=u.next,x=u.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function qs(s){return je.canvas?new Ha(s):null}var Oi=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),cl={_initContainer:function(){this._container=Ve("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(rn.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=Oi("shape");De(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=Oi("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[y(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;rt(u),s.removeInteractiveTarget(u),delete this._layers[y(s)]},_updateStyle:function(s){var u=s._stroke,p=s._fill,x=s.options,T=s._container;T.stroked=!!x.stroke,T.filled=!!x.fill,x.stroke?(u||(u=s._stroke=Oi("stroke")),T.appendChild(u),u.weight=x.weight+"px",u.color=x.color,u.opacity=x.opacity,x.dashArray?u.dashStyle=P(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=x.lineCap.replace("butt","flat"),u.joinstyle=x.lineJoin):u&&(T.removeChild(u),s._stroke=null),x.fill?(p||(p=s._fill=Oi("fill")),T.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(T.removeChild(p),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),p=Math.round(s._radius),x=Math.round(s._radiusY||p);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){It(s._container)},_bringToBack:function(s){Zi(s._container)}},Zn=je.vml?Oi:wa,Nr=rn.extend({_initContainer:function(){this._container=Zn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){rt(this._container),tt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){rn.prototype._update.call(this);var s=this._bounds,u=s.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),ut(p,s.min),p.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=Zn("path");s.options.className&&De(u,s.options.className),s.options.interactive&&De(u,"leaflet-interactive"),this._updateStyle(s),this._layers[y(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){rt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[y(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,p=s.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,Sa(s._parts,u))},_updateCircle:function(s){var u=s._point,p=Math.max(Math.round(s._radius),1),x=Math.max(Math.round(s._radiusY),1)||p,T="a"+p+","+x+" 0 1,0 ",O=s._empty()?"M0 0":"M"+(u.x-p)+","+u.y+T+p*2+",0 "+T+-p*2+",0 ";this._setPath(s,O)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){It(s._path)},_bringToBack:function(s){Zi(s._path)}});je.vml&&Nr.include(cl);function Ws(s){return je.svg||je.vml?new Nr(s):null}Fe.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&qs(s)||Ws(s)}});var Xi=Lr.extend({initialize:function(s,u){Lr.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=G(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Ph(s,u){return new Xi(s,u)}Nr.create=Zn,Nr.pointsToPath=Sa,di.geometryToLayer=Ft,di.coordsToLatLng=Ba,di.coordsToLatLngs=Bs,di.latLngToCoords=Na,di.latLngsToCoords=Ns,di.getFeature=Ci,di.asFeature=Ua,Fe.mergeOptions({boxZoom:!0});var sn=qn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){tt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){rt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Tr(),Aa(),this._startPoint=this._map.mouseEventToContainerPoint(s),ze(document,{contextmenu:Ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ve("div","leaflet-zoom-box",this._container),De(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new N(this._point,this._startPoint),p=u.getSize();ut(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(rt(this._box),pt(this._container,"leaflet-crosshair")),Vn(),js(),tt(document,{contextmenu:Ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var u=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fe.addInitHook("addHandler","boxZoom",sn),Fe.mergeOptions({doubleClickZoom:!0});var qa=qn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,p=u.getZoom(),x=u.options.zoomDelta,T=s.originalEvent.shiftKey?p-x:p+x;u.options.doubleClickZoom==="center"?u.setZoom(T):u.setZoomAround(s.containerPoint,T)}});Fe.addInitHook("addHandler","doubleClickZoom",qa),Fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Gn=qn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ji(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}De(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pt(this._map._container,"leaflet-grab"),pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=G(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,T=(x-u+p)%s+u-p,O=(x+u+p)%s-u-p,B=Math.abs(T+p)<Math.abs(O+p)?T:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(s){var u=this._map,p=u.options,x=!p.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),x)u.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,B=p.easeLinearity,F=T.multiplyBy(B/O),J=F.distanceTo([0,0]),ue=Math.min(p.inertiaMaxSpeed,J),ve=F.multiplyBy(ue/J),Ae=ue/(p.inertiaDeceleration*B),Ue=ve.multiplyBy(-Ae/2).round();!Ue.x&&!Ue.y?u.fire("moveend"):(Ue=u._limitOffset(Ue,u.options.maxBounds),te(function(){u.panBy(Ue,{duration:Ae,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});Fe.addInitHook("addHandler","dragging",Gn),Fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var dl=qn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ze(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),tt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,p=s.scrollTop||u.scrollTop,x=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},p=this.keyCodes,x,T;for(x=0,T=p.left.length;x<T;x++)u[p.left[x]]=[-1*s,0];for(x=0,T=p.right.length;x<T;x++)u[p.right[x]]=[s,0];for(x=0,T=p.down.length;x<T;x++)u[p.down[x]]=[0,s];for(x=0,T=p.up.length;x<T;x++)u[p.up[x]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},p=this.keyCodes,x,T;for(x=0,T=p.zoomIn.length;x<T;x++)u[p.zoomIn[x]]=s;for(x=0,T=p.zoomOut.length;x<T;x++)u[p.zoomOut[x]]=-s},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){tt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,p=this._map,x;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[u],s.shiftKey&&(x=ge(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(ge(x),p.options.maxBounds)),p.options.worldCopyJump){var T=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(T)}else p.panBy(x)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Ei(s)}}});Fe.addInitHook("addHandler","keyboard",dl),Fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fs=qn.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){tt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=Yt(s),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),x),Ei(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),p=this._map.options.zoomSnap||0;s._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,O=p?Math.ceil(T/p)*p:T,B=s._limitZoom(u+(this._delta>0?O:-O))-u;this._delta=0,this._startTime=null,B&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+B):s.setZoomAround(this._lastMousePos,u+B))}});Fe.addInitHook("addHandler","scrollWheelZoom",Fs);var Ji=600;Fe.mergeOptions({tapHold:je.touchNative&&je.safari&&je.mobile,tapTolerance:15});var Wa=qn.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){tt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new ie(u.clientX,u.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",St),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Ji),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){tt(document,"touchend",St),tt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),tt(document,"touchend touchcancel contextmenu",this._cancel,this),tt(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new ie(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var p=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});Fe.addInitHook("addHandler","tapHold",Wa),Fe.mergeOptions({touchZoom:je.touch,bounceAtZoomLimits:!0});var hl=qn.extend({addHooks:function(){De(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),tt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(s.touches[0]),x=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),St(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(s.touches[0]),x=u.mouseEventToContainerPoint(s.touches[1]),T=p.distanceTo(x)/this._startDist;if(this._zoom=u.getScaleZoom(T,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&T<1||this._zoom>u.getMaxZoom()&&T>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var O=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(T===1&&O.x===0&&O.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var B=h(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(B,this,!0),St(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),tt(document,"touchmove",this._onTouchMove,this),tt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fe.addInitHook("addHandler","touchZoom",hl),Fe.BoxZoom=sn,Fe.DoubleClickZoom=qa,Fe.Drag=Gn,Fe.Keyboard=dl,Fe.ScrollWheelZoom=Fs,Fe.TapHold=Wa,Fe.TouchZoom=hl,r.Bounds=N,r.Browser=je,r.CRS=ke,r.Canvas=Ha,r.Circle=Da,r.CircleMarker=Mr,r.Class=Le,r.Control=dn,r.DivIcon=uc,r.DivOverlay=$t,r.DomEvent=Oa,r.DomUtil=Cr,r.Draggable=ji,r.Evented=re,r.FeatureGroup=Wn,r.GeoJSON=di,r.GridLayer=Br,r.Handler=qn,r.Icon=Fn,r.ImageOverlay=Pr,r.LatLng=de,r.LatLngBounds=me,r.Layer=Ln,r.LayerGroup=Or,r.LineUtil=kh,r.Map=Fe,r.Marker=Ds,r.Mixin=Eh,r.Path=$n,r.Point=ie,r.PolyUtil=ol,r.Polygon=Lr,r.Polyline=ci,r.Popup=Is,r.PosAnimation=Ar,r.Projection=ec,r.Rectangle=Xi,r.Renderer=rn,r.SVG=Nr,r.SVGOverlay=Va,r.TileLayer=Ri,r.Tooltip=Vs,r.Transformation=Gt,r.Util=xe,r.VideoOverlay=ki,r.bind=h,r.bounds=ne,r.canvas=qs,r.circle=sc,r.circleMarker=rc,r.control=ui,r.divIcon=zh,r.extend=l,r.featureGroup=nc,r.geoJSON=Ia,r.geoJson=Us,r.gridLayer=cc,r.icon=Ls,r.imageOverlay=ac,r.latLng=pe,r.latLngBounds=G,r.layerGroup=Rh,r.map=tl,r.marker=ic,r.point=ge,r.polygon=Mh,r.polyline=Oh,r.popup=lc,r.rectangle=Ph,r.setOptions=C,r.stamp=y,r.svg=Ws,r.svgOverlay=oc,r.tileLayer=_n,r.tooltip=Lh,r.transformation=Ii,r.version=a,r.videoOverlay=Dr;var fl=window.L;r.noConflict=function(){return window.L=fl,this},window.L=r}))})(ru,ru.exports)),ru.exports}var Mu=vL();const _L=Jd(Mu);function Vg(n,t,r){return Object.freeze({instance:n,context:t,container:r})}function Hg(n,t){return t==null?function(a,l){const d=R.useRef(void 0);return d.current||(d.current=n(a,l)),d}:function(a,l){const d=R.useRef(void 0);d.current||(d.current=n(a,l));const h=R.useRef(a),{instance:g}=d.current;return R.useEffect(function(){h.current!==a&&(t(g,a,h.current),h.current=a)},[g,a,t]),d}}function xL(n,t){R.useEffect(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){t.layerContainer?.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function CS(n){return function(r){const a=ES(),l=n(Ig(r,a),a);return TS(a.map,r.attribution),jS(l.current,r.eventHandlers),xL(l.current,a),l}}function bL(n,t){const r=Hg(n,t),a=CS(r);return fL(a)}function wL(n,t){const r=Hg(n),a=gL(r,t);return pL(a)}function SL(n,t){const r=Hg(n,t),a=CS(r);return mL(a)}function TL(n,t,r){const{opacity:a,zIndex:l}=t;a!=null&&a!==r.opacity&&n.setOpacity(a),l!=null&&l!==r.zIndex&&n.setZIndex(l)}function EL({bounds:n,boundsOptions:t,center:r,children:a,className:l,id:d,placeholder:h,style:g,whenReady:y,zoom:_,...b},w){const[S]=R.useState({className:l,id:d,style:g}),[j,k]=R.useState(null),C=R.useRef(void 0);R.useImperativeHandle(w,()=>j?.map??null,[j]);const A=R.useCallback(D=>{if(D!==null&&!C.current){const P=new Mu.Map(D,b);C.current=P,r!=null&&_!=null?P.setView(r,_):n!=null&&P.fitBounds(n,t),y!=null&&P.whenReady(y),k(dL(P))}},[]);R.useEffect(()=>()=>{j?.map.remove()},[j]);const z=j?ls.createElement(Ug,{value:j},a):h??null;return ls.createElement("div",{...S,ref:A},z)}const jL=R.forwardRef(EL),CL=bL(function({position:t,...r},a){const l=new Mu.Marker(t,r);return Vg(l,hL(a,{overlayContainer:l}))},function(t,r,a){r.position!==a.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==a.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==a.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==a.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==a.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),AL=wL(function(t,r){const a=new Mu.Popup(t,r.overlayContainer);return Vg(a,r)},function(t,r,{position:a},l){R.useEffect(function(){const{instance:h}=t;function g(_){_.popup===h&&(h.update(),l(!0))}function y(_){_.popup===h&&l(!1)}return r.map.on({popupopen:g,popupclose:y}),r.overlayContainer==null?(a!=null&&h.setLatLng(a),h.openOn(r.map)):r.overlayContainer.bindPopup(h),function(){r.map.off({popupopen:g,popupclose:y}),r.overlayContainer?.unbindPopup(),r.map.removeLayer(h)}},[t,r,l,a])}),kL=SL(function({url:t,...r},a){const l=new Mu.TileLayer(t,Ig(r,a));return Vg(l,a)},function(t,r,a){TL(t,r,a);const{url:l}=r;l!=null&&l!==a.url&&t.setUrl(l)}),RL=()=>_L.divIcon({html:'<div style="background: var(--primary); width: 32px; height: 32px; border-radius: 12px; border: 3px solid white; display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-md); transform: rotate(45deg);"><div style="transform: rotate(-45deg);"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg></div></div>',className:"custom-div-icon",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]}),OL=()=>{const n=wt(),[t,r]=R.useState([]),a=[11.2588,75.7804];return R.useEffect(()=>{(async()=>{const{data:d}=await ae.from("spots").select("*");d&&r(d)})()},[]),f.jsxs("div",{style:{height:"100vh",width:"100%",position:"relative"},children:[f.jsxs("div",{style:{position:"absolute",top:"20px",left:"20px",zIndex:1e3,display:"flex",gap:"12px"},children:[f.jsx(_e.button,{whileTap:{scale:.9},onClick:()=>n(-1),style:{background:"white",border:"none",padding:"12px",borderRadius:"18px",boxShadow:"var(--shadow-md)",cursor:"pointer"},children:f.jsx(ku,{size:24,color:"var(--text-main)"})}),f.jsxs("div",{style:{background:"white",padding:"12px 24px",borderRadius:"18px",boxShadow:"var(--shadow-md)",display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx(ti,{size:20,color:"var(--primary)"}),f.jsx("span",{style:{fontWeight:"800",fontSize:"0.95rem"},children:"Eats Around You"})]})]}),f.jsxs(jL,{center:a,zoom:13,style:{height:"100%",width:"100%"},children:[f.jsx(kL,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),t.map(l=>f.jsx(CL,{position:[l.latitude||11.2588,l.longitude||75.7804],icon:RL(),children:f.jsx(AL,{className:"chai-in-popup",children:f.jsxs("div",{style:{padding:"4px"},children:[f.jsx("div",{style:{fontWeight:"900",fontSize:"1rem",color:"var(--primary)",marginBottom:"4px"},children:l.name}),f.jsx("div",{style:{fontWeight:"700",fontSize:"0.8rem",color:"var(--text-muted)"},children:l.category}),f.jsx("button",{onClick:()=>n(`/spot/${l.id}`),style:{marginTop:"10px",width:"100%",background:"var(--text-main)",color:"white",border:"none",padding:"8px",borderRadius:"10px",fontWeight:"800",fontSize:"0.8rem",cursor:"pointer"},children:"View Details"})]})})},l.id))]}),f.jsx("style",{children:`
                .chai-in-popup .leaflet-popup-content-wrapper {
                    border-radius: 20px !important;
                    padding: 4px !important;
                }
                .chai-in-popup .leaflet-popup-tip-container {
                    display: none !important;
                }
            `})]})},ML=()=>{const n=wt(),[t,r]=R.useState([]),[a,l]=R.useState(!0);R.useEffect(()=>{d();const h=()=>{d()};window.addEventListener("userProfileUpdated",h);const g=ae.channel("user_preferences_changes_leaderboard").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_preferences"},y=>{d()}).subscribe();return()=>{window.removeEventListener("userProfileUpdated",h),ae.removeChannel(g)}},[]);const d=async()=>{l(!0);const{data:h}=await ae.from("spots").select("created_by"),{data:g}=await ae.from("reviews").select("user_id"),y={};h?.forEach(C=>{const A=C.created_by;A&&(y[A]||(y[A]={spots:0,reviews:0,xp:0}),y[A].spots+=1,y[A].xp+=100)}),g?.forEach(C=>{const A=C.user_id;A&&(y[A]||(y[A]={spots:0,reviews:0,xp:0}),y[A].reviews+=1,y[A].xp+=10)});const _=Object.keys(y),{data:b}=await ae.from("user_preferences").select("user_id, username, display_name, avatar_url").in("user_id",_),{data:{user:w}}=await ae.auth.getUser(),S={};b?.forEach(C=>S[C.user_id]=C);const j=new Set;Object.values(S).forEach(C=>{const A=["admin","sinxn","moderator"],z=(C.username||"").toLowerCase(),D=(C.display_name||"").toLowerCase();A.some(P=>z.includes(P)||D.includes(P))&&j.add(C.user_id)});const k=_.filter(C=>!j.has(C)).map(C=>{const A=S[C];return{id:C,name:A?.display_name||A?.username||w?.user_metadata?.full_name||"Foodie",avatar:A?.avatar_url,isMe:w&&C===w.id,...y[C]}}).sort((C,A)=>A.xp-C.xp);r(k),l(!1)};return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--secondary)",paddingBottom:"120px"},children:[f.jsxs("div",{style:{height:"180px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[f.jsx("button",{onClick:()=>n(-1),style:{position:"absolute",left:"20px",top:"30px",background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white"},children:f.jsx(ku,{size:24})}),f.jsx(Pg,{size:48,color:"white",style:{marginBottom:"8px"}}),f.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.6rem",margin:0},children:"Top Foodies"}),f.jsx("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",fontWeight:"600"},children:"Kerala's most active explorers"})]}),f.jsx("div",{className:"container",style:{padding:"0 20px",marginTop:"-30px"},children:a?f.jsx("div",{style:{textAlign:"center",padding:"40px"},children:f.jsx(_e.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},children:f.jsx(Y5,{size:40,color:"var(--primary)"})})}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map((h,g)=>f.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.05},style:{background:"white",padding:"16px",borderRadius:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"var(--shadow-sm)",border:h.isMe?"2px solid var(--primary)":"none"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[f.jsx("div",{style:{width:"28px",fontWeight:"900",color:g<3?"var(--primary)":"var(--text-muted)",fontSize:"1.1rem"},children:g===0?"":g===1?"":g===2?"":`#${g+1}`}),f.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"16px",background:"var(--secondary)",overflow:"hidden"},children:h.avatar?f.jsx("img",{src:h.avatar,style:{width:"100%",height:"100%",objectFit:"cover"}}):f.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx(vr,{size:24,color:"var(--text-muted)"})})}),f.jsxs("div",{children:[f.jsxs("div",{style:{fontWeight:"800",fontSize:"1rem",color:h.isMe?"var(--primary)":"var(--text-main)"},children:[h.name," ",h.isMe&&"(You!)"]}),f.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",fontWeight:"600"},children:[h.spots," Spots shared"]})]})]}),f.jsxs("div",{style:{background:"var(--secondary)",padding:"8px 16px",borderRadius:"14px",fontWeight:"900",color:"var(--primary)",fontSize:"0.9rem"},children:[h.xp," XP"]})]},h.id))})})]})},LL=({showToast:n})=>{const[t,r]=R.useState([]),[a,l]=R.useState(!0),[d,h]=R.useState(null),[g,y]=R.useState({});R.useEffect(()=>{_()},[]);const _=async()=>{l(!0);try{const{data:C,error:A}=await supabase.from("spot_edit_suggestions").select(`
                    *,
                    spots:spot_id(name, location_text, category),
                    user:user_id(email, user_metadata)
                `).order("created_at",{ascending:!1});if(A)throw A;r(C||[])}catch(C){console.error("Error fetching suggestions:",C),n("Failed to load suggestions","error")}finally{l(!1)}},b=async(C,A=!1)=>{y(z=>({...z,[C]:!0}));try{const z=t.find(P=>P.id===C);if(A&&z){const{error:P}=await supabase.from("spots").update(z.suggested_data).eq("id",z.spot_id);if(P)throw P}const{error:D}=await supabase.from("spot_edit_suggestions").update({status:"approved",reviewed_by:(await supabase.auth.getUser()).data.user.id,reviewed_at:new Date().toISOString()}).eq("id",C);if(D)throw D;n(`Suggestion ${A?"approved and applied":"approved"}!`,"success"),_(),h(null)}catch(z){console.error("Error approving suggestion:",z),n("Failed to approve suggestion","error")}finally{y(z=>({...z,[C]:!1}))}},w=async(C,A="")=>{y(z=>({...z,[C]:!0}));try{const{error:z}=await supabase.from("spot_edit_suggestions").update({status:"rejected",admin_notes:A,reviewed_by:(await supabase.auth.getUser()).data.user.id,reviewed_at:new Date().toISOString()}).eq("id",C);if(z)throw z;n("Suggestion rejected","success"),_(),h(null)}catch(z){console.error("Error rejecting suggestion:",z),n("Failed to reject suggestion","error")}finally{y(z=>({...z,[C]:!1}))}},S=C=>{switch(C){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";default:return"#6b7280"}},j=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=(C,A,z)=>{const D={name:f.jsx(ti,{size:14}),description:f.jsx(Dg,{size:14}),location_text:f.jsx(ti,{size:14}),phone:f.jsx(Yd,{size:14}),website:f.jsx(Pm,{size:14}),opening_hours:f.jsx(zm,{size:14}),tags:f.jsx(Xd,{size:14}),price_level:f.jsx(gS,{size:14}),category:f.jsx(Xd,{size:14}),instagram_handle:f.jsx(Pm,{size:14}),whatsapp_number:f.jsx(Yd,{size:14})};return f.jsxs("div",{style:{padding:"12px",background:"#f8f9fa",borderRadius:"8px",marginBottom:"8px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[D[C]||f.jsx(Bg,{size:14}),f.jsx("strong",{style:{textTransform:"capitalize",color:"#374151"},children:C.replace(/_/g," ")})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",fontSize:"0.85rem"},children:[f.jsxs("div",{style:{color:"#ef4444"},children:[f.jsx("span",{style:{fontWeight:"600"},children:"From:"})," ",A||"(empty)"]}),f.jsxs("div",{style:{color:"#10b981"},children:[f.jsx("span",{style:{fontWeight:"600"},children:"To:"})," ",z||"(empty)"]})]})]})};return a?f.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading suggestions..."}):f.jsxs("div",{style:{padding:"20px"},children:[f.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"900",marginBottom:"20px"},children:["Edit Suggestions (",t.filter(C=>C.status==="pending").length," pending)"]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[f.jsxs("div",{children:[f.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"16px"},children:"All Suggestions"}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map(C=>f.jsxs(_e.div,{whileHover:{scale:1.02},onClick:()=>h(C),style:{padding:"16px",background:"white",borderRadius:"12px",border:`2px solid ${S(C.status)}`,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[f.jsxs("div",{children:[f.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"800",color:"#1f2937"},children:C.spots?.name||"Unknown Spot"}),f.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.85rem",color:"#6b7280"},children:["by ",C.user?.user_metadata?.full_name||C.user?.email]})]}),f.jsx("div",{style:{padding:"4px 8px",borderRadius:"6px",background:S(C.status),color:"white",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase"},children:C.status})]}),f.jsxs("div",{style:{fontSize:"0.85rem",color:"#374151",marginBottom:"8px"},children:[Object.keys(C.suggested_changes||{}).length," changes suggested"]}),f.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:j(C.created_at)})]},C.id))})]}),f.jsxs("div",{children:[f.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"16px"},children:"Suggestion Details"}),f.jsx(ju,{children:d?f.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},style:{padding:"20px",background:"white",borderRadius:"16px",border:"2px solid #e5e7eb",boxShadow:"0 4px 16px rgba(0,0,0,0.1)"},children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",fontWeight:"800",color:"#1f2937"},children:d.spots?.name||"Unknown Spot"}),f.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"0.85rem",color:"#6b7280"},children:[f.jsxs("span",{children:[f.jsx(vr,{size:14,style:{display:"inline",marginRight:"4px"}}),d.user?.user_metadata?.full_name||d.user?.email]}),f.jsxs("span",{children:[f.jsx(zm,{size:14,style:{display:"inline",marginRight:"4px"}}),j(d.created_at)]})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("h5",{style:{margin:"0 0 12px 0",fontSize:"0.95rem",fontWeight:"700",color:"#374151"},children:["Proposed Changes (",Object.keys(d.suggested_changes||{}).length,")"]}),Object.entries(d.suggested_changes||{}).map(([C,{old:A,new:z}])=>k(C,A,z))]}),d.status==="pending"&&f.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[f.jsxs("button",{onClick:()=>w(d.id),disabled:g[d.id],style:{padding:"10px 16px",border:"none",background:"#ef4444",color:"white",borderRadius:"8px",fontWeight:"600",cursor:g[d.id]?"not-allowed":"pointer",opacity:g[d.id]?.6:1,display:"flex",alignItems:"center",gap:"6px"},children:[f.jsx(_a,{size:16}),g[d.id]?"Processing...":"Reject"]}),f.jsxs("button",{onClick:()=>b(d.id,!1),disabled:g[d.id],style:{padding:"10px 16px",border:"none",background:"#3b82f6",color:"white",borderRadius:"8px",fontWeight:"600",cursor:g[d.id]?"not-allowed":"pointer",opacity:g[d.id]?.6:1,display:"flex",alignItems:"center",gap:"6px"},children:[f.jsx(Lm,{size:16}),g[d.id]?"Processing...":"Approve"]}),f.jsxs("button",{onClick:()=>b(d.id,!0),disabled:g[d.id],style:{padding:"10px 16px",border:"none",background:"#10b981",color:"white",borderRadius:"8px",fontWeight:"600",cursor:g[d.id]?"not-allowed":"pointer",opacity:g[d.id]?.6:1,display:"flex",alignItems:"center",gap:"6px"},children:[f.jsx(Lm,{size:16}),g[d.id]?"Processing...":"Apply & Approve"]})]}),d.status!=="pending"&&f.jsxs("div",{style:{padding:"12px",background:d.status==="approved"?"#f0fdf4":"#fef2f2",borderRadius:"8px",border:`1px solid ${d.status==="approved"?"#86efac":"#fca5a5"}`},children:[f.jsx("p",{style:{margin:0,fontSize:"0.85rem",fontWeight:"600",color:d.status==="approved"?"#166534":"#991b1b"},children:d.status==="approved"?" Approved":" Rejected"}),d.admin_notes&&f.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:["Notes: ",d.admin_notes]}),d.reviewed_at&&f.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"#9ca3af"},children:["Reviewed: ",j(d.reviewed_at)]})]})]}):f.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#9ca3af",background:"#f9fafb",borderRadius:"12px",border:"2px dashed #e5e7eb"},children:[f.jsx(yS,{size:48,style:{marginBottom:"16px",opacity:.5}}),f.jsx("p",{children:"Select a suggestion to view details"})]})})]})]})]})},zL=()=>{const[n,t]=R.useState([]),[r,a]=R.useState(!0),[l,d]=R.useState(null),[h,g]=R.useState("analytics"),[y,_]=R.useState(!1);wt();const[b,w]=R.useState([]),[S,j]=R.useState({title:"",message:""}),[k,C]=R.useState(!1),[A,z]=R.useState({totalUsers:0,totalSpots:0,signupsByMonth:[],topContributors:[],activeAreas:[]}),[D,P]=R.useState(30),[Z,$]=R.useState("");R.useEffect(()=>{if(!y)return;a(!0),K(),fe(),Le();const he=ae.channel("spots_changes").on("postgres_changes",{event:"*",schema:"public",table:"spots"},re=>{re.eventType==="UPDATE"?t(ie=>ie.map(Se=>Se.id===re.new.id?{...Se,...re.new}:Se)):re.eventType==="DELETE"?t(ie=>ie.filter(Se=>Se.id!==re.old.id)):re.eventType==="INSERT"&&t(ie=>[...ie,re.new])}).subscribe(),H=()=>{const re=window.location.hash.replace("#","");["analytics","spots","community","reviews","notifications","moderation"].includes(re)&&g(re)};return H(),window.addEventListener("hashchange",H),()=>{window.removeEventListener("hashchange",H),he.unsubscribe()}},[D,y]);const V=(he,H="success")=>{d({message:he,type:H})},K=async()=>{const{data:he,error:H}=await ae.from("spots").select("*").order("created_at",{ascending:!1});he&&t(he),H&&V("Failed to fetch spots","error"),a(!1)},oe=async he=>{if(!confirm("Permanently delete this spot?"))return;const{error:H}=await ae.from("spots").delete().eq("id",he);H?(console.error(H),V("Failed to delete: "+H.message,"error")):(V("Spot deleted","success"),t(n.filter(re=>re.id!==he)))},ye=async(he,H)=>{try{console.log("Toggling verification for spot:",he,"current status:",H);const{data:re,error:ie}=await ae.from("spots").select("*").eq("id",he).single();if(ie){console.error("Error fetching current spot:",ie),V("Failed to fetch spot data: "+ie.message,"error");return}console.log("Current spot data:",re);const Se=!H,{data:ge,error:N}=await ae.from("spots").update({is_verified:Se}).eq("id",he).select();if(N){console.error("Verification error:",N),console.error("Error details:",{message:N.message,details:N.details,hint:N.hint,code:N.code}),N.code==="42501"||N.message.includes("permission")?V("Permission denied. Check RLS policies in Supabase.","error"):V("Failed to update: "+N.message,"error");return}console.log("Verification successful, updated data:",ge),t(n.map(ne=>ne.id===he?{...ne,is_verified:Se}:ne)),V(`Spot ${Se?"verified":"unverified"} successfully`,"success"),window.dispatchEvent(new CustomEvent("spotVerified",{detail:{spotId:he,isVerified:Se}})),setTimeout(()=>{console.log("Re-fetching spots to ensure persistence..."),K()},1e3)}catch(re){console.error("Toggle verification error:",re),V("Failed to update: "+re.message,"error")}},fe=async()=>{const{data:he,error:H}=await ae.from("notifications").select("*").order("created_at",{ascending:!1});he&&w(he)},te=async()=>{if(!S.title||!S.message)return;C(!0);const{error:he}=await ae.from("notifications").insert([{title:S.title,message:S.message,is_active:!0}]);he?V("Failed to send","error"):(V("Notification Sent!","success"),j({title:"",message:""}),fe()),C(!1)},W=async he=>{const{error:H}=await ae.from("notifications").delete().eq("id",he);H||(w(b.filter(re=>re.id!==he)),V("Notification deleted"))},xe=async(he,H)=>{await ae.from("notifications").update({is_active:!H}).eq("id",he),fe()},Le=async()=>{try{const{data:he}=await ae.from("user_preferences").select("created_at, display_name, username, user_id"),{data:H}=await ae.from("spots").select("created_by, location_text, created_at");if(!he||!H)return;const re=new Date,ie=new Date;ie.setDate(re.getDate()-D);const Se=he.filter(G=>new Date(G.created_at)>=ie),ge={};Se.forEach(G=>{const de=new Date(G.created_at).toLocaleDateString("default",{month:"short",day:"numeric"});ge[de]=(ge[de]||0)+1});const N=Object.entries(ge).map(([G,de])=>({name:G,count:de})),ne={};H.forEach(G=>{G.created_by&&(ne[G.created_by]=(ne[G.created_by]||0)+1)});const me=Object.entries(ne).map(([G,de])=>{const pe=he.find(ke=>ke.user_id===G);return{name:pe?.username||pe?.display_name||"Anonymous",count:de}}).sort((G,de)=>de.count-G.count).slice(0,5);z({totalUsers:he.length,totalSpots:H.length,signupsByMonth:N,topContributors:me,activeAreas:[]})}catch(he){console.error(he)}finally{a(!1)}};return y?f.jsxs("div",{style:{padding:"20px 20px 100px 20px",maxWidth:"1200px",margin:"0 auto"},children:[l&&f.jsx(Ou,{message:l.message,type:l.type,onClose:()=>d(null)}),f.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:f.jsx("h1",{style:{fontSize:"1.8rem"},children:"Admin Dashboard"})}),f.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"10px",marginBottom:"20px"},className:"hide-scrollbar",children:["analytics","spots","community","reviews","notifications","moderation"].map(he=>f.jsx("button",{onClick:()=>g(he),style:{padding:"10px 20px",borderRadius:"30px",border:"none",background:h===he?"var(--primary)":"white",color:h===he?"white":"#555",fontWeight:"700",textTransform:"capitalize",whiteSpace:"nowrap",boxShadow:h===he?"0 4px 12px rgba(226, 55, 68, 0.3)":"0 2px 8px rgba(0,0,0,0.05)"},children:he},he))}),r&&f.jsx("p",{children:"Loading data..."}),!r&&h==="analytics"&&f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[f.jsxs("div",{className:"glass-card",style:{padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{color:"#888",margin:0},children:"Total Users"}),f.jsx("h2",{style:{fontSize:"2.5rem",margin:0},children:A.totalUsers})]}),f.jsx(hh,{size:40,color:"var(--primary)"})]}),f.jsxs("div",{className:"glass-card",style:{padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{color:"#888",margin:0},children:"Total Spots"}),f.jsx("h2",{style:{fontSize:"2.5rem",margin:0},children:A.totalSpots})]}),f.jsx(ti,{size:40,color:"orange"})]}),f.jsxs("div",{className:"glass-card",style:{padding:"20px",gridColumn:"1 / -1"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[f.jsx("h3",{style:{margin:0},children:"Growth Analytics"}),f.jsx("div",{style:{display:"flex",gap:"8px"},children:[30,60,90].map(he=>f.jsxs("button",{onClick:()=>P(he),style:{padding:"6px 12px",borderRadius:"8px",border:"1px solid #ddd",background:D===he?"var(--primary)":"white",color:D===he?"white":"#666",fontSize:"0.8rem",fontWeight:"700",cursor:"pointer"},children:[he," Days"]},he))})]}),f.jsx("div",{style:{width:"100%",height:"250px",position:"relative"},children:A.signupsByMonth.length>0&&f.jsx(BL,{data:A.signupsByMonth})}),f.jsx("p",{style:{textAlign:"center",fontSize:"0.8rem",color:"#888",marginTop:"1rem"},children:"User Signups over time"})]}),f.jsxs("div",{className:"glass-card",style:{padding:"20px"},children:[f.jsx("h3",{children:"Top Contributors"}),A.topContributors.map((he,H)=>f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 0",borderBottom:"1px solid #eee"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx("span",{style:{fontWeight:"bold",width:"20px"},children:H+1}),f.jsx("span",{children:he.name})]}),f.jsx("span",{style:{fontWeight:"bold",color:"var(--primary)"},children:he.count})]},H))]})]}),!r&&h==="spots"&&f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(he=>f.jsxs("div",{className:"glass-card",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[f.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[f.jsx("img",{src:he.images?.[0]||"https://via.placeholder.com/100",style:{width:"60px",height:"60px",borderRadius:"8px",objectFit:"cover"}}),f.jsxs("div",{children:[f.jsx("h4",{style:{margin:0,fontWeight:"700"},children:he.name}),f.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"#666"},children:he.location_text}),he.is_verified&&f.jsx("span",{style:{fontSize:"0.7rem",color:"green",fontWeight:"bold"},children:"Verified"})]})]}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:()=>ye(he.id,he.is_verified),style:{padding:"8px",background:"#e8f5e9",color:"#2e7d32",borderRadius:"8px",border:"none"},children:f.jsx(fS,{size:18})}),f.jsx("button",{onClick:()=>oe(he.id),style:{padding:"8px",background:"#ffebee",color:"#c62828",borderRadius:"8px",border:"none"},children:f.jsx(pS,{size:18})})]})]},he.id))}),!r&&h==="notifications"&&f.jsxs("div",{children:[f.jsxs("div",{className:"glass-card",style:{padding:"20px",marginBottom:"20px"},children:[f.jsx("h3",{children:"Create Notification"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[f.jsx("input",{type:"text",placeholder:"Notification Title",value:S.title,onChange:he=>j({...S,title:he.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #ddd"}}),f.jsx("textarea",{placeholder:"Message Body",value:S.message,onChange:he=>j({...S,message:he.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #ddd",minHeight:"80px"}}),f.jsxs(uu,{onClick:te,disabled:k,children:[k?"Sending...":"Send to All Users"," ",f.jsx(bS,{size:16,style:{marginLeft:"8px"}})]})]})]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:b.map(he=>f.jsxs("div",{className:"glass-card",style:{padding:"15px",position:"relative"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[f.jsx("h4",{style:{margin:0},children:he.title}),f.jsx("span",{style:{fontSize:"0.8rem",color:he.is_active?"green":"red",fontWeight:"bold"},children:he.is_active?"ACTIVE":"INACTIVE"})]}),f.jsx("p",{style:{margin:0,color:"#555"},children:he.message}),f.jsxs("div",{style:{marginTop:"10px",display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:()=>xe(he.id,he.is_active),style:{fontSize:"0.8rem",padding:"4px 8px"},children:"Toggle Active"}),f.jsx("button",{onClick:()=>W(he.id),style:{fontSize:"0.8rem",padding:"4px 8px",color:"red"},children:"Delete"})]})]},he.id))})]}),!r&&h==="community"&&f.jsx(PL,{}),!r&&h==="reviews"&&f.jsx(DL,{}),!r&&h==="moderation"&&f.jsx(LL,{showToast:V})]}):f.jsx("div",{style:{height:"80vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px"},children:f.jsxs("div",{className:"glass-card",style:{padding:"30px",width:"100%",maxWidth:"400px",textAlign:"center"},children:[f.jsx(D5,{size:48,color:"var(--primary)",style:{marginBottom:"20px"}}),f.jsx("h2",{style:{marginBottom:"10px"},children:"Admin Login"}),f.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"Please enter your PIN to access the dashboard."}),f.jsx("input",{type:"password",id:"adminPinInput",placeholder:"Enter PIN",value:Z,onChange:he=>$(he.target.value),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"1px solid #ddd",marginBottom:"20px",textAlign:"center",fontSize:"1.2rem",letterSpacing:"4px"},onKeyDown:he=>{he.key==="Enter"&&Z==="Sinu@12345"?_(!0):he.key==="Enter"&&V("Incorrect PIN","error")}}),f.jsx(uu,{onClick:()=>{Z==="Sinu@12345"?_(!0):V("Incorrect PIN","error")},style:{width:"100%"},children:"Access Dashboard"})]})})},PL=()=>{const[n,t]=R.useState([]),[r,a]=R.useState(!0);R.useEffect(()=>{l()},[]);const l=async()=>{const{data:h}=await ae.from("community_posts").select("*").order("created_at",{ascending:!1});t(h||[]),a(!1)},d=async h=>{if(!confirm("Delete this post?"))return;const{error:g}=await ae.from("community_posts").delete().eq("id",h);g?(console.error(g),alert("Failed to delete post: "+g.message)):t(n.filter(y=>y.id!==h))};return r?f.jsx("div",{children:"Loading..."}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"15px"},children:n.map(h=>f.jsxs("div",{className:"glass-card",style:{padding:"10px",overflow:"hidden"},children:[f.jsx("img",{src:h.image_url,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"}}),f.jsx("p",{style:{fontSize:"0.8rem",margin:"8px 0",height:"40px",overflow:"hidden"},children:h.caption}),f.jsxs("button",{onClick:()=>d(h.id),style:{width:"100%",padding:"6px",background:"#ffebee",color:"red",border:"none",borderRadius:"6px",cursor:"pointer"},children:[f.jsx(Ng,{size:16})," Delete"]})]},h.id))})},DL=()=>{const[n,t]=R.useState([]);R.useEffect(()=>{r()},[]);const r=async()=>{const{data:l}=await ae.from("reviews").select("*").order("created_at",{ascending:!1}).limit(50);t(l||[])},a=async l=>{if(!confirm("Delete review?"))return;const{error:d}=await ae.from("reviews").delete().eq("id",l);d?(console.error(d),alert("Failed to delete review: "+d.message)):t(n.filter(h=>h.id!==l))};return f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:n.map(l=>f.jsxs("div",{className:"glass-card",style:{padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{display:"flex",gap:"4px"},children:[...Array(l.rating)].map((d,h)=>f.jsx("span",{children:""},h))}),f.jsx("p",{style:{marginTop:"5px",marginBottom:"0",fontSize:"0.9rem"},children:l.comment})]}),f.jsx("button",{onClick:()=>a(l.id),style:{background:"#ffebee",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:"red"},children:f.jsx(Ng,{size:18})})]},l.id))})},BL=({data:n})=>{const t=Math.max(...n.map(h=>h.count),5),r=200,a=800,l=30,d=n.map((h,g)=>{const y=l+g*(a-l*2)/(n.length-1||1),_=r-l-h.count*(r-l*2)/t;return`${y},${_}`}).join(" ");return f.jsxs("svg",{viewBox:`0 0 ${a} ${r}`,style:{width:"100%",height:"100%"},children:[f.jsx("line",{x1:l,y1:r-l,x2:a-l,y2:r-l,stroke:"#eee"}),f.jsx("line",{x1:l,y1:l,x2:l,y2:r-l,stroke:"#eee"}),f.jsx("text",{x:l-10,y:l,textAnchor:"end",fontSize:"10",fill:"#999",children:t}),f.jsx("text",{x:l-10,y:r-l,textAnchor:"end",fontSize:"10",fill:"#999",children:"0"}),f.jsx("polyline",{fill:"none",stroke:"var(--primary)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",points:d}),n.map((h,g)=>{const y=l+g*(a-l*2)/(n.length-1||1),_=r-l-h.count*(r-l*2)/t;return f.jsxs("g",{children:[f.jsx("circle",{cx:y,cy:_,r:"4",fill:"white",stroke:"var(--primary)",strokeWidth:"2"}),f.jsx("text",{x:y,y:r-5,textAnchor:"middle",fontSize:"10",fill:"#999",children:h.name}),f.jsx("text",{x:y,y:_-10,textAnchor:"middle",fontSize:"12",fontWeight:"700",fill:"var(--primary)",children:h.count})]},g)})]})},NL=({spot:n,onClose:t,onSubmit:r})=>{const[a,l]=R.useState({name:n.name||"",description:n.description||"",location_text:n.location_text||"",opening_time:n.opening_hours?.open||"10:00",closing_time:n.opening_hours?.close||"22:00",tags:n.tags?n.tags.join(", "):"",price_level:n.price_level||1,category:n.category||"",instagram_handle:n.instagram_handle||"",whatsapp_number:n.whatsapp_number||""}),[d,h]=R.useState(!1),[g,y]=R.useState({}),_=(S,j)=>{if(l(k=>({...k,[S]:j})),S==="opening_time"||S==="closing_time"){const k={open:n.opening_hours?.open||"10:00",close:n.opening_hours?.close||"22:00"},C={open:S==="opening_time"?j:a.opening_time,close:S==="closing_time"?j:a.closing_time};JSON.stringify(k)!==JSON.stringify(C)?y(A=>({...A,opening_hours:{old:k,new:C}})):y(A=>{const z={...A};return delete z.opening_hours,z})}else j!==n[S]?y(k=>({...k,[S]:{old:n[S],new:j}})):y(k=>{const C={...k};return delete C[S],C})},b=async S=>{if(S.preventDefault(),Object.keys(g).length===0){alert("Please make at least one change to suggest edits");return}h(!0);try{const j={...a,opening_hours:{open:a.opening_time,close:a.closing_time}};await r({spot_id:n.id,suggested_changes:g,original_data:n,suggested_data:j}),t()}catch(j){console.error("Error submitting edits:",j),alert("Failed to submit edits. Please try again.")}finally{h(!1)}},w=(S,j,k,C="text",A="")=>f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"600",color:"var(--text-main)"},children:[k,j]}),C==="textarea"?f.jsx("textarea",{value:a[S],onChange:z=>_(S,z.target.value),placeholder:A,style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"0.9rem",resize:"vertical",minHeight:"80px",fontFamily:"inherit"}}):f.jsx("input",{type:C,value:a[S],onChange:z=>_(S,z.target.value),placeholder:A,style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"0.9rem",fontFamily:"inherit"}})]});return f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1e3},children:f.jsxs(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:{background:"white",borderRadius:"20px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",position:"relative"},children:[f.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx(Bg,{size:24,color:"var(--primary)"}),f.jsxs("div",{children:[f.jsx("h2",{style:{margin:0,fontSize:"1.3rem",color:"var(--text-main)"},children:"Suggest Edits"}),f.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)"},children:n.name})]})]}),f.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx(_a,{size:20,color:"var(--text-muted)"})})]}),f.jsxs("form",{onSubmit:b,style:{padding:"24px"},children:[f.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"#fef3c7",borderRadius:"12px",border:"1px solid #fbbf24"},children:f.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"#92400e",fontWeight:"600"},children:" Only fill in the fields you want to edit. Empty fields will be ignored."})}),w("name","Spot Name",f.jsx(ti,{size:16}),"text","Enter spot name"),w("description","Description",f.jsx(Dg,{size:16}),"textarea","Describe the spot..."),w("location_text","Location",f.jsx(ti,{size:16}),"text","Enter location details"),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"600",color:"var(--text-main)"},children:[f.jsx(zm,{size:16}),"Opening Hours"]}),f.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:[f.jsx("label",{style:{fontSize:"0.75rem",fontWeight:"800",color:"var(--text-muted)"},children:"Opening"}),f.jsx("input",{type:"time",value:a.opening_time,onChange:S=>_("opening_time",S.target.value),style:{padding:"12px",borderRadius:"14px",background:"var(--secondary)",border:"none",fontWeight:"700",width:"100%"}})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:[f.jsx("label",{style:{fontSize:"0.75rem",fontWeight:"800",color:"var(--text-muted)"},children:"Closing"}),f.jsx("input",{type:"time",value:a.closing_time,onChange:S=>_("closing_time",S.target.value),style:{padding:"12px",borderRadius:"14px",background:"var(--secondary)",border:"none",fontWeight:"700",width:"100%"}})]})]})]}),w("tags","Tags",f.jsx(Xd,{size:16}),"text","e.g., biryani, tea, snacks (comma separated)"),w("instagram_handle","Instagram",f.jsx(Pm,{size:16}),"text","@username"),w("whatsapp_number","WhatsApp",f.jsx(Yd,{size:16}),"tel","Enter WhatsApp number"),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"600",color:"var(--text-main)"},children:[f.jsx(gS,{size:16}),"Price Level"]}),f.jsxs("select",{value:a.price_level,onChange:S=>_("price_level",parseInt(S.target.value)),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"0.9rem",fontFamily:"inherit"},children:[f.jsx("option",{value:1,children:"50-150 (Budget)"}),f.jsx("option",{value:2,children:"150-300 (Moderate)"}),f.jsx("option",{value:3,children:"300-600 (Expensive)"}),f.jsx("option",{value:4,children:"600+ (Premium)"})]})]}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"600",color:"var(--text-main)"},children:[f.jsx(Xd,{size:16}),"Category"]}),f.jsxs("select",{value:a.category,onChange:S=>_("category",S.target.value),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"0.9rem",fontFamily:"inherit"},children:[f.jsx("option",{value:"",children:"Select Category"}),f.jsx("option",{value:"restaurant",children:"Restaurant"}),f.jsx("option",{value:"cafe",children:"Cafe"}),f.jsx("option",{value:"tea_shop",children:"Tea Shop"}),f.jsx("option",{value:"bakery",children:"Bakery"}),f.jsx("option",{value:"juice_bar",children:"Juice Bar"}),f.jsx("option",{value:"street_food",children:"Street Food"}),f.jsx("option",{value:"fast_food",children:"Fast Food"}),f.jsx("option",{value:"dessert",children:"Dessert"})]})]}),Object.keys(g).length>0&&f.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#f0fdf4",borderRadius:"12px",border:"1px solid #86efac"},children:[f.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"0.9rem",color:"#166534",fontWeight:"600"},children:[" Changes Summary (",Object.keys(g).length," changes)"]}),Object.entries(g).map(([S,{old:j,new:k}])=>f.jsxs("div",{style:{marginBottom:"8px",fontSize:"0.85rem",color:"#166534"},children:[f.jsxs("strong",{children:[S,":"]})," ",S==="opening_hours"?`"${j?.open||"10:00"} - ${j?.close||"22:00"}"  "${k?.open||"10:00"} - ${k?.close||"22:00"}"`:`"${j}"  "${k}"`]},S))]}),f.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[f.jsx("button",{type:"button",onClick:t,style:{padding:"12px 24px",border:"2px solid #e5e7eb",background:"white",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",color:"var(--text-main)"},children:"Cancel"}),f.jsx("button",{type:"submit",disabled:d||Object.keys(g).length===0,style:{padding:"12px 24px",border:"none",background:"var(--primary)",color:"white",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"600",cursor:d?"not-allowed":"pointer",opacity:d||Object.keys(g).length===0?.6:1},children:d?"Submitting...":`Submit ${Object.keys(g).length} Changes`})]})]})]})})},UL=({lang:n})=>{const{id:t}=Hm(),r=wt(),{user:a}=Rt(),[l,d]=R.useState(null),[h,g]=R.useState([]),[y,_]=R.useState(""),[b,w]=R.useState(!1),[S,j]=R.useState(!0),[k,C]=R.useState(null),[A,z]=R.useState(!1),[D,P]=R.useState(!1),[Z,$]=R.useState(""),[V,K]=R.useState(0),[oe,ye]=R.useState(0),[fe,te]=R.useState(!1);R.useEffect(()=>{re();const G=()=>{ie()};window.addEventListener("userProfileUpdated",G);const de=ae.channel("user_preferences_changes_reviews").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_preferences"},pe=>{ie()}).subscribe();return()=>{window.removeEventListener("userProfileUpdated",G),ae.removeChannel(de)}},[t]);const W=G=>G>=1e6?(G/1e6).toFixed(1)+"M":G>=1e3?(G/1e3).toFixed(1)+"K":G.toString(),xe=async G=>{try{const{data:de,error:pe}=await ae.from("spot_edit_suggestions").insert([{spot_id:G.spot_id,user_id:a.id,suggested_changes:G.suggested_changes,original_data:G.original_data,suggested_data:G.suggested_data,status:"pending"}]);if(pe)throw console.error("Error submitting suggestion:",pe),pe;alert("Edit suggestion submitted successfully! The admin will review it soon.")}catch(de){throw console.error("Error submitting edit suggestion:",de),de}},Le=()=>new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"})),he=G=>{if(!G||!G.open||!G.close)return null;const de=Le(),[pe,ke=0]=G.open.split(":").map(Number),[Ge,Ke=0]=G.close.split(":").map(Number),lt=new Date(de);lt.setHours(pe,ke,0,0);const Gt=new Date(de);return Gt.setHours(Ge,Ke,0,0),Gt<=lt&&(de<lt?lt.setDate(lt.getDate()-1):Gt.setDate(Gt.getDate()+1)),de>=lt&&de<=Gt},H=G=>{if(!G)return"";const[de,pe="00"]=G.split(":"),ke=new Date;return ke.setHours(Number(de),Number(pe),0,0),ke.toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})},re=async()=>{j(!0),$("");try{const{data:G,error:de}=await ae.from("spots").select("*").eq("id",parseInt(t)).single();if(de)throw de;if(!G){$("Spot not found"),j(!1);return}if(d(G),C(he(G.opening_hours)),ie(),Se(),a){const{data:pe}=await ae.from("user_favorites").select("*").eq("spot_id",parseInt(t)).eq("user_id",a.id).maybeSingle();w(!!pe);const{data:ke}=await ae.from("visited_spots").select("*").eq("spot_id",parseInt(t)).eq("user_id",a.id).maybeSingle();z(!!ke)}}catch(G){console.error("Error fetching spot:",G),$("Unable to load this spot right now. Please try again.")}finally{j(!1)}},ie=async()=>{const{data:G,error:de}=await ae.from("reviews").select("*").eq("spot_id",t).order("created_at",{ascending:!1});if(de){console.error("Error loading reviews:",de),g([]);return}if(G){const pe=[...new Set(G.map(lt=>lt.user_id))],{data:ke}=await ae.from("user_preferences").select("user_id, display_name, avatar_url").in("user_id",pe),Ge={};ke?.forEach(lt=>Ge[lt.user_id]=lt);const{data:{user:Ke}}=await ae.auth.getUser();g(G.map(lt=>{const Gt=Ge[lt.user_id];return Gt?{...lt,user:Gt}:Ke&&lt.user_id===Ke.id?{...lt,user:{display_name:Ke.user_metadata?.full_name||Ke.email?.split("@")[0]||"User",avatar_url:Ke.user_metadata?.avatar_url||null}}:{...lt,user:{display_name:"User",avatar_url:null}}}))}else g([])},Se=async()=>{try{const{count:G}=await ae.from("visited_spots").select("*",{count:"exact",head:!0}).eq("spot_id",parseInt(t));K(G||0)}catch(G){console.error("Error fetching visit count:",G)}},ge=async()=>{if(!a)return alert("Please login!");const G=b;w(!G);try{G?await ae.from("user_favorites").delete().eq("spot_id",parseInt(t)).eq("user_id",a.id):await ae.from("user_favorites").insert({spot_id:parseInt(t),user_id:a.id})}catch(de){console.error("Error toggling favorite:",de),w(G)}},N=async()=>{if(!a)return alert("Please login!");const G=A,de=!G,pe=G?V-1:V+1;z(de),ye(V),K(pe),G||(te(!0),setTimeout(()=>te(!1),600));try{G?await ae.from("visited_spots").delete().eq("spot_id",parseInt(t)).eq("user_id",a.id):await ae.from("visited_spots").insert({spot_id:parseInt(t),user_id:a.id}),window.dispatchEvent(new CustomEvent("visitUpdated",{detail:{userId:a.id,visited:de}}))}catch(ke){console.error("Error toggling visit:",ke),z(G),K(G?V+1:V-1)}},ne=async()=>{if(!a)return alert("Please login to submit a review!");if(!y.trim())return;const{data:G}=await ae.from("user_preferences").select("*").eq("user_id",a.id).maybeSingle();G||await ae.from("user_preferences").insert({user_id:a.id,display_name:a.user_metadata?.full_name||a.email?.split("@")[0]||"User",avatar_url:a.user_metadata?.avatar_url||null,notifications_enabled:!0,notify_new_spots:!0,notify_review_replies:!0,notify_weekly_digest:!1});const{error:de}=await ae.from("reviews").insert({spot_id:parseInt(t),user_id:a.id,comment:y,rating:5});de?console.error("Error adding review:",de):(_(""),ie())},me=()=>{if(!l?.latitude||!l?.longitude){alert("Location coordinates not available for this spot.");return}const G=l.latitude,de=l.longitude,pe=encodeURIComponent(l.name||"Spot"),ke=/iPad|iPhone|iPod/.test(navigator.userAgent),Ge=`/${window.location.pathname.includes("/ml/")?"ml":"en"}/directions/${t}`;ke?(r(Ge),setTimeout(()=>{window.open(`maps://?daddr=${G},${de}&q=${pe}`,"_blank")},100)):(window.open(`https://www.google.com/maps/dir/?api=1&destination=${G},${de}&destination_place_id=${pe}`,"_blank"),setTimeout(()=>{r(Ge)},100))};return S?f.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Wait a moment..."}):Z?f.jsx("div",{style:{padding:"40px",textAlign:"center"},children:Z}):l?f.jsxs("div",{style:{background:"var(--bg-white)",minHeight:"100vh",position:"relative",paddingBottom:"140px"},children:[f.jsxs("div",{style:{height:"45vh",position:"relative",background:"#000"},children:[f.jsx(wS,{images:l.images&&l.images.length?l.images:["https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=900&q=80"]}),f.jsx("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",padding:"6px 12px",borderRadius:"20px",display:"flex",alignItems:"center",gap:"4px",zIndex:5},children:f.jsxs("span",{style:{color:"white",fontSize:"0.75rem",fontWeight:"700"},children:[W(V)," visits"]})}),f.jsx(_e.button,{whileTap:{scale:.9},onClick:()=>r(-1),style:{position:"absolute",top:"24px",left:"20px",background:"white",border:"none",borderRadius:"16px",padding:"12px",boxShadow:"var(--shadow-md)",zIndex:10},children:f.jsx(fs,{size:24,color:"var(--text-main)"})}),f.jsx(_e.button,{whileTap:{scale:.9},onClick:ge,style:{position:"absolute",top:"24px",right:"20px",background:"white",border:"none",borderRadius:"16px",padding:"12px",boxShadow:"var(--shadow-md)",zIndex:10},children:f.jsx(ya,{size:24,fill:b?"var(--primary)":"none",color:b?"var(--primary)":"var(--text-main)"})})]}),f.jsxs(_e.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},style:{background:"white",marginTop:"-40px",borderRadius:"40px 40px 0 0",padding:"30px 20px",position:"relative",boxShadow:"0 -10px 30px rgba(0,0,0,0.05)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[f.jsxs("div",{children:[f.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"900",margin:0,color:"var(--text-main)"},children:l.name}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[f.jsx("span",{style:{background:k===null?"#E5E7EB":k?"rgba(16, 185, 129, 0.12)":"rgba(239, 68, 68, 0.12)",color:k===null?"#4B5563":k?"#0F9F6E":"#B91C1C",padding:"6px 12px",borderRadius:"12px",fontWeight:"800",fontSize:"0.8rem"},children:k===null?"HOURS NOT SET":k?"OPEN NOW":"CLOSED"}),f.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem",fontWeight:"700"},children:[H(l.opening_hours?.open)," - ",H(l.opening_hours?.close)," (Kerala)"]})]})]}),f.jsxs("div",{style:{background:"var(--secondary)",padding:"10px 16px",borderRadius:"16px",display:"flex",alignItems:"center",gap:"6px"},children:[f.jsx(Ru,{size:18,fill:"#FFB800",color:"#FFB800"}),f.jsx("span",{style:{fontWeight:"800",fontSize:"1.1rem"},children:l.rating||"4.5"})]})]}),f.jsx("div",{style:{display:"flex",gap:"10px",marginBottom:"24px"},children:l.tags&&l.tags.map(G=>f.jsxs("span",{style:{background:"var(--secondary)",color:"var(--text-muted)",padding:"6px 14px",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"700"},children:["#",G]},G))}),f.jsx("p",{style:{lineHeight:"1.6",color:"var(--text-main)",fontSize:"1rem",marginBottom:"30px"},children:l.description||"Indulge in an exquisite culinary journey at this magnificent location. Known for its exceptional service and vibrant atmosphere."}),f.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"40px",flexWrap:"wrap"},children:[l.instagram_handle&&f.jsxs("a",{href:`https://instagram.com/${l.instagram_handle}`,style:{flex:"1 1 120px",minWidth:"120px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"12px",background:"linear-gradient(45deg, #f09433 0%, #dc2743 100%)",color:"white",textDecoration:"none",fontWeight:"700",fontSize:"0.85rem"},children:[f.jsx(_S,{size:16})," Instagram"]}),l.whatsapp_number&&f.jsxs("a",{href:`https://wa.me/${l.whatsapp_number}`,style:{flex:"1 1 120px",minWidth:"120px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"12px",background:"#25D366",color:"white",textDecoration:"none",fontWeight:"700",fontSize:"0.85rem"},children:[f.jsx(dh,{size:16})," WhatsApp"]}),f.jsxs(_e.button,{whileTap:{scale:.95},onClick:me,style:{flex:"1 1 120px",minWidth:"120px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"12px",background:"var(--primary)",color:"white",border:"none",textDecoration:"none",fontWeight:"700",cursor:"pointer",fontSize:"0.85rem"},children:[f.jsx(_5,{size:16})," Directions"]})]}),f.jsx("div",{style:{position:"sticky",bottom:"20px",left:0,right:0,zIndex:10,padding:"0 4px",marginBottom:"40px"},children:f.jsxs(_e.button,{whileTap:{scale:.95},onClick:N,style:{width:"100%",padding:"18px",borderRadius:"24px",background:A?"#10B981":"#EF4444",color:"white",border:"none",fontSize:"1.1rem",fontWeight:"900",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",boxShadow:"var(--shadow-lg)"},children:[f.jsx(ti,{size:24}),"VISITED",f.jsx(ju,{mode:"wait",children:fe&&f.jsx(_e.span,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.5,ease:"easeOut"},style:{background:"rgba(255,255,255,0.2)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.9rem"},children:W(V)},V)})]})}),f.jsxs(_e.button,{whileTap:{scale:.95},onClick:()=>P(!0),style:{width:"100%",padding:"16px",borderRadius:"20px",background:"var(--bg-white)",color:"var(--text-main)",border:"2px solid var(--primary)",fontWeight:"800",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"var(--shadow-md)",marginBottom:"40px"},children:[f.jsx(Bg,{size:20}),"Suggest Edits"]}),f.jsxs("div",{style:{marginBottom:"40px"},children:[f.jsxs("h2",{style:{fontSize:"1.4rem",fontWeight:"900",marginBottom:"20px"},children:["Reviews (",h.length,")"]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:h.map(G=>f.jsxs("div",{style:{display:"flex",gap:"12px"},children:[f.jsx("img",{src:G.user?.avatar_url||"https://i.pravatar.cc/40",style:{width:"40px",height:"40px",borderRadius:"50%"}}),f.jsxs("div",{children:[f.jsx("p",{style:{fontWeight:"800",margin:0},children:G.user?.display_name||"Anonymous"}),f.jsx("p",{style:{margin:"4px 0 0 0",color:"var(--text-main)"},children:G.comment})]})]},G.id))}),f.jsxs("div",{style:{marginTop:"24px",display:"flex",gap:"10px"},children:[f.jsx("input",{type:"text",value:y,onChange:G=>_(G.target.value),placeholder:"Add a review...",style:{flex:1,padding:"14px",borderRadius:"16px",border:"2px solid var(--secondary)",outline:"none",fontWeight:"700"}}),f.jsx("button",{onClick:ne,style:{padding:"14px 20px",borderRadius:"16px",background:"var(--primary)",color:"white",border:"none",fontWeight:"800"},children:"Send"})]})]})]}),D&&l&&f.jsx(NL,{spot:l,onClose:()=>P(!1),onSubmit:xe})]}):f.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Spot disappeared..."})},bd=43200,Zx=1440,Gx=Symbol.for("constructDateFrom");function qg(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&Gx in n?n[Gx](t):n instanceof Date?new n.constructor(t):new Date(t)}function ds(n,t){return qg(n,n)}let IL={};function VL(){return IL}function Kx(n){const t=ds(n),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+n-+r}function Wg(n,...t){const r=qg.bind(null,n||t.find(a=>typeof a=="object"));return t.map(r)}function Md(n,t){const r=+ds(n)-+ds(t);return r<0?-1:r>0?1:r}function HL(n){return qg(n,Date.now())}function qL(n,t,r){const[a,l]=Wg(r?.in,n,t),d=a.getFullYear()-l.getFullYear(),h=a.getMonth()-l.getMonth();return d*12+h}function WL(n){return t=>{const a=(n?Math[n]:Math.trunc)(t);return a===0?0:a}}function FL(n,t){return+ds(n)-+ds(t)}function $L(n,t){const r=ds(n);return r.setHours(23,59,59,999),r}function ZL(n,t){const r=ds(n),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function GL(n,t){const r=ds(n);return+$L(r)==+ZL(r)}function KL(n,t,r){const[a,l,d]=Wg(r?.in,n,n,t),h=Md(l,d),g=Math.abs(qL(l,d));if(g<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-h*g);let y=Md(l,d)===-h;GL(a)&&g===1&&Md(a,d)===1&&(y=!1);const _=h*(g-+y);return _===0?0:_}function YL(n,t,r){const a=FL(n,t)/1e3;return WL(r?.roundingMethod)(a)}const XL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JL=(n,t,r)=>{let a;const l=XL[n];return typeof l=="string"?a=l:t===1?a=l.one:a=l.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Wp(n){return(t={})=>{const r=t.width?String(t.width):n.defaultWidth;return n.formats[r]||n.formats[n.defaultWidth]}}const QL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ez={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tz={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nz={date:Wp({formats:QL,defaultWidth:"full"}),time:Wp({formats:ez,defaultWidth:"full"}),dateTime:Wp({formats:tz,defaultWidth:"full"})},iz={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rz=(n,t,r,a)=>iz[n];function Jl(n){return(t,r)=>{const a=r?.context?String(r.context):"standalone";let l;if(a==="formatting"&&n.formattingValues){const h=n.defaultFormattingWidth||n.defaultWidth,g=r?.width?String(r.width):h;l=n.formattingValues[g]||n.formattingValues[h]}else{const h=n.defaultWidth,g=r?.width?String(r.width):n.defaultWidth;l=n.values[g]||n.values[h]}const d=n.argumentCallback?n.argumentCallback(t):t;return l[d]}}const sz={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},az={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},oz={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lz={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},uz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dz=(n,t)=>{const r=Number(n),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},hz={ordinalNumber:dz,era:Jl({values:sz,defaultWidth:"wide"}),quarter:Jl({values:az,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Jl({values:oz,defaultWidth:"wide"}),day:Jl({values:lz,defaultWidth:"wide"}),dayPeriod:Jl({values:uz,defaultWidth:"wide",formattingValues:cz,defaultFormattingWidth:"wide"})};function Ql(n){return(t,r={})=>{const a=r.width,l=a&&n.matchPatterns[a]||n.matchPatterns[n.defaultMatchWidth],d=t.match(l);if(!d)return null;const h=d[0],g=a&&n.parsePatterns[a]||n.parsePatterns[n.defaultParseWidth],y=Array.isArray(g)?pz(g,w=>w.test(h)):fz(g,w=>w.test(h));let _;_=n.valueCallback?n.valueCallback(y):y,_=r.valueCallback?r.valueCallback(_):_;const b=t.slice(h.length);return{value:_,rest:b}}}function fz(n,t){for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&t(n[r]))return r}function pz(n,t){for(let r=0;r<n.length;r++)if(t(n[r]))return r}function mz(n){return(t,r={})=>{const a=t.match(n.matchPattern);if(!a)return null;const l=a[0],d=t.match(n.parsePattern);if(!d)return null;let h=n.valueCallback?n.valueCallback(d[0]):d[0];h=r.valueCallback?r.valueCallback(h):h;const g=t.slice(l.length);return{value:h,rest:g}}}const gz=/^(\d+)(th|st|nd|rd)?/i,yz=/\d+/i,vz={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_z={any:[/^b/i,/^(a|c)/i]},xz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bz={any:[/1/i,/2/i,/3/i,/4/i]},wz={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Sz={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ez={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jz={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Cz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Az={ordinalNumber:mz({matchPattern:gz,parsePattern:yz,valueCallback:n=>parseInt(n,10)}),era:Ql({matchPatterns:vz,defaultMatchWidth:"wide",parsePatterns:_z,defaultParseWidth:"any"}),quarter:Ql({matchPatterns:xz,defaultMatchWidth:"wide",parsePatterns:bz,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ql({matchPatterns:wz,defaultMatchWidth:"wide",parsePatterns:Sz,defaultParseWidth:"any"}),day:Ql({matchPatterns:Tz,defaultMatchWidth:"wide",parsePatterns:Ez,defaultParseWidth:"any"}),dayPeriod:Ql({matchPatterns:jz,defaultMatchWidth:"any",parsePatterns:Cz,defaultParseWidth:"any"})},kz={code:"en-US",formatDistance:JL,formatLong:nz,formatRelative:rz,localize:hz,match:Az,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rz(n,t,r){const a=VL(),l=r?.locale??a.locale??kz,d=2520,h=Md(n,t);if(isNaN(h))throw new RangeError("Invalid time value");const g=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:h}),[y,_]=Wg(r?.in,...h>0?[t,n]:[n,t]),b=YL(_,y),w=(Kx(_)-Kx(y))/1e3,S=Math.round((b-w)/60);let j;if(S<2)return r?.includeSeconds?b<5?l.formatDistance("lessThanXSeconds",5,g):b<10?l.formatDistance("lessThanXSeconds",10,g):b<20?l.formatDistance("lessThanXSeconds",20,g):b<40?l.formatDistance("halfAMinute",0,g):b<60?l.formatDistance("lessThanXMinutes",1,g):l.formatDistance("xMinutes",1,g):S===0?l.formatDistance("lessThanXMinutes",1,g):l.formatDistance("xMinutes",S,g);if(S<45)return l.formatDistance("xMinutes",S,g);if(S<90)return l.formatDistance("aboutXHours",1,g);if(S<Zx){const k=Math.round(S/60);return l.formatDistance("aboutXHours",k,g)}else{if(S<d)return l.formatDistance("xDays",1,g);if(S<bd){const k=Math.round(S/Zx);return l.formatDistance("xDays",k,g)}else if(S<bd*2)return j=Math.round(S/bd),l.formatDistance("aboutXMonths",j,g)}if(j=KL(_,y),j<12){const k=Math.round(S/bd);return l.formatDistance("xMonths",k,g)}else{const k=j%12,C=Math.trunc(j/12);return k<3?l.formatDistance("aboutXYears",C,g):k<9?l.formatDistance("overXYears",C,g):l.formatDistance("almostXYears",C+1,g)}}function AS(n,t){return Rz(n,HL(n),t)}const Oz=({onClose:n,onPostComplete:t})=>{const[r,a]=R.useState("select"),[l,d]=R.useState(null),[h,g]=R.useState(null),[y,_]=R.useState(1),[b,w]=R.useState(0),[S,j]=R.useState(""),[k,C]=R.useState(!1),A=R.useRef(null),z=R.useRef(null),D=R.useRef(null),P=W=>{d(W),g(URL.createObjectURL(W)),a("edit"),_(1),w(0)},Z=W=>{const xe=W.target.files[0];xe&&P(xe)},$=()=>{const W=document.createElement("input");W.type="file",W.accept="image/*",W.capture="camera",W.onchange=xe=>{const Le=xe.target.files[0];Le&&P(Le)},W.click()},V=()=>{_(W=>Math.min(W+.1,3))},K=()=>{_(W=>Math.max(W-.1,.5))},oe=()=>{w(W=>(W+90)%360)},ye=()=>{const W=D.current,xe=W.getContext("2d"),Le=z.current;if(!W||!Le)return;const he=1080;W.width=he,W.height=he,xe.clearRect(0,0,W.width,W.height),xe.save();const H=he/2,re=he/2;xe.translate(H,re),xe.rotate(b*Math.PI/180),xe.scale(y,y);const ie=Math.min(Le.naturalWidth,Le.naturalHeight);xe.drawImage(Le,-ie/2,-ie/2,ie,ie),xe.restore();const Se=W.toDataURL("image/jpeg",.9);Se&&fetch(Se).then(ge=>ge.blob()).then(ge=>{const N=new File([ge],"cropped-image.jpg",{type:"image/jpeg"});d(N),g(URL.createObjectURL(N)),a("caption")})},fe=async()=>{if(!(!l||!S.trim())){C(!0);try{await t(l,S.trim()),n()}catch(W){console.error("Error posting:",W)}finally{C(!1)}}},te=()=>{k||n()};return f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:f.jsxs(_e.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{background:"white",borderRadius:"20px",width:"90%",maxWidth:"400px",maxHeight:"80vh",overflow:"hidden",position:"relative"},children:[f.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid var(--secondary)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:"900"},children:[r==="select"&&"Create Post",r==="edit"&&"Edit Photo",r==="caption"&&"Add Caption"]}),f.jsx("button",{onClick:te,style:{background:"var(--secondary)",border:"none",padding:"8px",borderRadius:"8px",cursor:"pointer"},disabled:k,children:f.jsx(_a,{size:20})})]}),f.jsxs("div",{style:{padding:"20px"},children:[r==="select"&&f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[f.jsxs("div",{style:{height:"200px",border:"2px dashed var(--secondary)",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"var(--secondary)"},children:[f.jsx(Fx,{size:40,color:"var(--primary)"}),f.jsx("p",{style:{margin:"10px 0 0 0",fontWeight:"600",color:"var(--text-muted)"},children:"Choose photo source"})]}),f.jsxs("div",{style:{display:"flex",gap:"12px"},children:[f.jsxs("button",{onClick:()=>A.current?.click(),style:{flex:1,padding:"16px",borderRadius:"12px",background:"var(--primary)",color:"white",border:"none",fontSize:"1rem",fontWeight:"800",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[f.jsx(Fx,{size:20}),"Gallery"]}),f.jsxs("button",{onClick:$,style:{flex:1,padding:"16px",borderRadius:"12px",background:"var(--primary)",color:"white",border:"none",fontSize:"1rem",fontWeight:"800",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[f.jsx(Au,{size:20}),"Camera"]})]}),f.jsx("input",{ref:A,type:"file",accept:"image/*",style:{display:"none"},onChange:Z})]}),r==="edit"&&f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[f.jsx("div",{style:{width:"100%",height:"250px",borderRadius:"12px",overflow:"hidden",border:"2px solid var(--primary)",position:"relative",background:"black"},children:f.jsx("img",{ref:z,src:h,style:{width:"100%",height:"100%",objectFit:"contain",transform:`scale(${y}) rotate(${b}deg)`,transition:"transform 0.3s ease"}})}),f.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[f.jsx("button",{onClick:K,style:{background:"var(--secondary)",border:"none",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"Zoom -"}),f.jsx("button",{onClick:V,style:{background:"var(--secondary)",border:"none",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"Zoom +"}),f.jsxs("button",{onClick:oe,style:{background:"var(--secondary)",border:"none",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[f.jsx(R5,{size:16}),"Rotate"]})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[f.jsx("button",{onClick:()=>a("select"),style:{background:"var(--secondary)",border:"none",padding:"12px 20px",borderRadius:"12px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"Back"}),f.jsxs("button",{onClick:ye,style:{background:"var(--primary)",color:"white",border:"none",padding:"12px 20px",borderRadius:"12px",cursor:"pointer",fontSize:"1rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx(qM,{size:18}),"Confirm"]})]})]}),r==="caption"&&f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[f.jsx("div",{style:{width:"100%",height:"200px",borderRadius:"12px",overflow:"hidden",border:"2px solid var(--secondary)"},children:f.jsx("img",{src:h,style:{width:"100%",height:"100%",objectFit:"cover"}})}),f.jsx("textarea",{placeholder:"Write a caption...",value:S,onChange:W=>j(W.target.value),style:{width:"100%",padding:"16px",borderRadius:"12px",background:"var(--secondary)",border:"none",fontSize:"1rem",fontWeight:"600",minHeight:"100px",outline:"none",resize:"vertical"}}),f.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[f.jsx("button",{onClick:()=>a("edit"),style:{background:"var(--secondary)",border:"none",padding:"12px 20px",borderRadius:"12px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"Back"}),f.jsx("button",{onClick:fe,disabled:k||!S.trim(),style:{background:"var(--primary)",color:"white",border:"none",padding:"12px 20px",borderRadius:"12px",cursor:"pointer",fontSize:"1rem",fontWeight:"800",opacity:k||!S.trim()?.6:1},children:k?"Sharing...":"Share Post"})]})]})]}),f.jsx("canvas",{ref:D,style:{display:"none"}})]})})},Mz=()=>{const{user:n}=Rt(),[t,r]=R.useState([]),[a,l]=R.useState(!0),[d,h]=R.useState(!1),[g,y]=R.useState(null),[_,b]=R.useState(null),w=async()=>{console.log("Fetching posts..."),l(!0);try{const{data:k,error:C}=await ae.from("community_posts").select("*").order("created_at",{ascending:!1});if(C){console.error("Error fetching posts:",C),l(!1);return}if(console.log("Raw posts data:",k),k&&k.length>0){const A=[...new Set(k.map(fe=>fe.user_id))];console.log("User IDs to fetch:",A);const{data:z,error:D}=await ae.from("user_preferences").select("user_id, username, display_name, avatar_url").in("user_id",A);D&&console.error("Error fetching users:",D),console.log("Users data:",z);const P={};z?.forEach(fe=>P[fe.user_id]=fe);const Z=k.map(fe=>fe.id),{data:$,error:V}=await ae.from("post_likes").select("post_id, user_id").in("post_id",Z);V&&console.error("Error fetching likes:",V),console.log("Likes data:",$);const K={},oe={};$?.forEach(fe=>{K[fe.post_id]=(K[fe.post_id]||0)+1,fe.user_id===n?.id&&(oe[fe.post_id]=!0)});const ye=k.map(fe=>({...fe,likes_count:K[fe.id]||0,author:P[fe.user_id]||{display_name:"Foodie",username:null},isLikedByUser:!!oe[fe.id]}));console.log("Processed posts:",ye),r(ye)}else console.log("No posts found"),r([])}catch(k){console.error("Error in fetchPosts:",k)}finally{l(!1)}};R.useEffect(()=>{w();const k=()=>{w()};window.addEventListener("userProfileUpdated",k);const C=ae.channel("user_preferences_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_preferences"},A=>{w()}).subscribe();return()=>{window.removeEventListener("userProfileUpdated",k),ae.removeChannel(C)}},[n]);const S=async(k,C)=>{console.log("Starting post creation...",{imageFile:k.name,caption:C});try{const{data:A,error:z}=await ae.from("user_preferences").select("*").eq("user_id",n.id).maybeSingle();if(z&&console.error("Error checking user preferences:",z),console.log("User preferences check:",A),!A){console.log("Creating user preferences...");const{data:K,error:oe}=await ae.from("user_preferences").insert({user_id:n.id,display_name:n.user_metadata?.full_name||n.email?.split("@")[0]||"User",avatar_url:n.user_metadata?.avatar_url||null,notifications_enabled:!0,notify_new_spots:!0,notify_review_replies:!0,notify_weekly_digest:!1}).select().single();if(oe)throw console.error("Error creating user preferences:",oe),oe;console.log("User preferences created:",K)}console.log("Uploading image...");const D=`${n.id}-${Date.now()}.${k.name.split(".").pop()}`,{error:P}=await ae.storage.from("food-images").upload(`community/${D}`,k);if(P)throw console.error("Image upload error:",P),P;const{data:{publicUrl:Z}}=ae.storage.from("food-images").getPublicUrl(`community/${D}`);console.log("Image uploaded successfully:",Z),console.log("Creating post in database...");const{data:$,error:V}=await ae.from("community_posts").insert({user_id:n.id,image_url:Z,caption:C}).select().single();if(V)throw console.error("Post creation error:",V),V;console.log("Post created successfully:",$),y({message:"Shared with community! ",type:"success"}),console.log("Refreshing posts..."),await w()}catch(A){console.error("Complete post creation error:",A),y({message:"Failed to share post: "+A.message,type:"error"})}},j=async(k,C)=>{if(!n)return;const{data:A}=await ae.from("post_likes").select("*").eq("post_id",k).eq("user_id",n.id).maybeSingle();A?(await ae.from("post_likes").delete().eq("id",A.id),r(t.map(z=>z.id===k?{...z,likes_count:Math.max(0,z.likes_count-1),isLikedByUser:!1}:z))):(await ae.from("post_likes").insert({post_id:k,user_id:n.id}),r(t.map(z=>z.id===k?{...z,likes_count:(z.likes_count||0)+1,isLikedByUser:!0}:z)))};return f.jsxs("div",{style:{paddingBottom:"120px",background:"var(--secondary)",minHeight:"100vh"},children:[g&&f.jsx(Ou,{message:g.message,type:g.type,onClose:()=>y(null)}),f.jsxs("div",{style:{padding:"24px 20px",background:"white",borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"var(--shadow-sm)"},children:[f.jsxs("div",{children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"900",color:"var(--text-main)",margin:0},children:"Community"}),f.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",fontWeight:"600",margin:0},children:"Discover Kerala's tastes"})]}),f.jsx(_e.button,{whileTap:{scale:.9},onClick:()=>h(!0),style:{background:"var(--primary)",color:"white",border:"none",padding:"12px",borderRadius:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx(Mo,{size:24})})]}),f.jsx("div",{className:"container",style:{padding:"20px",maxWidth:"500px",margin:"0 auto"},children:a?f.jsx("div",{style:{textAlign:"center",padding:"40px"},children:f.jsx(uh,{className:"animate-spin",color:"var(--primary)"})}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:t.map((k,C)=>f.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.1},style:{background:"white",borderRadius:"32px",overflow:"hidden",boxShadow:"var(--shadow-md)"},children:[f.jsxs("div",{style:{padding:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"14px",background:"var(--secondary)",overflow:"hidden"},children:k.author.avatar_url?f.jsx("img",{src:k.author.avatar_url,style:{width:"100%",height:"100%",objectFit:"cover"}}):f.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx(vr,{size:20,color:"var(--text-muted)"})})}),f.jsxs("div",{children:[f.jsx("div",{style:{fontWeight:"800",fontSize:"0.95rem"},children:k.author.username||k.author.display_name}),f.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontWeight:"600"},children:AS(new Date(k.created_at),{addSuffix:!0})})]})]}),f.jsx("div",{style:{position:"relative",width:"100%",paddingTop:"100%"},children:f.jsx("img",{src:k.image_url,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})}),f.jsxs("div",{style:{padding:"20px"},children:[f.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"12px"},children:[f.jsx(_e.div,{whileTap:{scale:.8},onClick:()=>j(k.id,k.likes_count),style:{cursor:"pointer"},children:f.jsx(ya,{size:26,color:"var(--primary)",fill:k.isLikedByUser?"var(--primary)":"none"})}),f.jsx(_e.div,{whileTap:{scale:.8},onClick:()=>b(k),style:{cursor:"pointer"},children:f.jsx(dh,{size:26,color:"var(--text-main)"})})]}),f.jsxs("div",{style:{fontWeight:"850",fontSize:"0.9rem",marginBottom:"8px"},children:[k.likes_count||0," likes"]}),f.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.5",color:"var(--text-main)"},children:[f.jsx("span",{style:{fontWeight:"900",marginRight:"6px"},children:k.author.username||k.author.display_name}),k.caption]})]})]},k.id))})}),_&&f.jsx(Lz,{post:_,onClose:()=>b(null)}),f.jsx(ju,{children:d&&f.jsx(Oz,{onClose:()=>h(!1),onPostComplete:S})})]})},Lz=({post:n,onClose:t})=>{const{user:r}=Rt(),[a,l]=R.useState([]),[d,h]=R.useState(""),[g,y]=R.useState(!0),_=async()=>{y(!0);const{data:w}=await ae.from("post_comments").select("*").eq("post_id",n.id).order("created_at",{ascending:!1});if(w){const S=[...new Set(w.map(C=>C.user_id))],{data:j}=await ae.from("user_preferences").select("user_id, display_name, avatar_url").in("user_id",S),k={};j?.forEach(C=>k[C.user_id]=C),l(w.map(C=>({...C,user:k[C.user_id]||{display_name:"User",avatar_url:null}})))}else l([]);y(!1)};R.useEffect(()=>{_();const w=()=>{_()};window.addEventListener("userProfileUpdated",w);const S=ae.channel("user_preferences_changes_comments").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_preferences"},j=>{_()}).subscribe();return()=>{window.removeEventListener("userProfileUpdated",w),ae.removeChannel(S)}},[n.id]);const b=async()=>{if(!d.trim()||!r)return;const{data:w}=await ae.from("user_preferences").select("*").eq("user_id",r.id).maybeSingle();w||await ae.from("user_preferences").insert({user_id:r.id,display_name:r.user_metadata?.full_name||r.email?.split("@")[0]||"User",avatar_url:r.user_metadata?.avatar_url||null,notifications_enabled:!0,notify_new_spots:!0,notify_review_replies:!0,notify_weekly_digest:!1}),await ae.from("post_comments").insert({post_id:n.id,user_id:r.id,comment:d.trim()}),h(""),_()};return f.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",zIndex:1100,display:"flex",alignItems:"flex-end"},onClick:t,children:f.jsxs(_e.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:{background:"white",width:"100%",borderTopLeftRadius:"40px",borderTopRightRadius:"40px",padding:"24px",maxHeight:"80vh",overflowY:"auto"},onClick:w=>w.stopPropagation(),children:[f.jsx("h3",{style:{fontSize:"1.4rem",fontWeight:"900",margin:"0 0 24px 0",textAlign:"center"},children:"Comments"}),g?f.jsx(uh,{className:"animate-spin"}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginBottom:"24px"},children:a.map(w=>f.jsxs("div",{style:{display:"flex",gap:"12px"},children:[f.jsx("img",{src:w.user?.avatar_url||"https://i.pravatar.cc/40",style:{width:"40px",height:"40px",borderRadius:"14px"}}),f.jsxs("div",{children:[f.jsx("span",{style:{fontWeight:"800"},children:w.user?.display_name||"User"}),f.jsx("p",{style:{margin:"2px 0 0 0"},children:w.comment})]})]},w.id))}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("input",{type:"text",value:d,onChange:w=>h(w.target.value),placeholder:"Add a comment...",style:{flex:1,padding:"14px",borderRadius:"16px",border:"2px solid var(--secondary)",outline:"none",fontWeight:"700"}}),f.jsx("button",{onClick:b,style:{padding:"14px 20px",borderRadius:"16px",background:"var(--primary)",color:"white",border:"none",fontWeight:"800"},children:"Send"})]})]})})},zz=({lang:n})=>{const{id:t}=Hm(),r=wt(),{user:a}=Rt(),[l,d]=R.useState(1),[h,g]=R.useState(!0),[y,_]=R.useState(!1),[b,w]=R.useState(!1),[S,j]=R.useState(null),[k,C]=R.useState({name:"",category:"",price:1,location_text:"",latitude:null,longitude:null,description:"",images:[]});R.useEffect(()=>{t&&A()},[t]);const A=async()=>{g(!0);const{data:$,error:V}=await ae.from("spots").select("*").eq("id",t).single();if(V){P("Failed to load spot data.","error"),g(!1);return}C({name:$.name,category:$.category||"Cafe",price:$.price_level||1,location_text:$.location_text,latitude:$.latitude,longitude:$.longitude,description:$.description||"",images:$.images||[]}),g(!1)},z=()=>d($=>$+1),D=()=>d($=>$-1),P=($,V="success")=>{j({message:$,type:V})},Z=async $=>{if($.preventDefault(),!a)return P("Please login first","error");g(!0);try{const{error:V}=await ae.from("spot_edits").insert([{spot_id:t,user_id:a.id,data:k,status:"pending"}]);if(V)throw V;P("Edit Suggestion Submitted! Admin will review.","success"),setTimeout(()=>r(`/${n}/home`),2e3)}catch(V){console.error(V),P("Failed to submit edit.","error"),g(!1)}};return h&&l===1?f.jsx("div",{style:{padding:"4rem",textAlign:"center",color:"white"},children:"Loading spot details..."}):f.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",paddingBottom:"100px"},children:[S&&f.jsx(Ou,{message:S.message,type:S.type,onClose:()=>j(null)}),f.jsx(SS,{isOpen:b,onClose:()=>w(!1),onSelectLocation:($,V)=>C({...k,latitude:$,longitude:V,location_text:`${$.toFixed(4)}, ${V.toFixed(4)}`})}),f.jsxs("div",{className:"container",style:{padding:"2rem 1rem",maxWidth:"600px",margin:"0 auto"},children:[f.jsxs("button",{onClick:()=>r(-1),style:{marginBottom:"1.5rem",background:"rgba(255,255,255,0.1)",color:"white",border:"none",padding:"8px 16px",borderRadius:"20px",cursor:"pointer"},children:[f.jsx(ku,{size:20,style:{verticalAlign:"middle"}})," Back"]}),f.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem",color:"white"},children:[f.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"800"},children:"Suggest Changes "}),f.jsxs("p",{style:{opacity:.8},children:["Help keep ",k.name," info up to date"]})]}),f.jsxs("form",{onSubmit:Z,className:"glass-card",style:{padding:"2rem",background:"rgba(255,255,255,0.05)",backdropFilter:"blur(10px)",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.1)",color:"white"},children:[l===1&&f.jsxs("div",{className:"animate-fade-in",children:[f.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.1rem"},children:"Step 1: Basic Info"}),f.jsx("label",{style:{display:"block",marginBottom:"8px",opacity:.8},children:"Spot Name"}),f.jsx("input",{type:"text",value:k.name,onChange:$=>C({...k,name:$.target.value}),style:{width:"100%",padding:"14px",borderRadius:"12px",border:"none",background:"rgba(255,255,255,0.1)",color:"white",marginBottom:"1.5rem"}}),f.jsx("label",{style:{display:"block",marginBottom:"8px",opacity:.8},children:"Description"}),f.jsx("textarea",{value:k.description,onChange:$=>C({...k,description:$.target.value}),style:{width:"100%",padding:"14px",borderRadius:"12px",border:"none",background:"rgba(255,255,255,0.1)",color:"white",minHeight:"120px"}}),f.jsxs("button",{type:"button",onClick:z,style:{width:"100%",marginTop:"2rem",background:"linear-gradient(135deg, #6366f1 0%, #4338ca 100%)",color:"white",padding:"16px",borderRadius:"16px",border:"none",fontWeight:"800",cursor:"pointer"},children:["Next Step ",f.jsx(ss,{size:18})]})]}),l===2&&f.jsxs("div",{className:"animate-fade-in",children:[f.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.1rem"},children:"Step 2: Location"}),f.jsxs("button",{type:"button",onClick:()=>w(!0),style:{width:"100%",padding:"14px",background:"rgba(255,255,255,0.1)",color:"white",border:"2px solid rgba(255,255,255,0.2)",borderRadius:"12px",cursor:"pointer",marginBottom:"1rem",fontWeight:"700"},children:[f.jsx(ch,{size:18,style:{marginRight:"8px"}})," Update Map Pin"]}),f.jsx("input",{type:"text",placeholder:"Address",value:k.location_text,onChange:$=>C({...k,location_text:$.target.value}),style:{width:"100%",padding:"14px",borderRadius:"12px",border:"none",background:"rgba(255,255,255,0.1)",color:"white",marginBottom:"1.5rem"}}),f.jsx("label",{style:{display:"block",marginBottom:"8px",opacity:.8},children:"Price Level"}),f.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginBottom:"1.5rem"},children:[1,2,3].map($=>f.jsx("button",{type:"button",onClick:()=>C({...k,price:$}),style:{width:"60px",height:"60px",borderRadius:"20px",background:k.price===$?"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)":"rgba(255,255,255,0.1)",color:"white",border:k.price===$?"none":"2px solid rgba(255,255,255,0.2)",fontWeight:"800",fontSize:"1.2rem",cursor:"pointer",transition:"all 0.3s ease"},children:"".repeat($)},$))}),f.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[f.jsx("button",{type:"button",onClick:D,style:{flex:1,padding:"16px",borderRadius:"16px",background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"white",cursor:"pointer"},children:"Back"}),f.jsx("button",{type:"submit",disabled:h,style:{flex:2,padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",fontWeight:"800",cursor:"pointer"},children:h?"Submitting...":"Submit Suggestion "})]})]})]})]})]})},Pz=({lang:n})=>{const{user:t}=Rt(),r=wt(),[a,l]=R.useState([]),[d,h]=R.useState(!0);R.useEffect(()=>{t&&g()},[t]);const g=async()=>{h(!0);const{data:y}=await ae.from("user_favorites").select("spot_id").eq("user_id",t.id);if(y&&y.length>0){const _=y.map(w=>w.spot_id),{data:b}=await ae.from("spots").select("*").in("id",_);l(b||[])}h(!1)};return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--secondary)",paddingBottom:"120px"},children:[f.jsxs("div",{style:{height:"180px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[f.jsx("button",{onClick:()=>r(-1),style:{position:"absolute",left:"20px",top:"30px",background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white",cursor:"pointer"},children:f.jsx(fs,{size:24})}),f.jsx(ya,{size:48,color:"white",fill:"white",style:{marginBottom:"8px"}}),f.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.6rem",margin:0},children:"My Favorites"}),f.jsx("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",fontWeight:"600"},children:"Your saved spots"})]}),f.jsx("div",{className:"container",style:{padding:"20px",marginTop:"-30px"},children:d?f.jsx(xa,{message:"Loading your favorites..."}):a.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[f.jsx(ya,{size:64,color:"var(--text-muted)",style:{marginBottom:"20px",opacity:.3}}),f.jsx("h3",{style:{color:"var(--text-main)",fontWeight:"800",marginBottom:"8px"},children:"No favorites yet"}),f.jsx("p",{style:{color:"var(--text-muted)"},children:"Start exploring and save your favorite spots!"})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:a.map(y=>f.jsx(fh,{spot:y},y.id))})})]})},Dz=({lang:n})=>{const t=wt(),r=[{icon:Bm,title:"Information We Collect",content:"We collect information you provide directly to us, including your name, email address, profile information, and content you post on Chai.in. We also collect usage data to improve our services."},{icon:o5,title:"How We Use Your Information",content:"Your information is used to provide and improve our services, personalize your experience, communicate with you, and ensure the security of our platform. We never sell your personal data to third parties."},{icon:yS,title:"Information Sharing",content:"We only share your information with your consent, to comply with legal obligations, or to protect our rights. Your posts and reviews are visible to other users as part of the community experience."},{icon:J5,title:"Your Rights",content:"You have the right to access, update, or delete your personal information at any time. You can manage your privacy settings in your account preferences."},{icon:Dg,title:"Data Security",content:"We implement industry-standard security measures to protect your data. All sensitive information is encrypted, and we regularly update our security practices to ensure your safety."}];return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--secondary)",paddingBottom:"120px"},children:[f.jsxs("div",{style:{height:"180px",background:"linear-gradient(135deg, var(--primary) 0%, #FF6B6B 100%)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[f.jsx("button",{onClick:()=>t(-1),style:{position:"absolute",left:"20px",top:"30px",background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white",cursor:"pointer"},children:f.jsx(fs,{size:24})}),f.jsx(Bm,{size:48,color:"white",style:{marginBottom:"8px"}}),f.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.6rem",margin:0},children:"Privacy Policy"}),f.jsx("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",fontWeight:"600"},children:"Your privacy matters to us"})]}),f.jsxs("div",{style:{padding:"30px 20px",maxWidth:"600px",margin:"0 auto"},children:[f.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{background:"white",padding:"24px",borderRadius:"24px",marginBottom:"20px",boxShadow:"var(--shadow-md)"},children:[f.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:"900",color:"var(--text-main)",marginBottom:"12px"},children:"Welcome to Chai.in"}),f.jsx("p",{style:{fontSize:"0.95rem",color:"var(--text-muted)",lineHeight:"1.6",margin:0},children:"At Chai.in, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, and safeguard your data when you use our platform to discover and share Kerala's best food spots."}),f.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginTop:"12px",fontStyle:"italic"},children:"Last updated: January 2026"})]}),r.map((a,l)=>f.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},style:{background:"white",padding:"20px",borderRadius:"24px",marginBottom:"16px",boxShadow:"var(--shadow-sm)"},children:f.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[f.jsx("div",{style:{background:"rgba(239, 42, 57, 0.1)",padding:"12px",borderRadius:"16px",flexShrink:0},children:f.jsx(a.icon,{size:24,color:"var(--primary)"})}),f.jsxs("div",{style:{flex:1},children:[f.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:"800",color:"var(--text-main)",marginBottom:"8px"},children:a.title}),f.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)",lineHeight:"1.6",margin:0},children:a.content})]})]})},l)),f.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},style:{background:"linear-gradient(135deg, var(--primary) 0%, #FF6B6B 100%)",padding:"24px",borderRadius:"24px",marginTop:"24px",textAlign:"center"},children:[f.jsx("h3",{style:{color:"white",fontWeight:"900",fontSize:"1.1rem",marginBottom:"8px"},children:"Questions About Privacy?"}),f.jsx("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"0.9rem",marginBottom:"16px"},children:"If you have any questions or concerns about our privacy practices, please don't hesitate to contact us."}),f.jsx("button",{onClick:()=>t(`/${n}/contact-admin`),style:{background:"white",color:"var(--primary)",border:"none",padding:"12px 24px",borderRadius:"16px",fontWeight:"800",fontSize:"0.95rem",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:"Contact Admin"})]})]})]})},Bz=({lang:n})=>{const t=wt(),[r,a]=R.useState(""),l=[{icon:Yd,label:"WhatsApp",value:"+91 9846170136",link:"https://wa.me/919846170136",color:"#25D366",action:"Chat on WhatsApp"},{icon:_S,label:"Instagram",value:"@sinn.a.an",link:"https://instagram.com/sinn.a.an",color:"#E4405F",action:"Follow on Instagram"},{icon:d5,label:"Email",value:"msinankavala786@gmail.com",link:"mailto:msinankavala786@gmail.com",color:"#EA4335",action:"Send Email"}],d=(h,g)=>{navigator.clipboard.writeText(h),a(g),setTimeout(()=>a(""),2e3)};return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--secondary)",paddingBottom:"120px"},children:[f.jsxs("div",{style:{height:"180px",background:"linear-gradient(135deg, var(--primary) 0%, #FF6B6B 100%)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[f.jsx("button",{onClick:()=>t(-1),style:{position:"absolute",left:"20px",top:"30px",background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white",cursor:"pointer"},children:f.jsx(fs,{size:24})}),f.jsx(dh,{size:48,color:"white",style:{marginBottom:"8px"}}),f.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.6rem",margin:0},children:"Contact Admin"}),f.jsx("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",fontWeight:"600"},children:"We're here to help!"})]}),f.jsxs("div",{style:{padding:"30px 20px",maxWidth:"600px",margin:"0 auto"},children:[f.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{background:"white",padding:"24px",borderRadius:"24px",marginBottom:"24px",boxShadow:"var(--shadow-md)",textAlign:"center"},children:[f.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:"900",color:"var(--text-main)",marginBottom:"12px"},children:"Get in Touch"}),f.jsx("p",{style:{fontSize:"0.95rem",color:"var(--text-muted)",lineHeight:"1.6",margin:0},children:"Have questions, suggestions, or need help? Reach out to our admin team through any of the channels below. We typically respond within 24 hours!"})]}),l.map((h,g)=>f.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.1},style:{background:"white",padding:"20px",borderRadius:"24px",marginBottom:"16px",boxShadow:"var(--shadow-sm)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[f.jsx("div",{style:{background:`${h.color}15`,padding:"12px",borderRadius:"16px"},children:f.jsx(h.icon,{size:24,color:h.color})}),f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",fontWeight:"600"},children:h.label}),f.jsx("div",{style:{fontSize:"1rem",fontWeight:"800",color:"var(--text-main)"},children:h.value})]})]}),f.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.jsxs("a",{href:h.link,target:"_blank",rel:"noopener noreferrer",style:{flex:1,background:h.color,color:"white",border:"none",padding:"12px",borderRadius:"14px",fontWeight:"800",fontSize:"0.9rem",cursor:"pointer",textAlign:"center",textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[f.jsx(bS,{size:16}),h.action]}),f.jsx("button",{onClick:()=>d(h.value,h.label),style:{background:"var(--secondary)",color:"var(--text-main)",border:"none",padding:"12px 16px",borderRadius:"14px",fontWeight:"700",fontSize:"0.85rem",cursor:"pointer"},children:r===h.label?" Copied!":"Copy"})]})]},g)),f.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},style:{background:"rgba(239, 42, 57, 0.05)",padding:"20px",borderRadius:"20px",marginTop:"24px",border:"2px dashed var(--primary)"},children:[f.jsx("h3",{style:{fontSize:"1rem",fontWeight:"800",color:"var(--primary)",marginBottom:"8px"},children:" Quick Tips"}),f.jsxs("ul",{style:{fontSize:"0.9rem",color:"var(--text-muted)",lineHeight:"1.8",margin:0,paddingLeft:"20px"},children:[f.jsx("li",{children:"For spot verification status, message us on WhatsApp"}),f.jsx("li",{children:"Report inappropriate content via email"}),f.jsx("li",{children:"Follow us on Instagram for updates and food stories"}),f.jsx("li",{children:"Business inquiries? Email is the best way to reach us"})]})]})]})]})},Nz=({lang:n})=>{const{id:t}=Hm(),r=wt(),{user:a}=Rt(),[l,d]=R.useState(null),[h,g]=R.useState([]),[y,_]=R.useState(""),[b,w]=R.useState(!0);R.useEffect(()=>{S(),j();const A=()=>{j()};return window.addEventListener("userProfileUpdated",A),()=>{window.removeEventListener("userProfileUpdated",A)}},[t]);const S=async()=>{try{const{data:A,error:z}=await ae.from("spots").select("*").eq("id",parseInt(t)).single();if(z)throw z;d(A)}catch(A){console.error("Error fetching spot:",A)}finally{w(!1)}},j=async()=>{const{data:A,error:z}=await ae.from("reviews").select("*").eq("spot_id",t).order("created_at",{ascending:!1});if(z){console.error("Error loading reviews:",z),g([]);return}if(A){const D=[...new Set(A.map($=>$.user_id))],{data:P}=await ae.from("user_preferences").select("user_id, display_name, avatar_url").in("user_id",D),Z={};P?.forEach($=>Z[$.user_id]=$),g(A.map($=>({...$,user:Z[$.user_id]||{display_name:"User"}})))}else g([])},k=async()=>{if(!a)return alert("Please login to submit a review!");if(!y.trim())return;const{error:A}=await ae.from("reviews").insert({spot_id:parseInt(t),user_id:a.id,comment:y,rating:5});A?console.error("Error adding review:",A):(_(""),j())},C=()=>{sessionStorage.setItem("refreshSpotDetail","true"),r(`/${n}/spot/${t}`)};return b?f.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-white)"},children:f.jsxs("div",{style:{textAlign:"center"},children:[f.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--primary)",borderTop:"4px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),f.jsx("p",{style:{color:"var(--text-main)",fontWeight:"600"},children:"Loading directions..."})]})}):l?f.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-white)",position:"relative"},children:[f.jsx("div",{style:{background:"var(--primary)",padding:"20px",display:"flex",alignItems:"center",gap:"16px"},children:f.jsxs(_e.button,{whileTap:{scale:.9},onClick:C,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"12px",padding:"10px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx(fs,{size:20,color:"white"}),f.jsx("span",{style:{color:"white",fontWeight:"600",fontSize:"0.9rem"},children:"Go Back"})]})}),f.jsx("div",{style:{padding:"40px 20px",textAlign:"center",maxWidth:"600px",margin:"0 auto"},children:f.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[f.jsxs("div",{style:{background:"var(--secondary)",padding:"30px",borderRadius:"20px",marginBottom:"30px"},children:[f.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"900",margin:"0 0 16px 0",color:"var(--text-main)"},children:l.name}),f.jsx("p",{style:{color:"var(--text-muted)",margin:"0 0 20px 0",fontSize:"1rem"},children:l.location_text||"Kerala, India"})]}),f.jsxs("div",{style:{background:"var(--secondary)",padding:"20px",borderRadius:"16px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"var(--text-main)",fontSize:"1.1rem",fontWeight:"800"},children:" Spot Information"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",textAlign:"left"},children:[l.opening_hours?.open&&f.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[f.jsx("span",{style:{color:"var(--text-muted)"},children:"Hours:"}),f.jsxs("span",{style:{fontWeight:"600"},children:[l.opening_hours.open," - ",l.opening_hours.close]})]}),l.rating&&f.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[f.jsx("span",{style:{color:"var(--text-muted)"},children:"Rating:"}),f.jsxs("span",{style:{fontWeight:"600"},children:[" ",l.rating]})]}),l.tags&&l.tags.length>0&&f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-muted)"},children:"Tags:"}),f.jsx("div",{style:{marginTop:"8px",display:"flex",gap:"8px",flexWrap:"wrap"},children:l.tags.map(A=>f.jsxs("span",{style:{background:"var(--primary)",color:"white",padding:"4px 8px",borderRadius:"8px",fontSize:"0.8rem",fontWeight:"600"},children:["#",A]},A))})]})]})]}),f.jsxs("div",{style:{marginBottom:"40px"},children:[f.jsxs("h2",{style:{fontSize:"1.4rem",fontWeight:"900",marginBottom:"20px"},children:["Reviews (",h.length,")"]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:h.map(A=>f.jsxs("div",{style:{display:"flex",gap:"12px"},children:[f.jsx("img",{src:A.user?.avatar_url||"https://i.pravatar.cc/40",style:{width:"40px",height:"40px",borderRadius:"50%"}}),f.jsxs("div",{children:[f.jsx("p",{style:{fontWeight:"800",margin:0},children:A.user?.display_name||"Anonymous"}),f.jsx("p",{style:{margin:"4px 0 0 0",color:"var(--text-main)"},children:A.comment})]})]},A.id))}),f.jsxs("div",{style:{marginTop:"24px",display:"flex",gap:"10px"},children:[f.jsx("input",{type:"text",value:y,onChange:A=>_(A.target.value),placeholder:"Add a review...",style:{flex:1,padding:"14px",borderRadius:"16px",border:"2px solid var(--secondary)",outline:"none",fontWeight:"700"}}),f.jsx("button",{onClick:k,style:{padding:"14px 20px",borderRadius:"16px",background:"var(--primary)",color:"white",border:"none",fontWeight:"800"},children:"Send"})]})]})]})}),f.jsx("style",{jsx:!0,children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `})]}):f.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-white)"},children:f.jsxs("div",{style:{textAlign:"center"},children:[f.jsx(ti,{size:48,color:"var(--primary)",style:{marginBottom:"20px"}}),f.jsx("h2",{style:{color:"var(--text-main)",margin:0},children:"Spot not found"})]})})},Uz=({lang:n})=>{const{user:t}=Rt(),r=wt(),[a,l]=R.useState(!0),[d,h]=R.useState([]);R.useEffect(()=>{t&&g()},[t]);const g=async()=>{l(!0);try{const{data:y}=await ae.from("user_favorites").select("spot_id").eq("user_id",t.id);if(y&&y.length>0){const _=y.map(w=>w.spot_id),{data:b}=await ae.from("spots").select("*").in("id",_);h(b||[])}else h([])}catch(y){console.error("Error fetching favorites:",y)}finally{l(!1)}};return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-white)",paddingBottom:"120px"},children:[f.jsxs("div",{style:{height:"140px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative"},children:[f.jsx("button",{onClick:()=>r(`/${n}/profile`),style:{background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white"},children:f.jsx(fs,{size:24})}),f.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.4rem",margin:0},children:"My Favorites"}),f.jsx("div",{style:{width:"44px"}})]}),f.jsx("div",{className:"container",style:{padding:"0 20px",marginTop:"-40px"},children:a?f.jsx("div",{style:{textAlign:"center",padding:"40px"},children:f.jsx(xa,{message:"Loading favorites..."})}):d.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-muted)"},children:[f.jsx(ya,{size:48,style:{marginBottom:"12px",opacity:.3}}),f.jsx("p",{children:"No favorites yet"}),f.jsx("p",{style:{fontSize:"0.9rem",marginTop:"8px"},children:"Start exploring and add spots to your favorites!"})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:d.map(y=>f.jsx(fh,{spot:y},y.id))})})]})},Iz=({lang:n})=>{const{user:t}=Rt(),r=wt(),[a,l]=R.useState(!0),[d,h]=R.useState([]);R.useEffect(()=>{t&&g()},[t]);const g=async()=>{l(!0);try{const{data:y}=await ae.from("reviews").select("*, spots(name)").eq("user_id",t.id).order("created_at",{ascending:!1});if(y){const _=[...new Set(y.map(S=>S.user_id))],{data:b}=await ae.from("user_preferences").select("user_id, display_name, avatar_url").in("user_id",_),w={};b?.forEach(S=>w[S.user_id]=S),h(y.map(S=>({...S,user:w[S.user_id]||{display_name:"User"}})))}else h([])}catch(y){console.error("Error fetching reviews:",y)}finally{l(!1)}};return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-white)",paddingBottom:"120px"},children:[f.jsxs("div",{style:{height:"140px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative"},children:[f.jsx("button",{onClick:()=>r(`/${n}/profile`),style:{background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white"},children:f.jsx(fs,{size:24})}),f.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.4rem",margin:0},children:"My Reviews"}),f.jsx("div",{style:{width:"44px"}})]}),f.jsx("div",{className:"container",style:{padding:"0 20px",marginTop:"-40px"},children:a?f.jsx("div",{style:{textAlign:"center",padding:"40px"},children:f.jsx(xa,{message:"Loading reviews..."})}):d.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-muted)"},children:[f.jsx(xS,{size:48,style:{marginBottom:"12px",opacity:.3}}),f.jsx("p",{children:"No reviews yet"}),f.jsx("p",{style:{fontSize:"0.9rem",marginTop:"8px"},children:"Start reviewing spots to share your thoughts!"})]}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:d.map(y=>f.jsxs("div",{style:{background:"white",padding:"16px",borderRadius:"20px",boxShadow:"var(--shadow-sm)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[f.jsx("img",{src:y.user?.avatar_url||"https://i.pravatar.cc/40",style:{width:"40px",height:"40px",borderRadius:"50%"}}),f.jsxs("div",{children:[f.jsx("p",{style:{fontWeight:"800",margin:0},children:y.user?.display_name||"Anonymous"}),f.jsxs("p",{style:{margin:"4px 0 0 0",color:"var(--text-muted)",fontSize:"0.85rem"},children:["at ",y.spots?.name]})]})]}),f.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"8px"},children:[...Array(5)].map((_,b)=>f.jsx(Ru,{size:14,fill:b<y.rating?"#FFB800":"none",color:b<y.rating?"#FFB800":"#ddd"},b))}),f.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-main)",marginBottom:"8px"},children:y.comment})]},y.id))})})]})},Vz=({lang:n})=>{const{user:t}=Rt(),r=wt(),[a,l]=R.useState(!0),[d,h]=R.useState([]);R.useEffect(()=>{t&&g()},[t]);const g=async()=>{l(!0);try{const{data:y}=await ae.from("spots").select("*").eq("created_by",t.id).order("created_at",{ascending:!1});h(y||[])}catch(y){console.error("Error fetching added spots:",y)}finally{l(!1)}};return f.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-white)",paddingBottom:"120px"},children:[f.jsxs("div",{style:{height:"140px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative"},children:[f.jsx("button",{onClick:()=>r(`/${n}/profile`),style:{background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white"},children:f.jsx(fs,{size:24})}),f.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.4rem",margin:0},children:"My Added Spots"}),f.jsx("div",{style:{width:"44px"}})]}),f.jsx("div",{className:"container",style:{padding:"0 20px",marginTop:"-40px"},children:a?f.jsx("div",{style:{textAlign:"center",padding:"40px"},children:f.jsx(xa,{message:"Loading added spots..."})}):d.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-muted)"},children:[f.jsx(Mo,{size:48,style:{marginBottom:"12px",opacity:.3}}),f.jsx("p",{children:"No spots added yet"}),f.jsx("p",{style:{fontSize:"0.9rem",marginTop:"8px"},children:"Start adding spots to contribute to the community!"})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:d.map(y=>f.jsx(fh,{spot:y},y.id))})})]})},Hz=()=>{const n=wt(),[t,r]=R.useState(!1);R.useEffect(()=>{r(!0)},[]);const a=()=>{n("/login")},l=[{icon:f.jsx(ti,{size:24}),title:"Discover Spots",description:"Find amazing food spots near you",color:"#ef4444"},{icon:f.jsx(Ru,{size:24}),title:"Share Reviews",description:"Help others with your experiences",color:"#f59e0b"},{icon:f.jsx(hh,{size:24}),title:"Join Community",description:"Connect with food lovers",color:"#10b981"},{icon:f.jsx($5,{size:24}),title:"Track Visits",description:"Keep a record of your food journey",color:"#8b5cf6"}],d=[{number:"500+",label:"Food Spots"},{number:"10K+",label:"Happy Users"},{number:"50K+",label:"Reviews"},{number:"100+",label:"Daily Visits"}];return f.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #fef3c7 0%, #fbbf24 50%, #f59e0b 100%)",position:"relative",overflow:"hidden"},children:[f.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},children:[...Array(6)].map((h,g)=>f.jsx(_e.div,{initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,scale:0},animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight],scale:[0,1,0],rotate:[0,360]},transition:{duration:10+Math.random()*10,repeat:1/0,ease:"linear"},style:{position:"absolute",width:20+Math.random()*30,height:20+Math.random()*30,background:"rgba(255, 255, 255, 0.1)",borderRadius:"50%",border:"2px solid rgba(255, 255, 255, 0.2)"}},g))}),f.jsxs("div",{style:{position:"relative",zIndex:10,maxWidth:"1200px",margin:"0 auto",padding:"40px 20px",display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},children:[f.jsxs(_e.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},style:{textAlign:"center",marginBottom:"60px",marginTop:"60px"},children:[f.jsxs(_e.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:1,ease:"easeOut",delay:.2},style:{width:"120px",height:"120px",background:"white",borderRadius:"30px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 30px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[f.jsx(_e.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:f.jsx(mS,{size:60,color:"#f59e0b",strokeWidth:2.5})}),[...Array(3)].map((h,g)=>f.jsx(_e.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:g*.7,ease:"easeInOut"},style:{position:"absolute",top:20+g*30,right:20+g*10},children:f.jsx(U5,{size:16,color:"#fbbf24"})},g))]}),f.jsx(_e.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},style:{fontSize:"clamp(2.5rem, 8vw, 4.5rem)",fontWeight:"900",margin:"0 0 20px 0",background:"linear-gradient(135deg, #dc2626 0%, #ea580c 50%, #f59e0b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",lineHeight:"1.1"},children:"Chai.in"}),f.jsxs(_e.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},style:{fontSize:"clamp(1.1rem, 3vw, 1.4rem)",fontWeight:"600",color:"#7c2d12",margin:"0 0 20px 0",maxWidth:"600px",lineHeight:"1.4"},children:["Discover the best food spots in Kerala ",f.jsx("br",{}),"Share your experiences with the community"]}),f.jsx(_e.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7},style:{fontSize:"1.1rem",fontWeight:"400",color:"#92400e",margin:"0 0 40px 0",maxWidth:"700px",lineHeight:"1.6",textAlign:"center"},children:`Chai-in is a community-driven food spot discovery platform that helps you find authentic chai kadas, street food vendors, and local eateries across Kerala. Built for food lovers by food lovers, our platform connects you with Kerala's vibrant food culture through real user experiences, not advertisements. Whether you're searching for "chai near me" or exploring food spots in your neighborhood, Chai-in makes it easy to discover and share the best local flavors.`}),f.jsxs(_e.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.8},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:a,style:{background:"linear-gradient(135deg, #dc2626 0%, #ea580c 100%)",color:"white",border:"none",padding:"18px 48px",borderRadius:"50px",fontSize:"1.2rem",fontWeight:"800",cursor:"pointer",boxShadow:"0 10px 30px rgba(220, 38, 38, 0.3)",display:"inline-flex",alignItems:"center",gap:"12px",position:"relative",overflow:"hidden"},children:[f.jsx(_e.span,{animate:{x:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"Discover Now"}),f.jsx(AM,{size:24}),f.jsx(_e.div,{initial:{x:"-100%"},animate:{x:"200%"},transition:{duration:3,repeat:1/0,ease:"linear"},style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",transform:"skewX(-20deg)"}})]})]}),f.jsx(_e.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:1},style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"30px",width:"100%",maxWidth:"800px",marginBottom:"60px"},children:d.map((h,g)=>f.jsxs(_e.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:1.2+g*.1},whileHover:{y:-5,scale:1.05},style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",padding:"30px 20px",borderRadius:"20px",textAlign:"center",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[f.jsx(_e.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.6,delay:1.4+g*.1},style:{fontSize:"2.5rem",fontWeight:"900",color:"#dc2626",marginBottom:"10px"},children:h.number}),f.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#7c2d12"},children:h.label})]},g))}),f.jsxs(_e.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.6},style:{width:"100%",maxWidth:"1000px",marginBottom:"60px"},children:[f.jsx(_e.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.8},style:{fontSize:"2.5rem",fontWeight:"900",textAlign:"center",marginBottom:"50px",color:"#7c2d12"},children:"Why Choose Chai.in?"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"30px"},children:l.map((h,g)=>f.jsxs(_e.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:2+g*.1},whileHover:{y:-10,scale:1.05},style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"30px",borderRadius:"20px",textAlign:"center",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer"},children:[f.jsx(_e.div,{whileHover:{rotate:360},transition:{duration:.6,ease:"easeInOut"},style:{width:"60px",height:"60px",background:h.color,borderRadius:"15px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",color:"white"},children:h.icon}),f.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"800",margin:"0 0 15px 0",color:"#1f2937"},children:h.title}),f.jsx("p",{style:{fontSize:"1rem",fontWeight:"500",color:"#6b7280",margin:0,lineHeight:"1.5"},children:h.description})]},g))})]}),f.jsx(_e.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:2.4},style:{textAlign:"center",marginTop:"40px"},children:f.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,style:{background:"white",color:"#dc2626",border:"2px solid #dc2626",padding:"16px 40px",borderRadius:"50px",fontSize:"1.1rem",fontWeight:"700",cursor:"pointer",boxShadow:"0 5px 20px rgba(220, 38, 38, 0.2)"},children:"Start Your Food Journey "})})]})]})},qz=({lang:n="en"})=>{const t=ri(),r=[{to:"/home",icon:vS,label:"Home"},{to:"/map",icon:ch,label:"Map"},{to:"/community",icon:hh,label:"Club"},{to:"/leaderboard",icon:Pg,label:"Top"}],a=l=>t.pathname.includes(`/${n}${l.to}`)||l.to==="/home"&&(t.pathname===`/${n}`||t.pathname===`/${n}/`);return f.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:70,zIndex:1e3,pointerEvents:"none"},children:[f.jsx("svg",{width:"100%",height:"120",viewBox:"0 0 400 120",preserveAspectRatio:"none",style:{display:"block",pointerEvents:"auto"},children:f.jsx("path",{d:`\r
            M0 40\r
            Q0 0 40 0\r
            H135\r
            C155 0 165 12 172 26\r
            C182 50 218 50 228 26\r
            C235 12 245 0 265 0\r
            H360\r
            Q400 0 400 40\r
            V120\r
            H0\r
            Z\r
          `,fill:"#EF2A39"})}),f.jsx("div",{style:{position:"absolute",top:-40,left:"50%",transform:"translateX(-50%)",pointerEvents:"auto"},children:f.jsx(Zp,{to:`/${n}/add-spot`,children:f.jsx(_e.div,{whileTap:{scale:.9},whileHover:{scale:1.05},style:{width:60,height:60,borderRadius:"50%",background:"#EF2A39",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 16px 32px rgba(239,42,57,0.45), inset 0 2px 6px rgba(255,255,255,0.35)",border:"3px solid rgba(255,255,255,0.4)"},children:f.jsx(Mo,{size:24,color:"#fff",strokeWidth:3})})})}),f.jsx("div",{style:{position:"absolute",bottom:18,left:0,right:0,display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 20px",pointerEvents:"auto"},children:r.map((l,d)=>{const h=a(l),y=d<2?d+1:d+3;return f.jsx("div",{style:{gridColumn:y},children:f.jsxs(Zp,{to:`/${n}${l.to}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,color:"white",textDecoration:"none",opacity:h?1:.7,fontSize:"0.7rem",fontWeight:800,...l.to==="/home"&&{marginLeft:"5px"},...l.to==="/map"&&{marginRight:"25px"},...l.to==="/community"&&{marginLeft:"25px"},...l.to==="/leaderboard"&&{marginRight:"5px"}},children:[f.jsx(l.icon,{size:20,strokeWidth:h?2.6:2,color:"white"}),f.jsx("span",{children:l.label})]})},l.to)})})]})},kS=({isOpen:n,onClose:t,userId:r})=>{const[a,l]=R.useState([]),[d,h]=R.useState(!0);R.useEffect(()=>{n&&r&&(g(),y())},[n,r]);const g=async()=>{h(!0);const{data:_,error:b}=await ae.from("notifications").select("*").or(`user_id.eq.${r},user_id.is.null`).order("created_at",{ascending:!1}).limit(20);b&&console.error("Notif error:",b),_&&l(_),h(!1)},y=async()=>{r&&await ae.from("notifications").update({is_read:!0}).eq("user_id",r).eq("is_read",!1)};return n?f.jsxs("div",{style:{position:"absolute",top:"60px",right:"20px",zIndex:3e3,width:"320px",maxHeight:"400px",background:"white",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid #eee",display:"flex",flexDirection:"column",animation:"fadeInDown 0.2s ease-out"},onClick:_=>_.stopPropagation(),children:[f.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx(Kd,{size:18,fill:"var(--primary)",color:"var(--primary)"}),"Notifications"]}),f.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:f.jsx(_a,{size:16,color:"#999"})})]}),f.jsx("div",{style:{flex:1,overflowY:"auto"},children:d?f.jsx("p",{style:{textAlign:"center",color:"#888"},children:"Loading..."}):a.length===0?f.jsxs("div",{style:{textAlign:"center",paddingTop:"50px",opacity:.5},children:[f.jsx(Kd,{size:48,color:"#ccc",style:{marginBottom:"10px"}}),f.jsx("p",{children:"No notifications yet"})]}):a.map(_=>f.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:_.is_read?"#fff":"#fff5f5",border:"1px solid #f0f0f0",marginBottom:"10px",position:"relative"},children:[f.jsx("h4",{style:{margin:"0 0 6px",fontSize:"1rem",fontWeight:"700",color:_.is_read?"#333":"var(--primary)"},children:_.title}),f.jsx("p",{style:{margin:"0 0 8px",fontSize:"0.9rem",color:"#666",lineHeight:"1.4"},children:_.message}),f.jsx("span",{style:{fontSize:"0.75rem",color:"#999"},children:_.created_at?AS(new Date(_.created_at),{addSuffix:!0}):"just now"})]},_.id))}),f.jsx("style",{children:`
                @keyframes fadeInDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
            `})]}):null},Wz=()=>{const n="desktop-nav-css";if(!document.getElementById(n)){const t=document.createElement("style");t.id=n,t.textContent=`
            @media (min-width: 768px) {
                .desktop-nav {
                    display: block !important;
                }
                .mobile-only {
                    display: none !important;
                }
            }
            @media (max-width: 767px) {
                .desktop-nav {
                    display: none !important;
                }
                .mobile-only {
                    display: block !important;
                }
            }
        `,document.head.appendChild(t)}},Fz=()=>{const{user:n}=Rt(),t=wt(),r=ri(),[a,l]=R.useState(!1),[d,h]=R.useState(0),[g,y]=R.useState(null);r.pathname.includes("/home"),R.useEffect(()=>{if(!n)return;Wz();const b=async()=>{const{count:j}=await ae.from("notifications").select("*",{count:"exact",head:!0}).or(`user_id.eq.${n.id},user_id.is.null`).eq("is_read",!1);h(j||0)},w=async()=>{const{data:j}=await ae.from("user_preferences").select("*").eq("user_id",n.id).maybeSingle();y(j)},S=()=>{w()};return b(),w(),window.addEventListener("userProfileUpdated",S),()=>{window.removeEventListener("userProfileUpdated",S)}},[n]);const _=[{to:"/home",icon:vS},{to:"/map",icon:ch},{to:"/add-spot",icon:Mo},{to:"/community",icon:hh},{to:"/leaderboard",icon:Pg},{to:"/profile",icon:vr}];return f.jsxs(f.Fragment,{children:[f.jsx(kS,{isOpen:a,onClose:()=>{l(!1),h(0)},userId:n?.id}),f.jsx("div",{style:{position:"fixed",top:"50%",right:"20px",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"8px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",zIndex:1e3,display:"none",width:"fit-content"},className:"desktop-nav",children:f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:_.map((b,w)=>{const S=r.pathname.includes(b.to);return f.jsx("button",{onClick:()=>t(`/en${b.to}`),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",borderRadius:"12px",border:"none",background:S?"rgba(239, 42, 57, 0.8)":"transparent",color:S?"white":"#333333",cursor:"pointer",transition:"all 0.2s ease",width:"40px",height:"40px"},onMouseEnter:j=>{S||(j.target.style.background="rgba(255, 255, 255, 0.2)",j.target.style.color="#333333")},onMouseLeave:j=>{S||(j.target.style.background="transparent",j.target.style.color="#333333")},children:f.jsx(b.icon,{size:18})},b.to)})})})]})},$z=()=>{const n=["","","","","","","","","",""];return f.jsx("div",{className:"food-particles",children:n.map((t,r)=>f.jsx("div",{className:"food-particle",children:t},r))})},Zz=()=>{const{user:n}=Rt(),[t,r]=R.useState(!1),[a,l]=R.useState(""),[d,h]=R.useState(!1),[g,y]=R.useState(null),[_,b]=R.useState(null),[w,S]=R.useState(!1),[j,k]=R.useState(null),[C,A]=R.useState(!1),[z,D]=R.useState(!1);R.useEffect(()=>{if(n?.created_at){const K=new Date(n.created_at);(new Date-K)/(1e3*60*60)>1&&S(!0)}P(),n?.user_metadata?.avatar_url&&k(n.user_metadata.avatar_url)},[n]);const P=async()=>{if(!n)return;const{data:K,error:oe}=await ae.from("user_preferences").select("username").eq("user_id",n.id).single();K&&!K.username?r(!0):K||r(!0)},Z=async K=>{if(K.length<3){y(null);return}const{data:oe}=await ae.from("user_preferences").select("user_id").eq("username",K).maybeSingle();y(!oe)},$=async K=>{const oe=K.target.files[0];if(oe){A(!0);try{const ye=`${n.id}-${Date.now()}.${oe.name.split(".").pop()}`;await ae.storage.from("avatars").upload(`avatars/${ye}`,oe);const{data:{publicUrl:fe}}=ae.storage.from("avatars").getPublicUrl(`avatars/${ye}`);k(fe),D(!1),await ae.auth.updateUser({data:{avatar_url:fe}})}catch(ye){console.error("Error uploading avatar:",ye)}finally{A(!1)}}},V=async()=>{if(!(!g||a.length<3)){h(!0),b(null);try{let K=j;z&&n?.user_metadata?.avatar_url?K=n.user_metadata.avatar_url:z&&(K=null);const{error:oe}=await ae.from("user_preferences").upsert({user_id:n.id,username:a,display_name:a,avatar_url:K,notifications_enabled:!0,notify_new_spots:!0,notify_review_replies:!0,notify_weekly_digest:!1,updated_at:new Date},{onConflict:"user_id"});if(oe)throw oe;r(!1),window.location.reload()}catch(K){console.error(K),b("Failed to save profile. Try again.")}finally{h(!1)}}};return t?f.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:f.jsxs("div",{className:"glass-card",style:{width:"100%",maxWidth:"400px",padding:"30px",textAlign:"center",position:"relative"},children:[f.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"800",marginBottom:"10px"},children:w?"Update Required ":"Welcome to Chai-in!"}),f.jsx("p",{style:{color:"#666",marginBottom:"24px"},children:w?"We've introduced usernames! Please choose a unique handle to continue.":"Please choose a unique username to continue."}),f.jsxs("div",{style:{marginBottom:"24px"},children:[f.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"16px"},children:[f.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",border:"3px solid var(--primary)",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--secondary)"},children:j?f.jsx("img",{src:j,style:{width:"100%",height:"100%",objectFit:"cover"}}):f.jsx(vr,{size:40,color:"var(--text-muted)"})}),f.jsx("label",{htmlFor:"avatar-upload",style:{position:"absolute",bottom:"-5px",right:"-5px",background:"var(--primary)",color:"white",padding:"8px",borderRadius:"12px",cursor:"pointer",boxShadow:"var(--shadow-md)"},children:f.jsx(Au,{size:16})}),f.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:$,style:{display:"none"}})]}),f.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center",marginBottom:"16px"},children:[f.jsx("button",{onClick:()=>D(!1),style:{padding:"6px 12px",borderRadius:"8px",border:"1px solid var(--primary)",background:z?"white":"var(--primary)",color:z?"var(--primary)":"white",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Upload Photo"}),f.jsx("button",{onClick:()=>D(!0),style:{padding:"6px 12px",borderRadius:"8px",border:"1px solid var(--secondary)",background:z?"var(--secondary)":"white",color:z?"var(--text-main)":"var(--text-muted)",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Maybe Later"})]}),z&&n?.user_metadata?.avatar_url&&f.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",margin:0},children:"Using your Google profile picture"})]}),f.jsxs("div",{style:{position:"relative",marginBottom:"20px"},children:[f.jsx("span",{style:{position:"absolute",left:"16px",top:"14px",color:"#999",fontWeight:"bold"},children:"@"}),f.jsx("input",{type:"text",value:a,onChange:K=>{const oe=K.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");l(oe),Z(oe)},placeholder:"username",style:{width:"100%",padding:"12px 16px 12px 36px",fontSize:"1.1rem",fontWeight:"bold",borderRadius:"12px",border:"2px solid #eee",outline:"none",background:"#fafafa"}}),f.jsx("div",{style:{position:"absolute",right:"16px",top:"14px"},children:a.length>=3&&(g?f.jsx(Lm,{color:"green",size:20}):f.jsx(_a,{color:"red",size:20}))})]}),_&&f.jsx("p",{style:{color:"red",fontSize:"0.9rem",marginBottom:"10px"},children:_}),f.jsx("button",{onClick:V,disabled:!g||d,style:{width:"100%",padding:"14px",background:"var(--primary)",color:"white",fontWeight:"700",fontSize:"1.1rem",border:"none",borderRadius:"14px",opacity:!g||d?.5:1,cursor:!g||d?"not-allowed":"pointer"},children:d?"Saving...":"Let's Go!"})]})}):null},Gz=()=>{const{user:n}=Rt(),[t,r]=R.useState(!1),[a,l]=R.useState(!1);R.useEffect(()=>{d()},[n]);const d=async()=>{if(!n||localStorage.getItem(`suppress_avatar_${n.id}`))return;const{data:_}=await ae.from("user_preferences").select("avatar_url").eq("user_id",n.id).single();_?.avatar_url||r(!0)},h=async y=>{try{l(!0);const _=y.target.files[0];if(!_)return;if(_.size>10*1024*1024){alert("File too large. Max 10MB"),l(!1);return}const b=_.name.split(".").pop(),S=`${`${n.id}-${Math.random()}.${b}`}`,{error:j}=await ae.storage.from("avatars").upload(S,_);if(j)throw j;const{data:k}=ae.storage.from("avatars").getPublicUrl(S),C=k.publicUrl;await ae.from("user_preferences").upsert({user_id:n.id,avatar_url:C,updated_at:new Date},{onConflict:"user_id"}),r(!1),window.location.reload()}catch(_){console.error(_),alert("Error uploading image")}finally{l(!1)}},g=()=>{r(!1),localStorage.setItem(`suppress_avatar_${n.id}`,"true")};return t?f.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:f.jsxs("div",{className:"glass-card",style:{width:"100%",maxWidth:"350px",padding:"30px",textAlign:"center",position:"relative",background:"white",border:"none"},children:[f.jsx("button",{onClick:g,style:{position:"absolute",right:"15px",top:"15px",background:"none",border:"none",cursor:"pointer"},children:f.jsx(_a,{color:"#999"})}),f.jsxs("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#f0f0f0",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[f.jsx(vr,{size:50,color:"#ccc"}),f.jsx("div",{style:{position:"absolute",bottom:0,right:0,background:"var(--primary)",padding:"6px",borderRadius:"50%",color:"white"},children:f.jsx(Au,{size:16})})]}),f.jsx("h2",{style:{fontSize:"1.4rem",fontWeight:"800",marginBottom:"10px"},children:"Add a Profile Photo "}),f.jsx("p",{style:{color:"#666",marginBottom:"24px",fontSize:"0.95rem"},children:"Stand out in the community! Upload a cool avatar."}),f.jsxs("label",{style:{display:"block",width:"100%",padding:"14px",background:"var(--primary)",color:"white",fontWeight:"700",borderRadius:"14px",cursor:a?"wait":"pointer",marginBottom:"10px"},children:[a?"Uploading...":"Choose Photo",f.jsx("input",{type:"file",accept:"image/*",onChange:h,style:{display:"none"},disabled:a})]}),f.jsx("button",{onClick:g,style:{background:"none",border:"none",color:"#888",fontWeight:"600",fontSize:"0.9rem",padding:"10px"},children:"Maybe Later"})]})}):null},Kz=()=>{const{user:n}=Rt(),t=wt(),r=ri(),[a,l]=R.useState(!1),[d,h]=R.useState(0),[g,y]=R.useState(null);return r.pathname.includes("/home"),R.useEffect(()=>{if(!n)return;const _=async()=>{const{count:S}=await ae.from("notifications").select("*",{count:"exact",head:!0}).or(`user_id.eq.${n.id},user_id.is.null`).eq("is_read",!1);h(S||0)},b=async()=>{const{data:S}=await ae.from("user_preferences").select("*").eq("user_id",n.id).maybeSingle();y(S)},w=()=>{b()};return _(),b(),window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[n]),f.jsxs("div",{style:{position:"sticky",top:0,left:0,right:0,height:"70px",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px",zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.03)"},children:[f.jsx(kS,{isOpen:a,onClose:()=>{l(!1),h(0)},userId:n?.id}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},onClick:()=>t("/en/home"),children:[f.jsx("img",{src:"./chai_icon.png",alt:"Chai-in",style:{height:"40px",width:"40px",objectFit:"contain",borderRadius:"10px"},onError:_=>{_.target.src="https://ui-avatars.com/api/?name=C&background=EF2A39&color=fff&rounded=true&size=40"}}),f.jsx("span",{style:{fontSize:"1.3rem",color:"var(--text-main)",fontWeight:"900",fontFamily:"'Outfit', sans-serif"},children:"Chai.in"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[f.jsxs("button",{onClick:()=>l(!0),style:{position:"relative",background:"white",border:"none",borderRadius:"12px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[f.jsx(Kd,{size:20,color:"#333"}),d>0&&f.jsx("span",{style:{position:"absolute",top:"4px",right:"4px",background:"#EF2A39",color:"white",fontSize:"0.65rem",fontWeight:"900",minWidth:"18px",height:"18px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 4px",border:"2px solid white",boxShadow:"0 2px 4px rgba(239, 42, 57, 0.3)"},children:d>9?"9+":d})]}),f.jsx("div",{onClick:()=>t("/en/profile"),style:{width:"40px",height:"40px",borderRadius:"12px",background:"#eee",overflow:"hidden",border:"2px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:f.jsx("img",{src:g?.avatar_url||n?.user_metadata?.avatar_url||`https://ui-avatars.com/api/?name=${n?.email}`,style:{width:"100%",height:"100%",objectFit:"cover"}})})]})]})},Yz=({lang:n})=>{const t=ri();return R.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t.pathname]),f.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-cream)",position:"relative"},children:[f.jsx("div",{className:"mobile-only",children:f.jsx(Kz,{})}),f.jsx(Fz,{}),f.jsx($z,{}),f.jsx(Zz,{}),f.jsx(Gz,{}),f.jsx(KT,{}),f.jsx("div",{className:"mobile-only",children:f.jsx(qz,{lang:n})})]})},Yx=({children:n})=>{const{user:t,loading:r}=Rt();return r?f.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"white"},children:f.jsx(xa,{message:"Welcome to Chai-in..."})}):t?n:f.jsx(lb,{to:"/login",replace:!0})},Xz=()=>{const{user:n,loading:t}=Rt();return t?f.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"white"},children:f.jsx(xa,{message:"Welcome to Chai-in..."})}):n?f.jsx(lb,{to:"/en/home",replace:!0}):f.jsx(Hz,{})};function Jz(){return f.jsxs(ub,{children:[f.jsx(xt,{path:"/",element:f.jsx(Xz,{})}),f.jsx(xt,{path:"/login",element:f.jsx(xM,{})}),f.jsx(xt,{path:"/en/*",element:f.jsx(Yx,{children:f.jsx(Xx,{lang:"en"})})}),f.jsx(xt,{path:"/ml/*",element:f.jsx(Yx,{children:f.jsx(Xx,{lang:"ml"})})})]})}function Xx({lang:n}){return f.jsx(ub,{children:f.jsxs(xt,{element:f.jsx(Yz,{lang:n}),children:[f.jsx(xt,{path:"home",element:f.jsx(aL,{lang:n})}),f.jsx(xt,{path:"map",element:f.jsx(OL,{lang:n})}),f.jsx(xt,{path:"add-spot",element:f.jsx(uL,{lang:n})}),f.jsx(xt,{path:"community",element:f.jsx(Mz,{lang:n})}),f.jsx(xt,{path:"favorites",element:f.jsx(Pz,{lang:n})}),f.jsx(xt,{path:"leaderboard",element:f.jsx(ML,{lang:n})}),f.jsx(xt,{path:"profile",element:f.jsx(oL,{lang:n})}),f.jsx(xt,{path:"profile/favorites",element:f.jsx(Uz,{lang:n})}),f.jsx(xt,{path:"profile/reviews",element:f.jsx(Iz,{lang:n})}),f.jsx(xt,{path:"profile/added",element:f.jsx(Vz,{lang:n})}),f.jsx(xt,{path:"settings",element:f.jsx(lL,{lang:n})}),f.jsx(xt,{path:"privacy-policy",element:f.jsx(Dz,{lang:n})}),f.jsx(xt,{path:"contact-admin",element:f.jsx(Bz,{lang:n})}),f.jsx(xt,{path:"directions/:id",element:f.jsx(Nz,{lang:n})}),f.jsx(xt,{path:"spot/:id",element:f.jsx(UL,{lang:n})}),f.jsx(xt,{path:"edit-spot/:id",element:f.jsx(zz,{lang:n})}),f.jsx(xt,{path:"admin",element:f.jsx(zL,{})})]})})}console.log("Chai.in v1.0.1 Loaded at "+new Date().toISOString());nT.createRoot(document.getElementById("root")).render(f.jsx(ls.StrictMode,{children:f.jsx(_E,{children:f.jsx(VC,{children:f.jsx(Jz,{})})})}));
