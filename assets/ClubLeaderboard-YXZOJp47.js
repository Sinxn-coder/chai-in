import{j as e,m as u}from"./framer-BMT5hQ7X.js";import{r as p,u as h}from"./router-DOtJe_Np.js";import{s as b}from"./index-BG9lXeyx.js";import y from"./Community-DuVXxMey.js";import{s as j,t as v,u as w,v as k}from"./lucide-BSDTtmIP.js";import"./vendor-b0vXyz-r.js";import"./supabase-CtFrdYha.js";import"./Toast-DsHB9n-F.js";import"./utils-Ctx6mZEP.js";const S=()=>{const[n,s]=p.useState([]),[c,d]=p.useState(!0);return p.useEffect(()=>{(async()=>{d(!0);try{const{data:r}=await b.from("spots").select("created_by"),{data:g}=await b.from("reviews").select("user_id"),a={};r?.forEach(t=>{const i=t.created_by;i&&(a[i]||(a[i]={spots:0,reviews:0,xp:0}),a[i].spots+=1,a[i].xp+=100)}),g?.forEach(t=>{const i=t.user_id;i&&(a[i]||(a[i]={spots:0,reviews:0,xp:0}),a[i].reviews+=1,a[i].xp+=10)});const x=Object.keys(a),{data:f}=await b.from("user_preferences").select("user_id, username, display_name, avatar_url").in("user_id",x),l={};f?.forEach(t=>l[t.user_id]=t);const m=Object.keys(a).map(t=>({id:t,name:l[t]?.display_name||l[t]?.username||"Foodie",avatar:l[t]?.avatar_url,...a[t]})).sort((t,i)=>i.xp-t.xp).slice(0,10);s(m)}catch(r){console.error("Error fetching leaderboard:",r)}finally{d(!1)}})()},[]),e.jsxs("div",{style:{minHeight:"calc(100vh - 60px)",background:"linear-gradient(135deg, #fef3c7 0%, #fbbf24 50%, #f59e0b 100%)",paddingBottom:"80px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px",padding:"20px",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #f59e0b, #d97706)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 4px 20px rgba(245, 158, 11, 0.3)"},children:e.jsx(k,{size:30,color:"white"})}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"800",color:"#1f2937",marginBottom:"8px"},children:"Leaderboard"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"1rem",margin:0},children:"Top contributors in our food community"})]}),e.jsx("div",{style:{padding:"0 20px"},children:c?e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(245, 158, 11, 0.3)",borderTop:"4px solid #f59e0b",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})}):n.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",background:"rgba(255,255,255,0.1)",borderRadius:"16px",backdropFilter:"blur(10px)"},children:e.jsx("p",{style:{color:"#6b7280",fontSize:"1rem"},children:"No contributors yet. Start contributing!"})}):n.map((o,r)=>e.jsx("div",{style:{background:r===0?"linear-gradient(135deg, rgba(254, 243, 199, 0.8), rgba(251, 191, 36, 0.8))":r===1?"linear-gradient(135deg, rgba(229, 231, 235, 0.8), rgba(209, 213, 219, 0.8))":"rgba(255,255,255,0.1)",borderRadius:"16px",padding:"20px",marginBottom:"16px",backdropFilter:"blur(10px)",border:r===0?"2px solid #f59e0b":"1px solid rgba(255,255,255,0.2)",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:r===0?"linear-gradient(135deg, #f59e0b, #d97706)":r===1?"linear-gradient(135deg, #6b7280, #4b5563)":"linear-gradient(135deg, #9ca3af, #6b7280)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1.2rem",marginRight:"16px"},children:r+1}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{fontWeight:"700",color:"#1f2937",marginBottom:"4px"},children:o.name}),e.jsxs("p",{style:{color:"#6b7280",fontSize:"0.9rem",margin:0},children:[o.xp," XP â€¢ ",o.spots," spots â€¢ ",o.reviews," reviews"]})]}),e.jsx("div",{style:{background:r===0?"#f59e0b":r===1?"#6b7280":"#9ca3af",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"600"},children:r===0?"ðŸ† Champion":r===1?"ðŸ¥ˆ Rising Star":r===2?"ðŸ¥‰ Contender":"â­ Contributor"})]})},o.id))}),e.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `})]})},W=({lang:n})=>{const[s,c]=p.useState("club"),d=h(),o=[{id:"club",label:"Club",icon:j},{id:"leaderboard",label:"Leaderboard",icon:v},{id:"home",label:"Home",icon:w}];return e.jsxs("div",{style:{minHeight:"100vh",background:s==="club"?"#f8f9fa":"linear-gradient(135deg, #fef3c7 0%, #fbbf24 50%, #f59e0b 100%)",padding:"20px"},children:[e.jsxs("div",{style:{minHeight:"calc(100vh - 60px)",paddingBottom:"20px",background:"transparent"},children:[s==="club"&&e.jsx(y,{}),s==="leaderboard"&&e.jsx(S,{})]}),e.jsx(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},style:{position:"fixed",bottom:"20px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",height:"60px",width:"90%",maxWidth:"400px",display:"flex",alignItems:"center",justifyContent:"space-around",padding:"0 20px",background:"rgba(239, 68, 68, 0.9)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderRadius:"20px",zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.2)",willChange:"transform",transform:"translateZ(0)"},children:o.map(r=>e.jsx("button",{onClick:()=>{r.id==="home"?d(`/${n}/home`):c(r.id)},style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"8px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",opacity:s===r.id?1:.7},children:e.jsx(r.icon,{size:24})},r.id))})]})};export{W as default};
