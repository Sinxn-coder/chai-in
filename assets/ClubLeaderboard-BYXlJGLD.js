import{j as e}from"./framer-BMT5hQ7X.js";import{r as l,u as h}from"./router-DOtJe_Np.js";import{s as b}from"./index-DkTNsqGA.js";import u from"./Community-B4uByfKB.js";import{s as y}from"./lucide-DBAHIzol.js";import"./vendor-b0vXyz-r.js";import"./supabase-CtFrdYha.js";import"./Toast-CYAYaQvg.js";import"./utils-Ctx6mZEP.js";const v=()=>{const[g,s]=l.useState([]),[p,n]=l.useState(!0);return l.useEffect(()=>{(async()=>{n(!0);try{const{data:r}=await b.from("spots").select("created_by"),{data:c}=await b.from("reviews").select("user_id"),i={};r?.forEach(t=>{const a=t.created_by;a&&(i[a]||(i[a]={spots:0,reviews:0,xp:0}),i[a].spots+=1,i[a].xp+=100)}),c?.forEach(t=>{const a=t.user_id;a&&(i[a]||(i[a]={spots:0,reviews:0,xp:0}),i[a].reviews+=1,i[a].xp+=10)});const x=Object.keys(i),{data:f}=await b.from("user_preferences").select("user_id, username, display_name, avatar_url, role").in("user_id",x),d={};f?.forEach(t=>d[t.user_id]=t);const m=Object.keys(i).map(t=>({id:t,name:d[t]?.display_name||d[t]?.username||"Foodie",avatar:d[t]?.avatar_url,role:d[t]?.role,...i[t]})).filter(t=>t.role!=="admin").sort((t,a)=>a.xp-t.xp).slice(0,10);s(m)}catch(r){console.error("Error fetching leaderboard:",r)}finally{n(!1)}})()},[]),e.jsxs("div",{style:{minHeight:"calc(100vh - 60px)",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",paddingBottom:"80px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px",padding:"30px 20px",background:"rgba(255,255,255,0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",borderRadius:"20px",margin:"20px"},children:[e.jsx("div",{style:{width:"70px",height:"70px",background:"linear-gradient(135deg, #6366f1, #8b5cf6)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",boxShadow:"0 8px 32px rgba(99, 102, 241, 0.4)",border:"2px solid rgba(255,255,255,0.1)"},children:e.jsx(y,{size:35,color:"white"})}),e.jsx("h2",{style:{fontSize:"2rem",fontWeight:"800",color:"#ffffff",marginBottom:"8px",letterSpacing:"-0.02em"},children:"Leaderboard"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"1.1rem",margin:0,fontWeight:"500"},children:"Top contributors in our food community"})]}),e.jsx("div",{style:{padding:"0 20px"},children:p?e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx("div",{style:{width:"50px",height:"50px",border:"4px solid rgba(99, 102, 241, 0.3)",borderTop:"4px solid #6366f1",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})}):g.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",background:"rgba(255,255,255,0.05)",borderRadius:"20px",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx("p",{style:{color:"#94a3b8",fontSize:"1.1rem",fontWeight:"500"},children:"No contributors yet. Start contributing!"})}):g.map((o,r)=>e.jsx("div",{style:{background:r===0?"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))":r===1?"linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.2))":r===2?"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2))":"rgba(255,255,255,0.05)",borderRadius:"20px",padding:"24px",marginBottom:"16px",backdropFilter:"blur(20px)",border:r===0?"2px solid rgba(99, 102, 241, 0.5)":r===1?"2px solid rgba(59, 130, 246, 0.5)":r===2?"2px solid rgba(16, 185, 129, 0.5)":"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:r===0?"linear-gradient(135deg, #6366f1, #8b5cf6)":r===1?"linear-gradient(135deg, #3b82f6, #2563eb)":r===2?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #64748b, #475569)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"800",fontSize:"1.4rem",marginRight:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",border:"2px solid rgba(255,255,255,0.1)"},children:r+1}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{fontWeight:"700",color:"#ffffff",marginBottom:"6px",fontSize:"1.2rem",letterSpacing:"-0.01em"},children:o.name}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"1rem",margin:0,fontWeight:"500"},children:[o.xp," XP â€¢ ",o.spots," spots â€¢ ",o.reviews," reviews"]})]}),e.jsx("div",{style:{background:r===0?"linear-gradient(135deg, #6366f1, #8b5cf6)":r===1?"linear-gradient(135deg, #3b82f6, #2563eb)":r===2?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #64748b, #475569)",color:"white",padding:"8px 16px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"700",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.2)"},children:r===0?"ðŸ† Champion":r===1?"ðŸ¥ˆ Rising Star":r===2?"ðŸ¥‰ Contender":"â­ Contributor"})]})},o.id))}),e.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `})]})},z=({lang:g})=>{const[s,p]=l.useState("club");return h(),l.useEffect(()=>{const n=o=>{p(o.detail.tabId)};return window.addEventListener("clubLeaderboardTabChange",n),()=>{window.removeEventListener("clubLeaderboardTabChange",n)}},[]),e.jsx("div",{style:{minHeight:"100vh",background:s==="club"?"#f8f9fa":"linear-gradient(135deg, #fef3c7 0%, #fbbf24 50%, #f59e0b 100%)",padding:"20px"},children:e.jsxs("div",{style:{minHeight:"calc(100vh - 60px)",paddingBottom:"20px",background:"transparent"},children:[s==="club"&&e.jsx(u,{}),s==="leaderboard"&&e.jsx(v,{})]})})};export{z as default};
