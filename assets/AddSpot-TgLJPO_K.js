import{j as e,m as p,A as M}from"./framer-BMT5hQ7X.js";import{u as L,r as s}from"./router-DOtJe_Np.js";import{B as u}from"./Button-D9rIKUxT.js";import{T as N}from"./Toast-BwML1H3D.js";import{M as $}from"./MapPicker-Cq_RzFKm.js";import{u as G,s as h}from"./index-BOuvq2xu.js";import{l as O,o as H,Y as U,p as Y,q,r as V,m as J}from"./lucide-DqyMvtym.js";import"./vendor-b0vXyz-r.js";import"./supabase-CtFrdYha.js";const ae=({lang:R})=>{const y=L(),{user:f}=G(),b=s.useRef(null),[n,v]=s.useState(1),[j,d]=s.useState(!1),[z,k]=s.useState(!1),[B,c]=s.useState(!1),[W,_]=s.useState([11.2588,75.7804]),[x,C]=s.useState(null),[o,r]=s.useState({name:"",category:"",price:2,location_text:"",latitude:null,longitude:null,description:"",instagram:"",instagram_link:"",whatsapp:"",opening_time:"10:00",closing_time:"22:00",tags:[],images:[]}),T=["Cafe","Restaurant","Street Food","Bakery","Juice Shop","Tea Stall"],A=[{level:1,label:"â‚¹50-150",description:"Budget Friendly"},{level:2,label:"â‚¹150-300",description:"Moderate"},{level:3,label:"â‚¹300-600",description:"Premium"},{level:4,label:"â‚¹600+",description:"Fine Dining"}],a=(t,i="success")=>{C({message:t,type:i})},g=()=>{if(n===1&&!o.name)return a("Please enter a name","error");if(n===1&&!o.category)return a("Please select a category","error");if(n===2&&!o.location_text)return a("Please set a location","error");v(t=>t+1)},m=()=>v(t=>t-1),F=()=>{d(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const i=t.coords.latitude,l=t.coords.longitude;r({...o,latitude:i,longitude:l,location_text:`${i.toFixed(4)}, ${l.toFixed(4)}`}),_([i,l]),d(!1),a("Location updated!")},t=>{a("Could not get location.","error"),d(!1)}):(a("Geolocation not supported","error"),d(!1))},I=(t,i)=>{r({...o,latitude:t,longitude:i,location_text:`${t.toFixed(4)}, ${i.toFixed(4)}`}),c(!1),a("Location selected from map!")},P=async t=>{const i=Array.from(t.target.files);if(i.length!==0){if(o.images.length+i.length>5)return a("Max 5 images allowed","error");k(!0);try{for(const l of i){const S=`${Math.random()}.${l.name.split(".").pop()}`;await h.storage.from("food-images").upload(S,l);const{data:D}=h.storage.from("food-images").getPublicUrl(S);r(w=>({...w,images:[...w.images,D.publicUrl]}))}a(`${i.length} images uploaded!`)}catch{a("Error uploading images.","error")}finally{k(!1)}}},E=async()=>{if(!f)return a("Please login first","error");d(!0);try{const t={name:o.name,category:o.category,price_level:o.price,location_text:o.location_text,latitude:o.latitude,longitude:o.longitude,description:o.description,instagram_handle:o.instagram,whatsapp_number:o.whatsapp,opening_hours:{open:o.opening_time,close:o.closing_time},tags:o.tags,images:o.images,created_by:f.id},{error:i}=await h.from("spots").insert([t]);if(i)throw i;a("Spot shared! Redirecting...","success"),setTimeout(()=>y(`/${R}/home`),2e3)}catch(t){console.error("Error saving spot:",t),a(`Error saving spot: ${t.message}`,"error"),d(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",background:"var(--secondary)",position:"fixed",top:0,left:0,right:0,bottom:0,overflow:"auto",zIndex:1},children:[x&&e.jsx(N,{message:x.message,type:x.type,onClose:()=>C(null)}),e.jsx($,{isOpen:B,onClose:()=>c(!1),onSelectLocation:I,initialCenter:W}),e.jsxs("div",{style:{height:"140px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"20px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:10},children:[e.jsx("button",{onClick:()=>y(-1),style:{position:"absolute",left:"20px",background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white",cursor:"pointer",zIndex:11},children:e.jsx(O,{size:24})}),e.jsx("h1",{style:{color:"white",fontSize:"1.4rem",fontWeight:"900"},children:"Add New Spot"})]}),e.jsxs("div",{style:{marginTop:"-40px",padding:"0 16px",maxWidth:"100%",boxSizing:"border-box",position:"relative",zIndex:5},children:[e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",justifyContent:"center"},children:[1,2,3,4].map(t=>e.jsx("div",{style:{width:t===n?"32px":"10px",height:"10px",borderRadius:"5px",background:t<=n?"var(--primary)":"#ddd",transition:"all 0.3s"}},t))}),e.jsxs(p.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"rgba(239, 42, 57, 0.05)",padding:"16px",borderRadius:"20px",marginBottom:"16px",border:"2px dashed var(--primary)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx(H,{size:20,color:"var(--primary)",style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:"800",color:"var(--primary)",margin:"0 0 4px 0"},children:"âš ï¸ Verification Required"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",margin:0,lineHeight:"1.5"},children:"Your spot will be added to Chai.in only after our admin team verifies it. This helps maintain quality and accuracy!"})]})]}),e.jsxs("a",{href:"https://www.youtube.com/watch?v=PLACEHOLDER_VIDEO_ID",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"8px",background:"#FF0000",color:"white",padding:"10px 16px",borderRadius:"12px",textDecoration:"none",fontWeight:"700",fontSize:"0.85rem",justifyContent:"center"},children:[e.jsx(U,{size:18}),"Watch Tutorial: How to Add a Spot"]})]}),e.jsx(p.div,{layout:!0,style:{background:"white",borderRadius:"32px",padding:"24px",boxShadow:"var(--shadow-md)"},children:e.jsxs(M,{mode:"wait",children:[n===1&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"The Basics ðŸ½ï¸"}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"SPOT NAME"}),e.jsx("input",{type:"text",placeholder:"Enter spot name...",value:o.name,onChange:t=>r({...o,name:t.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px",boxSizing:"border-box"}}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"12px",display:"block"},children:"CATEGORY"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px",marginBottom:"24px"},children:T.map(t=>e.jsx("button",{onClick:()=>r({...o,category:t}),style:{padding:"14px",borderRadius:"18px",border:"none",background:o.category===t?"var(--primary)":"var(--secondary)",color:o.category===t?"white":"var(--text-main)",fontWeight:"800",transition:"all 0.2s",fontSize:"0.9rem"},children:t},t))}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"12px",display:"block"},children:"PRICE RANGE"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px",marginBottom:"24px"},children:A.map(t=>e.jsxs("button",{onClick:()=>r({...o,price:t.level}),style:{padding:"16px 12px",borderRadius:"18px",border:"none",background:o.price===t.level?"var(--primary)":"var(--secondary)",color:o.price===t.level?"white":"var(--text-main)",fontWeight:"800",transition:"all 0.2s",textAlign:"left",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"4px"},children:[e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"900"},children:t.label}),e.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:t.description})]},t.level))}),e.jsx(u,{onClick:g,style:{width:"100%",padding:"18px",borderRadius:"24px",justifyContent:"center"},children:"Continue"})]},"step1"),n===2&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Location ðŸ“"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"16px"},children:[e.jsxs("button",{onClick:F,style:{flex:1,padding:"14px",borderRadius:"18px",border:"none",background:"#ECFDF5",color:"#10B981",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(Y,{size:18})," GPS"]}),e.jsxs("button",{onClick:()=>c(!0),style:{flex:1,padding:"14px",borderRadius:"18px",border:"none",background:"#EFF6FF",color:"#3B82F6",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(q,{size:18})," Map"]})]}),e.jsx("input",{type:"text",placeholder:"Location address...",value:o.location_text,onChange:t=>r({...o,location_text:t.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px"}}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px"},children:[e.jsx("button",{onClick:m,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800"},children:"Back"}),e.jsx(u,{onClick:g,style:{flex:2,padding:"18px",borderRadius:"24px",justifyContent:"center"},children:"Next"})]})]},"step2"),n===3&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Socials & Details ðŸ’¬"}),e.jsx("textarea",{placeholder:"Add a juicy description...",value:o.description,onChange:t=>r({...o,description:t.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"16px",minHeight:"100px"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"16px"},children:[e.jsx("input",{placeholder:"WhatsApp Number",value:o.whatsapp,onChange:t=>r({...o,whatsapp:t.target.value}),style:{padding:"14px",borderRadius:"16px",background:"var(--secondary)",border:"none",fontWeight:"700"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:"800",color:"var(--text-muted)"},children:"Opening"}),e.jsx("input",{type:"time",value:o.opening_time,onChange:t=>r({...o,opening_time:t.target.value}),style:{padding:"12px",borderRadius:"14px",background:"var(--secondary)",border:"none",fontWeight:"700"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:"800",color:"var(--text-muted)"},children:"Closing"}),e.jsx("input",{type:"time",value:o.closing_time,onChange:t=>r({...o,closing_time:t.target.value}),style:{padding:"12px",borderRadius:"14px",background:"var(--secondary)",border:"none",fontWeight:"700"}})]})]})]}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"INSTAGRAM"}),e.jsx("input",{placeholder:"Insta @user or instagram.com/user",value:o.instagram,onChange:t=>r({...o,instagram:t.target.value}),style:{width:"100%",padding:"14px",borderRadius:"16px",background:"var(--secondary)",border:"none",fontWeight:"700",marginBottom:"16px"}}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"TAGS"}),e.jsx("input",{type:"text",placeholder:"e.g. burger, spicy, budget-friendly",onChange:t=>r({...o,tags:t.target.value.split(",").map(i=>i.trim())}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px"}}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:m,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800"},children:"Back"}),e.jsx(u,{onClick:g,style:{flex:2,padding:"18px",borderRadius:"24px",justifyContent:"center"},children:"Next"})]})]},"step3"),n===4&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Photos ðŸ“¸"}),e.jsxs("div",{onClick:()=>b.current.click(),style:{border:"2px dashed #ddd",borderRadius:"24px",padding:"30px",textAlign:"center",background:"var(--secondary)",cursor:"pointer",marginBottom:"20px"},children:[e.jsx("input",{type:"file",multiple:!0,ref:b,onChange:P,style:{display:"none"}}),z?e.jsx(V,{className:"animate-spin",size:30,color:"var(--primary)"}):e.jsx(J,{size:40,color:"var(--primary)"}),e.jsx("p",{style:{fontWeight:"800",marginTop:"10px",fontSize:"0.9rem"},children:"Upload up to 5 photos"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginBottom:"20px"},children:o.images.map((t,i)=>e.jsx("div",{style:{width:"100%",paddingTop:"100%",position:"relative",borderRadius:"14px",overflow:"hidden"},children:e.jsx("img",{src:t,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},i))}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:m,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800"},children:"Back"}),e.jsx("button",{onClick:E,disabled:j,style:{flex:2,padding:"18px",borderRadius:"24px",background:"var(--primary)",color:"white",border:"none",fontWeight:"900",fontSize:"1.1rem",boxShadow:"var(--shadow-md)"},children:j?"Submitting...":"Post Spot âœ¨"})]})]},"step4")]})})]})]})};export{ae as default};
