import{j as e,m as p,A as N}from"./framer-BMT5hQ7X.js";import{u as $,r as s}from"./router-DOtJe_Np.js";import{B as f}from"./Button-D9rIKUxT.js";import{T as G}from"./Toast-CRRVru1K.js";import{M as H}from"./MapPicker-CUM2OG38.js";import{u as O,s as b}from"./index-CiL7iNC3.js";import{o as R,l as U,p as Y,Y as q,q as V,r as J,m as K}from"./lucide-DqGvG8gi.js";import"./vendor-b0vXyz-r.js";import"./supabase-CtFrdYha.js";const ae=({lang:c})=>{const x=$(),{user:g,loading:W}=O(),v=s.useRef(null);if(W)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--secondary)",color:"var(--text-main)",fontSize:"1.2rem",fontWeight:"800"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(R,{size:40,color:"var(--primary)"}),e.jsx("p",{style:{marginTop:"20px"},children:"Loading..."})]})});if(!g)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--secondary)",color:"var(--text-main)",fontSize:"1.2rem",fontWeight:"800"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h2",{children:"Please Login to Add Spots"}),e.jsx("button",{onClick:()=>x(`/${c}/login`),style:{marginTop:"20px",padding:"15px 30px",background:"var(--primary)",color:"white",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"800",cursor:"pointer"},children:"Go to Login"})]})});const[a,j]=s.useState(1),[S,d]=s.useState(!1),[B,k]=s.useState(!1),[_,m]=s.useState(!1),[T,A]=s.useState([11.2588,75.7804]),[u,C]=s.useState(null),[o,r]=s.useState({name:"",category:"",price:2,location_text:"",latitude:null,longitude:null,description:"",instagram:"",instagram_link:"",whatsapp:"",opening_time:"10:00",closing_time:"22:00",tags:[],images:[]}),I=["Cafe","Restaurant","Street Food","Bakery","Juice Shop","Tea Stall"],F=[{level:1,label:"â‚¹50-150",description:"Budget Friendly"},{level:2,label:"â‚¹150-300",description:"Moderate"},{level:3,label:"â‚¹300-600",description:"Premium"},{level:4,label:"â‚¹600+",description:"Fine Dining"}],n=(t,i="success")=>{C({message:t,type:i})},h=()=>{if(a===1&&!o.name)return n("Please enter a name","error");if(a===1&&!o.category)return n("Please select a category","error");if(a===2&&!o.location_text)return n("Please set a location","error");j(t=>t+1)},y=()=>j(t=>t-1),P=()=>{d(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const i=t.coords.latitude,l=t.coords.longitude;r({...o,latitude:i,longitude:l,location_text:`${i.toFixed(4)}, ${l.toFixed(4)}`}),A([i,l]),d(!1),n("Location updated!")},t=>{n("Could not get location.","error"),d(!1)}):(n("Geolocation not supported","error"),d(!1))},L=(t,i)=>{r({...o,latitude:t,longitude:i,location_text:`${t.toFixed(4)}, ${i.toFixed(4)}`}),m(!1),n("Location selected from map!")},E=async t=>{const i=Array.from(t.target.files);if(i.length!==0){if(o.images.length+i.length>5)return n("Max 5 images allowed","error");k(!0);try{for(const l of i){const z=`${Math.random()}.${l.name.split(".").pop()}`;await b.storage.from("food-images").upload(z,l);const{data:M}=b.storage.from("food-images").getPublicUrl(z);r(w=>({...w,images:[...w.images,M.publicUrl]}))}n(`${i.length} images uploaded!`)}catch{n("Error uploading images.","error")}finally{k(!1)}}},D=async()=>{if(!g){n("Please login first","error");return}d(!0);try{const t={name:o.name,category:o.category,price_level:o.price,location_text:o.location_text,latitude:o.latitude,longitude:o.longitude,description:o.description,instagram_handle:o.instagram,whatsapp_number:o.whatsapp,opening_hours:{open:o.opening_time,close:o.closing_time},tags:o.tags,images:o.images,created_by:g.id},{error:i}=await b.from("spots").insert([t]);if(i)throw i;n("Spot shared! Redirecting...","success"),setTimeout(()=>x(`/${c}/home`),2e3)}catch(t){console.error("Error saving spot:",t),n(`Error saving spot: ${t.message}`,"error"),d(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",background:"var(--secondary)",position:"relative",top:0,left:0,right:0,bottom:0,overflow:"auto",zIndex:1},children:[u&&e.jsx(G,{message:u.message,type:u.type,onClose:()=>C(null)}),e.jsx(H,{isOpen:_,onClose:()=>m(!1),onSelectLocation:L,initialCenter:T}),e.jsxs("div",{style:{height:"140px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"20px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:10},children:[e.jsx("button",{onClick:()=>x(`/${c}/home`),style:{position:"absolute",left:"20px",background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white",cursor:"pointer",zIndex:11},children:e.jsx(U,{size:24})}),e.jsx("h1",{style:{color:"white",fontSize:"1.4rem",fontWeight:"900"},children:"Add New Spot"})]}),e.jsxs("div",{style:{marginTop:"-40px",padding:"0 16px",maxWidth:"100%",boxSizing:"border-box",position:"relative",zIndex:5},children:[e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",justifyContent:"center"},children:[1,2,3,4].map(t=>e.jsx("div",{style:{width:t===a?"32px":"10px",height:"10px",borderRadius:"5px",background:t<=a?"var(--primary)":"#ddd",transition:"all 0.3s"}},t))}),e.jsxs(p.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"rgba(239, 42, 57, 0.05)",padding:"16px",borderRadius:"20px",marginBottom:"16px",border:"2px dashed var(--primary)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx(Y,{size:20,color:"var(--primary)",style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:"800",color:"var(--primary)",margin:"0 0 4px 0"},children:"âš ï¸ Verification Required"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",margin:0,lineHeight:"1.5"},children:"Your spot will be added to Chai.in only after our admin team verifies it. This helps maintain quality and accuracy!"})]})]}),e.jsxs("a",{href:"https://www.youtube.com/watch?v=PLACEHOLDER_VIDEO_ID",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"8px",background:"#FF0000",color:"white",padding:"10px 16px",borderRadius:"12px",textDecoration:"none",fontWeight:"700",fontSize:"0.85rem",justifyContent:"center"},children:[e.jsx(q,{size:18}),"Watch Tutorial: How to Add a Spot"]})]}),e.jsx(p.div,{layout:!0,style:{background:"white",borderRadius:"32px",padding:"24px",boxShadow:"var(--shadow-md)"},children:e.jsxs(N,{mode:"wait",children:[a===1&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"The Basics ðŸ½ï¸"}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"SPOT NAME"}),e.jsx("input",{type:"text",placeholder:"Enter spot name...",value:o.name,onChange:t=>r({...o,name:t.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px",boxSizing:"border-box"}}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"12px",display:"block"},children:"CATEGORY"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px",marginBottom:"24px"},children:I.map(t=>e.jsx("button",{onClick:()=>r({...o,category:t}),style:{padding:"14px",borderRadius:"18px",border:"none",background:o.category===t?"var(--primary)":"var(--secondary)",color:o.category===t?"white":"var(--text-main)",fontWeight:"800",transition:"all 0.2s",fontSize:"0.9rem"},children:t},t))}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"12px",display:"block"},children:"PRICE RANGE"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px",marginBottom:"24px"},children:F.map(t=>e.jsxs("button",{onClick:()=>r({...o,price:t.level}),style:{padding:"16px 12px",borderRadius:"18px",border:"none",background:o.price===t.level?"var(--primary)":"var(--secondary)",color:o.price===t.level?"white":"var(--text-main)",fontWeight:"800",transition:"all 0.2s",textAlign:"left",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"4px"},children:[e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"900"},children:t.label}),e.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:t.description})]},t.level))}),e.jsx(f,{onClick:h,style:{width:"100%",padding:"18px",borderRadius:"24px",justifyContent:"center",fontSize:"1.1rem",fontWeight:"800"},children:"Continue"})]},"step1"),a===2&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Location ðŸ“"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"16px"},children:[e.jsxs("button",{onClick:P,style:{flex:1,padding:"14px",borderRadius:"18px",border:"none",background:"#ECFDF5",color:"#10B981",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(V,{size:18})," GPS"]}),e.jsxs("button",{onClick:()=>m(!0),style:{flex:1,padding:"14px",borderRadius:"18px",border:"none",background:"#EFF6FF",color:"#3B82F6",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(J,{size:18})," Map"]})]}),e.jsx("input",{type:"text",placeholder:"Location address...",value:o.location_text,onChange:t=>r({...o,location_text:t.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px"}}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px"},children:[e.jsx("button",{onClick:y,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800",fontSize:"1.1rem"},children:"Back"}),e.jsx(f,{onClick:h,style:{flex:2,padding:"18px",borderRadius:"24px",justifyContent:"center",fontSize:"1.1rem",fontWeight:"800"},children:"Next"})]})]},"step2"),a===3&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Socials & Details ðŸ’¬"}),e.jsx("textarea",{placeholder:"Add a juicy description...",value:o.description,onChange:t=>r({...o,description:t.target.value}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"16px",minHeight:"100px"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"16px"},children:[e.jsx("input",{placeholder:"WhatsApp Number",value:o.whatsapp,onChange:t=>r({...o,whatsapp:t.target.value}),style:{padding:"14px",borderRadius:"16px",background:"var(--secondary)",border:"none",fontWeight:"700"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:"800",color:"var(--text-muted)"},children:"Opening"}),e.jsx("input",{type:"time",value:o.opening_time,onChange:t=>r({...o,opening_time:t.target.value}),style:{padding:"12px",borderRadius:"14px",background:"var(--secondary)",border:"none",fontWeight:"700"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:"800",color:"var(--text-muted)"},children:"Closing"}),e.jsx("input",{type:"time",value:o.closing_time,onChange:t=>r({...o,closing_time:t.target.value}),style:{padding:"12px",borderRadius:"14px",background:"var(--secondary)",border:"none",fontWeight:"700"}})]})]})]}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"INSTAGRAM"}),e.jsx("input",{placeholder:"Insta @user or instagram.com/user",value:o.instagram,onChange:t=>r({...o,instagram:t.target.value}),style:{width:"100%",padding:"14px",borderRadius:"16px",background:"var(--secondary)",border:"none",fontWeight:"700",marginBottom:"16px"}}),e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"800",color:"var(--text-muted)",marginBottom:"8px",display:"block"},children:"TAGS"}),e.jsx("input",{type:"text",placeholder:"e.g. burger, spicy, budget-friendly",onChange:t=>r({...o,tags:t.target.value.split(",").map(i=>i.trim())}),style:{width:"100%",padding:"16px",borderRadius:"18px",border:"2px solid var(--secondary)",background:"var(--secondary)",fontSize:"1rem",fontWeight:"700",outline:"none",marginBottom:"20px"}}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:y,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800",fontSize:"1.1rem"},children:"Back"}),e.jsx(f,{onClick:h,style:{flex:2,padding:"18px",borderRadius:"24px",justifyContent:"center",fontSize:"1.1rem",fontWeight:"800"},children:"Next"})]})]},"step3"),a===4&&e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"900",marginBottom:"16px",color:"var(--text-main)"},children:"Photos ðŸ“¸"}),e.jsxs("div",{onClick:()=>v.current.click(),style:{border:"2px dashed #ddd",borderRadius:"24px",padding:"30px",textAlign:"center",background:"var(--secondary)",cursor:"pointer",marginBottom:"20px"},children:[e.jsx("input",{type:"file",multiple:!0,ref:v,onChange:E,style:{display:"none"}}),B?e.jsx(R,{className:"animate-spin",size:30,color:"var(--primary)"}):e.jsx(K,{size:40,color:"var(--primary)"}),e.jsx("p",{style:{fontWeight:"800",marginTop:"10px",fontSize:"0.9rem"},children:"Upload up to 5 photos"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginBottom:"20px"},children:o.images.map((t,i)=>e.jsx("div",{style:{width:"100%",paddingTop:"100%",position:"relative",borderRadius:"14px",overflow:"hidden"},children:e.jsx("img",{src:t,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},i))}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:y,style:{flex:1,padding:"18px",borderRadius:"24px",background:"var(--secondary)",border:"none",fontWeight:"800",fontSize:"1.1rem"},children:"Back"}),e.jsx("button",{onClick:D,disabled:S,style:{flex:2,padding:"18px",borderRadius:"24px",background:"var(--primary)",color:"white",border:"none",fontWeight:"900",fontSize:"1.1rem",boxShadow:"var(--shadow-md)"},children:S?"Submitting...":"Post Spot âœ¨"})]})]},"step4")]})})]})]})};export{ae as default};
