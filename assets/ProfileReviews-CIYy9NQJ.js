import{j as e}from"./framer-BMT5hQ7X.js";import{u as h,r as a}from"./router-DOtJe_Np.js";import{u as y,s as c,F as f}from"./index-0cjaDKRs.js";import{Q as v,c as j,S as w}from"./lucide-DqyMvtym.js";import"./vendor-b0vXyz-r.js";import"./supabase-CtFrdYha.js";const A=({lang:x})=>{const{user:i}=y(),m=h(),[g,o]=a.useState(!0),[n,d]=a.useState([]);a.useEffect(()=>{i&&u()},[i]);const u=async()=>{o(!0);try{const{data:s}=await c.from("reviews").select("*, spots(name)").eq("user_id",i.id).order("created_at",{ascending:!1});if(s){const l=[...new Set(s.map(t=>t.user_id))],{data:r}=await c.from("user_preferences").select("user_id, display_name, avatar_url").in("user_id",l),p={};r?.forEach(t=>p[t.user_id]=t),d(s.map(t=>({...t,user:p[t.user_id]||{display_name:"User"}})))}else d([])}catch(s){console.error("Error fetching reviews:",s)}finally{o(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-white)",paddingBottom:"120px"},children:[e.jsxs("div",{style:{height:"140px",background:"var(--primary)",borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative"},children:[e.jsx("button",{onClick:()=>m(`/${x}/profile`),style:{background:"rgba(255,255,255,0.2)",border:"none",padding:"10px",borderRadius:"15px",color:"white"},children:e.jsx(v,{size:24})}),e.jsx("h1",{style:{color:"white",fontWeight:"900",fontSize:"1.4rem",margin:0},children:"My Reviews"}),e.jsx("div",{style:{width:"44px"}})]}),e.jsx("div",{className:"container",style:{padding:"0 20px",marginTop:"-40px"},children:g?e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx(f,{message:"Loading reviews..."})}):n.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-muted)"},children:[e.jsx(j,{size:48,style:{marginBottom:"12px",opacity:.3}}),e.jsx("p",{children:"No reviews yet"}),e.jsx("p",{style:{fontSize:"0.9rem",marginTop:"8px"},children:"Start reviewing spots to share your thoughts!"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n.map(s=>e.jsxs("div",{style:{background:"white",padding:"16px",borderRadius:"20px",boxShadow:"var(--shadow-sm)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e.jsx("img",{src:s.user?.avatar_url||"https://i.pravatar.cc/40",style:{width:"40px",height:"40px",borderRadius:"50%"}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:"800",margin:0},children:s.user?.display_name||"Anonymous"}),e.jsxs("p",{style:{margin:"4px 0 0 0",color:"var(--text-muted)",fontSize:"0.85rem"},children:["at ",s.spots?.name]})]})]}),e.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"8px"},children:[...Array(5)].map((l,r)=>e.jsx(w,{size:14,fill:r<s.rating?"#FFB800":"none",color:r<s.rating?"#FFB800":"#ddd"},r))}),e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-main)",marginBottom:"8px"},children:s.comment})]},s.id))})})]})};export{A as default};
